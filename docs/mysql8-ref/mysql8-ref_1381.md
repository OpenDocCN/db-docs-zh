# 19.2.2 复制通道

> 原文：[`dev.mysql.com/doc/refman/8.0/en/replication-channels.html`](https://dev.mysql.com/doc/refman/8.0/en/replication-channels.html)

19.2.2.1 单个通道操作命令

19.2.2.2 与先前复制语句的兼容性

19.2.2.3 启动选项和复制通道

19.2.2.4 复制通道命名约定

在 MySQL 多源复制中，副本会打开多个复制通道，每个通道对应一个源服务器。复制通道代表从源到副本流动的事务路径。每个复制通道都有自己的接收器（I/O）线程、一个或多个应用程序（SQL）线程和中继日志。当来自源的事务被通道的接收器线程接收时，它们被添加到通道的中继日志文件中，并传递给通道的应用程序线程。这使得每个通道可以独立运作。

本节描述了通道在复制拓扑中的使用方式，以及它们对单源复制的影响。有关配置多源复制的源和副本、启动、停止和重置多源副本以及监视多源复制的说明，请参见第 19.1.5 节，“MySQL 多源复制”。

在多源复制拓扑中，一个副本服务器上可以创建的通道的最大数量为 256。每个复制通道必须具有唯一（非空）的名称，如第 19.2.2.4 节，“复制通道命名约定”中所解释的。启用多源复制时发出的错误代码和消息指定生成错误的通道。

注意

多源副本上的每个通道必须从不同的源复制。您不能从单个副本设置多个复制通道到单个源。这是因为副本的服务器 ID 在复制拓扑中必须是唯一的。源仅通过副本的服务器 ID 来区分副本，而不是通过复制通道的名称，因此它无法识别来自同一副本的不同复制通道。

多源复制副本还可以设置为多线程副本，方法是将系统变量`replica_parallel_workers`（从 MySQL 8.0.26 开始）或`slave_parallel_workers`（在 MySQL 8.0.26 之前）设置为大于 0 的值。当在多源复制副本上执行此操作时，副本上的每个通道都具有指定数量的应用程序线程，以及一个协调器线程来管理它们。无法为各个通道配置应用程序线程的数量。

从 MySQL 8.0 开始，可以在特定复制通道上配置多源复制副本的复制过滤器。当相同数据库或表存在于多个源上时，可以使用特定通道的复制过滤器，只需将副本从一个源复制即可。对于基于 GTID 的复制，如果同一事务可能来自多个源（例如在钻石拓扑中），必须确保所有通道上的过滤设置相同。有关更多信息，请参见 Section 19.2.5.4，“基于复制通道的过滤器”。

为了与旧版本兼容，MySQL 服务器在启动时自动创建一个名为空字符串（`""`）的默认通道。该通道始终存在；用户无法创建或销毁它。如果没有创建其他通道（具有非空名称），则复制语句仅在默认通道上执行，以便所有来自旧副本的复制语句都能正常运行（参见 Section 19.2.2.2，“与先前复制语句的兼容性”）。本节描述的应用于复制通道的语句仅在至少有一个命名通道时才能使用。
