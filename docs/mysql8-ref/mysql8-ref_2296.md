# B.3.1 如何确定问题的原因

> 译文：[`dev.mysql.com/doc/refman/8.0/en/what-is-crashing.html`](https://dev.mysql.com/doc/refman/8.0/en/what-is-crashing.html)

遇到问题时，您应该首先找出是哪个程序或设备导致了问题：

+   如果出现以下症状之一，则可能是硬件问题（如内存、主板、CPU 或硬盘）或内核问题：

    +   键盘不起作用。通常可以通过按下大写锁定键来检查。如果大写锁定灯不亮，您需要更换键盘。（在执行此操作之前，您应该尝试重新启动计算机并检查键盘的所有电缆。）

    +   鼠标指针不动。

    +   机器不响应远程机器的 ping。

    +   与 MySQL 无关的其他程序表现不正常。

    +   您的系统意外重启。（有问题的用户级程序不应该能够导致系统崩溃。）

    在这种情况下，您应该首先检查所有电缆并运行一些诊断工具来检查您的硬件！您还应该检查是否有任何补丁、更新或服务包可用于您的操作系统，这可能会解决您的问题。还要检查所有库（如 `glibc`）是否是最新的。

    使用具有 ECC 内存的机器始终是一个好方法，可以早期发现内存问题。

+   如果键盘被锁定，您可以尝试从另一台机器登录并执行 `kbd_mode -a` 来恢复。

+   请检查您的系统日志文件（`/var/log/messages` 或类似文件）以查找问题的原因。如果您认为问题出在 MySQL 中，您还应该检查 MySQL 的日志文件。请参阅 Section 7.4, “MySQL Server Logs”。

+   如果您认为没有硬件问题，您应该尝试找出是哪个程序导致了问题。尝试使用 **top**、**ps**、任务管理器或类似程序来查看哪个程序占用了所有 CPU 或锁定了机器。

+   使用 **top**、**df** 或类似程序来检查您是否内存不足、磁盘空间不足、文件描述符不足或其他关键资源不足。

+   如果问题是某个失控的进程，您可以尝试终止它。如果它不想终止，那么操作系统可能存在 bug。

如果您已经检查了所有其他可能性，并得出结论认为 MySQL 服务器或 MySQL 客户端导致了问题，那么现在是时候创建一个错误报告了，请参阅第 1.5 节“如何报告错误或问题”。在错误报告中，尽量完整地描述系统的行为以及您认为发生了什么。还要说明为什么您认为 MySQL 导致了问题。考虑本章中描述的所有情况。在检查系统时，准确描述任何问题的出现方式。对于程序和日志文件中的任何输出和错误消息，请使用“复制粘贴”方法。

请详细描述哪个程序出现问题以及您看到的所有症状。我们过去收到过许多只声明“系统不工作”的错误报告。这并没有提供任何关于可能出现的问题的信息。

如果一个程序失败，了解以下信息总是有用的：

+   程序是否出现分段错误（是否转储了核心）？

+   程序是否占用了所有可用的 CPU 时间？使用**top**进行检查。让程序运行一段时间，它可能只是在进行计算密集型的评估。

+   如果**mysqld**服务器出现问题，您是否可以通过**mysqladmin -u root ping**或**mysqladmin -u root processlist**得到任何响应？

+   当您尝试连接到 MySQL 服务器时，客户端程序会有什么提示？（例如尝试使用**mysql**）客户端是否卡住？程序是否有任何输出？

发送错误报告时，应按照第 1.5 节“如何报告错误或问题”中描述的大纲进行操作。
