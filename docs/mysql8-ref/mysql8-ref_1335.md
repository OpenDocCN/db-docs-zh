> 原文：[`dev.mysql.com/doc/refman/8.0/en/replication-howto-masterbaseconfig.html`](https://dev.mysql.com/doc/refman/8.0/en/replication-howto-masterbaseconfig.html)

#### 19.1.2.1 设置复制源配置

要配置源端使用基于二进制日志文件位置的复制，您必须确保启用了二进制日志记录，并建立一个唯一的服务器 ID。

在复制拓扑结构中，每个服务器都必须配置一个唯一的服务器 ID，您可以使用`server_id`系统变量来指定。该服务器 ID 用于标识复制拓扑结构中的各个服务器，必须是介于 1 和(2³²)−1 之间的正整数。从 MySQL 8.0 开始，默认的`server_id`值为 1。您可以通过发出类似以下语句来动态更改`server_id`的值：

```sql
SET GLOBAL server_id = 2;
```

您可以自行组织和选择服务器 ID，只要每个服务器 ID 与复制拓扑结构中任何其他服务器正在使用的每个其他服务器 ID 不同即可。请注意，如果以前为服务器 ID 设置了值 0（这是早期版本的默认值），则必须重新启动服务器以使用新的非零服务器 ID 初始化源端。否则，当您更改服务器 ID 时，���非进行其他需要重新启动的配置更改，否则不需要重新启动服务器。

源端需要启用二进制日志记录，因为二进制日志是从源端到其副本进行更改复制的基础。二进制日志记录默认启用（`log_bin`系统变量设置为 ON）。`--log-bin`选项告诉服务器要使用的二进制日志文件的基本名称。建议您指定此选项，以便为二进制日志文件指定非默认基本名称，这样如果主机名更改，您可以轻松地继续使用相同的二进制日志文件名（参见 Section B.3.7, “Known Issues in MySQL”）。如果之前在源端使用`--skip-log-bin`选项禁用了二进制日志记录，则必须在不带此选项的情况下重新启动服务器以启用它。

注意

以下选项也会影响源端：

+   在使用带有事务的`InnoDB`的复制设置中，为了获得最大的耐久性和一致性，您应该在源端的`my.cnf`文件中使用`innodb_flush_log_at_trx_commit=1`和`sync_binlog=1`。

+   确保源端未启用`skip_networking`系统变量。如果网络已禁用，则副本无法与源端通信，复制将失败。
