# 7.4 MySQL 服务器日志

> 原文：[`dev.mysql.com/doc/refman/8.0/en/server-logs.html`](https://dev.mysql.com/doc/refman/8.0/en/server-logs.html)

7.4.1 选择通用查询日志和慢查询日志输出目的地

7.4.2 错误日志

7.4.3 通用查询日志

7.4.4 二进制日志

7.4.5 慢查询日志

7.4.6 服务器日志维护

MySQL 服务器有几个日志可以帮助您查找正在发生的活动。

| 日志类型 | 写入日志的信息 |
| --- | --- |
| 错误日志 | 启动、运行或停止时遇到的问题**mysqld** |
| 通用查询日志 | 来自客户端的已建立的客户端连接和语句 |
| 二进制日志 | 更改数据的语句（也用于复制） |
| 中继日志 | 来自复制源服务器的数据更改 |
| 慢查询日志 | 执行时间超过`long_query_time`秒的查询 |
| DDL 日志（元数据日志） | 由 DDL 语句执行的元数据操作 |

默认情况下，除了 Windows 上的错误日志之外，没有启用任何日志。（DDL 日志在需要时始终创建，并且没有用户可配置的选项；请参阅 DDL 日志。）以下特定于日志的部分提供有关启用日志记录的服务器选项的信息。

默认情况下，服务器在数据目录中为所有启用的日志编写文件。您可以通过刷新日志来强制服务器关闭并重新打开日志文件（或在某些情况下切换到新的日志文件）。当您发出`FLUSH LOGS`语句时，日志刷新会发生；使用`flush-logs`或`refresh`参数执行**mysqladmin**；或使用`--flush-logs`或`--master-data`选项执行**mysqldump**。请参阅 Section 15.7.8.3, “FLUSH Statement”，Section 6.5.2, “mysqladmin — A MySQL Server Administration Program”和 Section 6.5.4, “mysqldump — A Database Backup Program”。此外，当二进制日志的大小达到`max_binlog_size`系统变量的值时，二进制日志会被刷新。

您可以在运行时控制一般查询和慢查询日志。您可以启用或禁用日志记录，或更改日志文件名。您可以告诉服务器将一般查询和慢查询条目写入日志表、日志文件或两者。有关详细信息，请参阅第 7.4.1 节，“选择一般查询日志和慢查询日志输出目的地”，第 7.4.3 节，“一般查询日志”和第 7.4.5 节，“慢查询日志”。

中继日志仅在副本上使用，用于保存来自复制源服务器的数据更改，这些更改也必须在副本上进行。有关中继日志内容和配置的讨论，请参阅第 19.2.4.1 节，“中继日志”。

有关日志维护操作（如旧日志文件的过期）的信息，请参阅第 7.4.6 节，“服务器日志维护”。

关于保护日志安全的信息，请参阅第 8.1.2.3 节，“密码和日志记录”。
