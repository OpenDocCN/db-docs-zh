# 8.2 访问控制和账户管理

> 原文：[`dev.mysql.com/doc/refman/8.0/en/access-control.html`](https://dev.mysql.com/doc/refman/8.0/en/access-control.html)

8.2.1 账户用户名和密码

8.2.2 MySQL 提供的权限

8.2.3 授权表

8.2.4 指定账户名称

8.2.5 指定角色名称

8.2.6 访问控制，第一阶段：连接验证

8.2.7 访问控制，第二阶段：请求验证

8.2.8 添加账户、分配权限和删除账户

8.2.9 保留账户

8.2.10 使用角色

8.2.11 账户类别

8.2.12 使用部分撤销限制权限

8.2.13 权限更改何时生效

8.2.14 分配账户密码

8.2.15 密码管理

8.2.16 服务器处理过期密码

8.2.17 可插拔认证

8.2.18 多因素认证

8.2.19 代理用户

8.2.20 账户锁定

8.2.21 设置账户资源限制

8.2.22 解决连接到 MySQL 的问题

8.2.23 基于 SQL 的账户活动审计

MySQL 允许创建账户，允许客户端用户连接到服务器并访问服务器管理的数据。 MySQL 权限系统的主要功能是对来自特定主机连接的用户进行身份验证，并将该用户与数据库上的权限（如`SELECT`、`INSERT`、`UPDATE`和`DELETE`）关联起来。其他功能包括授予管理操作的权限。

为了控制哪些用户可以连接，每个账户可以分配身份验证凭据，如密码。 MySQL 账户的用户界面包括 SQL 语句，如`CREATE USER`、`GRANT`和`REVOKE`。参见第 15.7.1 节，“账户管理语句”。

MySQL 权限系统确保所有用户只能执行其被允许的操作。作为用户，当你连接到 MySQL 服务器时，你的身份由*你连接的主机*和*你指定的用户名*确定。连接后发出请求时，系统根据你的身份和*你想要做的事情*授予权限。

MySQL 在识别你时考虑你的主机名和用户名，因为没有理由假设给定的用户名属于所有主机上的同一个人。例如，从`office.example.com`连接的用户`joe`不一定是从`home.example.com`连接的用户`joe`。MySQL 通过使你能够区分在不同主机上具有相同名称的用户来处理这个问题：你可以为从`office.example.com`连接的`joe`授予一组连接权限，为从`home.example.com`连接的`joe`授予另一组连接权限。要查看特定账户有哪些权限，使用`SHOW GRANTS`语句。例如：

```sql
SHOW GRANTS FOR 'joe'@'office.example.com';
SHOW GRANTS FOR 'joe'@'home.example.com';
```

在内部，服务器将权限信息存储在`mysql`系统数据库的授权表中。MySQL 服务器在启动时将这些表的内容读入内存，并基于内存中的授权表副本做出访问控制决策。

当你运行连接到服务器的客户端程序时，MySQL 访问控制涉及两个阶段：

**第一阶段：** 服务器根据你的身份接受或拒绝连接，并根据你是否能通过提供正确密码验证你的身份。

**第二阶段：** 假设你可以连接，服务器会检查你发出的每个语句，以确定你是否有足够的权限执行它。例如，如果你尝试从数据库中的表中选择行或删除数据库中的表，服务器会验证你是否具有表的`SELECT`权限或数据库的`DROP`权限。

有关每个阶段发生的详细描述，请参见第 8.2.6 节，“访问控制，阶段 1：连接验证”和第 8.2.7 节，“访问控制，阶段 2：请求验证”。有关诊断与权限相关问题的帮助，请参见第 8.2.22 节，“连接到 MySQL 时出现问题的故障排除”。

如果你的权限在连接时被更改（无论是由你自己还是其他人），这些更改不一定会立即生效于你发出的下一条语句。有关服务器何时重新加载授权表的详细信息，请参见第 8.2.13 节，“权限更改何时生效”。

有一些事情你不能通过 MySQL 权限系统做到：

+   你不能明确指定某个用户应被拒绝访问。也就是说，你不能明确匹配一个用户然后拒绝连接。

+   你不能指定用户有权限在数据库中创建或删除表，但不能创建或删除数据库本身。

+   密码对一个账户全局有效。你不能将密码与特定对象（如数据库、表或例程）关联起来。
