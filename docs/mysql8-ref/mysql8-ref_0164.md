# 6.2.7 连接传输协议

> 原文：[`dev.mysql.com/doc/refman/8.0/en/transport-protocols.html`](https://dev.mysql.com/doc/refman/8.0/en/transport-protocols.html)

对于使用 MySQL 客户端库的程序（例如，**mysql** 和 **mysqldump**），MySQL 支持基于几种传输协议与服务器建立连接：TCP/IP、Unix 套接字文件、命名管道和共享内存。本节描述了如何选择这些协议，以及它们之间的相似性和差异。

+   传输协议选择

+   本地和远程连接的传输支持

+   localhost 的解释

+   加密和安全特性

+   连接压缩

#### 传输协议选择

对于给定的连接，如果未明确指定传输协议，则将隐式确定。例如，在 Unix 和类 Unix 系统上，对`localhost`的连接将导致套接字文件连接，否则将导致与`127.0.0.1`的 TCP/IP 连接。有关更多信息，请参阅第 6.2.4 节，“使用命令选项连接到 MySQL 服务器”。

要明确指定协议，请使用`--protocol` 命令选项。以下表格显示了`--protocol` 的可接受值，并指示每个值适用的平台。这些值不区分大小写。

| `--protocol` 值 | 使用的传输协议 | 适用平台 |
| --- | --- | --- |
| `TCP` | TCP/IP | 所有 |
| `SOCKET` | Unix 套接字文件 | Unix 和类 Unix 系统 |
| `PIPE` | 命名管道 | Windows |
| `MEMORY` | 共享内存 | Windows |

#### 本地和远程连接的传输支持

TCP/IP 传输支持连接到本地或远程 MySQL 服务器。

套接字文件、命名管道和共享内存传输仅支持连接到本地 MySQL 服务器。 （命名管道传输允许远程连接，但 MySQL 中尚未实现此功能。）

#### localhost 的解释

如果未明确指定传输协议，则`localhost`将被解释如下：

+   在 Unix 和类 Unix 系统上，对`localhost`的连接将导致套接字文件连接。

+   否则，对`localhost`的连接将导致与`127.0.0.1`建立 TCP/IP 连接。

如果传输协议被明确指定，`localhost` 将根据该协议进行解释。例如，使用 `--protocol=TCP`，对 `localhost` 的连接在所有平台上都会导致与 `127.0.0.1` 的 TCP/IP 连接。

#### 加密和安全特性

TCP/IP 和套接字文件传输受到 TLS/SSL 加密的影响，使用 加密连接的命令选项 中描述的选项。命名管道和共享内存传输不受 TLS/SSL 加密的影响。

如果通过默认安全的传输协议进行连接，则连接默认是安全的。否则，对于受 TLS/SSL 加密影响的协议，可以使用加密使连接变得安全：

+   TCP/IP 连接默认不安全，但可以进行加密以使其安全。

+   套接字文件连接默认是安全的。它们也可以进行加密，但加密套接字文件连接并不会使其更安全，反而会增加 CPU 负载。

+   命名管道连接默认不安全，并且不受加密的影响以使其安全。然而，`named_pipe_full_access_group` 系统变量可用于控制哪些 MySQL 用户被允许使用命名管道连接。

+   共享内存连接默认是安全的。

如果启用了 `require_secure_transport` 系统变量，则服务器只允许使用某种形式的安全传输的连接。根据前述说明，使用 TLS/SSL 加密的 TCP/IP 连接、套接字文件或共享内存的连接是安全的连接。未使用 TLS/SSL 加密的 TCP/IP 连接和命名管道连接不安全。

另请参见 将加密连接配置为强制性。

#### 连接压缩

所有传输协议都受到在客户端和服务器之间的流量上使用压缩的影响。如果对于给定连接同时使用了压缩和加密，压缩会在加密之前进行。更多信息，请参见 6.2.8 节，“连接压缩控制”。
