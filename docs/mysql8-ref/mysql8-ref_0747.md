# 13.2.6 时间值中的分数秒

> 原文：[`dev.mysql.com/doc/refman/8.0/en/fractional-seconds.html`](https://dev.mysql.com/doc/refman/8.0/en/fractional-seconds.html)

MySQL 支持`TIME`、`DATETIME`和`TIMESTAMP`值的分数秒，精度可达微秒（6 位数）：

+   要定义包含分数秒部分的列，请使用`*`type_name`*(*`fsp`*)`的语法，其中*`type_name`*是`TIME`、`DATETIME`或`TIMESTAMP`，*`fsp`*是分数秒精度。例如：

    ```sql
    CREATE TABLE t1 (t TIME(3), dt DATETIME(6));
    ```

    如果给出*`fsp`*值，则必须在 0 到 6 的范围内。值为 0 表示没有分数部分。如果省略，则默认精度为 0。（这与标准 SQL 默认值 6 不同，以与以前的 MySQL 版本兼容。）

+   将带有分数秒部分的`TIME`、`DATE`或`TIMESTAMP`值插入到具有较少分数位数但类型相同的列中会导致四舍五入。考虑以下创建和填充的表：

    ```sql
    CREATE TABLE fractest( c1 TIME(2), c2 DATETIME(2), c3 TIMESTAMP(2) );
    INSERT INTO fractest VALUES
    ('17:51:04.777', '2018-09-08 17:51:04.777', '2018-09-08 17:51:04.777');
    ```

    时间值将被插入到表中并进行四舍五入：

    ```sql
    mysql> SELECT * FROM fractest;
    +-------------+------------------------+------------------------+
    | c1          | c2                     | c3                     |
    +-------------+------------------------+------------------------+
    | 17:51:04.78 | 2018-09-08 17:51:04.78 | 2018-09-08 17:51:04.78 |
    +-------------+------------------------+------------------------+
    ```

    当发生此类四舍五入时，不会发出警告或错误。此行为遵循 SQL 标准。

    要进行截断插入值，需启用`TIME_TRUNCATE_FRACTIONAL` SQL 模式：

    ```sql
    SET @@sql_mode = sys.list_add(@@sql_mode, 'TIME_TRUNCATE_FRACTIONAL');
    ```

    启用该 SQL 模式后，时间值将被截断插入：

    ```sql
    mysql> SELECT * FROM fractest;
    +-------------+------------------------+------------------------+
    | c1          | c2                     | c3                     |
    +-------------+------------------------+------------------------+
    | 17:51:04.77 | 2018-09-08 17:51:04.77 | 2018-09-08 17:51:04.77 |
    +-------------+------------------------+------------------------+
    ```

+   接受时间参数的函数接受带有分数秒的值。从时间函数返回的值将根据需要包含分数秒。例如，不带参数的`NOW()`返回当前日期和时间，不包含分数部分，但可以使用 0 到 6 的可选参数指定返回值包含指定位数的分数秒部分。

+   时间文字的语法生成时间值：`DATE '*`str`*'`、`TIME '*`str`*'`和`TIMESTAMP '*`str`*'`，以及 ODBC 语法的等效形式。如果指定，生成的值将包含尾随的分数秒部分。以前，时间类型关键字被忽略，这些构造产生字符串值。参见标准 SQL 和 ODBC 日期和时间文字
