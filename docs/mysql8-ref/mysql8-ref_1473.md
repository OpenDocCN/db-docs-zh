# 第二十章 组复制

> 原文：[`dev.mysql.com/doc/refman/8.0/en/group-replication.html`](https://dev.mysql.com/doc/refman/8.0/en/group-replication.html)

**目录**

20.1 组复制背景

20.1.1 复制技术

20.1.2 组复制用例

20.1.3 多主和单主模式

20.1.4 组复制服务

20.1.5 组复制插件架构

20.2 开始使用

20.2.1 在单主模式下部署组复制

20.2.2 本地部署组复制

20.3 要求和限制

20.3.1 组复制要求

20.3.2 组复制限制

20.4 监控组复制

20.4.1 GTIDs 和组复制

20.4.2 组复制服务器状态

20.4.3 复制组成员表

20.4.4 复制组成员统计表

20.5 组复制操作

20.5.1 配置在线组

20.5.2 重新启动组

20.5.3 事务一致性保证

20.5.4 分布式恢复

20.5.5 支持 IPv6 和混合 IPv6 和 IPv4 组

20.5.6 使用 MySQL 企业备份与组复制

20.6 组复制安全

20.6.1 用于连接安全管理的通信堆栈

20.6.2 使用安全套接字层（SSL）保护组通信连接

20.6.3 保护分布式恢复连接

20.6.4 组复制 IP 地址权限

20.7 组复制性能和故障排除

20.7.1 调整组通信线程

20.7.2 流量控制

20.7.3 单一一致性领导者

20.7.4 消息压缩

20.7.5 消息分段

20.7.6 XCom 缓存管理

20.7.7 对故障检测和网络分区的响应

20.7.8 处理网络分区和失去法定人数

20.7.9 使用 Performance Schema Memory Instrumentation 监控 Group Replication 内存使用

20.8 升级 Group Replication

20.8.1 在组中组合不同的成员版本

20.8.2 Group Replication 离线升级

20.8.3 Group Replication 在线升级

20.9 Group Replication 变量

20.9.1 Group Replication 系统变量

20.9.2 Group Replication 状态变量

20.10 常见问题解答

本章介绍了 MySQL Group Replication 以及如何安装、配置和监控组。MySQL Group Replication 可以创建弹性、高可用、容错的复制拓扑。

组可以以单一主模式运行，具有自动主选举功能，每次只有一个服务器接受更新。另外，组也可以以多主模式部署，所有服务器都可以接受更新，即使它们同时发出。

有一个内置的组成员服务，保持组的视图在任何给定时间点对所有服务器一致和可用。服务器可以离开和加入组，视图会相应更新。有时服务器可能意外离开组，此时故障检测机制会检测到并通知组视图已更改。这一切都是自动的。

Group Replication 保证数据库服务持续可用。然而，重要的是要理解，如果组中的一个成员不可用，连接到该组成员的客户端必须被重定向或故障转移到组中的另一台服务器，使用连接器、负载均衡器、路由器或某种中间件。Group Replication 没有内置的方法来做到这一点。例如，参见 MySQL Router 8.0。

组复制作为 MySQL Server 的一个插件提供。您可以按照本章的说明在您想要的每个服务器实例上配置插件，启动组，并监视和管理组。部署 MySQL 服务器实例组的另一种方法是使用 InnoDB Cluster。

提示

要部署多个 MySQL 实例，您可以使用 InnoDB Cluster，它使您能够轻松管理一组 MySQL 服务器实例在 MySQL Shell 中。InnoDB Cluster 将 MySQL Group Replication 包装在一个编程环境中，使您可以轻松部署一组 MySQL 实例以实现高可用性。此外，InnoDB Cluster 与 MySQL Router 无缝接口，使您的应用程序可以连接到集群而无需编写自己的故障转移过程。然而，对于不需要高可用性的类似用例，您可以使用 InnoDB ReplicaSet。有关 MySQL Shell 的安装说明，请参见这里。

本章结构如下：

+   第 20.1 节，“组复制背景” 介绍了组和组复制的工作原理。

+   第 20.2 节，“入门指南” 解释了如何配置多个 MySQL Server 实例以创建一个组。

+   第 20.3 节，“需求和限制” 解释了组复制的架构和设置需求以及限制。

+   第 20.4 节，“监控组复制” 解释了如何监控一个组。

+   第 20.5 节，“组复制操作” 解释了如何操作一个组。

+   第 20.6 节，“组复制安全” 解释了如何保护一个组。

+   第 20.7 节，“组复制性能和故障排除” 解释了如何为一个组调整性能。

+   第 20.8 节，“升级组复制” 解释了如何升级一个组。

+   第 20.9 节，“组复制变量” 是特定于组复制的系统变量的参考。

+   第 20.10 节，“常见问题” 提供了关于部署和操作群组复制的一些技术问题的答案。
