> 原文：[`dev.mysql.com/doc/refman/8.0/en/error-log-event-fields.html`](https://dev.mysql.com/doc/refman/8.0/en/error-log-event-fields.html)

#### 7.4.2.3 错误事件字段

用于错误日志的错误事件包含一组字段，每个字段由键/值对组成。事件字段可以分类为核心、可选或用户定义：

+   核心字段会自动设置为错误事件。但是，在事件处理过程中，不能保证事件���存在核心字段，因为核心字段，像任何类型的字段一样，可能会被日志过滤器取消设置。如果发生这种情况，则在该过滤器内部和在过滤器之后执行的组件（如日志接收器）中无法找到该字段。

+   通常情况下，可选字段通常不存在，但对于某些事件类型可能存在。当存在时，可选字段根据需要和可用性提供额外的事件信息。

+   用户定义字段是任何名称尚未定义为核心或可选字段的字段。用户定义字段在由日志过滤器创建之前不存在。

如前述描述所示，任何给定字段在事件处理过程中可能不存在，这可能是因为它一开始就不存在，或者被过滤器丢弃。对于日志接收器，字段缺失的影响是特定于接收器的。例如，接收器可能从日志消息中省略该字段，指示该字段丢失，或者替换为默认值。如果有疑问，请进行测试：使用一个取消设置该字段的过滤器，然后检查日志接收器对其的处理方式。

以下部分描述了核心和可选错误事件字段。对于单独的日志过滤器组件，可能会有关于这些字段的其他特定于过滤器的考虑，或者过滤器可能添加此处未列出的用户定义字段。有关详细信息，请参阅特定过滤器的文档。

+   核心错误事件字段

+   可选错误事件字段

##### 核心错误事件字段

这些错误事件字段是核心字段：

+   `time`

    事件时间戳，精确到微秒。

+   `msg`

    事件消息字符串。

+   `prio`

    事件优先级，用于指示系统、错误、警告或注意/信息事件。此字段对应于`syslog`中的严重性。以下表显示可能的优先级级别。

    | 事件类型 | 数字优先级 |
    | --- | --- |
    | 系统事件 | 0 |
    | 错误事件 | 1 |
    | 警告事件 | 2 |
    | 注意/信息事件 | 3 |

    `prio`值是数字。与此相关，错误事件还可以包括一个可选的`label`字段，表示优先级为字符串。例如，具有`prio`值为 2 的事件可能具有`label`值为'警告'。

    根据优先级，过滤器组件可以包含或删除错误事件，但系统事件是强制性的，不能被删除。

    一般来说，消息优先级的确定如下：

    这种情况或事件是否可操作？

    +   是：情况或事件是否可忽略？

        +   是：优先级是警告。

        +   不：优先级是错误。

    +   不：情况或事件是否强制性？

        +   是：优先级是系统。

        +   不：优先级是注释/信息。

+   `err_code`

    事件错误代码，作为数字（例如，`1022`）。

+   `err_symbol`

    作为字符串的事件错误符号（例如，`'ER_DUP_KEY'`）。

+   `SQL_state`

    作为字符串的事件 SQLSTATE 值（例如，`'23000'`）。

+   `subsystem`

    事件发生的子系统。可能的值为`InnoDB`（`InnoDB`存储引擎）、`Repl`（复制子系统）、`Server`（其他）。

##### 可选的错误事件字段

可选的错误事件字段属于以下类别：

+   关于错误的其他信息，例如操作系统发出的错误或错误标签：

    +   `OS_errno`

        操作系统错误编号。

    +   `OS_errmsg`

        操作系统错误消息。

    +   `label`

        与`prio`值对应的标签，作为字符串。

+   事件发生的客户端的标识：

    +   `user`

        客户端用户。

    +   `host`

        客户端主机。

    +   `thread`

        在**mysqld**中负责生成错误事件的线程的 ID。此 ID 指示服务器的哪个部分生成了事件，并与一般查询日志和慢查询日志消息一致，这些消息包括连接线程 ID。

    +   `query_id`

        查询 ID。

+   调试信息：

    +   `source_file`

        事件发生的源文件，不包含任何前导路径。

    +   `source_line`

        事件发生的源文件中的行号。

    +   `function`

        事件发生的函数。

    +   `component`

        事件发生的组件或插件。
