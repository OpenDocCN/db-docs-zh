> 译文：[`dev.mysql.com/doc/refman/8.0/en/full-disk.html`](https://dev.mysql.com/doc/refman/8.0/en/full-disk.html)

#### B.3.3.4 MySQL 如何处理磁盘已满

本节描述了 MySQL 如何响应磁盘已满错误（如“设备上没有剩余空间”）以及配额超出错误（如“写入失败”或“用户块限制已达到”）。

这一部分与对`MyISAM`表的写入相关。它也适用于对二进制日志文件和二进制日志索引文件的写入，只是“行”和“记录”的引用应理解为“事件”。

当磁盘已满时，MySQL 会执行以下操作：

+   每分钟检查一次是否有足够的空间来写入当前行。如果有足够的空间，它会继续进行，就好像什么都没发生过。

+   每 10 分钟向日志文件写入一条条目，警告磁盘已满的情况。

为缓解问题，请采取以下措施：

+   要继续，您只需释放足够的磁盘空间以插入所有记录。

+   或者，要中止线程，请使用**mysqladmin kill**。线程在下次检查磁盘时（一分钟后）将被中止。

+   其他线程可能正在等待导致磁盘已满条件的表。如果有几个“锁定”线程，杀死一个正在等待磁盘已满条件的线程将使其他线程继续进行。

前述行为的例外情况是当您使用`REPAIR TABLE`或`OPTIMIZE TABLE`或在`LOAD DATA`或`ALTER TABLE`语句之后批量创建索引时。所有这些语句可能会创建大型临时文件，如果任其自生，将会给系统的其余部分带来大问题。如果在 MySQL 执行这些操作时磁盘变满，它会删除大型临时文件并标记表为崩溃。例外情况是对于`ALTER TABLE`，旧表保持不变。
