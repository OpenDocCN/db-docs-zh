# 13.4.4 几何体的良好形成性和有效性

> 原文：[`dev.mysql.com/doc/refman/8.0/en/geometry-well-formedness-validity.html`](https://dev.mysql.com/doc/refman/8.0/en/geometry-well-formedness-validity.html)

对于几何值，MySQL 区分了语法上良好形成和几何有效的概念。

如果几何体满足这个（不全面）列表中的条件，那么它在语法上是良好形成的：

+   线串至少有两个点

+   多边形至少有一个环

+   多边形环是封闭的（第一个和最后一个点相同）

+   多边形环至少有 4 个点（最小多边形是一个三角形，第一个和最后一个点相同）

+   集合不为空（除了 `GeometryCollection`）

如果几何体在语法上是良好形成的并满足这个（不全面）列表中的条件，那么它在几何上是有效的：

+   多边形不会自相交

+   多边形内部环在外部环内

+   多边形不会有重叠的多边形

如果几何体在语法上不是良好形成的，则空间函数会失败。解析 WKT 或 WKB 值的空间导入函数会对尝试创建不在语法上良好形成的几何体的操作引发错误。对于尝试将几何体存储到表中的操作也会检查语法上的良好形成性。

允许插入、选择和更新几何上无效的几何体，但它们必须在语法上是良好形成的。由于计算开销，MySQL 不会明确检查几何有效性。空间计算可能会检测到一些无效几何体并引发错误，但也可能在不检测到无效性的情况下返回未定义的结果。需要几何有效性的应用程序应使用 `ST_IsValid()` 函数进行检查。
