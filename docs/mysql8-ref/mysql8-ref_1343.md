# 19.1.3 具有全局事务标识符的复制

> 原文：[`dev.mysql.com/doc/refman/8.0/en/replication-gtids.html`](https://dev.mysql.com/doc/refman/8.0/en/replication-gtids.html)

19.1.3.1 GTID 格式和存储

19.1.3.2 GTID 生命周期

19.1.3.3 GTID 自动定位

19.1.3.4 使用 GTID 设置复制

19.1.3.5 使用 GTID 进行故障切换和扩展

19.1.3.6 从没有 GTID 的源复制到具有 GTID 的副本

19.1.3.7 GTID 复制限制

19.1.3.8 用于操作 GTID 的存储函数示例

本节解释了使用全局事务标识符（GTID）进行基于事务的复制。使用 GTID 时，每个事务都可以在原始服务器上提交时进行标识和跟踪，并由任何副本应用；这意味着在使用 GTID 时，不需要在启动新副本或故障切换到新源时引用日志文件或文件内的位置，这极大地简化了这些任务。由于基于 GTID 的复制完全基于事务，因此很容易确定源和副本是否一致；只要在源上提交的所有事务也在副本上提交，就可以保证两者之间的一致性。您可以使用基于语句或基于行的复制与 GTID（参见第 19.2.1 节，“复制格式”）；但是，为了获得最佳结果，我们建议您使用基于行的格式。

GTID 在源和副本之间始终保留。这意味着您始终可以通过检查其二进制日志来确定任何副本上应用的任何事务的源。此外，一旦在给定服务器上提交具有特定 GTID 的事务，该服务器将忽略具有相同 GTID 的任何后续事务。因此，在源上提交的事务在副本上最多只能应用一次，这有助于保证一致性。

本节讨论以下主题：

+   GTID 的定义和创建方式，以及它们在 MySQL 服务器中的表示方式（参见第 19.1.3.1 节，“GTID 格式和存储”）。

+   GTID 的生命周期（参见第 19.1.3.2 节，“GTID 生命周期”）。

+   用于同步使用 GTID 的副本和源的自动定位功能（参见第 19.1.3.3 节，“GTID 自动定位”）。

+   设置和启动基于 GTID 的复制的一般流程（参见第 19.1.3.4 节，“使用 GTIDs 设置复制”）。

+   在使用 GTIDs 时为新复制服务器提供建议的方法（参见第 19.1.3.5 节，“在故障转移和扩展中使用 GTIDs”）。

+   使用 GTID-based 复制时应注意的限制和限制（参见第 19.1.3.7 节，“使用 GTIDs 进行复制的限制”）。

+   存储函数可用于处理 GTIDs（参见第 19.1.3.8 节，“用于操作 GTIDs 的存储函数示例”）。

有关与 GTID-based 复制相关的 MySQL 服务器选项和变量的信息，请参见第 19.1.6.5 节，“全局事务 ID 系统变量”。另请参阅第 14.18.2 节，“与全局事务标识符（GTIDs）一起使用的函数”")，其中描述了 MySQL 8.0 支持用于 GTIDs 的 SQL 函数。
