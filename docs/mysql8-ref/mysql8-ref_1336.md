> 原文：[`dev.mysql.com/doc/refman/8.0/en/replication-howto-slavebaseconfig.html`](https://dev.mysql.com/doc/refman/8.0/en/replication-howto-slavebaseconfig.html)

#### 19.1.2.2 设置复制品配置

每个复制品必须具有唯一的服务器 ID，由`server_id`系统变量指定。如果您正在设置多个复制品，则每个复制品必须具有与源和任何其他复制品不同的唯一`server_id`值。如果复制品的服务器 ID 尚未设置，或当前值与您为源或其他复制品选择的值冲突，则必须更改它。

默认`server_id`值为 1。您可以通过发出类似以下语句来动态更改`server_id`值：

```sql
SET GLOBAL server_id = 21;
```

请注意，服务器 ID 的值为 0 会阻止复制品连接到源。如果该服务器 ID 值（这是早期版本中的默认值）以前已设置，则必须重新启动服务器以使用新的非零服务器 ID 初始化复制品。否则，当您更改服务器 ID 时，不需要重新启动服务器，除非进行其他需要重新启动的配置更改。例如，如果服务器上已禁用二进制日志记录，并且您希望在复制品上启用它，则需要重新启动服务器才能启用此功能。

如果要关闭复制品服务器，可以编辑配置文件的`[mysqld]`部分以指定唯一的服务器 ID。例如：

```sql
[mysqld]
server-id=21
```

所有服务器默认启用二进制日志记录。复制品不需要启用二进制日志记录才能进行复制。但是，复制品上启用二进制日志记录意味着复制品的二进制日志可用于数据备份和崩溃恢复。已启用二进制日志记录的复制品也可以用作更复杂复制拓扑的一部分。例如，您可能希望使用此链接安排设置复制服务器：

```sql
A -> B -> C
```

这里，`A`充当复制品`B`的源，而`B`充当复制品`C`的源。为了使其正常工作，`B`必须既是源*又是*复制品。从`A`接收到的更新必须由`B`记录到其二进制日志中，以便传递给`C`。除了二进制日志记录外，此复制拓扑结构需要启用系统变量`log_replica_updates`（从 MySQL 8.0.26 开始）或`log_slave_updates`（在 MySQL 8.0.26 之前）才能正常工作。启用复制更新后，复制品会将从源接收并由复制品的 SQL 线程执行的更新写入复制品自己的二进制日志中。系统变量`log_replica_updates`或`log_slave_updates`默认启用。

如果需要在复制品上禁用二进制日志记录或复制更新记录，可以通过为复制品指定`--skip-log-bin`和`--log-replica-updates=OFF`或`--log-slave-updates=OFF`选项来实现。如果决定在复制品上重新启用这些功能，请删除相关选项并重新启动服务器。
