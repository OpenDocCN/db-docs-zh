> 原文：[`dev.mysql.com/doc/refman/8.0/en/insert-optimization.html`](https://dev.mysql.com/doc/refman/8.0/en/insert-optimization.html)

#### 10.2.5.1 优化 INSERT 语句

为了优化插入速度，将许多小操作合并为单个大操作。理想情况下，您建立一个单一连接，一次发送许多新行的数据，并延迟所有索引更新和一致性检查直到最后。

插入一行所需的时间由以下因素决定，其中数字表示近似比例：

+   连接：(3)

+   将查询发送到服务器：(2)

+   解析查询：(2)

+   插入行：(1 × 行大小)

+   插入索引：(1 × 索引数)

+   关闭：(1)

这并未考虑到打开表的初始开销，这是每个并发运行的查询都会执行一次的操作。

表的大小通过对数*`N`*减慢索引的插入速度，假设是 B 树索引。

您可以使用以下方法加快插入速度：

+   如果您正在同时从同一客户端插入许多行，请使用带有多个`VALUES`列表的`INSERT`语句一次性插入多行。这比使用单独的单行`INSERT`语句要快得多（在某些情况下快几倍）。如果要向非空表添加数据，您可以调整`bulk_insert_buffer_size`变量以使数据插入速度更快。请参阅第 7.1.8 节，“服务器系统变量”。

+   从文本文件加载表时，请使用`LOAD DATA`。这通常比使用`INSERT`语句快 20 倍。请参阅第 15.2.9 节，“LOAD DATA 语句”。

+   利用列具有默认值的事实。仅在要插入的值与默认值不同时显式插入值。这减少了 MySQL 必须进行的解析，并提高了插入速度。

+   有关`InnoDB`表的特定提示，请参阅第 10.5.5 节，“InnoDB 表的批量数据加载”。

+   有关`MyISAM`表的特定提示，请参阅第 10.6.2 节，“MyISAM 表的批量数据加载”。
