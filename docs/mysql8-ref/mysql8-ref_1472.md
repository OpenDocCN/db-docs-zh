# 19.5.5 如何报告复制 Bug 或问题

> 原文：[`dev.mysql.com/doc/refman/8.0/en/replication-bugs.html`](https://dev.mysql.com/doc/refman/8.0/en/replication-bugs.html)

当确定没有用户错误涉及，并且复制仍然无法正常工作或不稳定时，是时候向我们发送 bug 报告了。我们需要尽可能多地从您那里获取信息以便追踪 bug。请花些时间和精力准备一个好的 bug 报告。

如果您有一个可重现的测试用例来演示 bug，请按照第 1.5 节“如何报告 Bug 或问题”中给出的说明将其输入到我们的 bug 数据库中。如果您遇到“幻影”问题（即您无法随意复制的问题），请使用以下步骤：

1.  验证没有用户错误涉及。例如，如果您在复制线程之外更新复制端，数据将不同步，更新时可能会出现唯一键冲突。在这种情况下，复制线程会停止并等待您手动清理表以将其带入同步状态。*这不是一个复制问题。这是外部干扰导致复制失败的问题。*

1.  确保复制端正在运行并启用了二进制日志记录（`log_bin` 系统变量），并启用了 `--log-slave-updates` 选项，这会导致复制端将从源端接收的更新记录到自己的二进制日志中。这些设置是默认设置。

1.  在重置复制状态之前，请保存所有证据。如果我们没有信息或只有零碎的信息，那么追踪问题将变得困难或不可能。您应该收集的证据包括：

    +   所有来自源端的二进制日志文件

    +   所有来自复制端的二进制日志文件

    +   源端在发现问题时的`SHOW MASTER STATUS`输出

    +   源端在发现问题时的`SHOW REPLICA STATUS`输出

    +   源端和复制端的错误日志

1.  使用**mysqlbinlog**来检查二进制日志。以下内容应有助于找到问题陈述。*`log_file`*和*`log_pos`*是`SHOW REPLICA STATUS`中的`Master_Log_File`和`Read_Master_Log_Pos`值。

    ```sql
    $> mysqlbinlog --start-position=*log_pos* *log_file* | head
    ```

在收集了问题的证据之后，首先尝试将其作为一个独立的测试用例进行隔离。然后，按照第 1.5 节，“如何报告错误或问题”中的说明，尽可能多地输入问题信息到我们的错误数据库中。
