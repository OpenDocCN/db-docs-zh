> 原文：[`dev.mysql.com/doc/refman/8.0/en/replication-binlog-encryption-scope.html`](https://dev.mysql.com/doc/refman/8.0/en/replication-binlog-encryption-scope.html)

#### 19.3.2.1 二进制日志加密范围

当 MySQL 服务器实例启用二进制日志加密时，加密覆盖范围如下：

+   写入二进制日志文件和中继日志文件的静态数据从加密开始的时间点起，使用上述两层加密架构进行加密。在启动加密时存在于服务器上的现有二进制日志文件和中继日志文件不会被加密。当这些文件不再需要时，可以清除这些文件。

+   在发送到 MySQL 客户端（包括**mysqlbinlog**）的复制事件流中的数据在传输时会被解密，因此应通过使用连接加密（参见第 8.3 节，“使用加密连接”和第 19.3.1 节，“设置复制使用加密连接”）来保护传输中的数据。

+   在事务期间存储在二进制日志事务和语句缓存中的数据以未加密格式存在于存储缓存的内存缓冲区中。如果超过内存缓冲区可用空间，数据将写入磁盘上的临时文件。从 MySQL 8.0.17 开始，当服务器上启用二进制日志加密时，用于保存二进制日志缓存的临时文件将使用 AES-CTR（AES Counter mode）进行流加密进行加密。由于临时文件是易失性的并且与单个进程绑定，因此它们使用单层加密进行加密，使用仅存在于内存中且永远不会存储在磁盘或密钥环中的随机生成的文件密码和初始化向量。在每个事务提交后，二进制日志缓存被重置：内存缓冲区被清除，用于保存二进制日志缓存的任何临时文件被截断，并为下一个事务使用随机生成的新文件密码和初始化向量。在服务器正常关闭或意外停止后重新启动时，也会进行此重置。

注意

如果在设置`binlog_format=STATEMENT`时使用`LOAD DATA`，这不被推荐，因为该语句被认为对基于语句的复制不安全，将在应用更改的副本上创建包含数据的临时文件。当服务器上启用二进制日志加密时，这些临时文件不会被加密。相反，请改用基于行或混合二进制日志格式，这些格式不会创建临时文件。
