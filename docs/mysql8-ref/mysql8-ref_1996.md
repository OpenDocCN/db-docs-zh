# 29.4.3 事件预过滤

> 原文：[`dev.mysql.com/doc/refman/8.0/en/performance-schema-pre-filtering.html`](https://dev.mysql.com/doc/refman/8.0/en/performance-schema-pre-filtering.html)

预过滤由性能模式执行，并具有适用于所有用户的全局效果。预过滤可以应用于事件处理的生产者或消费者阶段：

+   要在生产者阶段配置预过滤，可以使用多个表：

    +   `setup_instruments` 指示可用的仪器。在此表中禁用的仪器不会产生任何事件，而不管其他与生产相关的设置表的内容如何。在此表中启用的仪器被允许产生事件，取决于其他表的内容。

    +   `setup_objects` 控制性能模式是否监视特定表和存储程序对象。

    +   `threads` 指示每个服务器线程是否启用监视。

    +   `setup_actors` 确定新前台线程的初始监视状态。

+   要在消费者阶段配置预过滤，请修改`setup_consumers`表。这确定事件发送到的目的地。`setup_consumers`还隐含影响事件产生。如果某个事件未发送到任何目的地（即，从未被消费），性能模式不会产生它。

对任何这些表的修改立即影响监视，但有一个例外，即对`setup_actors`表的修改仅影响创建修改后的前台线程，而不影响现有线程。

当您更改监视配置时，性能模式不会刷新历史表。已经收集的事件会保留在当前事件和历史表中，直到被新事件替换。如果禁用仪器，您可能需要等待一段时间，直到它们的事件被新的感兴趣的事件替换。或者，使用`TRUNCATE TABLE`清空历史表。

在进行仪表化更改后，您可能希望截断摘要表。通常，效果是将摘要列重置为 0 或`NULL`，而不是删除行。这使您能够清除收集的值并重新开始聚合。例如，在您进行运行时配置更改后，这可能很有用。个别摘要表部分中会注意到此截断行为的异常情况。

以下部分描述如何使用特定表格来控制性能模式的预过滤。
