# 13.2 日期和时间数据类型

> 原文：[`dev.mysql.com/doc/refman/8.0/en/date-and-time-types.html`](https://dev.mysql.com/doc/refman/8.0/en/date-and-time-types.html)

13.2.1 日期和时间数据类型语法

13.2.2 DATE、DATETIME 和 TIMESTAMP 类型

13.2.3 TIME 类型

13.2.4 YEAR 类型

13.2.5 TIMESTAMP 和 DATETIME 的自动初始化和更新

13.2.6 时间值中的小数秒

13.2.7 MySQL 使用的是哪种日历？

13.2.8 日期和时间类型之间的转换

13.2.9 日期中的两位数年份

用于表示时间值的日期和时间数据类型是`DATE`、`TIME`、`DATETIME`、`TIMESTAMP` 和 `YEAR`。每种时间类型都有一系列有效值，以及一个“零”值，当您指定 MySQL 无法表示的无效值时可以使用。`TIMESTAMP` 和 `DATETIME` 类型具有特殊的自动更新行为，详见第 13.2.5 节，“TIMESTAMP 和 DATETIME 的自动初始化和更新”。

有关时间数据类型的存储要求的信息，请参见第 13.7 节，“数据类型存储要求”。

有关操作时间值的函数的描述，请参见第 14.7 节，“日期和时间函数”。

在处理日期和时间类型时，请记住以下一般考虑事项：

+   MySQL 以标准输出格式检索给定日期或时间类型的值，但它尝试解释您提供的各种输入值的格式（例如，当您指定要分配给或与日期或时间类型进行比较的值时）。有关日期和时间类型允许的格式的描述，请参见第 11.1.3 节，“日期和时间文字”。预期您提供有效值。如果您使用其他格式的值，可能会导致不可预测的结果。

+   尽管 MySQL 尝试以几种格式解释值，但日期部分必须始终按年-月-日的顺序给出（例如，`'98-09-04'`），而不是在其他地方通常使用的月-日-年或日-月-年的顺序（例如，`'09-04-98'`，`'04-09-98'`）。要将其他顺序的字符串转换为年-月-日顺序，可能会有用的是`STR_TO_DATE()` 函数。

+   包含 2 位年份值的日期是模棱两可的，因为世纪是未知的。MySQL 使用以下规则解释 2 位年份值：

    +   范围在 `70-99` 的年份值变为 `1970-1999`。

    +   范围在 `00-69` 的年份值变为 `2000-2069`。

    另请参阅第 13.2.9 节，“日期中的 2 位年份”。

+   从一个时间类型转换为另一个时间类型的值转换遵循第 13.2.8 节，“日期和时间类型之间的转换”中的规则。

+   如果将日期或时间值用于数字上下文中，MySQL 将自动将其转换为数字，反之亦然。

+   默认情况下，当 MySQL 遇到超出范围或其他类型无效的日期或时间类型的值时，它将该值转换为该类型的“零”值。例外情况是，超出范围的`TIME`值将被剪切到`TIME`范围的适当端点。

+   通过将 SQL 模式设置为适当的值，您可以更准确地指定 MySQL 支持的日期类型。（参见第 7.1.11 节，“服务器 SQL 模式”。）您可以通过启用`ALLOW_INVALID_DATES` SQL 模式，使 MySQL 接受某些日期，例如 `'2009-11-31'`。当您希望将用户指定的“可能错误”的值（例如在 Web 表单中）存储在数据库中以供将来处理时，这将非常有用。在此模式下，MySQL 仅验证月份在 1 到 12 的范围内，日期在 1 到 31 的范围内。

+   MySQL 允许您在`DATE`或`DATETIME`列中存储日期，其中日期或月份和日期为零。这对于需要存储生日但可能不知道确切日期的应用程序非常有用。在这种情况下，您只需将日期存储为 `'2009-00-00'` 或 `'2009-01-00'`。但是，对于这样的日期，您不应该期望对于需要完整日期的函数（例如`DATE_SUB()` 或`DATE_ADD()`）获得正确的结果。要禁止日期中的零月份或日期部分，启用`NO_ZERO_IN_DATE` 模式。

+   MySQL 允许您将“零”值`'0000-00-00'`存储为“虚拟日期”。在某些情况下，这比使用`NULL`值更方便，并且使用的数据和索引空间更少。要禁止`'0000-00-00'`，请启用`NO_ZERO_DATE`模式。

+   “Zero”日期或时间值在 Connector/ODBC 中使用时会自动转换为`NULL`，因为 ODBC 无法处理这些值。

以下表格显示了每种类型的“零”值的格式。这些“零”值是特殊的，但您可以使用表中显示的值显式存储或引用它们。您还可以使用更容易写的值`'0'`或`0`来做到这一点。对于包含日期部分的时间类型（`日期`、`日期时间`和`时间戳`），使用这些值可能会产生警告或错误。具体行为取决于启用的严格和`NO_ZERO_DATE` SQL 模式中的哪些；请参阅第 7.1.11 节，“服务器 SQL 模式”。

| 数据类型 | “零”值 |
| --- | --- |
| `日期` | `'0000-00-00'` |
| `时间` | `'00:00:00'` |
| `日期时间` | `'0000-00-00 00:00:00'` |
| `时间戳` | `'0000-00-00 00:00:00'` |
| `年份` | `0000` |
