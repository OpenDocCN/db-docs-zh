> 原文：[`dev.mysql.com/doc/refman/8.0/en/drop-user.html`](https://dev.mysql.com/doc/refman/8.0/en/drop-user.html)

#### 15.7.1.5 `DROP USER` 语句

```sql
DROP USER [IF EXISTS] *user* [, *user*] ...
```

`DROP USER` 语句会移除一个或多个 MySQL 账户及其权限。它会从所有授权表中移除该账户的权限行。

在 `mandatory_roles` 系统变量值中命名的角色不能被删除。

要使用 `DROP USER`，你必须拥有全局的 `CREATE USER` 权限，或者对 `mysql` 系统模式拥有 `DELETE` 权限。当启用 `read_only` 系统变量时，`DROP USER` 还需要 `CONNECTION_ADMIN` 权限（或者已弃用的 `SUPER` 权限）。

截至 MySQL 8.0.22 版本，如果要删除的任何账户被命名为任何存储对象的 `DEFINER` 属性，则 `DROP USER` 会因错误而失败。（也就是说，如果删除一个账户会导致存储对象变成孤立状态，则该语句会失败。）要执行该操作，你必须拥有 `SET_USER_ID` 权限；在这种情况下，该语句会成功并产生警告，而不是失败并产生错误。有关更多信息，包括如何识别哪些对象将给定账户命名为 `DEFINER` 属性，请参阅 Orphan Stored Objects。

`DROP USER` 对所有命名用户要么全部成功，要么回滚并且在发生任何错误时不会产生影响。默认情况下，如果尝试删除不存在的用户，则会发生错误。如果给出了 `IF EXISTS` 子句，则该语句会对每个不存在的命名用户产生警告，而不是错误。

如果成功，该语句会被写入二进制日志，但如果失败则不会；在这种情况下，会发生回滚并且不会有任何更改。写入二进制日志的语句包括所有命名用户。如果给出了 `IF EXISTS` 子句，则即使用户不存在且未被删除，也会包括这些用户。

每个账户名使用 Section 8.2.4, “Specifying Account Names” 中描述的格式。例如：

```sql
DROP USER 'jeffrey'@'localhost';
```

如果省略账户名的主机名部分，则默认为 `'%'`。

重要提示

`DROP USER` 不会自动关闭任何打开的用户会话。相反，如果删除具有打开会话的用户，则该语句直到该用户的会话关闭后才生效。一旦会话关闭，用户被删除，该用户的下一次登录尝试将失败。*这是设计上的*。

`DROP USER` 不会自动删除或使旧用户创建的数据库或其中的对象失效。这包括`DEFINER`属性指定已删除用户的存储过程或视图。如果在定义者安全上下文中执行这些对象，可能会产生错误。（有关安全上下文的信息，请参见第 27.6 节，“存储对象访问控制”。）
