# 13.2.8 日期和时间类型之间的转换

> 原文：[`dev.mysql.com/doc/refman/8.0/en/date-and-time-type-conversion.html`](https://dev.mysql.com/doc/refman/8.0/en/date-and-time-type-conversion.html)

在一定程度上，您可以将一个时间类型的值转换为另一个时间类型。但是，可能会对值进行一些更改或丢失信息。在所有情况下，时间类型之间的转换受到生成类型的有效值范围的限制。例如，尽管`DATE`、`DATETIME`和`TIMESTAMP`值都可以使用相同的格式集来指定，但这些类型的值范围并不相同。`TIMESTAMP`值不能早于`1970`年 UTC 或晚于`'2038-01-19 03:14:07'` UTC。这意味着像`'1968-01-01'`这样的日期，虽然作为`DATE`或`DATETIME`值是有效的，但作为`TIMESTAMP`值是无效的，并转换为`0`。

转换`DATE`值：

+   转换为`DATETIME`或`TIMESTAMP`值会添加一个时间部分`'00:00:00'`，因为`DATE`值不包含时间信息。

+   转换为`TIME`值没有用处；结果为`'00:00:00'`。

转换`DATETIME`和`TIMESTAMP`值：

+   转换为`DATE`值考虑了小数秒并四舍五入时间部分。例如，`'1999-12-31 23:59:59.499'`变为`'1999-12-31'`，而`'1999-12-31 23:59:59.500'`变为`'2000-01-01'`。

+   转换为`TIME`值会丢弃日期部分，因为`TIME`类型不包含日期信息。

对于将`TIME`值转换为其他时间类型，日期部分使用`CURRENT_DATE()`的值。`TIME`被解释为经过的时间（而不是一天中的时间）并添加到日期上。这意味着结果的日期部分与当前日期不同，如果时间值超出范围从`'00:00:00'`到`'23:59:59'`。

假设当前日期为`'2012-01-01'`。当`TIME`值为`'12:00:00'`，`'24:00:00'`和`'-12:00:00'`时，转换为`DATETIME`或`TIMESTAMP`值，结果分别为`'2012-01-01 12:00:00'`，`'2012-01-02 00:00:00'`和`'2011-12-31 12:00:00'`。

将`TIME`转换为`DATE`类似，但从结果中丢弃时间部分：分别为`'2012-01-01'`，`'2012-01-02'`和`'2011-12-31'`。

显式转换可用于覆盖隐式转换。例如，在比较`DATE`和`DATETIME`值时，`DATE`值通过添加时间部分`'00:00:00'`被强制转换为`DATETIME`类型。要通过忽略`DATETIME`值的时间部分执行比较，可以使用`CAST()`函数如下方式：

```sql
*date_col* = CAST(*datetime_col* AS DATE)
```

将`TIME`和`DATETIME`值转换为数值形式（例如，通过添加`+0`）取决于值是否包含小数秒部分。当*N*为 0（或省略）时，`TIME(*N*)`或`DATETIME(*N*)`转换为整数，当*N*大于 0 时，转换为具有*N*位小数位的`DECIMAL`值：

```sql
mysql> SELECT CURTIME(), CURTIME()+0, CURTIME(3)+0;
+-----------+-------------+--------------+
| CURTIME() | CURTIME()+0 | CURTIME(3)+0 |
+-----------+-------------+--------------+
| 09:28:00  |       92800 |    92800.887 |
+-----------+-------------+--------------+
mysql> SELECT NOW(), NOW()+0, NOW(3)+0;
+---------------------+----------------+--------------------+
| NOW()               | NOW()+0        | NOW(3)+0           |
+---------------------+----------------+--------------------+
| 2012-08-15 09:28:00 | 20120815092800 | 20120815092800.889 |
+---------------------+----------------+--------------------+
```
