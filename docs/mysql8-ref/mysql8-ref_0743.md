# 13.2.2 日期、日期时间和时间戳类型

> 原文：[`dev.mysql.com/doc/refman/8.0/en/datetime.html`](https://dev.mysql.com/doc/refman/8.0/en/datetime.html)

`DATE`、`DATETIME`和`TIMESTAMP`类型是相关的。本节描述它们的特征，它们的相似之处以及它们的区别。MySQL 以几种格式识别`DATE`、`DATETIME`和`TIMESTAMP`值，描述在第 11.1.3 节，“日期和时间文字”中。对于`DATE`和`DATETIME`范围描述，“支持”表示尽管较早的值可能有效，但不能保证。

`DATE`类型用于具有日期部分但没有时间部分的值。MySQL 以`'*`YYYY-MM-DD`*'`格式检索和显示`DATE`值。支持的范围是`'1000-01-01'`到`'9999-12-31'`。

`DATETIME`类型用于包含日期和时间部分的值。MySQL 以`'*`YYYY-MM-DD hh:mm:ss`*'`格式检索和显示`DATETIME`值。支持的范围是`'1000-01-01 00:00:00'`到`'9999-12-31 23:59:59'`。

`TIMESTAMP`数据类型用于包含日期和时间部分的值。`TIMESTAMP`的范围是`'1970-01-01 00:00:01'` UTC 到`'2038-01-19 03:14:07'` UTC。

`DATETIME`或`TIMESTAMP`值可以包含高达微秒（6 位数字）精度的尾随小数秒部分。特别是，插入到`DATETIME`或`TIMESTAMP`列中的值中的任何小数部分都会被存储而不是丢弃。包含小数部分时，这些值的格式为`'*`YYYY-MM-DD hh:mm:ss`*[.*`fraction`*]'`，`DATETIME`值的范围是`'1000-01-01 00:00:00.000000'`到`'9999-12-31 23:59:59.499999'`，`TIMESTAMP`值的范围是`'1970-01-01 00:00:01.000000'`到`'2038-01-19 03:14:07.499999'`。小数部分应始终用小数点与时间的其余部分分隔；不识别其他小数秒分隔符。有关 MySQL 中对小数秒的支持的信息，请参见第 13.2.6 节，“时间值中的小数秒”。

`TIMESTAMP`和`DATETIME`数据类型提供自动初始化和更新到当前日期和时间。有关更多信息，请参见第 13.2.5 节，“时间戳和日期时间的自动初始化和更新”。

MySQL 将`TIMESTAMP`值从当前时区转换为 UTC 进行存储，然后从 UTC 转换回当前时区进行检索。（对于`DATETIME`等其他类型，不会发生这种情况。）默认情况下，每个连接的当前时区是服务器的时区。时区可以根据每个连接设置。只要时区设置保持不变，您将获得与存储的相同值。如果存储了`TIMESTAMP`值，然后更改时区并检索该值，则检索到的值与存储的值不同。这是因为在两个方向的转换中没有使用相同的时区。当前时区可作为`time_zone`系统变量的值获得。有关更多信息，请参阅第 7.1.15 节，“MySQL 服务器时区支持”。

在 MySQL 8.0.19 及更高版本中，您可以在将`TIMESTAMP`或`DATETIME`值插入表时指定时区偏移量。有关更多信息和示例，请参阅第 11.1.3 节，“日期和时间文字”。

如果 SQL 模式允许此转换，则无效的`DATE`、`DATETIME`或`TIMESTAMP`值将被转换为相应类型的“零”值(`'0000-00-00'`或`'0000-00-00 00:00:00'`)。具体行为取决于是否启用了严格 SQL 模式和`NO_ZERO_DATE` SQL 模式中的哪一个；请参阅第 7.1.11 节，“服务器 SQL 模式”。

在 MySQL 8.0.22 及更高版本中，您可以使用带有`AT TIME ZONE`运算符的`CAST()`将`TIMESTAMP`值转换为 UTC`DATETIME`值，如下所示：

```sql
mysql> SELECT col,
     >     CAST(col AT TIME ZONE INTERVAL '+00:00' AS DATETIME) AS ut
     >     FROM ts ORDER BY id;
+---------------------+---------------------+
| col                 | ut                  |
+---------------------+---------------------+
| 2020-01-01 10:10:10 | 2020-01-01 15:10:10 |
| 2019-12-31 23:40:10 | 2020-01-01 04:40:10 |
| 2020-01-01 13:10:10 | 2020-01-01 18:10:10 |
| 2020-01-01 10:10:10 | 2020-01-01 15:10:10 |
| 2020-01-01 04:40:10 | 2020-01-01 09:40:10 |
| 2020-01-01 18:10:10 | 2020-01-01 23:10:10 |
+---------------------+---------------------+
```

有关语法和其他示例的完整信息，请参阅`CAST()`函数的描述。

要注意 MySQL 中日期值解释的某些属性：

+   MySQL 允许以字符串形式指定的值采用“宽松”格式，在这种格式中，任何标点符号都可以用作日期部分或时间部分之间的分隔符。在某些情况下，这种语法可能会产生误导。例如，像`'10:11:12'`这样的值可能看起来像一个时间值，因为有`:`，但如果在日期上下文中使用，则会被解释为年份`'2010-11-12'`。值`'10:45:15'`会被转换为`'0000-00-00'`，因为`'45'`不是一个有效的月份。

    在日期和时间部分与小数秒部分之间唯一识别的分隔符是小数点。

+   服务器要求月份和日期值有效，而不仅仅是在 1 到 12 和 1 到 31 的范围内。在禁用严格模式的情况下，无效日期如`'2004-04-31'`会被转换为`'0000-00-00'`并生成警告。启用严格模式时，无效日期会生成错误。要允许这样的日期，启用`ALLOW_INVALID_DATES`。更多信息请参见 Section 7.1.11, “Server SQL Modes”。

+   MySQL 不接受在日期或月份列中包含零或不是有效日期的`TIMESTAMP`值。唯一的例外是特殊的“零”值`'0000-00-00 00:00:00'`，如果 SQL 模式允许这个值。具体行为取决于是否启用了严格 SQL 模式和`NO_ZERO_DATE` SQL 模式中的哪一个；参见 Section 7.1.11, “Server SQL Modes”。

+   包含 2 位数年份值的日期是模棱两可的，因为世纪未知。MySQL 使用以下规则解释 2 位数年份值：

    +   范围在`00-69`的年份值变为`2000-2069`。

    +   范围在`70-99`的年份值变为`1970-1999`。

    另请参见 Section 13.2.9, “2-Digit Years in Dates”。
