- en: 1\. Overview
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://sqlite.com/dbhash.html](https://sqlite.com/dbhash.html)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: The **dbhash** (or **dbhash.exe** on Windows) utility is a command-line program
    that computes the SHA1 hash of the schema and content for an SQLite database.
  prefs: []
  type: TYPE_NORMAL
- en: 'Dbhash ignores extraneous formatting details and hashes only the database schema
    and content. Hence the hash is constant even if the database file is modified
    by:'
  prefs: []
  type: TYPE_NORMAL
- en: '[VACUUM](lang_vacuum.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRAGMA page_size](pragma.html#pragma_page_size)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRAGMA journal_mode](pragma.html#pragma_journal_mode)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[REINDEX](lang_reindex.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[ANALYZE](lang_analyze.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: copied via the [backup API](backup.html)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '... and so forth'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The operations above can potentially cause vast changes the raw database file,
    and hence cause very different SHA1 hashes at the file level. But since the content
    represented in the database file is unchanged by these operations, the hash computed
    by dbhash is also unchanged.
  prefs: []
  type: TYPE_NORMAL
- en: Dbhash can be used to compare two databases to confirm that they are equivalent,
    even though their representation on disk is quite different. Dbhash might also
    be used to verify the content of a remote database without having to transmit
    the entire content of the remote database over a slow link.
  prefs: []
  type: TYPE_NORMAL
- en: 2\. Usage
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Dbhash is a command-line utility. To run it, type "dbhash" on a command-line
    prompt followed by the names of one or more SQLite database files that are to
    be hashed. The database hashes will be displayed on standard output. For example:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: Dbhash supports command-line options that can restrict the tables of the database
    file that are hashed, or restrict the hash to only content or only the schema.
    Run "dbhash --help" for further information.
  prefs: []
  type: TYPE_NORMAL
- en: 3\. Building
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'To build a copy of the dbhash utility program on unix, get a copy of the canonical
    SQLite source code and enter:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'On Windows, enter:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: The dbhash program is implemented by a single file of C-code called [dbhash.c](https://www.sqlite.org/src/artifact?ci=trunk&filename=tool/dbhash.c).
    To build the dbhash program manually, simply compile the dbhash.c source file
    and link it against the SQLite library.
  prefs: []
  type: TYPE_NORMAL
