- en: 原文：[https://dev.mysql.com/doc/refman/8.0/en/alter-user.html](https://dev.mysql.com/doc/refman/8.0/en/alter-user.html)
  id: totrans-0
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://dev.mysql.com/doc/refman/8.0/en/alter-user.html](https://dev.mysql.com/doc/refman/8.0/en/alter-user.html)
- en: 15.7.1.1 ALTER USER Statement
  id: totrans-1
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 15.7.1.1 ALTER USER Statement
- en: '[PRE0]'
  id: totrans-2
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: The [`ALTER USER`](alter-user.html "15.7.1.1 ALTER USER Statement") statement
    modifies MySQL accounts. It enables authentication, role, SSL/TLS, resource-limit,
    password-management, comment, and attribute properties to be modified for existing
    accounts. It can also be used to lock and unlock accounts.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '[`ALTER USER`](alter-user.html "15.7.1.1 ALTER USER Statement")语句修改MySQL账户。它允许对现有账户进行身份验证、角色、SSL/TLS、资源限制、密码管理、注释和属性属性的修改。它还可以用于锁定和解锁账户。'
- en: 'In most cases, [`ALTER USER`](alter-user.html "15.7.1.1 ALTER USER Statement")
    requires the global [`CREATE USER`](privileges-provided.html#priv_create-user)
    privilege, or the [`UPDATE`](privileges-provided.html#priv_update) privilege for
    the `mysql` system schema. The exceptions are:'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 在大多数情况下，[`ALTER USER`](alter-user.html "15.7.1.1 ALTER USER Statement")需要全局[`CREATE
    USER`](privileges-provided.html#priv_create-user)权限，或者`mysql`系统模式的[`UPDATE`](privileges-provided.html#priv_update)权限。例外情况包括：
- en: 'Any client who connects to the server using a nonanonymous account can change
    the password for that account. (In particular, you can change your own password.)
    To see which account the server authenticated you as, invoke the [`CURRENT_USER()`](information-functions.html#function_current-user)
    function:'
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 任何使用非匿名账户连接到服务器的客户端都可以更改该账户的密码。（特别是，您可以更改自己的密码。）要查看服务器对您进行身份验证的账户，请调用[`CURRENT_USER()`](information-functions.html#function_current-user)函数：
- en: '[PRE1]'
  id: totrans-6
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'For `DEFAULT ROLE` syntax, [`ALTER USER`](alter-user.html "15.7.1.1 ALTER USER
    Statement") requires these privileges:'
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于`DEFAULT ROLE`语法，[`ALTER USER`](alter-user.html "15.7.1.1 ALTER USER Statement")需要这些权限：
- en: Setting the default roles for another user requires the global [`CREATE USER`](privileges-provided.html#priv_create-user)
    privilege, or the [`UPDATE`](privileges-provided.html#priv_update) privilege for
    the `mysql.default_roles` system table.
  id: totrans-8
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为另一个用户设置默认角色需要全局[`CREATE USER`](privileges-provided.html#priv_create-user)权限，或者`mysql.default_roles`系统表的[`UPDATE`](privileges-provided.html#priv_update)权限。
- en: Setting the default roles for yourself requires no special privileges, as long
    as the roles you want as the default have been granted to you.
  id: totrans-9
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为自己设置默认角色不需要特殊权限，只要您想要的默认角色已经授予您。
- en: 'Statements that modify secondary passwords require these privileges:'
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修改次要密码的语句需要这些权限：
- en: The [`APPLICATION_PASSWORD_ADMIN`](privileges-provided.html#priv_application-password-admin)
    privilege is required to use the `RETAIN CURRENT PASSWORD` or `DISCARD OLD PASSWORD`
    clause for [`ALTER USER`](alter-user.html "15.7.1.1 ALTER USER Statement") statements
    that apply to your own account. The privilege is required to manipulate your own
    secondary password because most users require only one password.
  id: totrans-11
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用`RETAIN CURRENT PASSWORD`或`DISCARD OLD PASSWORD`子句需要[`APPLICATION_PASSWORD_ADMIN`](privileges-provided.html#priv_application-password-admin)权限，用于适用于您自己账户的[`ALTER
    USER`](alter-user.html "15.7.1.1 ALTER USER Statement")语句。该权限用于操作您自己的次要密码，因为大多数用户只需要一个密码。
- en: If an account is to be permitted to manipulate secondary passwords for all accounts,
    it requires the [`CREATE USER`](privileges-provided.html#priv_create-user) privilege
    rather than [`APPLICATION_PASSWORD_ADMIN`](privileges-provided.html#priv_application-password-admin).
  id: totrans-12
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果要允许一个账户操作所有账户的次要密码，则需要[`CREATE USER`](privileges-provided.html#priv_create-user)权限，而不是[`APPLICATION_PASSWORD_ADMIN`](privileges-provided.html#priv_application-password-admin)。
- en: When the [`read_only`](server-system-variables.html#sysvar_read_only) system
    variable is enabled, [`ALTER USER`](alter-user.html "15.7.1.1 ALTER USER Statement")
    additionally requires the [`CONNECTION_ADMIN`](privileges-provided.html#priv_connection-admin)
    privilege (or the deprecated [`SUPER`](privileges-provided.html#priv_super) privilege).
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 当启用[`read_only`](server-system-variables.html#sysvar_read_only)系统变量时，[`ALTER
    USER`](alter-user.html "15.7.1.1 ALTER USER Statement")还需要[`CONNECTION_ADMIN`](privileges-provided.html#priv_connection-admin)权限（或已弃用的[`SUPER`](privileges-provided.html#priv_super)权限）。
- en: 'As of MySQL 8.0.27, these additional privilege considerations apply:'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 从MySQL 8.0.27开始，这些额外的权限考虑因素适用：
- en: The [`authentication_policy`](server-system-variables.html#sysvar_authentication_policy)
    system variable places certain constraints on how the authentication-related clauses
    of [`ALTER USER`](alter-user.html "15.7.1.1 ALTER USER Statement") statements
    may be used; for details, see the description of that variable. These constraints
    do not apply if you have the [`AUTHENTICATION_POLICY_ADMIN`](privileges-provided.html#priv_authentication-policy-admin)
    privilege.
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`authentication_policy`](server-system-variables.html#sysvar_authentication_policy)系统变量对[`ALTER
    USER`](alter-user.html "15.7.1.1 修改用户语句")语句中与身份验证相关的子句的使用施加了一定的约束；有关详细信息，请参阅该变量的描述。如果具有[`AUTHENTICATION_POLICY_ADMIN`](privileges-provided.html#priv_authentication-policy-admin)权限，则不适用这些约束。'
- en: To modify an account that uses passwordless authentication, you must have the
    [`PASSWORDLESS_USER_ADMIN`](privileges-provided.html#priv_passwordless-user-admin)
    privilege.
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 要修改使用无密码身份验证的帐户，必须具有[`PASSWORDLESS_USER_ADMIN`](privileges-provided.html#priv_passwordless-user-admin)权限。
- en: By default, an error occurs if you try to modify a user that does not exist.
    If the `IF EXISTS` clause is given, the statement produces a warning for each
    named user that does not exist, rather than an error.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，如果尝试修改不存在的用户，则会发生错误。如果提供了`IF EXISTS`子句，则该语句会对每个不存在的命名用户产生警告，而不是错误。
- en: Important
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: Under some circumstances, [`ALTER USER`](alter-user.html "15.7.1.1 ALTER USER
    Statement") may be recorded in server logs or on the client side in a history
    file such as `~/.mysql_history`, which means that cleartext passwords may be read
    by anyone having read access to that information. For information about the conditions
    under which this occurs for the server logs and how to control it, see [Section 8.1.2.3,
    “Passwords and Logging”](password-logging.html "8.1.2.3 Passwords and Logging").
    For similar information about client-side logging, see [Section 6.5.1.3, “mysql
    Client Logging”](mysql-logging.html "6.5.1.3 mysql Client Logging").
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 在某些情况下，[`ALTER USER`](alter-user.html "15.7.1.1 修改用户语句")可能会记录在服务器日志中或客户端的历史文件中，例如`~/.mysql_history`，这意味着明文密码可能会被任何具有读取权限的人读取。有关服务器日志中发生这种情况的条件以及如何控制它的信息，请参阅[第8.1.2.3节，“密码和日志记录”](password-logging.html
    "8.1.2.3 密码和日志记录")。有关客户端日志记录的类似信息，请参阅[第6.5.1.3节，“mysql客户端日志记录”](mysql-logging.html
    "6.5.1.3 mysql客户端日志记录")。
- en: 'There are several aspects to the [`ALTER USER`](alter-user.html "15.7.1.1 ALTER
    USER Statement") statement, described under the following topics:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: '[`ALTER USER`](alter-user.html "15.7.1.1 修改用户语句")语句有几个方面，分别在以下主题下描述：'
- en: '[ALTER USER Overview](alter-user.html#alter-user-overview "ALTER USER Overview")'
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[修改用户概述](alter-user.html#alter-user-overview "修改用户概述")'
- en: '[ALTER USER Authentication Options](alter-user.html#alter-user-authentication
    "ALTER USER Authentication Options")'
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[修改用户身份验证选项](alter-user.html#alter-user-authentication "修改用户身份验证选项")'
- en: '[ALTER USER Multifactor Authentication Options](alter-user.html#alter-user-multifactor-authentication
    "ALTER USER Multifactor Authentication Options")'
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[修改用户多因素身份验证选项](alter-user.html#alter-user-multifactor-authentication "修改用户多因素身份验证选项")'
- en: '[ALTER USER Registration Options](alter-user.html#alter-user-registration-
    "ALTER USER Registration Options")'
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[修改用户注册选项](alter-user.html#alter-user-registration- "修改用户注册选项")'
- en: '[ALTER USER Role Options](alter-user.html#alter-user-role "ALTER USER Role
    Options")'
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[修改用户角色选项](alter-user.html#alter-user-role "修改用户角色选项")'
- en: '[ALTER USER SSL/TLS Options](alter-user.html#alter-user-tls "ALTER USER SSL/TLS
    Options")'
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[修改用户SSL/TLS选项](alter-user.html#alter-user-tls "修改用户SSL/TLS选项")'
- en: '[ALTER USER Resource-Limit Options](alter-user.html#alter-user-resource-limits
    "ALTER USER Resource-Limit Options")'
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[修改用户资源限制选项](alter-user.html#alter-user-resource-limits "修改用户资源限制选项")'
- en: '[ALTER USER Password-Management Options](alter-user.html#alter-user-password-management
    "ALTER USER Password-Management Options")'
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[修改用户密码管理选项](alter-user.html#alter-user-password-management "修改用户密码管理选项")'
- en: '[ALTER USER Comment and Attribute Options](alter-user.html#alter-user-comments-attributes
    "ALTER USER Comment and Attribute Options")'
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[修改用户注释和属性选项](alter-user.html#alter-user-comments-attributes "修改用户注释和属性选项")'
- en: '[ALTER USER Account-Locking Options](alter-user.html#alter-user-account-locking
    "ALTER USER Account-Locking Options")'
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[修改用户账户锁定选项](alter-user.html#alter-user-account-locking "修改��户账户锁定选项")'
- en: '[ALTER USER Binary Logging](alter-user.html#alter-user-binary-logging "ALTER
    USER Binary Logging")'
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[修改用户二进制日志记录](alter-user.html#alter-user-binary-logging "修改用户二进制日志记录")'
- en: ALTER USER Overview
  id: totrans-32
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 修改用户概述
- en: For each affected account, [`ALTER USER`](alter-user.html "15.7.1.1 ALTER USER
    Statement") modifies the corresponding row in the `mysql.user` system table to
    reflect the properties specified in the statement. Unspecified properties retain
    their current values.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 对于每个受影响的帐户，[`ALTER USER`](alter-user.html "15.7.1.1 ALTER USER Statement")修改`mysql.user`系统表中对应行，以反映语句中指定的属性。未指定的属性保留其当前值。
- en: Each account name uses the format described in [Section 8.2.4, “Specifying Account
    Names”](account-names.html "8.2.4 Specifying Account Names"). The host name part
    of the account name, if omitted, defaults to `'%'`. It is also possible to specify
    [`CURRENT_USER`](information-functions.html#function_current-user) or [`CURRENT_USER()`](information-functions.html#function_current-user)
    to refer to the account associated with the current session.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 每个帐户名称使用[第8.2.4节“指定帐户名称”](account-names.html "8.2.4 Specifying Account Names")中描述的格式。如果省略帐户名称的主机名部分，默认为`'%'`。还可以指定[`CURRENT_USER`](information-functions.html#function_current-user)或[`CURRENT_USER()`](information-functions.html#function_current-user)来引用与当前会话关联的帐户。
- en: 'In one case only, the account may be specified with the [`USER()`](information-functions.html#function_user)
    function:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 仅在一个情况下，可以使用[`USER()`](information-functions.html#function_user)函数指定帐户：
- en: '[PRE2]'
  id: totrans-36
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: This syntax enables changing your own password without naming your account literally.
    (The syntax also supports the `REPLACE`, `RETAIN CURRENT PASSWORD`, and `DISCARD
    OLD PASSWORD` clauses described at [ALTER USER Authentication Options](alter-user.html#alter-user-authentication
    "ALTER USER Authentication Options").)
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 这种语法使您可以在不明确命名您的帐户的情况下更改自己的密码。（该语法还支持[ALTER USER身份验证选项](alter-user.html#alter-user-authentication
    "ALTER USER Authentication Options")中描述的`REPLACE`、`RETAIN CURRENT PASSWORD`和`DISCARD
    OLD PASSWORD`子句。）
- en: For [`ALTER USER`](alter-user.html "15.7.1.1 ALTER USER Statement") syntax that
    permits an *`auth_option`* value to follow a *`user`* value, *`auth_option`* indicates
    how the account authenticates by specifying an account authentication plugin,
    credentials (for example, a password), or both. Each *`auth_option`* value applies
    *only* to the account named immediately preceding it.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 对于允许*`auth_option`*值跟随*`user`*值的[`ALTER USER`](alter-user.html "15.7.1.1 ALTER
    USER Statement")语法，*`auth_option`*通过指定帐户身份验证插件、凭据（例如密码）或两者来指示帐户如何进行身份验证。每个*`auth_option`*值仅适用于紧随其前的帐户。
- en: Following the *`user`* specifications, the statement may include options for
    SSL/TLS, resource-limit, password-management, and locking properties. All such
    options are *global* to the statement and apply to *all* accounts named in the
    statement.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 根据*`user`*规范，该语句可能包括SSL/TLS、资源限制、密码管理和锁定属性的选项。所有这些选项都是语句的*全局*选项，并适用于语句中命名的*所有*帐户。
- en: 'Example: Change an account''s password and expire it. As a result, the user
    must connect with the named password and choose a new one at the next connection:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 示例：更改帐户的密码并将其过期。结果是，用户必须使用指定的密码连接，并在下次连接时选择一个新密码：
- en: '[PRE3]'
  id: totrans-41
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Example: Modify an account to use the `caching_sha2_password` authentication
    plugin and the given password. Require that a new password be chosen every 180
    days, and enable failed-login tracking, such that three consecutive incorrect
    passwords cause temporary account locking for two days:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 示例：修改帐户以使用`caching_sha2_password`身份验证插件和给定密码。要求每180天选择一个新密码，并启用失败登录跟踪，以便连续三次输入错误密码导致临时锁定帐户两天：
- en: '[PRE4]'
  id: totrans-43
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Example: Lock or unlock an account:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 示例：锁定或解锁帐户：
- en: '[PRE5]'
  id: totrans-45
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'Example: Require an account to connect using SSL and establish a limit of 20
    connections per hour:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 示例：要求帐户使用SSL连接，并在每小时建立20个连接的限制：
- en: '[PRE6]'
  id: totrans-47
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'Example: Alter multiple accounts, specifying some per-account properties and
    some global properties:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 示例：更改多个帐户，指定一些每个帐户的属性和一些全局属性：
- en: '[PRE7]'
  id: totrans-49
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: The `IDENTIFIED BY` value following `jeffrey` applies only to its immediately
    preceding account, so it changes the password to `'*`jeffrey_new_password`*'`
    only for `jeffrey`. For `jeanne`, there is no per-account value (thus leaving
    the password unchanged). For `josh`, `IDENTIFIED BY` establishes a new password
    (`'*`josh_new_password`*'`), `REPLACE` is specified to verify that the user issuing
    the [`ALTER USER`](alter-user.html "15.7.1.1 ALTER USER Statement") statement
    knows the current password (`'*`josh_current_password`*'`), and that current password
    is also retained as the account secondary password. (As a result, `josh` can connect
    with either the primary or secondary password.)
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: '`jeffrey`后面的`IDENTIFIED BY`值仅适用于其紧接的帐户，因此它仅为`jeffrey`更改密码为`''*`jeffrey_new_password`*''`。对于`jeanne`，没有每个帐户的值（因此密码保持不变）。对于`josh`，`IDENTIFIED
    BY`建立了一个新密码（`''*`josh_new_password`*''`），指定`REPLACE`以验证发出[`ALTER USER`](alter-user.html
    "15.7.1.1 ALTER USER Statement")语句的用户知道当前密码（`''*`josh_current_password`*''`），并且当前密码也保留为帐户的次要密码。（因此，`josh`可以使用主密码或次要密码连接。）'
- en: 'The remaining properties apply globally to all accounts named in the statement,
    so for both accounts:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 剩余属性全局适用于语句中命名的所有帐户，因此对于两个帐户：
- en: Connections are required to use SSL.
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 连接需要使用SSL。
- en: The account can be used for a maximum of two simultaneous connections.
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 该帐户最多可用于两个同时连接。
- en: Password changes cannot reuse any of the five most recent passwords.
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 密码更改不能重复使用最近的五个密码。
- en: 'Example: Discard the secondary password for `josh`, leaving the account with
    only its primary password:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 示例：丢弃`josh`的次要密码，只留下主密码：
- en: '[PRE8]'
  id: totrans-56
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: In the absence of a particular type of option, the account remains unchanged
    in that respect. For example, with no locking option, the locking state of the
    account is not changed.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 在缺少特定类型选项的情况下，帐户在这方面保持不变。例如，没有锁定选项，帐户的锁定状态不会改变。
- en: ALTER USER Authentication Options
  id: totrans-58
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: ALTER USER认证选项
- en: An account name may be followed by an *`auth_option`* authentication option
    that specifies the account authentication plugin, credentials, or both. It may
    also include a password-verification clause that specifies the account current
    password to be replaced, and clauses that manage whether an account has a secondary
    password.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 一个帐户名后面可以跟着一个*`auth_option`*认证选项，指定帐户认证插件、凭据，或两者兼有。它还可以包括一个密码验证子句，指定要替换的帐户当前密码，并管理帐户是否有次要密码。
- en: Note
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: Clauses for random password generation, password verification, and secondary
    passwords apply only to accounts that use an authentication plugin that stores
    credentials internally to MySQL. For accounts that use a plugin that performs
    authentication against a credentials system that is external to MySQL, password
    management must be handled externally against that system as well. For more information
    about internal credentials storage, see [Section 8.2.15, “Password Management”](password-management.html
    "8.2.15 Password Management").
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 仅适用于使用将凭据存储在MySQL内部的认证插件的帐户的随机密码生成、密码验证和次要密码子句。对于使用针对MySQL外部凭据系统执行身份验证的插件的帐户，密码管理也必须在该系统外部处理。有关内部凭据存储的更多信息，请参见[第8.2.15节，“密码管理”](password-management.html
    "8.2.15 密码管理")。
- en: '*`auth_plugin`* names an authentication plugin. The plugin name can be a quoted
    string literal or an unquoted name. Plugin names are stored in the `plugin` column
    of the `mysql.user` system table.'
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*`auth_plugin`*指定认证插件。插件名称可以是带引号的字符串文字，也可以是未带引号的名称。插件名称存储在`mysql.user`系统表的`plugin`列中。'
- en: For *`auth_option`* syntax that does not specify an authentication plugin, the
    server assigns the default plugin, determined as described in [The Default Authentication
    Plugin](pluggable-authentication.html#pluggable-authentication-default-plugin
    "The Default Authentication Plugin"). For descriptions of each plugin, see [Section 8.4.1,
    “Authentication Plugins”](authentication-plugins.html "8.4.1 Authentication Plugins").
  id: totrans-63
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对于不指定认证插件的*`auth_option`*语法，服务器分配默认插件，如[默认认证插件](pluggable-authentication.html#pluggable-authentication-default-plugin
    "默认认证插件")中所述确定。有关每个插件的描述，请参见[第8.4.1节，“认证插件”](authentication-plugins.html "8.4.1 认证插件")。
- en: 'Credentials that are stored internally are stored in the `mysql.user` system
    table. An `''*`auth_string`*''` value or `RANDOM PASSWORD` specifies account credentials,
    either as a cleartext (unencrypted) string or hashed in the format expected by
    the authentication plugin associated with the account, respectively:'
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 存储在内部的凭据存储在 `mysql.user` 系统表中。`'*`auth_string`*'` 值或 `RANDOM PASSWORD` 指定账户凭据，分别作为明文（未加密）字符串或以与账户关联的认证插件期望的格式进行哈希处理的形式：
- en: For syntax that uses `BY '*`auth_string`*'`, the string is cleartext and is
    passed to the authentication plugin for possible hashing. The result returned
    by the plugin is stored in the `mysql.user` table. A plugin may use the value
    as specified, in which case no hashing occurs.
  id: totrans-65
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于使用 `BY '*`auth_string`*'` 语法的情况，该字符串是明文的，并且传递给认证插件进行可能的哈希处理。插件返回的结果存储在 `mysql.user`
    表中。插件可以按照指定的值使用该值，这种情况下不会进行哈希处理。
- en: For syntax that uses `BY RANDOM PASSWORD`, MySQL generates a random password
    and as cleartext and passes it to the authentication plugin for possible hashing.
    The result returned by the plugin is stored in the `mysql.user` table. A plugin
    may use the value as specified, in which case no hashing occurs.
  id: totrans-66
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于使用 `BY RANDOM PASSWORD` 语法的情况，MySQL 生成一个随机密码并作为明文传递给认证插件进行可能的哈希处理。插件返回的结果存储在
    `mysql.user` 表中。插件可以按照指定的值使用该值，这种情况下不会进行哈希处理。
- en: Randomly generated passwords are available as of MySQL 8.0.18 and have the characteristics
    described in [Random Password Generation](password-management.html#random-password-generation
    "Random Password Generation").
  id: totrans-67
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: 随机生成的密码从 MySQL 8.0.18 开始可用，并具有 [随机密码生成](password-management.html#random-password-generation
    "Random Password Generation") 中描述的特性。
- en: For syntax that uses `AS '*`auth_string`*'`, the string is assumed to be already
    in the format the authentication plugin requires, and is stored as is in the `mysql.user`
    table. If a plugin requires a hashed value, the value must be already hashed in
    a format appropriate for the plugin; otherwise, the value cannot be used by the
    plugin and correct authentication of client connections does not occur.
  id: totrans-68
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于使用 `AS '*`auth_string`*'` 语法的情况，该字符串被假定已经是认证插件所需的格式，并且原样存储在 `mysql.user` 表中。如果插件需要哈希值，则该值必须已经以适合插件的格式进行哈希处理；否则，插件无法使用该值，也无法正确验证客户端连接。
- en: As of MySQL 8.0.17, a hashed string can be either a string literal or a hexadecimal
    value. The latter corresponds to the type of value displayed by [`SHOW CREATE
    USER`](show-create-user.html "15.7.7.12 SHOW CREATE USER Statement") for password
    hashes containing unprintable characters when the [`print_identified_with_as_hex`](server-system-variables.html#sysvar_print_identified_with_as_hex)
    system variable is enabled.
  id: totrans-69
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: 从 MySQL 8.0.17 开始，哈希字符串可以是字符串文字或十六进制值。后者对应于当启用 [`print_identified_with_as_hex`](server-system-variables.html#sysvar_print_identified_with_as_hex)
    系统变量时，包含不可打印字符的密码哈希的 [`SHOW CREATE USER`](show-create-user.html "15.7.7.12 SHOW
    CREATE USER Statement") 显示的值类型。
- en: 'If an authentication plugin performs no hashing of the authentication string,
    the `BY ''*`auth_string`*''` and `AS ''*`auth_string`*''` clauses have the same
    effect: The authentication string is stored as is in the `mysql.user` system table.'
  id: totrans-70
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果认证插件不对认证字符串进行哈希处理，则 `BY '*`auth_string`*'` 和 `AS '*`auth_string`*'` 子句具有相同的效果：认证字符串原样存储在
    `mysql.user` 系统表中。
- en: 'The `REPLACE ''*`current_auth_string`*''` clause performs password verification
    and is available as of MySQL 8.0.13\. If given:'
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`REPLACE ''*`current_auth_string`*''` 子句执行密码验证，并从 MySQL 8.0.13 开始可用。如果给出：'
- en: '`REPLACE` specifies the account current password to be replaced, as a cleartext
    (unencrypted) string.'
  id: totrans-72
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`REPLACE` 指定要替换的账户当前密码，作为明文（未加密）字符串。'
- en: The clause must be given if password changes for the account are required to
    specify the current password, as verification that the user attempting to make
    the change actually knows the current password.
  id: totrans-73
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果账户的密码更改需要指定当前密码以验证尝试进行更改的用户实际上知道当前密码，则必须给出该子句。
- en: The clause is optional if password changes for the account may but need not
    specify the current password.
  id: totrans-74
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果账户的密码更改可能但不一定需要指定当前密码，则该子句是可选的。
- en: The statement fails if the clause is given but does not match the current password,
    even if the clause is optional.
  id: totrans-75
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果给出了该子句但与当前密码不匹配，则语句将失败，即使该子句是可选的。
- en: '`REPLACE` can be specified only when changing the account password for the
    current user.'
  id: totrans-76
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 只有在更改当前用户的账户密码时才能指定 `REPLACE`。
- en: For more information about password verification by specifying the current password,
    see [Section 8.2.15, “Password Management”](password-management.html "8.2.15 Password
    Management").
  id: totrans-77
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 有关通过指定当前密码进行密码验证的更多信息，请参见[第8.2.15节，“密码管理”](password-management.html "8.2.15 密码管理")。
- en: 'The `RETAIN CURRENT PASSWORD` and `DISCARD OLD PASSWORD` clauses implement
    dual-password capability and are available as of MySQL 8.0.14\. Both are optional,
    but if given, have the following effects:'
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`RETAIN CURRENT PASSWORD`和`DISCARD OLD PASSWORD`子句实现了双密码功能，并自MySQL 8.0.14起可用。两者都是可选的，但如果给出，则具有以下效果：'
- en: '`RETAIN CURRENT PASSWORD` retains an account current password as its secondary
    password, replacing any existing secondary password. The new password becomes
    the primary password, but clients can use the account to connect to the server
    using either the primary or secondary password. (Exception: If the new password
    specified by the [`ALTER USER`](alter-user.html "15.7.1.1 ALTER USER Statement")
    statement is empty, the secondary password becomes empty as well, even if `RETAIN
    CURRENT PASSWORD` is given.)'
  id: totrans-79
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`RETAIN CURRENT PASSWORD`保留账户当前密码作为其次要密码，替换任何现有的次要密码。新密码成为主密码，但客户端可以使用账户使用主密码或次要密码连接到服务器。（例外情况：如果[`ALTER
    USER`](alter-user.html "15.7.1.1 ALTER USER语句")语句指定的新密码为空，则次要密码也变为空，即使给出了`RETAIN
    CURRENT PASSWORD`。）'
- en: If you specify `RETAIN CURRENT PASSWORD` for an account that has an empty primary
    password, the statement fails.
  id: totrans-80
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果为具有空主密码的账户指定了`RETAIN CURRENT PASSWORD`，则该语句将失败。
- en: If an account has a secondary password and you change its primary password without
    specifying `RETAIN CURRENT PASSWORD`, the secondary password remains unchanged.
  id: totrans-81
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果一个账户有次要密码，并且您更改其主密码而没有指定`RETAIN CURRENT PASSWORD`，则次要密码保持不变。
- en: If you change the authentication plugin assigned to the account, the secondary
    password is discarded. If you change the authentication plugin and also specify
    `RETAIN CURRENT PASSWORD`, the statement fails.
  id: totrans-82
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果更改分配给账户的身份验证插件，则次要密码将被丢弃。如果更改身份验证插件并且还指定了`RETAIN CURRENT PASSWORD`，则该语句将失败。
- en: '`DISCARD OLD PASSWORD` discards the secondary password, if one exists. The
    account retains only its primary password, and clients can use the account to
    connect to the server only with the primary password.'
  id: totrans-83
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DISCARD OLD PASSWORD`丢弃次要密码（如果存在）。账户仅保留其主密码，客户端只能使用主密码连接到服务器。'
- en: For more information about use of dual passwords, see [Section 8.2.15, “Password
    Management”](password-management.html "8.2.15 Password Management").
  id: totrans-84
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 有关双密码使用的更多信息，请参见[第8.2.15节，“密码管理”](password-management.html "8.2.15 密码管理")。
- en: '[`ALTER USER`](alter-user.html "15.7.1.1 ALTER USER Statement") permits these
    *`auth_option`* syntaxes:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: '[`ALTER USER`](alter-user.html "15.7.1.1 ALTER USER语句")允许这些*`auth_option`*语法：'
- en: '`IDENTIFIED BY ''*`auth_string`*'' [REPLACE ''*`current_auth_string`*''] [RETAIN
    CURRENT PASSWORD]`'
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`IDENTIFIED BY ''*`auth_string`*'' [REPLACE ''*`current_auth_string`*''] [RETAIN
    CURRENT PASSWORD]`'
- en: Sets the account authentication plugin to the default plugin, passes the cleartext
    `'*`auth_string`*'` value to the plugin for possible hashing, and stores the result
    in the account row in the `mysql.user` system table.
  id: totrans-87
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 将账户身份验证插件设置为默认插件，将明文`'*`auth_string`*'`值传递给插件进行可能的哈希处理，并将结果存储在`mysql.user`系统表中的账户行中。
- en: The `REPLACE` clause, if given, specifies the account current password, as described
    previously in this section.
  id: totrans-88
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果指定了`REPLACE`子句，则指定了当前账户密码，如本节前文所述。
- en: The `RETAIN CURRENT PASSWORD` clause, if given, causes the account current password
    to be retained as its secondary password, as described previously in this section.
  id: totrans-89
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果给出了`RETAIN CURRENT PASSWORD`子句，则导致保留账户当前密码作为其次要密码，如本节前文所述。
- en: '`IDENTIFIED BY RANDOM PASSWORD [REPLACE ''*`current_auth_string`*''] [RETAIN
    CURRENT PASSWORD]`'
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`IDENTIFIED BY RANDOM PASSWORD [REPLACE ''*`current_auth_string`*''] [RETAIN
    CURRENT PASSWORD]`'
- en: Sets the account authentication plugin to the default plugin, generates a random
    password, passes the cleartext password value to the plugin for possible hashing,
    and stores the result in the account row in the `mysql.user` system table. The
    statement also returns the cleartext password in a result set to make it available
    to the user or application executing the statement. For details about the result
    set and characteristics of randomly generated passwords, see [Random Password
    Generation](password-management.html#random-password-generation "Random Password
    Generation").
  id: totrans-91
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 将账户认证插件设置为默认插件，生成一个随机密码，将明文密码值传递给插件进行可能的哈希处理，并将结果存储在`mysql.user`系统表中的账户行中。该语句还会将明文密码作为结果集返回，以便用户或应用程序执行该语句时使用。有关结果集和随机生成密码特性的详细信息，请参见[随机密码生成](password-management.html#random-password-generation
    "随机密码生成")。
- en: The `REPLACE` clause, if given, specifies the account current password, as described
    previously in this section.
  id: totrans-92
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`REPLACE`子句，如果给定，指定账户当前密码，如本节前文所述。'
- en: The `RETAIN CURRENT PASSWORD` clause, if given, causes the account current password
    to be retained as its secondary password, as described previously in this section.
  id: totrans-93
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`RETAIN CURRENT PASSWORD`子句，如果给定，会导致账户当前密码保留为其次要密码，如本节前文所述。'
- en: '`IDENTIFIED WITH *`auth_plugin`*`'
  id: totrans-94
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`IDENTIFIED WITH *`auth_plugin`*`'
- en: Sets the account authentication plugin to *`auth_plugin`*, clears the credentials
    to the empty string (the credentials are associated with the old authentication
    plugin, not the new one), and stores the result in the account row in the `mysql.user`
    system table.
  id: totrans-95
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 将账户认证插件设置为*`auth_plugin`*，将凭据清空为空字符串（凭据与旧认证插件相关联，而不是新的插件），并将结果存储在`mysql.user`系统表中的账户行中。
- en: In addition, the password is marked expired. The user must choose a new one
    when next connecting.
  id: totrans-96
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此外，密码被标记为过期。用户在下次连接时必须选择新密码。
- en: '`IDENTIFIED WITH *`auth_plugin`* BY ''*`auth_string`*'' [REPLACE ''*`current_auth_string`*'']
    [RETAIN CURRENT PASSWORD]`'
  id: totrans-97
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`IDENTIFIED WITH *`auth_plugin`* BY ''*`auth_string`*'' [REPLACE ''*`current_auth_string`*'']
    [RETAIN CURRENT PASSWORD]`'
- en: Sets the account authentication plugin to *`auth_plugin`*, passes the cleartext
    `'*`auth_string`*'` value to the plugin for possible hashing, and stores the result
    in the account row in the `mysql.user` system table.
  id: totrans-98
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 将账户认证插件设置为*`auth_plugin`*，将明文`'*`auth_string`*'`值传递给插件进行可能的哈希处理，并将结果存储在`mysql.user`系统表中的账户行中。
- en: The `REPLACE` clause, if given, specifies the account current password, as described
    previously in this section.
  id: totrans-99
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`REPLACE`子句，如果给定，指定账户当前密码，如本节前文所述。'
- en: The `RETAIN CURRENT PASSWORD` clause, if given, causes the account current password
    to be retained as its secondary password, as described previously in this section.
  id: totrans-100
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`RETAIN CURRENT PASSWORD`子句，如果给定，会导致账户当前密码保留为其次要密码，如本节前文所述。'
- en: '`IDENTIFIED WITH *`auth_plugin`* BY RANDOM PASSWORD [REPLACE ''*`current_auth_string`*'']
    [RETAIN CURRENT PASSWORD]`'
  id: totrans-101
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`IDENTIFIED WITH *`auth_plugin`* BY RANDOM PASSWORD [REPLACE ''*`current_auth_string`*'']
    [RETAIN CURRENT PASSWORD]`'
- en: Sets the account authentication plugin to *`auth_plugin`*, generates a random
    password, passes the cleartext password value to the plugin for possible hashing,
    and stores the result in the account row in the `mysql.user` system table. The
    statement also returns the cleartext password in a result set to make it available
    to the user or application executing the statement. For details about the result
    set and characteristics of randomly generated passwords, see [Random Password
    Generation](password-management.html#random-password-generation "Random Password
    Generation").
  id: totrans-102
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 将账户认证插件设置为*`auth_plugin`*，生成一个随机密码，将明文密码值传递给插件进行可能的哈希处理，并将结果存储在`mysql.user`系统表中的账户行中。该语句还会将明文密码作为结果集返回，以便用户或应用程序执行该语句时使用。有关结果集和随机生成密码特性的详细信息，请参见[随机密码生成](password-management.html#random-password-generation
    "随机密码生成")。
- en: The `REPLACE` clause, if given, specifies the account current password, as described
    previously in this section.
  id: totrans-103
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`REPLACE`子句，如果给定，指定账户当前密码，如本节前文所述。'
- en: The `RETAIN CURRENT PASSWORD` clause, if given, causes the account current password
    to be retained as its secondary password, as described previously in this section.
  id: totrans-104
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`RETAIN CURRENT PASSWORD`子句，如果给定，会导致账户当前密码保留为其次要密码，如本节前文所述。'
- en: '`IDENTIFIED WITH *`auth_plugin`* AS ''*`auth_string`*''`'
  id: totrans-105
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`IDENTIFIED WITH *`auth_plugin`* AS ''*`auth_string`*''`'
- en: Sets the account authentication plugin to *`auth_plugin`* and stores the `'*`auth_string`*'`
    value as is in the `mysql.user` account row. If the plugin requires a hashed string,
    the string is assumed to be already hashed in the format the plugin requires.
  id: totrans-106
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 将账户认证插件设置为*`auth_plugin`*，并将`'*`auth_string`*'`值原样存储在`mysql.user`账户行中。如果插件需要哈希字符串，则假定字符串已经以插件所需的格式进行了哈希处理。
- en: '`DISCARD OLD PASSWORD`'
  id: totrans-107
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DISCARD OLD PASSWORD`'
- en: Discards the account secondary password, if there is one, as described previously
    in this section.
  id: totrans-108
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 丢弃账户的次要密码，如果存在的话，如本节前面描述的。
- en: 'Example: Specify the password as cleartext; the default plugin is used:'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 示例：将密码指定为明文；使用默认插件：
- en: '[PRE9]'
  id: totrans-110
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'Example: Specify the authentication plugin, along with a cleartext password
    value:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 示例：指定认证插件，以及一个明文密码值：
- en: '[PRE10]'
  id: totrans-112
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'Example: Like the preceding example, but in addition, specify the current password
    as a cleartext value to satisfy any account requirement that the user making the
    change knows that password:'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 示例：与前面的示例类似，但另外指定当前密码作为明文值，以满足用户更改时需要知道该密码的任何账户要求：
- en: '[PRE11]'
  id: totrans-114
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: The preceding statement fails unless the current user is `jeffrey` because `REPLACE`
    is permitted only for changes to the current user's password.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 除非当前用户是`jeffrey`，否则上述语句将失败，因为`REPLACE`仅允许更改当前用户的密码。
- en: 'Example: Establish a new primary password and retain the existing password
    as the secondary password:'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 示例：建立一个新的主密码，并保留现有密码作为次要密码：
- en: '[PRE12]'
  id: totrans-117
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'Example: Discard the secondary password, leaving the account with only its
    primary password:'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 示例：丢弃次要密码，仅保留账户的主密码：
- en: '[PRE13]'
  id: totrans-119
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'Example: Specify the authentication plugin, along with a hashed password value:'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 示例：指定认证插件，以及一个哈希密码值：
- en: '[PRE14]'
  id: totrans-121
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: For additional information about setting passwords and authentication plugins,
    see [Section 8.2.14, “Assigning Account Passwords”](assigning-passwords.html "8.2.14 Assigning
    Account Passwords"), and [Section 8.2.17, “Pluggable Authentication”](pluggable-authentication.html
    "8.2.17 Pluggable Authentication").
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 有关设置密码和认证插件的更多信息，请参见[第8.2.14节，“分配账户密码”](assigning-passwords.html "8.2.14 Assigning
    Account Passwords")和[第8.2.17节，“可插拔认证”](pluggable-authentication.html "8.2.17 Pluggable
    Authentication")。
- en: ALTER USER Multifactor Authentication Options
  id: totrans-123
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 更改用户多因素认证选项
- en: As of MySQL 8.0.27, [`ALTER USER`](alter-user.html "15.7.1.1 ALTER USER Statement")
    has `ADD`, `MODIFY`, and `DROP` clauses that enable authentication factors to
    be added, modified, or dropped. In each case, the clause specifies an operation
    to perform on one authentication factor, and optionally an operation on another
    authentication factor. For each operation, the *`factor`* item specifies the `FACTOR`
    keyword preceded by the number 2 or 3 to indicate whether the operation applies
    to the second or third authentication factor. (1 is not permitted in this context.
    To act on the first authentication factor, use the syntax described in [ALTER
    USER Authentication Options](alter-user.html#alter-user-authentication "ALTER
    USER Authentication Options").)
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 截至MySQL 8.0.27，[`ALTER USER`](alter-user.html "15.7.1.1 ALTER USER Statement")具有`ADD`、`MODIFY`和`DROP`子句，允许添加、修改或删除认证因素。在每种情况下，子句指定要对一个认证因素执行的操作，以及可选地对另一个认证因素执行的操作。对于每个操作，*`factor`*项指定了`FACTOR`关键字，前面跟着数字2或3，以指示操作是应用于第二个还是第三个认证因素。（在此上下文中不允许使用1。要对第一个认证因素执行操作，请使用[ALTER
    USER Authentication Options](alter-user.html#alter-user-authentication "ALTER
    USER Authentication Options")中描述的语法。）
- en: '[`ALTER USER`](alter-user.html "15.7.1.1 ALTER USER Statement") multifactor
    authentication clause constraints are defined by the [`authentication_policy`](server-system-variables.html#sysvar_authentication_policy)
    system variable. For example, the [`authentication_policy`](server-system-variables.html#sysvar_authentication_policy)
    setting controls the number of authentication factors that accounts may have,
    and for each factor, which authentication methods are permitted. See [Configuring
    the Multifactor Authentication Policy](multifactor-authentication.html#multifactor-authentication-policy
    "Configuring the Multifactor Authentication Policy").'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: '[`ALTER USER`](alter-user.html "15.7.1.1 ALTER USER Statement")多因素认证子句的约束由[`authentication_policy`](server-system-variables.html#sysvar_authentication_policy)系统变量定义。例如，[`authentication_policy`](server-system-variables.html#sysvar_authentication_policy)设置控制账户可以拥有的认证因素数量，以及对于每个因素，允许使用哪些认证方法。请参阅[配置多因素认证策略](multifactor-authentication.html#multifactor-authentication-policy
    "Configuring the Multifactor Authentication Policy")。'
- en: When [`ALTER USER`](alter-user.html "15.7.1.1 ALTER USER Statement") adds, modifies,
    or drops second and third factors in a single statement, operations are executed
    sequentially, but if any operation in the sequence fails the entire [`ALTER USER`](alter-user.html
    "15.7.1.1 ALTER USER Statement") statement fails.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 当[`ALTER USER`](alter-user.html "15.7.1.1 ALTER USER Statement")在单个语句中添加、修改或删除第二个和第三个因素时，操作是按顺序执行的，但如果序列中的任何操作失败，则整个[`ALTER
    USER`](alter-user.html "15.7.1.1 ALTER USER Statement")语句将失败。
- en: For `ADD`, each named factor must not already exist or it cannot be added. For
    `MODIFY` and `DROP`, each named factor must exist to be modified or dropped. If
    a second and third factor are defined, dropping the second factor causes the third
    factor to take its place as the second factor.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 对于`ADD`，每个命名因素都不得已存在，否则无法添加。对于`MODIFY`和`DROP`，每个命名因素必须存在才能被修改或删除。如果定义了第二个和第三个因素，删除第二个因素会导致第三个因素取代它成为第二个因素。
- en: 'This statement drops authentication factors 2 and 3, which has the effect of
    converting the account from 3FA to 1FA:'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 此语句删除认证因素2和3，从而将帐户从3FA转换为1FA：
- en: '[PRE15]'
  id: totrans-129
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: For additional `ADD`, `MODIFY`, and `DROP` examples, see [Getting Started with
    Multifactor Authentication](multifactor-authentication.html#multifactor-authentication-getting-started
    "Getting Started with Multifactor Authentication").
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 有关其他`ADD`，`MODIFY`和`DROP`示例，请参阅[开始使用多因素认证](multifactor-authentication.html#multifactor-authentication-getting-started
    "开始使用多因素认证")。
- en: For information about factor-specific rules that determine the default authentication
    plugin for authentication clauses that do not name a plugin, see [The Default
    Authentication Plugin](pluggable-authentication.html#pluggable-authentication-default-plugin
    "The Default Authentication Plugin").
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 有关确定未命名插件的认证子句的默认认证插件的特定规则的信息，请参阅[默认认证插件](pluggable-authentication.html#pluggable-authentication-default-plugin
    "默认认证插件")。
- en: ALTER USER Registration Options
  id: totrans-132
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: ALTER USER注册选项
- en: As of MySQL 8.0.27, [`ALTER USER`](alter-user.html "15.7.1.1 ALTER USER Statement")
    has clauses that enable FIDO devices to be registered and unregistered. For more
    information, see [Using FIDO Authentication](fido-pluggable-authentication.html#fido-pluggable-authentication-usage
    "Using FIDO Authentication"), [FIDO Device Unregistration](fido-pluggable-authentication.html#fido-pluggable-authentication-unregistration
    "FIDO Device Unregistration"), and the [**mysql**](mysql.html "6.5.1 mysql — The
    MySQL Command-Line Client") client [`--fido-register-factor`](mysql-command-options.html#option_mysql_fido-register-factor)
    option description.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 截至MySQL 8.0.27，[`ALTER USER`](alter-user.html "15.7.1.1 ALTER USER Statement")具有允许注册和注销FIDO设备的子句。有关更多信息，请参阅[使用FIDO认证](fido-pluggable-authentication.html#fido-pluggable-authentication-usage
    "使用FIDO认证")，[FIDO设备注销](fido-pluggable-authentication.html#fido-pluggable-authentication-unregistration
    "FIDO设备注销")以及[**mysql**](mysql.html "6.5.1 mysql — MySQL命令行客户端")客户端[`--fido-register-factor`](mysql-command-options.html#option_mysql_fido-register-factor)选项描述。
- en: The [**mysql**](mysql.html "6.5.1 mysql — The MySQL Command-Line Client") client
    [`--fido-register-factor`](mysql-command-options.html#option_mysql_fido-register-factor)
    option, used for FIDO device registration, causes the [**mysql**](mysql.html "6.5.1 mysql
    — The MySQL Command-Line Client") client to generate and execute `INITIATE REGISTRATION`
    and `FINISH REGISTRATION` statements. These statements are not intended for manual
    execution.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: '[**mysql**](mysql.html "6.5.1 mysql — MySQL命令行客户端")客户端[`--fido-register-factor`](mysql-command-options.html#option_mysql_fido-register-factor)选项，用于FIDO设备注册，会导致[**mysql**](mysql.html
    "6.5.1 mysql — MySQL命令行客户端")客户端生成并执行`INITIATE REGISTRATION`和`FINISH REGISTRATION`语句。这些语句不适用于手动执行。'
- en: ALTER USER Role Options
  id: totrans-135
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: ALTER USER角色选项
- en: '[`ALTER USER ... DEFAULT ROLE`](alter-user.html "15.7.1.1 ALTER USER Statement")
    defines which roles become active when the user connects to the server and authenticates,
    or when the user executes the [`SET ROLE DEFAULT`](set-role.html "15.7.1.11 SET
    ROLE Statement") statement during a session.'
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: '[`ALTER USER ... DEFAULT ROLE`](alter-user.html "15.7.1.1 ALTER USER Statement")定义了用户连接到服务器并进行身份验证时激活的角色，或者用户在会话期间执行[`SET
    ROLE DEFAULT`](set-role.html "15.7.1.11 SET ROLE Statement")语句时激活的角色。'
- en: '[`ALTER USER ... DEFAULT ROLE`](alter-user.html "15.7.1.1 ALTER USER Statement")
    is alternative syntax for [`SET DEFAULT ROLE`](set-default-role.html "15.7.1.9 SET
    DEFAULT ROLE Statement") (see [Section 15.7.1.9, “SET DEFAULT ROLE Statement”](set-default-role.html
    "15.7.1.9 SET DEFAULT ROLE Statement")). However, [`ALTER USER`](alter-user.html
    "15.7.1.1 ALTER USER Statement") can set the default for only a single user, whereas
    [`SET DEFAULT ROLE`](set-default-role.html "15.7.1.9 SET DEFAULT ROLE Statement")
    can set the default for multiple users. On the other hand, you can specify `CURRENT_USER`
    as the user name for the [`ALTER USER`](alter-user.html "15.7.1.1 ALTER USER Statement")
    statement, whereas you cannot for [`SET DEFAULT ROLE`](set-default-role.html "15.7.1.9 SET
    DEFAULT ROLE Statement").'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: '[`ALTER USER ... DEFAULT ROLE`](alter-user.html "15.7.1.1 ALTER USER Statement")
    是 [`SET DEFAULT ROLE`](set-default-role.html "15.7.1.9 SET DEFAULT ROLE Statement")
    的替代语法（参见 [第 15.7.1.9 节，“SET DEFAULT ROLE Statement”](set-default-role.html "15.7.1.9 SET
    DEFAULT ROLE Statement")）。然而，[`ALTER USER`](alter-user.html "15.7.1.1 ALTER USER
    Statement") 只能为单个用户设置默认值，而 [`SET DEFAULT ROLE`](set-default-role.html "15.7.1.9 SET
    DEFAULT ROLE Statement") 可以为多个用户设置默认值。另一方面，您可以将 `CURRENT_USER` 指定为 [`ALTER USER`](alter-user.html
    "15.7.1.1 ALTER USER Statement") 语句的用户名，而对于 [`SET DEFAULT ROLE`](set-default-role.html
    "15.7.1.9 SET DEFAULT ROLE Statement") 则不行。'
- en: Each user account name uses the format described previously.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 每个用户账户名称使用先前描述的格式。
- en: 'Each role name uses the format described in [Section 8.2.5, “Specifying Role
    Names”](role-names.html "8.2.5 Specifying Role Names"). For example:'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 每个角色名称使用 [第 8.2.5 节，“指定角色名称”](role-names.html "8.2.5 Specifying Role Names")
    中描述的格式。例如：
- en: '[PRE16]'
  id: totrans-140
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: The host name part of the role name, if omitted, defaults to `'%'`.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 如果省略角色���称的主机名部分，则默认为 `'%'`。
- en: 'The clause following the `DEFAULT ROLE` keywords permits these values:'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 在 `DEFAULT ROLE` 关键字后的子句允许这些值：
- en: '`NONE`: Set the default to `NONE` (no roles).'
  id: totrans-143
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`NONE`：将默认设置为 `NONE`（无角色）。'
- en: '`ALL`: Set the default to all roles granted to the account.'
  id: totrans-144
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ALL`：将默认设置为授予该账户的所有角色。'
- en: '`*`role`* [, *`role`* ] ...`: Set the default to the named roles, which must
    exist and be granted to the account at the time [`ALTER USER ... DEFAULT ROLE`](alter-user.html
    "15.7.1.1 ALTER USER Statement") is executed.'
  id: totrans-145
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`*`role`* [, *`role`* ] ...`：将默认设置为指定的角色，这些角色必须在执行 [`ALTER USER ... DEFAULT
    ROLE`](alter-user.html "15.7.1.1 ALTER USER Statement") 时存在并授予该账户。'
- en: ALTER USER SSL/TLS Options
  id: totrans-146
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 修改用户 SSL/TLS 选项
- en: MySQL can check X.509 certificate attributes in addition to the usual authentication
    that is based on the user name and credentials. For background information on
    the use of SSL/TLS with MySQL, see [Section 8.3, “Using Encrypted Connections”](encrypted-connections.html
    "8.3 Using Encrypted Connections").
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: MySQL 可以检查 X.509 证书属性，除了基于用户名和凭据的常规身份验证外。有关在 MySQL 中使用 SSL/TLS 的背景信息，请参见 [第
    8.3 节，“使用加密连接”](encrypted-connections.html "8.3 Using Encrypted Connections")。
- en: To specify SSL/TLS-related options for a MySQL account, use a `REQUIRE` clause
    that specifies one or more *`tls_option`* values.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 要为 MySQL 账户指定 SSL/TLS 相关选项，请使用包含一个或多个 *`tls_option`* 值的 `REQUIRE` 子句。
- en: Order of `REQUIRE` options does not matter, but no option can be specified twice.
    The `AND` keyword is optional between `REQUIRE` options.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: '`REQUIRE` 选项的顺序无关紧要，但不能指定两次选项。在 `REQUIRE` 选项之间的 `AND` 关键字是可选的。'
- en: '[`ALTER USER`](alter-user.html "15.7.1.1 ALTER USER Statement") permits these
    *`tls_option`* values:'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: '[`ALTER USER`](alter-user.html "15.7.1.1 ALTER USER Statement") 允许这些 *`tls_option`*
    值：'
- en: '`NONE`'
  id: totrans-151
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`NONE`'
- en: Indicates that all accounts named by the statement have no SSL or X.509 requirements.
    Unencrypted connections are permitted if the user name and password are valid.
    Encrypted connections can be used, at the client's option, if the client has the
    proper certificate and key files.
  id: totrans-152
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 表明由该语句指定的所有账户没有 SSL 或 X.509 要求。如果用户名和密码有效，则允许非加密连接。如果客户端具有正确的证书和密钥文件，则客户端可以选择使用加密连接。
- en: '[PRE17]'
  id: totrans-153
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE17]'
- en: Clients attempt to establish a secure connection by default. For clients that
    have `REQUIRE NONE`, the connection attempt falls back to an unencrypted connection
    if a secure connection cannot be established. To require an encrypted connection,
    a client need specify only the [`--ssl-mode=REQUIRED`](connection-options.html#option_general_ssl-mode)
    option; the connection attempt fails if a secure connection cannot be established.
  id: totrans-154
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 客户端默认尝试建立安全连接。对于具有 `REQUIRE NONE` 的客户端，如果无法建立安全连接，则连接尝试会回退到非加密连接。要求加密连接，客户端只需指定
    [`--ssl-mode=REQUIRED`](connection-options.html#option_general_ssl-mode) 选项；如果无法建立安全连接，则连接尝试失败。
- en: '`SSL`'
  id: totrans-155
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`SSL`'
- en: Tells the server to permit only encrypted connections for all accounts named
    by the statement.
  id: totrans-156
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 告诉服务器只允许通过加密连接访问由该语句指定的所有账户。
- en: '[PRE18]'
  id: totrans-157
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE18]'
- en: Clients attempt to establish a secure connection by default. For accounts that
    have `REQUIRE SSL`, the connection attempt fails if a secure connection cannot
    be established.
  id: totrans-158
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 客户端默认尝试建立安全连接。对于具有`REQUIRE SSL`的帐户，如果无法建立安全连接，则连接尝试失败。
- en: '`X509`'
  id: totrans-159
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`X509`'
- en: For all accounts named by the statement, requires that clients present a valid
    certificate, but the exact certificate, issuer, and subject do not matter. The
    only requirement is that it should be possible to verify its signature with one
    of the CA certificates. Use of X.509 certificates always implies encryption, so
    the `SSL` option is unnecessary in this case.
  id: totrans-160
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对于所有由该语句命名的帐户，要求客户端提供有效证书，但确切的证书、颁发者和主题并不重要。唯一的要求是应该能够使用其中一个CA证书验证其签名。使用X.509证书始终意味着加密，因此在这种情况下`SSL`选项是不必要的。
- en: '[PRE19]'
  id: totrans-161
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE19]'
- en: For accounts with `REQUIRE X509`, clients must specify the [`--ssl-key`](connection-options.html#option_general_ssl-key)
    and [`--ssl-cert`](connection-options.html#option_general_ssl-cert) options to
    connect. (It is recommended but not required that [`--ssl-ca`](connection-options.html#option_general_ssl-ca)
    also be specified so that the public certificate provided by the server can be
    verified.) This is true for `ISSUER` and `SUBJECT` as well because those `REQUIRE`
    options imply the requirements of `X509`.
  id: totrans-162
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对于具有`REQUIRE X509`的帐户，客户端必须指定[`--ssl-key`](connection-options.html#option_general_ssl-key)和[`--ssl-cert`](connection-options.html#option_general_ssl-cert)选项进行连接。（建议但不是必须还指定[`--ssl-ca`](connection-options.html#option_general_ssl-ca)，以便验证服务器提供的公共证书。）对于`ISSUER`和`SUBJECT`也是如此，因为这些`REQUIRE`选项暗示了`X509`的要求。
- en: '`ISSUER ''*`issuer`*''`'
  id: totrans-163
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`颁发者 ''*`issuer`*''`'
- en: For all accounts named by the statement, requires that clients present a valid
    X.509 certificate issued by CA `'*`issuer`*'`. If a client presents a certificate
    that is valid but has a different issuer, the server rejects the connection. Use
    of X.509 certificates always implies encryption, so the `SSL` option is unnecessary
    in this case.
  id: totrans-164
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对于所有由该语句命名的帐户，要求客户端提供由CA`'*`issuer`*'`颁发的有效X.509证书。如果客户端提供的证书有效但颁发者不同，服务器将拒绝连接。使用X.509证书始终意味着加密，因此在这种情况下`SSL`选项是不必要的。
- en: '[PRE20]'
  id: totrans-165
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE20]'
- en: Because `ISSUER` implies the requirements of `X509`, clients must specify the
    [`--ssl-key`](connection-options.html#option_general_ssl-key) and [`--ssl-cert`](connection-options.html#option_general_ssl-cert)
    options to connect. (It is recommended but not required that [`--ssl-ca`](connection-options.html#option_general_ssl-ca)
    also be specified so that the public certificate provided by the server can be
    verified.)
  id: totrans-166
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 因为`ISSUER`暗示了`X509`的要求，客户端必须指定[`--ssl-key`](connection-options.html#option_general_ssl-key)和[`--ssl-cert`](connection-options.html#option_general_ssl-cert)选项进行连接。（建议但不是必须还指定[`--ssl-ca`](connection-options.html#option_general_ssl-ca)，以便验证服务器提供的公共证书。）
- en: '`SUBJECT ''*`subject`*''`'
  id: totrans-167
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`主题 ''*`subject`*''`'
- en: For all accounts named by the statement, requires that clients present a valid
    X.509 certificate containing the subject *`subject`*. If a client presents a certificate
    that is valid but has a different subject, the server rejects the connection.
    Use of X.509 certificates always implies encryption, so the `SSL` option is unnecessary
    in this case.
  id: totrans-168
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对于所有由该语句命名的帐户，要求客户端提供包含主题*`subject`*的有效X.509证书。如果客户端提供的证书有效但主题不同，服务器将拒绝连接。使用X.509证书始终意味着加密，因此在这种情况下`SSL`选项是不必要的。
- en: '[PRE21]'
  id: totrans-169
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE21]'
- en: MySQL does a simple string comparison of the `'*`subject`*'` value to the value
    in the certificate, so lettercase and component ordering must be given exactly
    as present in the certificate.
  id: totrans-170
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: MySQL对`'*`subject`*'`值与证书中的值进行简单的字符串比较，因此大小写和组件顺序必须与证书中的完全相同。
- en: Because `SUBJECT` implies the requirements of `X509`, clients must specify the
    [`--ssl-key`](connection-options.html#option_general_ssl-key) and [`--ssl-cert`](connection-options.html#option_general_ssl-cert)
    options to connect. (It is recommended but not required that [`--ssl-ca`](connection-options.html#option_general_ssl-ca)
    also be specified so that the public certificate provided by the server can be
    verified.)
  id: totrans-171
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 因为`SUBJECT`暗示了`X509`的要求，客户端必须指定[`--ssl-key`](connection-options.html#option_general_ssl-key)和[`--ssl-cert`](connection-options.html#option_general_ssl-cert)选项进行连接。（建议但不是必须还指定[`--ssl-ca`](connection-options.html#option_general_ssl-ca)，以便验证服务器提供的公共证书。）
- en: '`CIPHER ''*`cipher`*''`'
  id: totrans-172
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`密码 ''*`cipher`*''`'
- en: For all accounts named by the statement, requires a specific cipher method for
    encrypting connections. This option is needed to ensure that ciphers and key lengths
    of sufficient strength are used. Encryption can be weak if old algorithms using
    short encryption keys are used.
  id: totrans-173
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对于语句命名的所有帐户，需要特定的密码方法来加密连接。需要此选项以确保使用足够强度的密码和密钥长度的密码和密钥。如果使用旧算法和短加密密钥的算法，则加密可能较弱。
- en: '[PRE22]'
  id: totrans-174
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'The `SUBJECT`, `ISSUER`, and `CIPHER` options can be combined in the `REQUIRE`
    clause:'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: '`SUBJECT`、`ISSUER`和`CIPHER`选项可以在`REQUIRE`子句中组合使用：'
- en: '[PRE23]'
  id: totrans-176
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: ALTER USER Resource-Limit Options
  id: totrans-177
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: ALTER USER资源限制选项
- en: It is possible to place limits on use of server resources by an account, as
    discussed in [Section 8.2.21, “Setting Account Resource Limits”](user-resources.html
    "8.2.21 Setting Account Resource Limits"). To do so, use a `WITH` clause that
    specifies one or more *`resource_option`* values.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 可以对帐户使用服务器资源的限制进行限制，如[第8.2.21节“设置帐户资源限制”](user-resources.html "8.2.21 设置帐户资源限制")中所讨论的。为此，请使用指定一个或多个*`resource_option`*值的`WITH`子句。
- en: Order of `WITH` options does not matter, except that if a given resource limit
    is specified multiple times, the last instance takes precedence.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: '`WITH`选项的顺序无关紧要，除非给定资源限制多次指定，否则最后一次实例优先。'
- en: '[`ALTER USER`](alter-user.html "15.7.1.1 ALTER USER Statement") permits these
    *`resource_option`* values:'
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: '[`ALTER USER`](alter-user.html "15.7.1.1 ALTER USER Statement")允许使用以下*`resource_option`*值：'
- en: '`MAX_QUERIES_PER_HOUR *`count`*`, `MAX_UPDATES_PER_HOUR *`count`*`, `MAX_CONNECTIONS_PER_HOUR
    *`count`*`'
  id: totrans-181
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`MAX_QUERIES_PER_HOUR *`count`*`、`MAX_UPDATES_PER_HOUR *`count`*`、`MAX_CONNECTIONS_PER_HOUR
    *`count`*`'
- en: For all accounts named by the statement, these options restrict how many queries,
    updates, and connections to the server are permitted to each account during any
    given one-hour period. If *`count`* is `0` (the default), this means that there
    is no limitation for the account.
  id: totrans-182
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对于语句命名的所有帐户，这些选项限制了在任何给定的一小时内每个帐户对服务器执行多少查询、更新和连接。如果*`count`*为`0`（默认值），这意味着该帐户没有限制。
- en: '`MAX_USER_CONNECTIONS *`count`*`'
  id: totrans-183
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`MAX_USER_CONNECTIONS *`count`*`'
- en: For all accounts named by the statement, restricts the maximum number of simultaneous
    connections to the server by each account. A nonzero *`count`* specifies the limit
    for the account explicitly. If *`count`* is `0` (the default), the server determines
    the number of simultaneous connections for the account from the global value of
    the [`max_user_connections`](server-system-variables.html#sysvar_max_user_connections)
    system variable. If [`max_user_connections`](server-system-variables.html#sysvar_max_user_connections)
    is also zero, there is no limit for the account.
  id: totrans-184
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对于语句命名的所有帐户，限制每个帐户对服务器的最大同时连接数。非零*`count`*明确指定了帐户的限制。如果*`count`*为`0`（默认值），服务器将根据[`max_user_connections`](server-system-variables.html#sysvar_max_user_connections)系统变量的全局值确定帐户的同时连接数。如果[`max_user_connections`](server-system-variables.html#sysvar_max_user_connections)也为零，则该帐户没有限制。
- en: 'Example:'
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 示例：
- en: '[PRE24]'
  id: totrans-186
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: ALTER USER Password-Management Options
  id: totrans-187
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: ALTER USER密码管理选项
- en: '[`ALTER USER`](alter-user.html "15.7.1.1 ALTER USER Statement") supports several
    *`password_option`* values for password management:'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: '[`ALTER USER`](alter-user.html "15.7.1.1 ALTER USER Statement")支持几个*`password_option`*值用于密码管理：'
- en: 'Password expiration options: You can expire an account password manually and
    establish its password expiration policy. Policy options do not expire the password.
    Instead, they determine how the server applies automatic expiration to the account
    based on password age, which is assessed from the date and time of the most recent
    account password change.'
  id: totrans-189
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 密码过期选项：您可以手动使帐户密码过期并建立其密码过期策略。策略选项不会使密码过期。相反，它们确定服务器如何根据密码年龄自动使帐户密码过期，该年龄是从最近更改帐户密码的日期和时间评估的。
- en: 'Password reuse options: You can restrict password reuse based on number of
    password changes, time elapsed, or both.'
  id: totrans-190
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 密码重用选项：您可以基于密码更改次数、经过的时间或两者限制密码重用。
- en: 'Password verification-required options: You can indicate whether attempts to
    change an account password must specify the current password, as verification
    that the user attempting to make the change actually knows the current password.'
  id: totrans-191
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 密码验证必需选项：您可以指示更改帐户密码的尝试是否必须指定当前密码，以验证试图进行更改的用户实际上知道当前密码。
- en: 'Incorrect-password failed-login tracking options: You can cause the server
    to track failed login attempts and temporarily lock accounts for which too many
    consecutive incorrect passwords are given. The required number of failures and
    the lock time are configurable.'
  id: totrans-192
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不正确密码的失败登录跟踪选项：您可以导致服务器跟踪失败的登录尝试，并临时锁定给出太多连续不正确密码的帐户。可配置失败次数和锁定时间。
- en: This section describes the syntax for password-management options. For information
    about establishing policy for password management, see [Section 8.2.15, “Password
    Management”](password-management.html "8.2.15 Password Management").
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 本节描述了密码管理选项的语法。有关建立密码管理策略的信息，请参见[第8.2.15节“密码管理”](password-management.html "8.2.15 密码管理")。
- en: If multiple password-management options of a given type are specified, the last
    one takes precedence. For example, `PASSWORD EXPIRE DEFAULT PASSWORD EXPIRE NEVER`
    is the same as `PASSWORD EXPIRE NEVER`.
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 如果指定了给定类型的多个密码管理选项，则最后一个优先。例如，`PASSWORD EXPIRE DEFAULT PASSWORD EXPIRE NEVER`与`PASSWORD
    EXPIRE NEVER`相同。
- en: Note
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: Except for the options that pertain to failed-login tracking, password-management
    options apply only to accounts that use an authentication plugin that stores credentials
    internally to MySQL. For accounts that use a plugin that performs authentication
    against a credentials system that is external to MySQL, password management must
    be handled externally against that system as well. For more information about
    internal credentials storage, see [Section 8.2.15, “Password Management”](password-management.html
    "8.2.15 Password Management").
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 除了与失败登录跟踪相关的选项外，密码管理选项仅适用于使用将凭据存储在MySQL内部的身份验证插件的帐户。对于使用针对MySQL外部凭据系统执行身份验证的插件的帐户，密码管理也必须在该系统外部处理。有关内部凭据存储的更多信息，请参见[第8.2.15节“密码管理”](password-management.html
    "8.2.15 密码管理")。
- en: A client has an expired password if the account password was expired manually
    or the password age is considered greater than its permitted lifetime per the
    automatic expiration policy. In this case, the server either disconnects the client
    or restricts the operations permitted to it (see [Section 8.2.16, “Server Handling
    of Expired Passwords”](expired-password-handling.html "8.2.16 Server Handling
    of Expired Passwords")). Operations performed by a restricted client result in
    an error until the user establishes a new account password.
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 如果客户端的帐户密码已手动过期或密码年龄被认为大于其允许的生命周期，根据自动过期策略，客户端的密码已过期。在这种情况下，服务器要么断开客户端的连接，要么限制其允许的操作（请参见[第8.2.16节“服务器处理过期密码”](expired-password-handling.html
    "8.2.16 服务器处理过期密码")）。受限客户端执行的操作会导致错误，直到用户建立新的帐户密码。
- en: Note
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: Although it is possible to “reset” an expired password by setting it to its
    current value, it is preferable, as a matter of good policy, to choose a different
    password. DBAs can enforce non-reuse by establishing an appropriate password-reuse
    policy. See [Password Reuse Policy](password-management.html#password-reuse-policy
    "Password Reuse Policy").
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管可以通过将过期密码重置为当前值来“重置”过期密码，但作为良好政策的一部分，最好选择不同的密码。 DBA可以通过建立适当的密码重用策略来强制执行不重用。请参见[密码重用策略](password-management.html#password-reuse-policy
    "密码重用策略")。
- en: '[`ALTER USER`](alter-user.html "15.7.1.1 ALTER USER Statement") permits these
    *`password_option`* values for controlling password expiration:'
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: '[`ALTER USER`](alter-user.html "15.7.1.1 ALTER USER Statement")允许这些*`password_option`*值来控制密码过期：'
- en: '`PASSWORD EXPIRE`'
  id: totrans-201
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`PASSWORD EXPIRE`'
- en: Immediately marks the password expired for all accounts named by the statement.
  id: totrans-202
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 立即标记由语句命名的所有帐户的密码过期。
- en: '[PRE25]'
  id: totrans-203
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE25]'
- en: '`PASSWORD EXPIRE DEFAULT`'
  id: totrans-204
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`PASSWORD EXPIRE DEFAULT`'
- en: Sets all accounts named by the statement so that the global expiration policy
    applies, as specified by the [`default_password_lifetime`](server-system-variables.html#sysvar_default_password_lifetime)
    system variable.
  id: totrans-205
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 将由语句命名的所有帐户设置为适用全局过期策略，由[`default_password_lifetime`](server-system-variables.html#sysvar_default_password_lifetime)系统变量指定。
- en: '[PRE26]'
  id: totrans-206
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE26]'
- en: '`PASSWORD EXPIRE NEVER`'
  id: totrans-207
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`PASSWORD EXPIRE NEVER`'
- en: This expiration option overrides the global policy for all accounts named by
    the statement. For each, it disables password expiration so that the password
    never expires.
  id: totrans-208
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此过期选项覆盖了语句命名的所有帐户的全局策略。对于每个帐户，它禁用密码过期，使密码永不过期。
- en: '[PRE27]'
  id: totrans-209
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE27]'
- en: '`PASSWORD EXPIRE INTERVAL *`N`* DAY`'
  id: totrans-210
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`PASSWORD EXPIRE INTERVAL *`N`* DAY`'
- en: 'This expiration option overrides the global policy for all accounts named by
    the statement. For each, it sets the password lifetime to *`N`* days. The following
    statement requires the password to be changed every 180 days:'
  id: totrans-211
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此过期选项覆盖了声明中所有命名的账户的全局策略。对于每个账户，它将密码寿命设置为*`N`*天。以下声明要求每180天更改一次密码：
- en: '[PRE28]'
  id: totrans-212
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE28]'
- en: '[`ALTER USER`](alter-user.html "15.7.1.1 ALTER USER Statement") permits these
    *`password_option`* values for controlling reuse of previous passwords based on
    required minimum number of password changes:'
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: '[`ALTER USER`](alter-user.html "15.7.1.1 ALTER USER Statement") 允许这些*`password_option`*值来控制基于所需最小密码更改次数的先前密码重用：'
- en: '`PASSWORD HISTORY DEFAULT`'
  id: totrans-214
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`PASSWORD HISTORY DEFAULT`'
- en: Sets all accounts named by the statement so that the global policy about password
    history length applies, to prohibit reuse of passwords before the number of changes
    specified by the [`password_history`](server-system-variables.html#sysvar_password_history)
    system variable.
  id: totrans-215
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 设置所有由声明命名的账户，以便全局关于密码历史长度的策略适用，以禁止在由[`password_history`](server-system-variables.html#sysvar_password_history)系统变量指定的更改次数之前重用密码。
- en: '[PRE29]'
  id: totrans-216
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE29]'
- en: '`PASSWORD HISTORY *`N`*`'
  id: totrans-217
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`PASSWORD HISTORY *`N`*`'
- en: 'This history-length option overrides the global policy for all accounts named
    by the statement. For each, it sets the password history length to *`N`* passwords,
    to prohibit reusing any of the *`N`* most recently chosen passwords. The following
    statement prohibits reuse of any of the previous 6 passwords:'
  id: totrans-218
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此历史长度选项覆盖了声明中所有命名的账户的全局策略。对于每个账户，它将密码历史长度设置为*`N`*个密码，以禁止重新使用最近选择的*`N`*个密码中的任何一个。以下声明禁止重新使用之前的6个密码：
- en: '[PRE30]'
  id: totrans-219
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE30]'
- en: '[`ALTER USER`](alter-user.html "15.7.1.1 ALTER USER Statement") permits these
    *`password_option`* values for controlling reuse of previous passwords based on
    time elapsed:'
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: '[`ALTER USER`](alter-user.html "15.7.1.1 ALTER USER Statement") 允许这些*`password_option`*值来控制基于经过的时间重新使用先前密码的情况：'
- en: '`PASSWORD REUSE INTERVAL DEFAULT`'
  id: totrans-221
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`PASSWORD REUSE INTERVAL DEFAULT`'
- en: Sets all statements named by the account so that the global policy about time
    elapsed applies, to prohibit reuse of passwords newer than the number of days
    specified by the [`password_reuse_interval`](server-system-variables.html#sysvar_password_reuse_interval)
    system variable.
  id: totrans-222
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 设置所有由账户命名的声明，以便全局关于经过时间的策略适用，以禁止重用比由[`password_reuse_interval`](server-system-variables.html#sysvar_password_reuse_interval)系统变量指定的天数新的密码。
- en: '[PRE31]'
  id: totrans-223
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE31]'
- en: '`PASSWORD REUSE INTERVAL *`N`* DAY`'
  id: totrans-224
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`PASSWORD REUSE INTERVAL *`N`* DAY`'
- en: 'This time-elapsed option overrides the global policy for all accounts named
    by the statement. For each, it sets the password reuse interval to *`N`* days,
    to prohibit reuse of passwords newer than that many days. The following statement
    prohibits password reuse for 360 days:'
  id: totrans-225
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此经过时间选项覆盖了声明中所有命名的账户的全局策略。对于每个账户，它将密码重用间隔设置为*`N`*天，以禁止重用比该天数新的密码。以下声明禁止密码在360天内重用：
- en: '[PRE32]'
  id: totrans-226
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE32]'
- en: '[`ALTER USER`](alter-user.html "15.7.1.1 ALTER USER Statement") permits these
    *`password_option`* values for controlling whether attempts to change an account
    password must specify the current password, as verification that the user attempting
    to make the change actually knows the current password:'
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: '[`ALTER USER`](alter-user.html "15.7.1.1 ALTER USER Statement") 允许这些*`password_option`*值来控制是否尝试更改账户密码必须指定当前密码，以验证尝试进行更改的用户实际上知道当前密码：'
- en: '`PASSWORD REQUIRE CURRENT`'
  id: totrans-228
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`PASSWORD REQUIRE CURRENT`'
- en: This verification option overrides the global policy for all accounts named
    by the statement. For each, it requires that password changes specify the current
    password.
  id: totrans-229
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此验证选项覆盖了声明中所有命名的账户的全局策略。对于每个账户，它要求密码更改必须指定当前密码。
- en: '[PRE33]'
  id: totrans-230
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE33]'
- en: '`PASSWORD REQUIRE CURRENT OPTIONAL`'
  id: totrans-231
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`PASSWORD REQUIRE CURRENT OPTIONAL`'
- en: This verification option overrides the global policy for all accounts named
    by the statement. For each, it does not require that password changes specify
    the current password. (The current password may but need not be given.)
  id: totrans-232
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此验证选项覆盖了声明中所有命名的账户的全局策略。对于每个账户，它不要求密码更改必须指定当前密码。（当前密码可以给出，但不是必须的。）
- en: '[PRE34]'
  id: totrans-233
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE34]'
- en: '`PASSWORD REQUIRE CURRENT DEFAULT`'
  id: totrans-234
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`PASSWORD REQUIRE CURRENT DEFAULT`'
- en: Sets all statements named by the account so that the global policy about password
    verification applies, as specified by the [`password_require_current`](server-system-variables.html#sysvar_password_require_current)
    system variable.
  id: totrans-235
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 设置所有由账户命名的声明，以便全局关于密码验证的策略适用，如[`password_require_current`](server-system-variables.html#sysvar_password_require_current)系统变量所指定的那样。
- en: '[PRE35]'
  id: totrans-236
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE35]'
- en: 'As of MySQL 8.0.19, [`ALTER USER`](alter-user.html "15.7.1.1 ALTER USER Statement")
    permits these *`password_option`* values for controlling failed-login tracking:'
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: 从MySQL 8.0.19开始，[`ALTER USER`](alter-user.html "15.7.1.1 ALTER USER Statement")
    允许使用以下 *`password_option`* 值来控制失败登录跟踪：
- en: '`FAILED_LOGIN_ATTEMPTS *`N`*`'
  id: totrans-238
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`FAILED_LOGIN_ATTEMPTS *`N`*`'
- en: Whether to track account login attempts that specify an incorrect password.
    *`N`* must be a number from 0 to 32767\. A value of 0 disables failed-login tracking.
    Values greater than 0 indicate how many consecutive password failures cause temporary
    account locking (if `PASSWORD_LOCK_TIME` is also nonzero).
  id: totrans-239
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 是否跟踪指定错误密码的账户登录尝试。*`N`* 必须是从 0 到 32767 的数字。值为 0 禁用失败登录跟踪。大于 0 的值表示多少连续密码失败会导致临时账户锁定（如果
    `PASSWORD_LOCK_TIME` 也非零）。
- en: '`PASSWORD_LOCK_TIME {*`N`* | UNBOUNDED}`'
  id: totrans-240
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`PASSWORD_LOCK_TIME {*`N`* | UNBOUNDED}`'
- en: How long to lock the account after too many consecutive login attempts provide
    an incorrect password. *`N`* must be a number from 0 to 32767, or `UNBOUNDED`.
    A value of 0 disables temporary account locking. Values greater than 0 indicate
    how long to lock the account in days. A value of `UNBOUNDED` causes the account
    locking duration to be unbounded; once locked, the account remains in a locked
    state until unlocked. For information about the conditions under which unlocking
    occurs, see [Failed-Login Tracking and Temporary Account Locking](password-management.html#failed-login-tracking
    "Failed-Login Tracking and Temporary Account Locking").
  id: totrans-241
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在太多连续登录尝试提供错误密码后锁定账户多长时间。*`N`* 必须是从 0 到 32767 的数字，或 `UNBOUNDED`。值为 0 禁用临时账户锁定。大于
    0 的值表示锁定账户的天数。值为 `UNBOUNDED` 导致账户锁定持续时间无限；一旦锁定，账户将保持锁定状态直到解锁。有关解锁发生的条件，请参阅 [Failed-Login
    Tracking and Temporary Account Locking](password-management.html#failed-login-tracking
    "Failed-Login Tracking and Temporary Account Locking")。
- en: 'For failed-login tracking and temporary locking to occur, an account''s `FAILED_LOGIN_ATTEMPTS`
    and `PASSWORD_LOCK_TIME` options both must be nonzero. The following statement
    modifies an account such that it remains locked for two days after four consecutive
    password failures:'
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: 要实现失败登录跟踪和临时锁定，一个账户的 `FAILED_LOGIN_ATTEMPTS` 和 `PASSWORD_LOCK_TIME` 选项都必须非零。以下语句修改一个账户，使其在连续四次密码失败后保持锁定两天：
- en: '[PRE36]'
  id: totrans-243
  prefs: []
  type: TYPE_PRE
  zh: '[PRE36]'
- en: ALTER USER Comment and Attribute Options
  id: totrans-244
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 修改用户评论和属性选项
- en: MySQL 8.0.21 and higher supports user comments and user attributes, as described
    in [Section 15.7.1.3, “CREATE USER Statement”](create-user.html "15.7.1.3 CREATE
    USER Statement"). These can be modified employing `ALTER USER` by means of the
    `COMMENT` and `ATTRIBUTE` options, respectively. You cannot specify both options
    in the same `ALTER USER` statement; attempting to do so results in a syntax error.
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: MySQL 8.0.21 及更高版本支持用户评论和用户属性，如 [Section 15.7.1.3, “CREATE USER Statement”](create-user.html
    "15.7.1.3 CREATE USER Statement") 中所述。这些可以通过 `ALTER USER` 使用 `COMMENT` 和 `ATTRIBUTE`
    选项进行修改。不能在同一 `ALTER USER` 语句中同时指定这两个选项；尝试这样做会导致语法错误。
- en: 'The user comment and user attribute are stored in the Information Schema [`USER_ATTRIBUTES`](information-schema-user-attributes-table.html
    "28.3.46 The INFORMATION_SCHEMA USER_ATTRIBUTES Table") table as a JSON object;
    the user comment is stored as the value for a `comment` key in the ATTRIBUTE column
    of this table, as shown later in this discussion. The `COMMENT` text can be any
    arbitrary quoted text, and replaces any existing user comment. The `ATTRIBUTE`
    value must be the valid string representation of a JSON object. This is merged
    with any existing user attribute as if the [`JSON_MERGE_PATCH()`](json-modification-functions.html#function_json-merge-patch)
    function had been used on the existing user attribute and the new one; for any
    keys that are re-used, the new value overwrites the old one, as shown here:'
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: 用户评论和用户属性存储在信息模式 [`USER_ATTRIBUTES`](information-schema-user-attributes-table.html
    "28.3.46 The INFORMATION_SCHEMA USER_ATTRIBUTES Table") 表中作为 JSON 对象；用户评论存储为此表的
    ATTRIBUTE 列中 `comment` 键的值，如后面的讨论所示。`COMMENT` 文本可以是任意带引号的文本，并替换任何现有用户评论。`ATTRIBUTE`
    值必须是 JSON 对象的有效字符串表示。这与任何现有用户属性合并，就好像在现有用户属性和新用户属性上使用了 [`JSON_MERGE_PATCH()`](json-modification-functions.html#function_json-merge-patch)
    函数；对于重新使用的任何键，新值会覆盖旧值，如下所示：
- en: '[PRE37]'
  id: totrans-247
  prefs: []
  type: TYPE_PRE
  zh: '[PRE37]'
- en: 'To remove a key and its value from the user attribute, set the key to JSON
    `null` (must be lowercase and unquoted), like this:'
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 要从用户属性中删除键及其值，将键设置为 JSON `null`（必须小写且不带引号），如下所示：
- en: '[PRE38]'
  id: totrans-249
  prefs: []
  type: TYPE_PRE
  zh: '[PRE38]'
- en: 'To set an existing user comment to an empty string, use `ALTER USER ... COMMENT
    ''''`. This leaves an empty `comment` value in the [`USER_ATTRIBUTES`](information-schema-user-attributes-table.html
    "28.3.46 The INFORMATION_SCHEMA USER_ATTRIBUTES Table") table; to remove the user
    comment completely, use `ALTER USER ... ATTRIBUTE ...` with the value for the
    column key set to JSON `null` (unquoted, in lower case). This is illustrated by
    the following sequence of SQL statements:'
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 要将现有用户的注释设置为空字符串，请使用`ALTER USER ... COMMENT ''`。这将在[`USER_ATTRIBUTES`](information-schema-user-attributes-table.html
    "28.3.46 INFORMATION_SCHEMA USER_ATTRIBUTES表")表中留下一个空的`comment`值；要完全删除用户注释，请使用`ALTER
    USER ... ATTRIBUTE ...`，将列键的值设置为JSON `null`（小写，不带引号）。下面是一系列SQL语句的示例：
- en: '[PRE39]'
  id: totrans-251
  prefs: []
  type: TYPE_PRE
  zh: '[PRE39]'
- en: ALTER USER Account-Locking Options
  id: totrans-252
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: ALTER USER 帐户锁定选项
- en: MySQL supports account locking and unlocking using the `ACCOUNT LOCK` and `ACCOUNT
    UNLOCK` options, which specify the locking state for an account. For additional
    discussion, see [Section 8.2.20, “Account Locking”](account-locking.html "8.2.20 Account
    Locking").
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: MySQL支持使用`ACCOUNT LOCK`和`ACCOUNT UNLOCK`选项进行帐户锁定和解锁，这些选项指定帐户的锁定状态。有关更多讨论，请参阅[第8.2.20节，“帐户锁定”](account-locking.html
    "8.2.20 帐户锁定")。
- en: If multiple account-locking options are specified, the last one takes precedence.
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: 如果指定了多个帐户锁定选项，则最后一个优先。
- en: '[`ALTER USER ... ACCOUNT UNLOCK`](alter-user.html "15.7.1.1 ALTER USER Statement")
    unlocks any account named by the statement that is temporarily locked due to too
    many failed logins. See [Section 8.2.15, “Password Management”](password-management.html
    "8.2.15 Password Management").'
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: '[`ALTER USER ... ACCOUNT UNLOCK`](alter-user.html "15.7.1.1 ALTER USER Statement")
    解锁由语句指定的任何因登录失败次数过多而暂时锁定的帐户。请参阅[第8.2.15节，“密码管理”](password-management.html "8.2.15 密码管理")。'
- en: ALTER USER Binary Logging
  id: totrans-256
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: ALTER USER 二进制日志记录
- en: '[`ALTER USER`](alter-user.html "15.7.1.1 ALTER USER Statement") is written
    to the binary log if it succeeds, but not if it fails; in that case, rollback
    occurs and no changes are made. A statement written to the binary log includes
    all named users. If the `IF EXISTS` clause is given, this includes even users
    that do not exist and were not altered.'
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: '[`ALTER USER`](alter-user.html "15.7.1.1 ALTER USER Statement") 如果成功，则写入二进制日志，但如果失败则不会；在这种情况下，将发生回滚，不会进行任何更改。写入二进制日志的语句包括所有命名用户。如果给出了`IF
    EXISTS`子句，则甚至包括那些不存在且未被更改的用户。'
- en: 'If the original statement changes the credentials for a user, the statement
    written to the binary log specifies the applicable authentication plugin for that
    user, determined as follows:'
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: 如果原始语句更改了用户的凭据，则写入二进制日志的语句指定了该用户的适用身份验证插件，��定如下：
- en: The plugin named in the original statement, if one was specified.
  id: totrans-259
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果原始语句中指定了插件的名称，则插件的名称。
- en: Otherwise, the plugin associated with the user account if the user exists, or
    the default authentication plugin if the user does not exist. (If the statement
    written to the binary log must specify a particular authentication plugin for
    a user, include it in the original statement.)
  id: totrans-260
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 否则，与用户帐户关联的插件（如果用户存在），或者默认身份验证插件（如果用户不存在）。（如果写入二进制日志的语句必须为用户指定特定的身份验证插件，请在原始语句中包含它。）
- en: If the server adds the default authentication plugin for any users in the statement
    written to the binary log, it writes a warning to the error log naming those users.
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: 如果服务器为写入二进制日志的语句中的任何用户添加默认身份验证插件，则会向错误日志中写入警告，列出这些用户。
- en: If the original statement specifies the `FAILED_LOGIN_ATTEMPTS` or `PASSWORD_LOCK_TIME`
    option, the statement written to the binary log includes the option.
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 如果原始语句指定了`FAILED_LOGIN_ATTEMPTS`或`PASSWORD_LOCK_TIME`选项，则写入二进制日志的语句包括该选项。
- en: '[`ALTER USER`](alter-user.html "15.7.1.1 ALTER USER Statement") statements
    with clauses that support multifactor authentication (MFA) are written to the
    binary log with the exception of `ALTER USER *`user factor`* INITIATE REGISTRATION`
    statements.'
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: 具有支持多因素身份验证（MFA）的子句的[`ALTER USER`](alter-user.html "15.7.1.1 ALTER USER Statement")语句被写入二进制日志，但不包括`ALTER
    USER *`user factor`* INITIATE REGISTRATION`语句。
- en: '`ALTER USER *`user factor`* FINISH REGISTRATION SET CHALLENGE_RESPONSE AS ''*`auth_string`*''`
    statements are written to the binary log as `ALTER USER *`user`* MODIFY *`factor`*
    IDENTIFIED WITH authentication_fido AS *`fido_hash_string`*`;'
  id: totrans-264
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ALTER USER *`user factor`* FINISH REGISTRATION SET CHALLENGE_RESPONSE AS ''*`auth_string`*''`
    语句被写入二进制日志为`ALTER USER *`user`* MODIFY *`factor`* IDENTIFIED WITH authentication_fido
    AS *`fido_hash_string`*`;'
- en: In a replication context, the replication user requires [`PASSWORDLESS_USER_ADMIN`](privileges-provided.html#priv_passwordless-user-admin)
    privilege to execute `ALTER USER ... MODIFY` operations on accounts configured
    for passwordless authentication using the `authentication_fido` plugin.
  id: totrans-265
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在复制环境中，复制用户需要[`PASSWORDLESS_USER_ADMIN`](privileges-provided.html#priv_passwordless-user-admin)权限来执行对使用`authentication_fido`插件配置为无密码身份验证的帐户进行`ALTER
    USER ... MODIFY`操作。
