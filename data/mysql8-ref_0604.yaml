- en: 10.9.3 Optimizer Hints
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 10.9.3 优化提示
- en: 原文：[https://dev.mysql.com/doc/refman/8.0/en/optimizer-hints.html](https://dev.mysql.com/doc/refman/8.0/en/optimizer-hints.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://dev.mysql.com/doc/refman/8.0/en/optimizer-hints.html](https://dev.mysql.com/doc/refman/8.0/en/optimizer-hints.html)
- en: One means of control over optimizer strategies is to set the [`optimizer_switch`](server-system-variables.html#sysvar_optimizer_switch)
    system variable (see [Section 10.9.2, “Switchable Optimizations”](switchable-optimizations.html
    "10.9.2 Switchable Optimizations")). Changes to this variable affect execution
    of all subsequent queries; to affect one query differently from another, it is
    necessary to change [`optimizer_switch`](server-system-variables.html#sysvar_optimizer_switch)
    before each one.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 控制优化器策略的一种方法是设置[`optimizer_switch`](server-system-variables.html#sysvar_optimizer_switch)系统变量（参见[第10.9.2节，“可切换的优化”](switchable-optimizations.html
    "10.9.2 可切换的优化")）。对此变量的更改会影响所有后续查询的执行；要使一个查询与另一个查询不同，需要在每个查询之前更改[`optimizer_switch`](server-system-variables.html#sysvar_optimizer_switch)。
- en: Another way to control the optimizer is by using optimizer hints, which can
    be specified within individual statements. Because optimizer hints apply on a
    per-statement basis, they provide finer control over statement execution plans
    than can be achieved using [`optimizer_switch`](server-system-variables.html#sysvar_optimizer_switch).
    For example, you can enable an optimization for one table in a statement and disable
    the optimization for a different table. Hints within a statement take precedence
    over [`optimizer_switch`](server-system-variables.html#sysvar_optimizer_switch)
    flags.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 控制优化器的另一种方法是使用优化提示，可以在单个语句中指定。因为优化提示是基于每个语句的基础上应用的，所以它们比使用[`optimizer_switch`](server-system-variables.html#sysvar_optimizer_switch)可以更精细地控制语句执行计划。例如，您可以为语句中的一个表启用优化，并为另一个表禁用优化。语句中的提示优先于[`optimizer_switch`](server-system-variables.html#sysvar_optimizer_switch)标志。
- en: 'Examples:'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: '示例:'
- en: '[PRE0]'
  id: totrans-5
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Optimizer hints, described here, differ from index hints, described in [Section 10.9.4,
    “Index Hints”](index-hints.html "10.9.4 Index Hints"). Optimizer and index hints
    may be used separately or together.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 此处描述的优化提示与[第10.9.4节，“索引提示”](index-hints.html "10.9.4 索引提示")中描述的索引提示不同。优化提示和索引提示可以单独使用或一起使用。
- en: '[Optimizer Hint Overview](optimizer-hints.html#optimizer-hints-overview "Optimizer
    Hint Overview")'
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[优化提示概述](optimizer-hints.html#optimizer-hints-overview "优化提示概述")'
- en: '[Optimizer Hint Syntax](optimizer-hints.html#optimizer-hints-syntax "Optimizer
    Hint Syntax")'
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[优化提示语法](optimizer-hints.html#optimizer-hints-syntax "优化提示语法")'
- en: '[Join-Order Optimizer Hints](optimizer-hints.html#optimizer-hints-join-order
    "Join-Order Optimizer Hints")'
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[连接顺序优化提示](optimizer-hints.html#optimizer-hints-join-order "连接顺序优化提示")'
- en: '[Table-Level Optimizer Hints](optimizer-hints.html#optimizer-hints-table-level
    "Table-Level Optimizer Hints")'
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[表级别优化提示](optimizer-hints.html#optimizer-hints-table-level "表级别优化提示")'
- en: '[Index-Level Optimizer Hints](optimizer-hints.html#optimizer-hints-index-level
    "Index-Level Optimizer Hints")'
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[索引级别优化提示](optimizer-hints.html#optimizer-hints-index-level "索引级别优化提示")'
- en: '[Subquery Optimizer Hints](optimizer-hints.html#optimizer-hints-subquery "Subquery
    Optimizer Hints")'
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[子查询优化提示](optimizer-hints.html#optimizer-hints-subquery "子查询优化提示")'
- en: '[Statement Execution Time Optimizer Hints](optimizer-hints.html#optimizer-hints-execution-time
    "Statement Execution Time Optimizer Hints")'
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[语句执行时间优化提示](optimizer-hints.html#optimizer-hints-execution-time "语句执行时间优化提示")'
- en: '[Variable-Setting Hint Syntax](optimizer-hints.html#optimizer-hints-set-var
    "Variable-Setting Hint Syntax")'
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[变量设置提示语法](optimizer-hints.html#optimizer-hints-set-var "变量设置提示语法")'
- en: '[Resource Group Hint Syntax](optimizer-hints.html#optimizer-hints-resource-group
    "Resource Group Hint Syntax")'
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[资源组提示语法](optimizer-hints.html#optimizer-hints-resource-group "资源组提示语法")'
- en: '[Optimizer Hints for Naming Query Blocks](optimizer-hints.html#optimizer-hints-query-block-naming
    "Optimizer Hints for Naming Query Blocks")'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[用于命名查询块的优化提示](optimizer-hints.html#optimizer-hints-query-block-naming "用于命名查询块的优化提示")'
- en: Optimizer Hint Overview
  id: totrans-17
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 优化提示概述
- en: 'Optimizer hints apply at different scope levels:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: '优化提示适用于不同的作用域级别:'
- en: 'Global: The hint affects the entire statement'
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '全局: 提示影响整个语句'
- en: 'Query block: The hint affects a particular query block within a statement'
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '查询块: 提示影响语句中的特定查询块'
- en: 'Table-level: The hint affects a particular table within a query block'
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '表级别: 提示影响查询块内的特定表'
- en: 'Index-level: The hint affects a particular index within a table'
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '索引级别: 提示影响表内的特定索引'
- en: The following table summarizes the available optimizer hints, the optimizer
    strategies they affect, and the scope or scopes at which they apply. More details
    are given later.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 以下表格总结了可用的优化提示、它们影响的优化策略以及适用的范围。更多细节稍后给出。
- en: '**Table 10.2 Optimizer Hints Available**'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: '**表 10.2 可用的优化提示**'
- en: '| Hint Name | Description | Applicable Scopes |'
  id: totrans-25
  prefs: []
  type: TYPE_TB
  zh: '| 提示名称 | 描述 | 适用范围 |'
- en: '| [`BKA`](optimizer-hints.html#optimizer-hints-table-level "Table-Level Optimizer
    Hints"), [`NO_BKA`](optimizer-hints.html#optimizer-hints-table-level "Table-Level
    Optimizer Hints") | Affects Batched Key Access join processing | Query block,
    table |'
  id: totrans-26
  prefs: []
  type: TYPE_TB
  zh: '| [`BKA`](optimizer-hints.html#optimizer-hints-table-level "表级别优化提示"), [`NO_BKA`](optimizer-hints.html#optimizer-hints-table-level
    "表级别优化提示") | 影响批量键访问连接处理 | 查询块，表 |'
- en: '| [`BNL`](optimizer-hints.html#optimizer-hints-table-level "Table-Level Optimizer
    Hints"), [`NO_BNL`](optimizer-hints.html#optimizer-hints-table-level "Table-Level
    Optimizer Hints") | Prior to MySQL 8.0.20: affects Block Nested-Loop join processing;
    MySQL 8.0.18 and later: also affects hash join optimization; MySQL 8.0.20 and
    later: affects hash join optimization only | Query block, table |'
  id: totrans-27
  prefs: []
  type: TYPE_TB
  zh: '| [`BNL`](optimizer-hints.html#optimizer-hints-table-level "表级别优化提示"), [`NO_BNL`](optimizer-hints.html#optimizer-hints-table-level
    "表级别优化提示") | 在MySQL 8.0.20之前：影响块嵌套循环连接处理；MySQL 8.0.18及更高版本：还影响哈希连接优化；MySQL 8.0.20及更高版本：仅影响哈希连接优化
    | 查询块，表 |'
- en: '| [`DERIVED_CONDITION_PUSHDOWN`](optimizer-hints.html#optimizer-hints-table-level
    "Table-Level Optimizer Hints"), [`NO_DERIVED_CONDITION_PUSHDOWN`](optimizer-hints.html#optimizer-hints-table-level
    "Table-Level Optimizer Hints") | Use or ignore the derived condition pushdown
    optimization for materialized derived tables (Added in MySQL 8.0.22) | Query block,
    table |'
  id: totrans-28
  prefs: []
  type: TYPE_TB
  zh: '| [`DERIVED_CONDITION_PUSHDOWN`](optimizer-hints.html#optimizer-hints-table-level
    "表级别优化提示"), [`NO_DERIVED_CONDITION_PUSHDOWN`](optimizer-hints.html#optimizer-hints-table-level
    "表级别优化提示") | 使用或忽略对物化派生表的派生条件推送优化（MySQL 8.0.22中添加） | 查询块，表 |'
- en: '| [`GROUP_INDEX`](optimizer-hints.html#optimizer-hints-index-level "Index-Level
    Optimizer Hints"), [`NO_GROUP_INDEX`](optimizer-hints.html#optimizer-hints-index-level
    "Index-Level Optimizer Hints") | Use or ignore the specified index or indexes
    for index scans in `GROUP BY` operations (Added in MySQL 8.0.20) | Index |'
  id: totrans-29
  prefs: []
  type: TYPE_TB
  zh: '| [`GROUP_INDEX`](optimizer-hints.html#optimizer-hints-index-level "索引级别优化提示"),
    [`NO_GROUP_INDEX`](optimizer-hints.html#optimizer-hints-index-level "索引级别优化提示")
    | 使用或忽略指定的索引或索引进行`GROUP BY`操作中的索引扫描（MySQL 8.0.20中添加） | 索引 |'
- en: '| [`HASH_JOIN`](optimizer-hints.html#optimizer-hints-table-level "Table-Level
    Optimizer Hints"), [`NO_HASH_JOIN`](optimizer-hints.html#optimizer-hints-table-level
    "Table-Level Optimizer Hints") | Affects Hash Join optimization (MySQL 8.0.18
    only | Query block, table |'
  id: totrans-30
  prefs: []
  type: TYPE_TB
  zh: '| [`HASH_JOIN`](optimizer-hints.html#optimizer-hints-table-level "表级别优化提示"),
    [`NO_HASH_JOIN`](optimizer-hints.html#optimizer-hints-table-level "表级别优化提示") |
    影响哈希连接优化（仅适用于MySQL 8.0.18） | 查询块，表 |'
- en: '| [`INDEX`](optimizer-hints.html#optimizer-hints-index-level "Index-Level Optimizer
    Hints"), [`NO_INDEX`](optimizer-hints.html#optimizer-hints-index-level "Index-Level
    Optimizer Hints") | Acts as the combination of [`JOIN_INDEX`](optimizer-hints.html#optimizer-hints-index-level
    "Index-Level Optimizer Hints"), [`GROUP_INDEX`](optimizer-hints.html#optimizer-hints-index-level
    "Index-Level Optimizer Hints"), and [`ORDER_INDEX`](optimizer-hints.html#optimizer-hints-index-level
    "Index-Level Optimizer Hints"), or as the combination of [`NO_JOIN_INDEX`](optimizer-hints.html#optimizer-hints-index-level
    "Index-Level Optimizer Hints"), [`NO_GROUP_INDEX`](optimizer-hints.html#optimizer-hints-index-level
    "Index-Level Optimizer Hints"), and [`NO_ORDER_INDEX`](optimizer-hints.html#optimizer-hints-index-level
    "Index-Level Optimizer Hints") (Added in MySQL 8.0.20) | Index |'
  id: totrans-31
  prefs: []
  type: TYPE_TB
  zh: '| [`INDEX`](optimizer-hints.html#optimizer-hints-index-level "索引级别优化提示"), [`NO_INDEX`](optimizer-hints.html#optimizer-hints-index-level
    "索引级别优化提示") | 作为[`JOIN_INDEX`](optimizer-hints.html#optimizer-hints-index-level
    "索引级别优化提示"), [`GROUP_INDEX`](optimizer-hints.html#optimizer-hints-index-level
    "索引级别优化提示"), 和 [`ORDER_INDEX`](optimizer-hints.html#optimizer-hints-index-level
    "索引级别优化提示") 的组合，或者[`NO_JOIN_INDEX`](optimizer-hints.html#optimizer-hints-index-level
    "索引级别优化提示"), [`NO_GROUP_INDEX`](optimizer-hints.html#optimizer-hints-index-level
    "索引级别优化提示"), 和 [`NO_ORDER_INDEX`](optimizer-hints.html#optimizer-hints-index-level
    "索引级别优化提示") 的组合（MySQL 8.0.20中添加） | 索引 |'
- en: '| [`INDEX_MERGE`](optimizer-hints.html#optimizer-hints-index-level "Index-Level
    Optimizer Hints"), [`NO_INDEX_MERGE`](optimizer-hints.html#optimizer-hints-index-level
    "Index-Level Optimizer Hints") | Affects Index Merge optimization | Table, index
    |'
  id: totrans-32
  prefs: []
  type: TYPE_TB
  zh: '| [`INDEX_MERGE`](optimizer-hints.html#optimizer-hints-index-level "索引级别优化提示"),
    [`NO_INDEX_MERGE`](optimizer-hints.html#optimizer-hints-index-level "索引级别优化提示")
    | 影响索引合并优化 | 表，索引 |'
- en: '| [`JOIN_FIXED_ORDER`](optimizer-hints.html#optimizer-hints-join-order "Join-Order
    Optimizer Hints") | Use table order specified in `FROM` clause for join order
    | Query block |'
  id: totrans-33
  prefs: []
  type: TYPE_TB
  zh: '| [`JOIN_FIXED_ORDER`](optimizer-hints.html#optimizer-hints-join-order "连接顺序优化提示")
    | 使用 `FROM` 子句中指定的表顺序作为连接顺序 | 查询块 |'
- en: '| [`JOIN_INDEX`](optimizer-hints.html#optimizer-hints-index-level "Index-Level
    Optimizer Hints"), [`NO_JOIN_INDEX`](optimizer-hints.html#optimizer-hints-index-level
    "Index-Level Optimizer Hints") | Use or ignore the specified index or indexes
    for any access method (Added in MySQL 8.0.20) | Index |'
  id: totrans-34
  prefs: []
  type: TYPE_TB
  zh: '| [`JOIN_INDEX`](optimizer-hints.html#optimizer-hints-index-level "索引级别优化提示"),
    [`NO_JOIN_INDEX`](optimizer-hints.html#optimizer-hints-index-level "索引级别优化提示")
    | 使用或忽略指定的索引或索引以供任何访问方法使用（MySQL 8.0.20 中添加） | 索引 |'
- en: '| [`JOIN_ORDER`](optimizer-hints.html#optimizer-hints-join-order "Join-Order
    Optimizer Hints") | Use table order specified in hint for join order | Query block
    |'
  id: totrans-35
  prefs: []
  type: TYPE_TB
  zh: '| [`JOIN_ORDER`](optimizer-hints.html#optimizer-hints-join-order "连接顺序优化提示")
    | 使用提示中指定的表顺序作为连接顺序 | 查询块 |'
- en: '| [`JOIN_PREFIX`](optimizer-hints.html#optimizer-hints-join-order "Join-Order
    Optimizer Hints") | Use table order specified in hint for first tables of join
    order | Query block |'
  id: totrans-36
  prefs: []
  type: TYPE_TB
  zh: '| [`JOIN_PREFIX`](optimizer-hints.html#optimizer-hints-join-order "连接顺序优化提示")
    | 使用提示中指定的表顺序作为连接顺序的第一个表 | 查询块 |'
- en: '| [`JOIN_SUFFIX`](optimizer-hints.html#optimizer-hints-join-order "Join-Order
    Optimizer Hints") | Use table order specified in hint for last tables of join
    order | Query block |'
  id: totrans-37
  prefs: []
  type: TYPE_TB
  zh: '| [`JOIN_SUFFIX`](optimizer-hints.html#optimizer-hints-join-order "连接顺序优化提示")
    | 使用提示中指定的表顺序作为连接顺序的最后表 | 查询块 |'
- en: '| [`MAX_EXECUTION_TIME`](optimizer-hints.html#optimizer-hints-execution-time
    "Statement Execution Time Optimizer Hints") | Limits statement execution time
    | Global |'
  id: totrans-38
  prefs: []
  type: TYPE_TB
  zh: '| [`MAX_EXECUTION_TIME`](optimizer-hints.html#optimizer-hints-execution-time
    "语句执行时间优化提示") | 限制语句执行时间 | 全局 |'
- en: '| [`MERGE`](optimizer-hints.html#optimizer-hints-table-level "Table-Level Optimizer
    Hints"), [`NO_MERGE`](optimizer-hints.html#optimizer-hints-table-level "Table-Level
    Optimizer Hints") | Affects derived table/view merging into outer query block
    | Table |'
  id: totrans-39
  prefs: []
  type: TYPE_TB
  zh: '| [`MERGE`](optimizer-hints.html#optimizer-hints-table-level "表级别优化提示"), [`NO_MERGE`](optimizer-hints.html#optimizer-hints-table-level
    "表级别优化提示") | 影响派���表/视图合并到外部查询块 | 表 |'
- en: '| [`MRR`](optimizer-hints.html#optimizer-hints-index-level "Index-Level Optimizer
    Hints"), [`NO_MRR`](optimizer-hints.html#optimizer-hints-index-level "Index-Level
    Optimizer Hints") | Affects Multi-Range Read optimization | Table, index |'
  id: totrans-40
  prefs: []
  type: TYPE_TB
  zh: '| [`MRR`](optimizer-hints.html#optimizer-hints-index-level "索引级别优化提示"), [`NO_MRR`](optimizer-hints.html#optimizer-hints-index-level
    "索引级别优化提示") | 影响多范围读取优化 | 表，索引 |'
- en: '| [`NO_ICP`](optimizer-hints.html#optimizer-hints-index-level "Index-Level
    Optimizer Hints") | Affects Index Condition Pushdown optimization | Table, index
    |'
  id: totrans-41
  prefs: []
  type: TYPE_TB
  zh: '| [`NO_ICP`](optimizer-hints.html#optimizer-hints-index-level "索引级别优化提示") |
    影响索引条件下推优化 | 表，索引 |'
- en: '| [`NO_RANGE_OPTIMIZATION`](optimizer-hints.html#optimizer-hints-index-level
    "Index-Level Optimizer Hints") | Affects range optimization | Table, index |'
  id: totrans-42
  prefs: []
  type: TYPE_TB
  zh: '| [`NO_RANGE_OPTIMIZATION`](optimizer-hints.html#optimizer-hints-index-level
    "索引级别优化提示") | 影响范围优化 | 表，索引 |'
- en: '| [`ORDER_INDEX`](optimizer-hints.html#optimizer-hints-index-level "Index-Level
    Optimizer Hints"), [`NO_ORDER_INDEX`](optimizer-hints.html#optimizer-hints-index-level
    "Index-Level Optimizer Hints") | Use or ignore the specified index or indexes
    for sorting rows (Added in MySQL 8.0.20) | Index |'
  id: totrans-43
  prefs: []
  type: TYPE_TB
  zh: '| [`ORDER_INDEX`](optimizer-hints.html#optimizer-hints-index-level "索引级别优化提示"),
    [`NO_ORDER_INDEX`](optimizer-hints.html#optimizer-hints-index-level "索引级别优化提示")
    | 使用或忽略指定的索引或索引以供对行进行排序（MySQL 8.0.20 中添加） | 索引 |'
- en: '| [`QB_NAME`](optimizer-hints.html#optimizer-hints-query-block-naming "Optimizer
    Hints for Naming Query Blocks") | Assigns name to query block | Query block |'
  id: totrans-44
  prefs: []
  type: TYPE_TB
  zh: '| [`QB_NAME`](optimizer-hints.html#optimizer-hints-query-block-naming "用于命名查询块的优化提示")
    | 为查询块分配名称 | 查询块 |'
- en: '| [`RESOURCE_GROUP`](optimizer-hints.html#optimizer-hints-resource-group "Resource
    Group Hint Syntax") | Set resource group during statement execution | Global |'
  id: totrans-45
  prefs: []
  type: TYPE_TB
  zh: '| [`RESOURCE_GROUP`](optimizer-hints.html#optimizer-hints-resource-group "资源组提示语法")
    | 在语句执行期间设置资源组 | 全局 |'
- en: '| [`SEMIJOIN`](optimizer-hints.html#optimizer-hints-subquery "Subquery Optimizer
    Hints"), [`NO_SEMIJOIN`](optimizer-hints.html#optimizer-hints-subquery "Subquery
    Optimizer Hints") | Affects semijoin strategies; beginning with MySQL 8.0.17,
    this also applies to antijoins | Query block |'
  id: totrans-46
  prefs: []
  type: TYPE_TB
  zh: '| [`SEMIJOIN`](optimizer-hints.html#optimizer-hints-subquery "子查询优化提示"), [`NO_SEMIJOIN`](optimizer-hints.html#optimizer-hints-subquery
    "子查询优化提示") | 影响半连接策略；从 MySQL 8.0.17 开始，这也适用于反连接 | 查询块 |'
- en: '| [`SKIP_SCAN`](optimizer-hints.html#optimizer-hints-index-level "Index-Level
    Optimizer Hints"), [`NO_SKIP_SCAN`](optimizer-hints.html#optimizer-hints-index-level
    "Index-Level Optimizer Hints") | Affects Skip Scan optimization | Table, index
    |'
  id: totrans-47
  prefs: []
  type: TYPE_TB
  zh: '| [`SKIP_SCAN`](optimizer-hints.html#optimizer-hints-index-level "Index-Level
    Optimizer Hints"), [`NO_SKIP_SCAN`](optimizer-hints.html#optimizer-hints-index-level
    "Index-Level Optimizer Hints") | 影响跳过扫描优化 | 表，索引 |'
- en: '| [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "Variable-Setting
    Hint Syntax") | Set variable during statement execution | Global |'
  id: totrans-48
  prefs: []
  type: TYPE_TB
  zh: '| [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "Variable-Setting
    Hint Syntax") | 在语句执行期间设置变量 | 全局 |'
- en: '| [`SUBQUERY`](optimizer-hints.html#optimizer-hints-subquery "Subquery Optimizer
    Hints") | Affects materialization, `IN`-to-`EXISTS` subquery strategies | Query
    block |'
  id: totrans-49
  prefs: []
  type: TYPE_TB
  zh: '| [`SUBQUERY`](optimizer-hints.html#optimizer-hints-subquery "Subquery Optimizer
    Hints") | 影响物化，`IN`-to-`EXISTS`子查询策略 | 查询块 |'
- en: '| Hint Name | Description | Applicable Scopes |'
  id: totrans-50
  prefs: []
  type: TYPE_TB
  zh: '| 提示名称 | 描述 | 适用范围 |'
- en: Disabling an optimization prevents the optimizer from using it. Enabling an
    optimization means the optimizer is free to use the strategy if it applies to
    statement execution, not that the optimizer necessarily uses it.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 禁用优化会阻止优化器使用它。启用优化意味着优化器可以自由使用该策略，如果它适用于语句执行，而不是优化器一定会使用它。
- en: Optimizer Hint Syntax
  id: totrans-52
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 优化器提示语法
- en: 'MySQL supports comments in SQL statements as described in [Section 11.7, “Comments”](comments.html
    "11.7 Comments"). Optimizer hints must be specified within `/*+ ... */` comments.
    That is, optimizer hints use a variant of `/* ... */` C-style comment syntax,
    with a `+` character following the `/*` comment opening sequence. Examples:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: MySQL支持SQL语句中的注释，如[第11.7节，“注释”](comments.html "11.7 Comments")所述。优化器提示必须在`/*+
    ... */`注释中指定。也就是说，优化器提示使用一种`/* ... */` C风格注释语法的变体，其中在`/*`注释开头序列后跟着一个`+`字符。例如：
- en: '[PRE1]'
  id: totrans-54
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Whitespace is permitted after the `+` character.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 在`+`字符后允许空格。
- en: 'The parser recognizes optimizer hint comments after the initial keyword of
    [`SELECT`](select.html "15.2.13 SELECT Statement"), [`UPDATE`](update.html "15.2.17 UPDATE
    Statement"), [`INSERT`](insert.html "15.2.7 INSERT Statement"), [`REPLACE`](replace.html
    "15.2.12 REPLACE Statement"), and [`DELETE`](delete.html "15.2.2 DELETE Statement")
    statements. Hints are permitted in these contexts:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 解析器在[`SELECT`](select.html "15.2.13 SELECT Statement")，[`UPDATE`](update.html
    "15.2.17 UPDATE Statement")，[`INSERT`](insert.html "15.2.7 INSERT Statement")，[`REPLACE`](replace.html
    "15.2.12 REPLACE Statement")和[`DELETE`](delete.html "15.2.2 DELETE Statement")语句的初始关键字后识别优化器提示注释。在这些上下文中允许使用提示：
- en: 'At the beginning of query and data change statements:'
  id: totrans-57
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在查询和数据更改语句的开头：
- en: '[PRE2]'
  id: totrans-58
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'At the beginning of query blocks:'
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在查询块的开头：
- en: '[PRE3]'
  id: totrans-60
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'In hintable statements prefaced by [`EXPLAIN`](explain.html "15.8.2 EXPLAIN
    Statement"). For example:'
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在以[`EXPLAIN`](explain.html "15.8.2 EXPLAIN Statement")为前缀的可提示语句中。例如：
- en: '[PRE4]'
  id: totrans-62
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: The implication is that you can use [`EXPLAIN`](explain.html "15.8.2 EXPLAIN
    Statement") to see how optimizer hints affect execution plans. Use [`SHOW WARNINGS`](show-warnings.html
    "15.7.7.42 SHOW WARNINGS Statement") immediately after [`EXPLAIN`](explain.html
    "15.8.2 EXPLAIN Statement") to see how hints are used. The extended `EXPLAIN`
    output displayed by a following [`SHOW WARNINGS`](show-warnings.html "15.7.7.42 SHOW
    WARNINGS Statement") indicates which hints were used. Ignored hints are not displayed.
  id: totrans-63
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这意味着您可以使用[`EXPLAIN`](explain.html "15.8.2 EXPLAIN Statement")查看优化器提示如何影响执行计划。在[`EXPLAIN`](explain.html
    "15.8.2 EXPLAIN Statement")之后立即使用[`SHOW WARNINGS`](show-warnings.html "15.7.7.42 SHOW
    WARNINGS Statement")查看提示的使用情况。由后续的[`SHOW WARNINGS`](show-warnings.html "15.7.7.42 SHOW
    WARNINGS Statement")显示的扩展`EXPLAIN`输出指示使用了哪些提示。被忽略的提示不会显示。
- en: 'A hint comment may contain multiple hints, but a query block cannot contain
    multiple hint comments. This is valid:'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 一个提示注释可以包含多个提示，但一个查询块不能包含多个提示注释。这是有效的：
- en: '[PRE5]'
  id: totrans-65
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'But this is invalid:'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 但这是无效的：
- en: '[PRE6]'
  id: totrans-67
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: When a hint comment contains multiple hints, the possibility of duplicates and
    conflicts exists. The following general guidelines apply. For specific hint types,
    additional rules may apply, as indicated in the hint descriptions.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 当一个提示注释包含多个提示时，存在重复和冲突的可能性。以下是一般准则。对于特定的提示类型，可能会适用额外的规则，如提示描述中所示。
- en: 'Duplicate hints: For a hint such as `/*+ MRR(idx1) MRR(idx1) */`, MySQL uses
    the first hint and issues a warning about the duplicate hint.'
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 重复的提示：对于像`/*+ MRR(idx1) MRR(idx1) */`这样的提示，MySQL使用第一个提示，并发出关于重复提示的警告。
- en: 'Conflicting hints: For a hint such as `/*+ MRR(idx1) NO_MRR(idx1) */`, MySQL
    uses the first hint and issues a warning about the second conflicting hint.'
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 冲突的提示：对于像`/*+ MRR(idx1) NO_MRR(idx1) */`这样的提示，MySQL使用第一个提示，并发出关于第二个冲突提示的警告。
- en: Query block names are identifiers and follow the usual rules about what names
    are valid and how to quote them (see [Section 11.2, “Schema Object Names”](identifiers.html
    "11.2 Schema Object Names")).
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 查询块名称是标识符，遵循关于哪些名称有效以及如何引用它们的通常规则（参见[第11.2节，“模式对象名称”](identifiers.html "11.2 模式对象名称")）。
- en: Hint names, query block names, and strategy names are not case-sensitive. References
    to table and index names follow the usual identifier case-sensitivity rules (see
    [Section 11.2.3, “Identifier Case Sensitivity”](identifier-case-sensitivity.html
    "11.2.3 Identifier Case Sensitivity")).
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 提示名称、查询块名称和策略名称不区分大小写。表和索引名称的引用遵循通常的标识符大小写敏感性规则（参见[第11.2.3节，“标识符大小写敏感性”](identifier-case-sensitivity.html
    "11.2.3 标识符大小写敏感性")）。
- en: Join-Order Optimizer Hints
  id: totrans-73
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 连接顺序优化提示
- en: Join-order hints affect the order in which the optimizer joins tables.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 连接顺序提示影响优化器连接表的顺序。
- en: 'Syntax of the [`JOIN_FIXED_ORDER`](optimizer-hints.html#optimizer-hints-join-order
    "Join-Order Optimizer Hints") hint:'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: '[`JOIN_FIXED_ORDER`](optimizer-hints.html#optimizer-hints-join-order "连接顺序优化提示")提示的语法：'
- en: '[PRE7]'
  id: totrans-76
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'Syntax of other join-order hints:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 其他连接顺序提示的语法：
- en: '[PRE8]'
  id: totrans-78
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'The syntax refers to these terms:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 语法指的是这些术语：
- en: '*`hint_name`*: These hint names are permitted:'
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*`hint_name`*：允许使用这些提示名称：'
- en: '[`JOIN_FIXED_ORDER`](optimizer-hints.html#optimizer-hints-join-order "Join-Order
    Optimizer Hints"): Force the optimizer to join tables using the order in which
    they appear in the `FROM` clause. This is the same as specifying `SELECT STRAIGHT_JOIN`.'
  id: totrans-81
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`JOIN_FIXED_ORDER`](optimizer-hints.html#optimizer-hints-join-order "连接顺序优化提示")：强制优化器按照它们在`FROM`子句中出现的顺序连接表。这与指定`SELECT
    STRAIGHT_JOIN`相同。'
- en: '[`JOIN_ORDER`](optimizer-hints.html#optimizer-hints-join-order "Join-Order
    Optimizer Hints"): Instruct the optimizer to join tables using the specified table
    order. The hint applies to the named tables. The optimizer may place tables that
    are not named anywhere in the join order, including between specified tables.'
  id: totrans-82
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`JOIN_ORDER`](optimizer-hints.html#optimizer-hints-join-order "连接顺序优化提示")：指示优化器使用指定的表顺序连接表。提示适用于指定的表。优化器可以在连接顺序中放置未命名的表，包括在指定表之间。'
- en: '[`JOIN_PREFIX`](optimizer-hints.html#optimizer-hints-join-order "Join-Order
    Optimizer Hints"): Instruct the optimizer to join tables using the specified table
    order for the first tables of the join execution plan. The hint applies to the
    named tables. The optimizer places all other tables after the named tables.'
  id: totrans-83
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`JOIN_PREFIX`](optimizer-hints.html#optimizer-hints-join-order "连接顺序优化提示")：指示优化器使用连接执行计划的第一个表的指定表顺序连接表。提示适用于指定的表。优化器将所有其他表放在指定表之后。'
- en: '[`JOIN_SUFFIX`](optimizer-hints.html#optimizer-hints-join-order "Join-Order
    Optimizer Hints"): Instruct the optimizer to join tables using the specified table
    order for the last tables of the join execution plan. The hint applies to the
    named tables. The optimizer places all other tables before the named tables.'
  id: totrans-84
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`JOIN_SUFFIX`](optimizer-hints.html#optimizer-hints-join-order "连接顺序优化提示")：指示优化器使用指定的表顺序连接连接执行计划的最后表。提示适用于指定的表。优化器将所有其他表放在指定表之前。'
- en: '*`tbl_name`*: The name of a table used in the statement. A hint that names
    tables applies to all tables that it names. The [`JOIN_FIXED_ORDER`](optimizer-hints.html#optimizer-hints-join-order
    "Join-Order Optimizer Hints") hint names no tables and applies to all tables in
    the `FROM` clause of the query block in which it occurs.'
  id: totrans-85
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*`tbl_name`*：语句中使用的表的名称。指定表名称的提示适用于所有指定的表。[`JOIN_FIXED_ORDER`](optimizer-hints.html#optimizer-hints-join-order
    "连接顺序优化提示")提示不指定表名，并适用于其出现的查询块的`FROM`子句中的所有表。'
- en: If a table has an alias, hints must refer to the alias, not the table name.
  id: totrans-86
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果表有别名，则提示必须引用别名，而不是表名。
- en: Table names in hints cannot be qualified with schema names.
  id: totrans-87
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 提示中的表名不能带有模式名限定。
- en: '*`query_block_name`*: The query block to which the hint applies. If the hint
    includes no leading `@*`query_block_name`*`, the hint applies to the query block
    in which it occurs. For `*`tbl_name`*@*`query_block_name`*` syntax, the hint applies
    to the named table in the named query block. To assign a name to a query block,
    see [Optimizer Hints for Naming Query Blocks](optimizer-hints.html#optimizer-hints-query-block-naming
    "Optimizer Hints for Naming Query Blocks").'
  id: totrans-88
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*`query_block_name`*：提示适用的查询块。如果提示中不包含前导`@*`query_block_name`*`，则提示适用于其出现的查询块。对于`*`tbl_name`*@*`query_block_name`*`语法，提示适用于指定查询块中的指定表。要为查询块指定名称，请参见[为查询块命名的优化提示](optimizer-hints.html#optimizer-hints-query-block-naming
    "为查询块命名的优化提示")。'
- en: 'Example:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 示例：
- en: '[PRE9]'
  id: totrans-90
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: Hints control the behavior of semijoin tables that are merged to the outer query
    block. If subqueries `subq1` and `subq2` are converted to semijoins, tables `t4@subq1`
    and `t5@subq2` are merged to the outer query block. In this case, the hint specified
    in the outer query block controls the behavior of `t4@subq1`, `t5@subq2` tables.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 提示控制将合并到外部查询块的半连接表的行为。如果子查询 `subq1` 和 `subq2` 被转换为半连接，表 `t4@subq1` 和 `t5@subq2`
    将合并到外部查询块。在这种情况下，外部查询块中指定的提示控制 `t4@subq1`、`t5@subq2` 表的行为。
- en: 'The optimizer resolves join-order hints according to these principles:'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 优化器根据以下原则解析连接顺序提示：
- en: Multiple hint instances
  id: totrans-93
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 多个提示实例
- en: Only one [`JOIN_PREFIX`](optimizer-hints.html#optimizer-hints-join-order "Join-Order
    Optimizer Hints") and [`JOIN_SUFFIX`](optimizer-hints.html#optimizer-hints-join-order
    "Join-Order Optimizer Hints") hint of each type are applied. Any later hints of
    the same type are ignored with a warning. [`JOIN_ORDER`](optimizer-hints.html#optimizer-hints-join-order
    "Join-Order Optimizer Hints") can be specified several times.
  id: totrans-94
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 每种类型只应用一个 [`JOIN_PREFIX`](optimizer-hints.html#optimizer-hints-join-order "连接顺序优化提示")
    和 [`JOIN_SUFFIX`](optimizer-hints.html#optimizer-hints-join-order "连接顺序优化提示")
    提示。后续相同类型的提示将被忽略，并显示警告。[`JOIN_ORDER`](optimizer-hints.html#optimizer-hints-join-order
    "连接顺序优化提示") 可以多次指定。
- en: 'Examples:'
  id: totrans-95
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 示例：
- en: '[PRE10]'
  id: totrans-96
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE10]'
- en: The second [`JOIN_PREFIX`](optimizer-hints.html#optimizer-hints-join-order "Join-Order
    Optimizer Hints") hint is ignored with a warning.
  id: totrans-97
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 第二个 [`JOIN_PREFIX`](optimizer-hints.html#optimizer-hints-join-order "连接顺序优化提示")
    提示将被忽略，并显示警告。
- en: '[PRE11]'
  id: totrans-98
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Both hints are applicable. No warning occurs.
  id: totrans-99
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 两个提示都适用。不会出现警告。
- en: '[PRE12]'
  id: totrans-100
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE12]'
- en: Both hints are applicable. No warning occurs.
  id: totrans-101
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 两个提示都适用。不会出现警告。
- en: Conflicting hints
  id: totrans-102
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 冲突的提示
- en: 'In some cases hints can conflict, such as when [`JOIN_ORDER`](optimizer-hints.html#optimizer-hints-join-order
    "Join-Order Optimizer Hints") and [`JOIN_PREFIX`](optimizer-hints.html#optimizer-hints-join-order
    "Join-Order Optimizer Hints") have table orders that are impossible to apply at
    the same time:'
  id: totrans-103
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在某些情况下，提示可能会发生冲突，例如当 [`JOIN_ORDER`](optimizer-hints.html#optimizer-hints-join-order
    "连接顺序优化提示") 和 [`JOIN_PREFIX`](optimizer-hints.html#optimizer-hints-join-order
    "连接顺序优化提示") 具有不可能同时应用的表顺序时：
- en: '[PRE13]'
  id: totrans-104
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE13]'
- en: In this case, the first specified hint is applied and subsequent conflicting
    hints are ignored with no warning. A valid hint that is impossible to apply is
    silently ignored with no warning.
  id: totrans-105
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在这种情况下，第一个指定的提示被应用，后续冲突的提示将被忽略，且不会出现警告。一个无法应用的有效提示将被静默忽略，且不会出现警告。
- en: Ignored hints
  id: totrans-106
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 被忽略的提示
- en: A hint is ignored if a table specified in the hint has a circular dependency.
  id: totrans-107
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果提示中指定的表存在循环依赖，则提示将被忽略。
- en: 'Example:'
  id: totrans-108
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 示例：
- en: '[PRE14]'
  id: totrans-109
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE14]'
- en: The [`JOIN_ORDER`](optimizer-hints.html#optimizer-hints-join-order "Join-Order
    Optimizer Hints") hint sets table `t2` dependent on `t1`. The [`JOIN_PREFIX`](optimizer-hints.html#optimizer-hints-join-order
    "Join-Order Optimizer Hints") hint is ignored because table `t1` cannot be dependent
    on `t2`. Ignored hints are not displayed in extended [`EXPLAIN`](explain.html
    "15.8.2 EXPLAIN Statement") output.
  id: totrans-110
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[`JOIN_ORDER`](optimizer-hints.html#optimizer-hints-join-order "连接顺序优化提示")
    提示将表 `t2` 设置为依赖于 `t1`。[`JOIN_PREFIX`](optimizer-hints.html#optimizer-hints-join-order
    "连接顺序优化提示") 提示被忽略，因为表 `t1` 不能依赖于 `t2`。被忽略的提示不会显示在扩展的 [`EXPLAIN`](explain.html
    "15.8.2 EXPLAIN 语句") 输出中。'
- en: Interaction with [`const`](explain-output.html#jointype_const) tables
  id: totrans-111
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 与 [`const`](explain-output.html#jointype_const) 表的交互
- en: 'The MySQL optimizer places `const` tables first in the join order, and the
    position of a `const` table cannot be affected by hints. References to `const`
    tables in join-order hints are ignored, although the hint is still applicable.
    For example, these are equivalent:'
  id: totrans-112
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: MySQL 优化器将 `const` 表放在连接顺序的首位，`const` 表的位置不受提示影响。在连接顺序提示中忽略对 `const` 表的引用，尽管提示仍然适用。例如，以下两种提示是等效的：
- en: '[PRE15]'
  id: totrans-113
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE15]'
- en: Accepted hints shown in extended [`EXPLAIN`](explain.html "15.8.2 EXPLAIN Statement")
    output include `const` tables as they were specified.
  id: totrans-114
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在扩展的 [`EXPLAIN`](explain.html "15.8.2 EXPLAIN 语句") 输出中显示的接受的提示包括按照指定方式指定的 `const`
    表。
- en: Interaction with types of join operations
  id: totrans-115
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 与连接操作类型的交互
- en: 'MySQL supports several type of joins: `LEFT`, `RIGHT`, `INNER`, `CROSS`, `STRAIGHT_JOIN`.
    A hint that conflicts with the specified type of join is ignored with no warning.'
  id: totrans-116
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: MySQL 支持几种类型的连接：`LEFT`、`RIGHT`、`INNER`、`CROSS`、`STRAIGHT_JOIN`。与指定的连接类型冲突的提示将被忽略，且不会出现警告。
- en: 'Example:'
  id: totrans-117
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 示例：
- en: '[PRE16]'
  id: totrans-118
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE16]'
- en: Here a conflict occurs between the requested join order in the hint and the
    order required by the `LEFT JOIN`. The hint is ignored with no warning.
  id: totrans-119
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在提示中请求的连接顺序与 `LEFT JOIN` 所需的顺序之间发生冲突。提示将被忽略，且不会出现警告。
- en: Table-Level Optimizer Hints
  id: totrans-120
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 表级优化提示
- en: 'Table-level hints affect:'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 表级提示影响：
- en: Use of the Block Nested-Loop (BNL) and Batched Key Access (BKA) join-processing
    algorithms (see [Section 10.2.1.12, “Block Nested-Loop and Batched Key Access
    Joins”](bnl-bka-optimization.html "10.2.1.12 Block Nested-Loop and Batched Key
    Access Joins")).
  id: totrans-122
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用块嵌套循环（BNL）和批量键访问（BKA）连接处理算法（参见[第10.2.1.12节，“块嵌套循环和批量键访问连接”](bnl-bka-optimization.html
    "10.2.1.12 块嵌套循环和批量键访问连接")）。
- en: Whether derived tables, view references, or common table expressions should
    be merged into the outer query block, or materialized using an internal temporary
    table.
  id: totrans-123
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 衍生表、视图引用或公共表达式是否应合并到外部查询块中，或者使用内部临时表进行材料化。
- en: Use of the derived table condition pushdown optimization (added in MySQL 8.0.22).
    See [Section 10.2.2.5, “Derived Condition Pushdown Optimization”](derived-condition-pushdown-optimization.html
    "10.2.2.5 Derived Condition Pushdown Optimization").
  id: totrans-124
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用衍生表条件下推优化（在MySQL 8.0.22中添加）。请参见[第10.2.2.5节，“衍生条件下推优化”](derived-condition-pushdown-optimization.html
    "10.2.2.5 衍生条件下推优化")。
- en: These hint types apply to specific tables, or all tables in a query block.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 这些提示类型适用于特定表或查询块中的所有表。
- en: 'Syntax of table-level hints:'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 表级提示的语法：
- en: '[PRE17]'
  id: totrans-127
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'The syntax refers to these terms:'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 语法涉及这些术语：
- en: '*`hint_name`*: These hint names are permitted:'
  id: totrans-129
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*`hint_name`*：允许使用这些提示名称：'
- en: '[`BKA`](optimizer-hints.html#optimizer-hints-table-level "Table-Level Optimizer
    Hints"), [`NO_BKA`](optimizer-hints.html#optimizer-hints-table-level "Table-Level
    Optimizer Hints"): Enable or disable batched key access for the specified tables.'
  id: totrans-130
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`BKA`](optimizer-hints.html#optimizer-hints-table-level "表级优化提示"), [`NO_BKA`](optimizer-hints.html#optimizer-hints-table-level
    "表级优化提示")：启用或禁用指定表的批量键访问。'
- en: '[`BNL`](optimizer-hints.html#optimizer-hints-table-level "Table-Level Optimizer
    Hints"), [`NO_BNL`](optimizer-hints.html#optimizer-hints-table-level "Table-Level
    Optimizer Hints"): Enable or disable block nested loop for the specified tables.
    In MySQL 8.0.18 and later, these hints also enable and disable the hash join optimization.'
  id: totrans-131
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`BNL`](optimizer-hints.html#optimizer-hints-table-level "表级优化提示"), [`NO_BNL`](optimizer-hints.html#optimizer-hints-table-level
    "表级优化提示")：启用或禁用指定表的块嵌套循环。在MySQL 8.0.18及更高版本中，这些提示还启用和禁用哈希连接优化。'
- en: Note
  id: totrans-132
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意
- en: The block-nested loop optimization is removed in MySQL 8.0.20 and later releases,
    but `BNL` and `NO_BNL` continue to be supported for enabling and disabling hash
    joins.
  id: totrans-133
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: MySQL 8.0.20及更高版本中移除了块嵌套循环优化，但仍支持`BNL`和`NO_BNL`以启用和禁用哈希连接。
- en: '[`DERIVED_CONDITION_PUSHDOWN`](optimizer-hints.html#optimizer-hints-table-level
    "Table-Level Optimizer Hints"), [`NO_DERIVED_CONDITION_PUSHDOWN`](optimizer-hints.html#optimizer-hints-table-level
    "Table-Level Optimizer Hints"): Enable or disable use of derived table condition
    pushdown for the specified tables (added in MySQL 8.0.22). For more information,
    see [Section 10.2.2.5, “Derived Condition Pushdown Optimization”](derived-condition-pushdown-optimization.html
    "10.2.2.5 Derived Condition Pushdown Optimization").'
  id: totrans-134
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`DERIVED_CONDITION_PUSHDOWN`](optimizer-hints.html#optimizer-hints-table-level
    "表级优化提示"), [`NO_DERIVED_CONDITION_PUSHDOWN`](optimizer-hints.html#optimizer-hints-table-level
    "表级优化提示")：启用或禁用指定表的衍生表条件下推（在MySQL 8.0.22中添加）。有关更多信息，请参见[第10.2.2.5节，“衍生条件下推优化”](derived-condition-pushdown-optimization.html
    "10.2.2.5 衍生条件下推优化")。'
- en: '[`HASH_JOIN`](optimizer-hints.html#optimizer-hints-table-level "Table-Level
    Optimizer Hints"), [`NO_HASH_JOIN`](optimizer-hints.html#optimizer-hints-table-level
    "Table-Level Optimizer Hints"): In MySQL 8.0.18 only, enable or disable use of
    a hash join for the specified tables. These hints have no effect in MySQL 8.0.19
    or later, where you should use [`BNL`](optimizer-hints.html#optimizer-hints-table-level
    "Table-Level Optimizer Hints") or [`NO_BNL`](optimizer-hints.html#optimizer-hints-table-level
    "Table-Level Optimizer Hints") instead.'
  id: totrans-135
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`HASH_JOIN`](optimizer-hints.html#optimizer-hints-table-level "表级优化提示"), [`NO_HASH_JOIN`](optimizer-hints.html#optimizer-hints-table-level
    "表级优化提示")：仅在MySQL 8.0.18中启用或禁用指定表的哈希连接。在MySQL 8.0.19或更高版本中，这些提示无效，应改用[`BNL`](optimizer-hints.html#optimizer-hints-table-level
    "表级优化提示")或[`NO_BNL`](optimizer-hints.html#optimizer-hints-table-level "表级优化提示")。'
- en: '[`MERGE`](optimizer-hints.html#optimizer-hints-table-level "Table-Level Optimizer
    Hints"), [`NO_MERGE`](optimizer-hints.html#optimizer-hints-table-level "Table-Level
    Optimizer Hints"): Enable merging for the specified tables, view references or
    common table expressions; or disable merging and use materialization instead.'
  id: totrans-136
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`MERGE`](optimizer-hints.html#optimizer-hints-table-level "表级优化器提示"), [`NO_MERGE`](optimizer-hints.html#optimizer-hints-table-level
    "表级优化器提示")：为指定的表、视图引用或公共表达式启用合并；或禁用合并，改为使用材料化。'
- en: Note
  id: totrans-137
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意
- en: To use a block nested loop or batched key access hint to enable join buffering
    for any inner table of an outer join, join buffering must be enabled for all inner
    tables of the outer join.
  id: totrans-138
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 要使用块嵌套循环或批量键访问提示为外连接的任何内部表启用连接缓冲，必须为外连接的所有内部表启用连接缓冲。
- en: '*`tbl_name`*: The name of a table used in the statement. The hint applies to
    all tables that it names. If the hint names no tables, it applies to all tables
    of the query block in which it occurs.'
  id: totrans-139
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*`tbl_name`*：语句中使用的表的名称。提示适用于所有命名的表。如果提示未命名任何表，则适用于其出现的查询块中的所有表。'
- en: If a table has an alias, hints must refer to the alias, not the table name.
  id: totrans-140
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果表有别名，则提示必须引用别名，而不是表名。
- en: Table names in hints cannot be qualified with schema names.
  id: totrans-141
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 提示中的表名不能带有模式名。
- en: '*`query_block_name`*: The query block to which the hint applies. If the hint
    includes no leading `@*`query_block_name`*`, the hint applies to the query block
    in which it occurs. For `*`tbl_name`*@*`query_block_name`*` syntax, the hint applies
    to the named table in the named query block. To assign a name to a query block,
    see [Optimizer Hints for Naming Query Blocks](optimizer-hints.html#optimizer-hints-query-block-naming
    "Optimizer Hints for Naming Query Blocks").'
  id: totrans-142
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*`query_block_name`*：提示适用的查询块。如果提示不包含前导`@*`query_block_name`*`，则提示适用于其出现的查询块。对于`*`tbl_name`*@*`query_block_name`*`语法，提示适用于命名查询块中的命名表。要为查询块分配名称，请参见[为查询块命名的优化器提示](optimizer-hints.html#optimizer-hints-query-block-naming
    "为查询块命名的优化器提示")。'
- en: 'Examples:'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 示例：
- en: '[PRE18]'
  id: totrans-144
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'A table-level hint applies to tables that receive records from previous tables,
    not sender tables. Consider this statement:'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 表级提示适用于接收来自前面表的记录的表，而不是发送方表。考虑以下语句：
- en: '[PRE19]'
  id: totrans-146
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: If the optimizer chooses to process `t1` first, it applies a Block Nested-Loop
    join to `t2` by buffering the rows from `t1` before starting to read from `t2`.
    If the optimizer instead chooses to process `t2` first, the hint has no effect
    because `t2` is a sender table.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 如果优化器选择首先处理`t1`，则通过在开始从`t2`读取之前缓冲来自`t1`的行，将对`t2`应用块嵌套循环连接。如果优化器选择首先处理`t2`，则提示无效，因为`t2`是发送方表。
- en: 'For the [`MERGE`](optimizer-hints.html#optimizer-hints-table-level "Table-Level
    Optimizer Hints") and [`NO_MERGE`](optimizer-hints.html#optimizer-hints-table-level
    "Table-Level Optimizer Hints") hints, these precedence rules apply:'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 对于[`MERGE`](optimizer-hints.html#optimizer-hints-table-level "表级优化器提示")和[`NO_MERGE`](optimizer-hints.html#optimizer-hints-table-level
    "表级优化器提示")提示，适用以下优先规则：
- en: A hint takes precedence over any optimizer heuristic that is not a technical
    constraint. (If providing a hint as a suggestion has no effect, the optimizer
    has a reason for ignoring it.)
  id: totrans-149
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 提示优先于任何不是技术约束的优化器启发式。 (如果提供提示作为建议没有效果，优化器有理由忽略它。)
- en: A hint takes precedence over the [`derived_merge`](switchable-optimizations.html#optflag_derived-merge)
    flag of the [`optimizer_switch`](server-system-variables.html#sysvar_optimizer_switch)
    system variable.
  id: totrans-150
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 提示优先于[`optimizer_switch`](server-system-variables.html#sysvar_optimizer_switch)系统变量的[`derived_merge`](switchable-optimizations.html#optflag_derived-merge)标志。
- en: For view references, an `ALGORITHM={MERGE|TEMPTABLE}` clause in the view definition
    takes precedence over a hint specified in the query referencing the view.
  id: totrans-151
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于视图引用，视图定义中的`ALGORITHM={MERGE|TEMPTABLE}`子句优先于在引用视图的查询中指定的提示。
- en: Index-Level Optimizer Hints
  id: totrans-152
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 索引级优化器提示
- en: Index-level hints affect which index-processing strategies the optimizer uses
    for particular tables or indexes. These hint types affect use of Index Condition
    Pushdown (ICP), Multi-Range Read (MRR), Index Merge, and range optimizations (see
    [Section 10.2.1, “Optimizing SELECT Statements”](select-optimization.html "10.2.1 Optimizing
    SELECT Statements")).
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 索引级提示影响优化器为特定表或索引使用哪些索引处理策略。这些提示类型影响索引条件下推（ICP）、多范围读取（MRR）、索引合并和范围优化的使用（参见[第10.2.1节，“优化SELECT语句”](select-optimization.html
    "10.2.1 优化SELECT语句")）。
- en: 'Syntax of index-level hints:'
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 索引级提示的语法：
- en: '[PRE20]'
  id: totrans-155
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'The syntax refers to these terms:'
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 语法涉及以下术语：
- en: '*`hint_name`*: These hint names are permitted:'
  id: totrans-157
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*`hint_name`*：允许使用这些提示名称：'
- en: '[`GROUP_INDEX`](optimizer-hints.html#optimizer-hints-index-level "Index-Level
    Optimizer Hints"), [`NO_GROUP_INDEX`](optimizer-hints.html#optimizer-hints-index-level
    "Index-Level Optimizer Hints"): Enable or disable the specified index or indexes
    for index scans for `GROUP BY` operations. Equivalent to the index hints `FORCE
    INDEX FOR GROUP BY`, `IGNORE INDEX FOR GROUP BY`. Available in MySQL 8.0.20 and
    later.'
  id: totrans-158
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`GROUP_INDEX`](optimizer-hints.html#optimizer-hints-index-level "索引级优化提示"),
    [`NO_GROUP_INDEX`](optimizer-hints.html#optimizer-hints-index-level "索引级优化提示")：为`GROUP
    BY`操作启用或禁用指定索引或索引的索引扫描。等同于索引提示`FORCE INDEX FOR GROUP BY`, `IGNORE INDEX FOR GROUP
    BY`。从MySQL 8.0.20及更高版本提供。'
- en: '[`INDEX`](optimizer-hints.html#optimizer-hints-index-level "Index-Level Optimizer
    Hints"), [`NO_INDEX`](optimizer-hints.html#optimizer-hints-index-level "Index-Level
    Optimizer Hints"): Acts as the combination of [`JOIN_INDEX`](optimizer-hints.html#optimizer-hints-index-level
    "Index-Level Optimizer Hints"), [`GROUP_INDEX`](optimizer-hints.html#optimizer-hints-index-level
    "Index-Level Optimizer Hints"), and [`ORDER_INDEX`](optimizer-hints.html#optimizer-hints-index-level
    "Index-Level Optimizer Hints"), forcing the server to use the specified index
    or indexes for any and all scopes, or as the combination of [`NO_JOIN_INDEX`](optimizer-hints.html#optimizer-hints-index-level
    "Index-Level Optimizer Hints"), [`NO_GROUP_INDEX`](optimizer-hints.html#optimizer-hints-index-level
    "Index-Level Optimizer Hints"), and [`NO_ORDER_INDEX`](optimizer-hints.html#optimizer-hints-index-level
    "Index-Level Optimizer Hints"), which causes the server to ignore the specified
    index or indexes for any and all scopes. Equivalent to `FORCE INDEX`, `IGNORE
    INDEX`. Available beginning with MySQL 8.0.20.'
  id: totrans-159
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`INDEX`](optimizer-hints.html#optimizer-hints-index-level "索引级优化提示"), [`NO_INDEX`](optimizer-hints.html#optimizer-hints-index-level
    "索引级优化提示")：作为[`JOIN_INDEX`](optimizer-hints.html#optimizer-hints-index-level "索引级优化提示"),
    [`GROUP_INDEX`](optimizer-hints.html#optimizer-hints-index-level "索引级优化提示"), 和
    [`ORDER_INDEX`](optimizer-hints.html#optimizer-hints-index-level "索引级优化提示")的组合，强制服务器使用指定的索引或索引来处理任何范围，或作为[`NO_JOIN_INDEX`](optimizer-hints.html#optimizer-hints-index-level
    "索引级优化提示"), [`NO_GROUP_INDEX`](optimizer-hints.html#optimizer-hints-index-level
    "索引级优化提示"), 和 [`NO_ORDER_INDEX`](optimizer-hints.html#optimizer-hints-index-level
    "索引级优化提示")的组合，导致服务器忽略指定的索引或索引用于任何范围。等同于`FORCE INDEX`, `IGNORE INDEX`。从MySQL 8.0.20开始提供。'
- en: '[`INDEX_MERGE`](optimizer-hints.html#optimizer-hints-index-level "Index-Level
    Optimizer Hints"), [`NO_INDEX_MERGE`](optimizer-hints.html#optimizer-hints-index-level
    "Index-Level Optimizer Hints"): Enable or disable the Index Merge access method
    for the specified table or indexes. For information about this access method,
    see [Section 10.2.1.3, “Index Merge Optimization”](index-merge-optimization.html
    "10.2.1.3 Index Merge Optimization"). These hints apply to all three Index Merge
    algorithms.'
  id: totrans-160
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`INDEX_MERGE`](optimizer-hints.html#optimizer-hints-index-level "索引级优化提示"),
    [`NO_INDEX_MERGE`](optimizer-hints.html#optimizer-hints-index-level "索引级优化提示")：启用或禁用指定表或索引的索引合并访问方法。有关此访问方法的信息，请参见[Section 10.2.1.3,
    “Index Merge Optimization”](index-merge-optimization.html "10.2.1.3 索引合并优化")。这些提示适用于所有三种索引合并算法。'
- en: The [`INDEX_MERGE`](optimizer-hints.html#optimizer-hints-index-level "Index-Level
    Optimizer Hints") hint forces the optimizer to use Index Merge for the specified
    table using the specified set of indexes. If no index is specified, the optimizer
    considers all possible index combinations and selects the least expensive one.
    The hint may be ignored if the index combination is inapplicable to the given
    statement.
  id: totrans-161
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[`INDEX_MERGE`](optimizer-hints.html#optimizer-hints-index-level "索引级优化提示")提示强制优化器使用指定表的指定索引集进行索引合并。如果未指定索引，则优化器会考虑所有可能的索引组合并选择最经济的一个。如果索引组合不适用于给定的语句，则可能会忽略此提示。'
- en: The [`NO_INDEX_MERGE`](optimizer-hints.html#optimizer-hints-index-level "Index-Level
    Optimizer Hints") hint disables Index Merge combinations that involve any of the
    specified indexes. If the hint specifies no indexes, Index Merge is not permitted
    for the table.
  id: totrans-162
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[`NO_INDEX_MERGE`](optimizer-hints.html#optimizer-hints-index-level "索引级优化提示")提示禁用涉及任何指定索引的索引合并组合。如果提示未指定任何索引，则不允许对表进行索引合并。'
- en: '[`JOIN_INDEX`](optimizer-hints.html#optimizer-hints-index-level "Index-Level
    Optimizer Hints"), [`NO_JOIN_INDEX`](optimizer-hints.html#optimizer-hints-index-level
    "Index-Level Optimizer Hints"): Forces MySQL to use or ignore the specified index
    or indexes for any access method, such as `ref`, `range`, [`index_merge`](switchable-optimizations.html#optflag_index-merge),
    and so on. Equivalent to `FORCE INDEX FOR JOIN`, `IGNORE INDEX FOR JOIN`. Available
    in MySQL 8.0.20 and later.'
  id: totrans-163
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`JOIN_INDEX`](optimizer-hints.html#optimizer-hints-index-level "索引级别优化提示"),
    [`NO_JOIN_INDEX`](optimizer-hints.html#optimizer-hints-index-level "索引级别优化提示"):
    强制 MySQL 使用或忽略指定的索引或索引，用于任何访问方法，如`ref`、`range`、[`index_merge`](switchable-optimizations.html#optflag_index-merge)等。相当于`FORCE
    INDEX FOR JOIN`、`IGNORE INDEX FOR JOIN`。从 MySQL 8.0.20 版本开始提供。'
- en: '[`MRR`](optimizer-hints.html#optimizer-hints-index-level "Index-Level Optimizer
    Hints"), [`NO_MRR`](optimizer-hints.html#optimizer-hints-index-level "Index-Level
    Optimizer Hints"): Enable or disable MRR for the specified table or indexes. MRR
    hints apply only to `InnoDB` and `MyISAM` tables. For information about this access
    method, see [Section 10.2.1.11, “Multi-Range Read Optimization”](mrr-optimization.html
    "10.2.1.11 Multi-Range Read Optimization").'
  id: totrans-164
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`MRR`](optimizer-hints.html#optimizer-hints-index-level "索引级别优化提示"), [`NO_MRR`](optimizer-hints.html#optimizer-hints-index-level
    "索引级别优化提示"): 启用或禁用指定表或索引的 MRR。MRR 提示仅适用于`InnoDB`和`MyISAM`表。有关此访问方法的信息，请参见[Section 10.2.1.11,
    “Multi-Range Read Optimization”](mrr-optimization.html "10.2.1.11 多范围读取优化")。'
- en: '[`NO_ICP`](optimizer-hints.html#optimizer-hints-index-level "Index-Level Optimizer
    Hints"): Disable ICP for the specified table or indexes. By default, ICP is a
    candidate optimization strategy, so there is no hint for enabling it. For information
    about this access method, see [Section 10.2.1.6, “Index Condition Pushdown Optimization”](index-condition-pushdown-optimization.html
    "10.2.1.6 Index Condition Pushdown Optimization").'
  id: totrans-165
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`NO_ICP`](optimizer-hints.html#optimizer-hints-index-level "索引级别优化提示"): 禁用指定表或索引的
    ICP。默认情况下，ICP 是一种候选优化策略，因此没有启用它的提示。有关此访问方法的信息，请参见[Section 10.2.1.6, “Index Condition
    Pushdown Optimization”](index-condition-pushdown-optimization.html "10.2.1.6 索引条件下推优化")。'
- en: '[`NO_RANGE_OPTIMIZATION`](optimizer-hints.html#optimizer-hints-index-level
    "Index-Level Optimizer Hints"): Disable index range access for the specified table
    or indexes. This hint also disables Index Merge and Loose Index Scan for the table
    or indexes. By default, range access is a candidate optimization strategy, so
    there is no hint for enabling it.'
  id: totrans-166
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`NO_RANGE_OPTIMIZATION`](optimizer-hints.html#optimizer-hints-index-level
    "索引级别优化提示"): 禁用指定表或索引的索引范围访问。此提示还禁用了表或索引的索引合并和松散索引扫描。默认情况下，范围访问是一种候选优化策略，因此没有启用它的提示。'
- en: This hint may be useful when the number of ranges may be high and range optimization
    would require many resources.
  id: totrans-167
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: 当范围数量可能很高且范围优化需要大量资源时，此提示可能会有用。
- en: '[`ORDER_INDEX`](optimizer-hints.html#optimizer-hints-index-level "Index-Level
    Optimizer Hints"), [`NO_ORDER_INDEX`](optimizer-hints.html#optimizer-hints-index-level
    "Index-Level Optimizer Hints"): Cause MySQL to use or to ignore the specified
    index or indexes for sorting rows. Equivalent to `FORCE INDEX FOR ORDER BY`, `IGNORE
    INDEX FOR ORDER BY`. Available beginning with MySQL 8.0.20.'
  id: totrans-168
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`ORDER_INDEX`](optimizer-hints.html#optimizer-hints-index-level "索引级别优化提示"),
    [`NO_ORDER_INDEX`](optimizer-hints.html#optimizer-hints-index-level "索引级别优化提示"):
    导致 MySQL 使用或忽略指定的索引或索引来对行进行排序。相当于`FORCE INDEX FOR ORDER BY`、`IGNORE INDEX FOR
    ORDER BY`。从 MySQL 8.0.20 版本开始提供。'
- en: '[`SKIP_SCAN`](optimizer-hints.html#optimizer-hints-index-level "Index-Level
    Optimizer Hints"), [`NO_SKIP_SCAN`](optimizer-hints.html#optimizer-hints-index-level
    "Index-Level Optimizer Hints"): Enable or disable the Skip Scan access method
    for the specified table or indexes. For information about this access method,
    see [Skip Scan Range Access Method](range-optimization.html#range-access-skip-scan
    "Skip Scan Range Access Method"). These hints are available as of MySQL 8.0.13.'
  id: totrans-169
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`SKIP_SCAN`](optimizer-hints.html#optimizer-hints-index-level "索引级别优化提示"),
    [`NO_SKIP_SCAN`](optimizer-hints.html#optimizer-hints-index-level "索引级别优化提示"):
    启用或禁用指定表或索引的跳过扫描访问方法。有关此访问方法的信息，请参见[跳过扫描范围访问方法](range-optimization.html#range-access-skip-scan
    "跳过扫描范围访问方法")。这些提示从 MySQL 8.0.13 版本开始提供。'
- en: The [`SKIP_SCAN`](optimizer-hints.html#optimizer-hints-index-level "Index-Level
    Optimizer Hints") hint forces the optimizer to use Skip Scan for the specified
    table using the specified set of indexes. If no index is specified, the optimizer
    considers all possible indexes and selects the least expensive one. The hint may
    be ignored if the index is inapplicable to the given statement.
  id: totrans-170
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[`SKIP_SCAN`](optimizer-hints.html#optimizer-hints-index-level "索引级别优化器提示")提示强制优化器使用跳过扫描来使用指定的表和指定的索引集。如果未指定索引，则优化器考虑所有可能的索引并选择最经济的一个。如果索引不适用于给定语句，则可能会忽略提示。'
- en: The [`NO_SKIP_SCAN`](optimizer-hints.html#optimizer-hints-index-level "Index-Level
    Optimizer Hints") hint disables Skip Scan for the specified indexes. If the hint
    specifies no indexes, Skip Scan is not permitted for the table.
  id: totrans-171
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[`NO_SKIP_SCAN`](optimizer-hints.html#optimizer-hints-index-level "索引级别优化器提示")提示禁用了指定索引的跳过扫描。如果提示未指定任何索引，则不允许对表进行跳过扫描。'
- en: '*`tbl_name`*: The table to which the hint applies.'
  id: totrans-172
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*`tbl_name`*：提示适用的表。'
- en: '*`index_name`*: The name of an index in the named table. The hint applies to
    all indexes that it names. If the hint names no indexes, it applies to all indexes
    in the table.'
  id: totrans-173
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*`index_name`*：命名表中索引的名称。提示适用于所有命名的索引。如果提示未命名任何索引，则适用于表中的所有索引。'
- en: To refer to a primary key, use the name `PRIMARY`. To see the index names for
    a table, use [`SHOW INDEX`](show-index.html "15.7.7.22 SHOW INDEX Statement").
  id: totrans-174
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 要引用主键，请使用名称`PRIMARY`。要查看表的索引名称，请使用[`SHOW INDEX`](show-index.html "15.7.7.22 SHOW
    INDEX Statement")。
- en: '*`query_block_name`*: The query block to which the hint applies. If the hint
    includes no leading `@*`query_block_name`*`, the hint applies to the query block
    in which it occurs. For `*`tbl_name`*@*`query_block_name`*` syntax, the hint applies
    to the named table in the named query block. To assign a name to a query block,
    see [Optimizer Hints for Naming Query Blocks](optimizer-hints.html#optimizer-hints-query-block-naming
    "Optimizer Hints for Naming Query Blocks").'
  id: totrans-175
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*`query_block_name`*：提示适用的查询块。如果提示中不包含前导`@*`query_block_name`*`，则提示适用于出现在其中的查询块。对于`*`tbl_name`*@*`query_block_name`*`语法，提示适用于命名查询块中的命名表。要为查询块分配名称，请参见[为查询块命名的优化器提示](optimizer-hints.html#optimizer-hints-query-block-naming
    "为查询块命名的优化器提示")。'
- en: 'Examples:'
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 示例：
- en: '[PRE21]'
  id: totrans-177
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: The following examples use the Index Merge hints, but other index-level hints
    follow the same principles regarding hint ignoring and precedence of optimizer
    hints in relation to the [`optimizer_switch`](server-system-variables.html#sysvar_optimizer_switch)
    system variable or index hints.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 下面的示例使用了索引合并提示，但其他索引级别的提示遵循相同的原则，关于提示忽略和优化器提示在与[`optimizer_switch`](server-system-variables.html#sysvar_optimizer_switch)系统变量或索引提示的优先级方面的关系。
- en: 'Assume that table `t1` has columns `a`, `b`, `c`, and `d`; and that indexes
    named `i_a`, `i_b`, and `i_c` exist on `a`, `b`, and `c`, respectively:'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 假设表`t1`具有列`a`、`b`、`c`和`d`；并且在`a`、`b`和`c`上分别存在名为`i_a`、`i_b`和`i_c`的索引：
- en: '[PRE22]'
  id: totrans-180
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: Index Merge is used for `(i_a, i_b, i_c)` in this case.
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，索引合并用于`(i_a, i_b, i_c)`。
- en: '[PRE23]'
  id: totrans-182
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: Index Merge is used for `(i_b, i_c)` in this case.
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，索引合并用于`(i_b, i_c)`。
- en: '[PRE24]'
  id: totrans-184
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: '[`NO_INDEX_MERGE`](optimizer-hints.html#optimizer-hints-index-level "Index-Level
    Optimizer Hints") is ignored because there is a preceding hint for the same table.'
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: '[`NO_INDEX_MERGE`](optimizer-hints.html#optimizer-hints-index-level "索引级别优化器提示")被忽略，因为存在相同表的先前提示。'
- en: '[PRE25]'
  id: totrans-186
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: '[`INDEX_MERGE`](optimizer-hints.html#optimizer-hints-index-level "Index-Level
    Optimizer Hints") is ignored because there is a preceding hint for the same table.'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: '[`INDEX_MERGE`](optimizer-hints.html#optimizer-hints-index-level "索引级别优化器提示")被忽略，因为存在相同表的先前提示。'
- en: 'For the [`INDEX_MERGE`](optimizer-hints.html#optimizer-hints-index-level "Index-Level
    Optimizer Hints") and [`NO_INDEX_MERGE`](optimizer-hints.html#optimizer-hints-index-level
    "Index-Level Optimizer Hints") optimizer hints, these precedence rules apply:'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 对于[`INDEX_MERGE`](optimizer-hints.html#optimizer-hints-index-level "索引级别优化器提示")和[`NO_INDEX_MERGE`](optimizer-hints.html#optimizer-hints-index-level
    "索引级别优化器提示")优化器提示，适用以下优先规则：
- en: If an optimizer hint is specified and is applicable, it takes precedence over
    the Index Merge-related flags of the [`optimizer_switch`](server-system-variables.html#sysvar_optimizer_switch)
    system variable.
  id: totrans-189
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果指定了优化器提示并且适用，则它优先于[`optimizer_switch`](server-system-variables.html#sysvar_optimizer_switch)系统变量的与索引合并相关的标志。
- en: '[PRE26]'
  id: totrans-190
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE26]'
- en: The hint takes precedence over [`optimizer_switch`](server-system-variables.html#sysvar_optimizer_switch).
    Index Merge is used for `(i_b, i_c)` in this case.
  id: totrans-191
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 提示优先于[`optimizer_switch`](server-system-variables.html#sysvar_optimizer_switch)。在这种情况下，索引合并用于`(i_b,
    i_c)`。
- en: '[PRE27]'
  id: totrans-192
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE27]'
- en: The hint specifies only one index, so it is inapplicable, and the [`optimizer_switch`](server-system-variables.html#sysvar_optimizer_switch)
    flag (`on`) applies. Index Merge is used if the optimizer assesses it to be cost
    efficient.
  id: totrans-193
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 提示只指定了一个索引，因此不适用，并且 [`optimizer_switch`](server-system-variables.html#sysvar_optimizer_switch)
    标志（`on`）适用。如果优化器评估为成本有效，则使用索引合并。
- en: '[PRE28]'
  id: totrans-194
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE28]'
- en: The hint specifies only one index, so it is inapplicable, and the [`optimizer_switch`](server-system-variables.html#sysvar_optimizer_switch)
    flag (`off`) applies. Index Merge is not used.
  id: totrans-195
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 提示只指定了一个索引，因此不适用，并且 [`optimizer_switch`](server-system-variables.html#sysvar_optimizer_switch)
    标志（`off`）适用。不使用索引合并。
- en: The index-level optimizer hints `GROUP_INDEX`, `INDEX`, `JOIN_INDEX`, and `ORDER_INDEX`
    all take precedence over the equivalent `FORCE INDEX` hints; that is, they cause
    the `FORCE INDEX` hints to be ignored. Likewise, the `NO_GROUP_INDEX`, `NO_INDEX`,
    `NO_JOIN_INDEX`, and `NO_ORDER_INDEX` hints all take precedence over any `IGNORE
    INDEX` equivalents, also causing them to be ignored.
  id: totrans-196
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 索引级别的优化提示 `GROUP_INDEX`、`INDEX`、`JOIN_INDEX` 和 `ORDER_INDEX` 都优先于等效的 `FORCE
    INDEX` 提示；也就是说，它们导致 `FORCE INDEX` 提示被忽略。同样，`NO_GROUP_INDEX`、`NO_INDEX`、`NO_JOIN_INDEX`
    和 `NO_ORDER_INDEX` 提示都优先于任何 `IGNORE INDEX` 等效项，也导致它们被忽略。
- en: The index-level optimizer hints `GROUP_INDEX`, `NO_GROUP_INDEX`, `INDEX`,`NO_INDEX`,
    `JOIN_INDEX`,`NO_JOIN_INDEX`, `ORDER_INDEX`, and `NO_ORDER_INDEX` hints all take
    precedence over all other optimizer hints, including other index-level optimizer
    hints. Any other optimizer hints are applied only to the indexes permitted by
    these.
  id: totrans-197
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 索引级别的优化提示 `GROUP_INDEX`、`NO_GROUP_INDEX`、`INDEX`、`NO_INDEX`、`JOIN_INDEX`、`NO_JOIN_INDEX`、`ORDER_INDEX`
    和 `NO_ORDER_INDEX` 提示都优先于所有其他优化提示，包括其他索引级别的优化提示。任何其他优化提示仅适用于这些提示允许的索引。
- en: The `GROUP_INDEX`, `INDEX`, `JOIN_INDEX`, and `ORDER_INDEX` hints are all equivalent
    to `FORCE INDEX` and not to `USE INDEX`. This is because using one or more of
    these hints means that a table scan is used only if there is no way to use one
    of the named indexes to find rows in the table. To cause MySQL to use the same
    index or set of indexes as with a given instance of `USE INDEX`, you can use `NO_INDEX`,
    `NO_JOIN_INDEX`, `NO_GROUP_INDEX`, `NO_ORDER_INDEX`, or some combination of these.
  id: totrans-198
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`GROUP_INDEX`、`INDEX`、`JOIN_INDEX` 和 `ORDER_INDEX` 提示都等同于 `FORCE INDEX`，而不是
    `USE INDEX`。这是因为使用这些提示中的一个或多个意味着只有在无法使用命名的索引来查找表中的行时才会使用表扫描。要使 MySQL 使用与给定的 `USE
    INDEX` 实例相同的索引或索引集，可以使用 `NO_INDEX`、`NO_JOIN_INDEX`、`NO_GROUP_INDEX`、`NO_ORDER_INDEX`
    或这些提示的某种组合。'
- en: 'To replicate the effect that `USE INDEX` has in the query `SELECT a,c FROM
    t1 USE INDEX FOR ORDER BY (i_a) ORDER BY a`, you can use the `NO_ORDER_INDEX`
    optimizer hint to cover all indexes on the table except the one that is desired
    like this:'
  id: totrans-199
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 要复制查询 `SELECT a,c FROM t1 USE INDEX FOR ORDER BY (i_a) ORDER BY a` 中 `USE INDEX`
    的效果，可以使用 `NO_ORDER_INDEX` 优化提示来覆盖表上除所需索引之外的所有索引，如下所示：
- en: '[PRE29]'
  id: totrans-200
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE29]'
- en: 'Attempting to combine `NO_ORDER_INDEX` for the table as a whole with `USE INDEX
    FOR ORDER BY` does not work to do this, because `NO_ORDER_BY` causes `USE INDEX`
    to be ignored, as shown here:'
  id: totrans-201
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 尝试将整个表的 `NO_ORDER_INDEX` 与 `USE INDEX FOR ORDER BY` 结合起来不起作用，因为 `NO_ORDER_BY`
    导致 `USE INDEX` 被忽略，如下所示：
- en: '[PRE30]'
  id: totrans-202
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE30]'
- en: The `USE INDEX`, `FORCE INDEX`, and `IGNORE INDEX` index hints have higher priority
    than the [`INDEX_MERGE`](optimizer-hints.html#optimizer-hints-index-level "Index-Level
    Optimizer Hints") and [`NO_INDEX_MERGE`](optimizer-hints.html#optimizer-hints-index-level
    "Index-Level Optimizer Hints") optimizer hints.
  id: totrans-203
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`USE INDEX`、`FORCE INDEX` 和 `IGNORE INDEX` 索引提示的优先级高于 [`INDEX_MERGE`](optimizer-hints.html#optimizer-hints-index-level
    "索引级别优化提示") 和 [`NO_INDEX_MERGE`](optimizer-hints.html#optimizer-hints-index-level
    "索引级别优化提示") 优化提示。'
- en: '[PRE31]'
  id: totrans-204
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE31]'
- en: '`IGNORE INDEX` takes precedence over [`INDEX_MERGE`](optimizer-hints.html#optimizer-hints-index-level
    "Index-Level Optimizer Hints"), so index `i_a` is excluded from the possible ranges
    for Index Merge.'
  id: totrans-205
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`IGNORE INDEX` 优先于 [`INDEX_MERGE`](optimizer-hints.html#optimizer-hints-index-level
    "索引级别优化提示")，因此索引 `i_a` 被排除在索引合并的可能范围之外。'
- en: '[PRE32]'
  id: totrans-206
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE32]'
- en: Index Merge is disallowed for `i_a, i_b` because of `FORCE INDEX`, but the optimizer
    is forced to use either `i_a` or `i_b` for [`range`](explain-output.html#jointype_range)
    or [`ref`](explain-output.html#jointype_ref) access. There are no conflicts; both
    hints are applicable.
  id: totrans-207
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 由于 `FORCE INDEX`，`i_a, i_b` 不允许进行索引合并，但是优化器被强制使用 `i_a` 或 `i_b` 进行 [`range`](explain-output.html#jointype_range)
    或 [`ref`](explain-output.html#jointype_ref) 访问。没有冲突；两个提示都适用。
- en: If an `IGNORE INDEX` hint names multiple indexes, those indexes are unavailable
    for Index Merge.
  id: totrans-208
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果 `IGNORE INDEX` 提示命名多个索引，则这些索引对于索引合并是不可用的。
- en: The `FORCE INDEX` and `USE INDEX` hints make only the named indexes to be available
    for Index Merge.
  id: totrans-209
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`FORCE INDEX`和`USE INDEX`提示仅使命名的索引可用于索引合并。'
- en: '[PRE33]'
  id: totrans-210
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE33]'
- en: The Index Merge intersection access algorithm is used for `(i_a, i_b)`. The
    same is true if `FORCE INDEX` is changed to `USE INDEX`.
  id: totrans-211
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对于`(i_a, i_b)`，使用索引合并交集访问算法。如果将`FORCE INDEX`更改为`USE INDEX`，情况也是如此。
- en: Subquery Optimizer Hints
  id: totrans-212
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 子查询优化提示
- en: Subquery hints affect whether to use semijoin transformations and which semijoin
    strategies to permit, and, when semijoins are not used, whether to use subquery
    materialization or `IN`-to-`EXISTS` transformations. For more information about
    these optimizations, see [Section 10.2.2, “Optimizing Subqueries, Derived Tables,
    View References, and Common Table Expressions”](subquery-optimization.html "10.2.2 Optimizing
    Subqueries, Derived Tables, View References, and Common Table Expressions").
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 子查询提示影响是否使用半连接转换以及允许哪些半连接策略，并且在不使用半连接时，是否使用子查询材料化或`IN`到`EXISTS`转换。有关这些优化的更多信息，请参见[第10.2.2节，“优化子查询、派生表、视图引用和公共表表达式”](subquery-optimization.html
    "10.2.2 优化子查询、派生表、视图引用和公共表表达式")。
- en: 'Syntax of hints that affect semijoin strategies:'
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 影响半连接策略的提示的语法：
- en: '[PRE34]'
  id: totrans-215
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: 'The syntax refers to these terms:'
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 语法涉及以下术语：
- en: '*`hint_name`*: These hint names are permitted:'
  id: totrans-217
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*`hint_name`*：允许使用这些提示名称：'
- en: '[`SEMIJOIN`](optimizer-hints.html#optimizer-hints-subquery "Subquery Optimizer
    Hints"), [`NO_SEMIJOIN`](optimizer-hints.html#optimizer-hints-subquery "Subquery
    Optimizer Hints"): Enable or disable the named semijoin strategies.'
  id: totrans-218
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`SEMIJOIN`](optimizer-hints.html#optimizer-hints-subquery "子查询优化提示")，[`NO_SEMIJOIN`](optimizer-hints.html#optimizer-hints-subquery
    "子查询优化提示")：启用或禁用指定的半连接策略。'
- en: '*`strategy`*: A semijoin strategy to be enabled or disabled. These strategy
    names are permitted: `DUPSWEEDOUT`, `FIRSTMATCH`, `LOOSESCAN`, `MATERIALIZATION`.'
  id: totrans-219
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*`strategy`*：要启用或禁用的半连接策略。允许使用这些策略名称：`DUPSWEEDOUT`、`FIRSTMATCH`、`LOOSESCAN`、`MATERIALIZATION`。'
- en: For [`SEMIJOIN`](optimizer-hints.html#optimizer-hints-subquery "Subquery Optimizer
    Hints") hints, if no strategies are named, semijoin is used if possible based
    on the strategies enabled according to the [`optimizer_switch`](server-system-variables.html#sysvar_optimizer_switch)
    system variable. If strategies are named but inapplicable for the statement, `DUPSWEEDOUT`
    is used.
  id: totrans-220
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对于[`SEMIJOIN`](optimizer-hints.html#optimizer-hints-subquery "子查询优化提示")提示，如果没有指定策略，则根据根据[`optimizer_switch`](server-system-variables.html#sysvar_optimizer_switch)系统变量启用的策略来尽可能使用半连接。如果指定了策略但对语句不适用，则使用`DUPSWEEDOUT`。
- en: For [`NO_SEMIJOIN`](optimizer-hints.html#optimizer-hints-subquery "Subquery
    Optimizer Hints") hints, if no strategies are named, semijoin is not used. If
    strategies are named that rule out all applicable strategies for the statement,
    `DUPSWEEDOUT` is used.
  id: totrans-221
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对于[`NO_SEMIJOIN`](optimizer-hints.html#optimizer-hints-subquery "子查询优化提示")提示，如果没有指定策略，则不使用半连接。如果指定的策略排除了语句的所有适用策略，则使用`DUPSWEEDOUT`。
- en: If one subquery is nested within another and both are merged into a semijoin
    of an outer query, any specification of semijoin strategies for the innermost
    query are ignored. [`SEMIJOIN`](optimizer-hints.html#optimizer-hints-subquery
    "Subquery Optimizer Hints") and [`NO_SEMIJOIN`](optimizer-hints.html#optimizer-hints-subquery
    "Subquery Optimizer Hints") hints can still be used to enable or disable semijoin
    transformations for such nested subqueries.
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 如果一个子查询嵌套在另一个子查询中，并且两者合并为外部查询的半连接，那么对于最内层查询的任何半连接策略规范都将被忽略。仍然可以使用[`SEMIJOIN`](optimizer-hints.html#optimizer-hints-subquery
    "子查询优化提示")和[`NO_SEMIJOIN`](optimizer-hints.html#optimizer-hints-subquery "子查询优化提示")提示来启用或禁用这种嵌套子查询的半连接转换。
- en: If `DUPSWEEDOUT` is disabled, on occasion the optimizer may generate a query
    plan that is far from optimal. This occurs due to heuristic pruning during greedy
    search, which can be avoided by setting [`optimizer_prune_level=0`](server-system-variables.html#sysvar_optimizer_prune_level).
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 如果禁用了`DUPSWEEDOUT`，有时优化器可能生成远非最佳的查询计划。这是由于贪婪搜索期间的启发式修剪导致的，可以通过设置[`optimizer_prune_level=0`](server-system-variables.html#sysvar_optimizer_prune_level)来避免。
- en: 'Examples:'
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 示例：
- en: '[PRE35]'
  id: totrans-225
  prefs: []
  type: TYPE_PRE
  zh: '[PRE35]'
- en: 'Syntax of hints that affect whether to use subquery materialization or `IN`-to-`EXISTS`
    transformations:'
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 影响是否使用子查询材料化或`IN`到`EXISTS`转换的提示的语法：
- en: '[PRE36]'
  id: totrans-227
  prefs: []
  type: TYPE_PRE
  zh: '[PRE36]'
- en: The hint name is always [`SUBQUERY`](optimizer-hints.html#optimizer-hints-subquery
    "Subquery Optimizer Hints").
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 提示名称始终为[`SUBQUERY`](optimizer-hints.html#optimizer-hints-subquery "子查询优化提示")。
- en: 'For [`SUBQUERY`](optimizer-hints.html#optimizer-hints-subquery "Subquery Optimizer
    Hints") hints, these *`strategy`* values are permitted: `INTOEXISTS`, `MATERIALIZATION`.'
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 对于[`SUBQUERY`](optimizer-hints.html#optimizer-hints-subquery "子查询优化提示")提示，允许使用这些*`strategy`*值：`INTOEXISTS`，`MATERIALIZATION`。
- en: 'Examples:'
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: 例子：
- en: '[PRE37]'
  id: totrans-231
  prefs: []
  type: TYPE_PRE
  zh: '[PRE37]'
- en: For semijoin and [`SUBQUERY`](optimizer-hints.html#optimizer-hints-subquery
    "Subquery Optimizer Hints") hints, a leading `@*`query_block_name`*` specifies
    the query block to which the hint applies. If the hint includes no leading `@*`query_block_name`*`,
    the hint applies to the query block in which it occurs. To assign a name to a
    query block, see [Optimizer Hints for Naming Query Blocks](optimizer-hints.html#optimizer-hints-query-block-naming
    "Optimizer Hints for Naming Query Blocks").
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: 对于半连接和[`SUBQUERY`](optimizer-hints.html#optimizer-hints-subquery "子查询优化提示")提示，前导`@*`query_block_name`*`指定提示适用的查询块。如果提示不包含前导`@*`query_block_name`*`，则提示适用于其出现的查询块。要为查询块分配名称，请参阅[用于命名查询块的优化提示](optimizer-hints.html#optimizer-hints-query-block-naming
    "用于命名查询块的优化提示")。
- en: If a hint comment contains multiple subquery hints, the first is used. If there
    are other following hints of that type, they produce a warning. Following hints
    of other types are silently ignored.
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: 如果提示注释包含多个子查询提示，则使用第一个。如果有其他相同类型的后续提示，则会产生警告。其他类型的后续提示会被静默忽略。
- en: Statement Execution Time Optimizer Hints
  id: totrans-234
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 语句执行时间优化提示
- en: 'The [`MAX_EXECUTION_TIME`](optimizer-hints.html#optimizer-hints-execution-time
    "Statement Execution Time Optimizer Hints") hint is permitted only for [`SELECT`](select.html
    "15.2.13 SELECT Statement") statements. It places a limit *`N`* (a timeout value
    in milliseconds) on how long a statement is permitted to execute before the server
    terminates it:'
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: '[`MAX_EXECUTION_TIME`](optimizer-hints.html#optimizer-hints-execution-time
    "语句执行时间优化提示")提示仅适用于[`SELECT`](select.html "15.2.13 SELECT Statement")语句。它在服务器终止之前对语句执行的时间设置了限制*`N`*（以毫秒为单位的超时值）：'
- en: '[PRE38]'
  id: totrans-236
  prefs: []
  type: TYPE_PRE
  zh: '[PRE38]'
- en: 'Example with a timeout of 1 second (1000 milliseconds):'
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，设置超时为1秒（1000毫秒）：
- en: '[PRE39]'
  id: totrans-238
  prefs: []
  type: TYPE_PRE
  zh: '[PRE39]'
- en: The [`MAX_EXECUTION_TIME(*`N`*)`](optimizer-hints.html#optimizer-hints-execution-time
    "Statement Execution Time Optimizer Hints") hint sets a statement execution timeout
    of *`N`* milliseconds. If this option is absent or *`N`* is 0, the statement timeout
    established by the [`max_execution_time`](server-system-variables.html#sysvar_max_execution_time)
    system variable applies.
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: '[`MAX_EXECUTION_TIME(*`N`*)`](optimizer-hints.html#optimizer-hints-execution-time
    "语句执行时间优化提示")提示设置了*`N`*毫秒的语句执行超时。如果此选项不存在或*`N`*为0，则由[`max_execution_time`](server-system-variables.html#sysvar_max_execution_time)系统变量设置的语句超时生效。'
- en: 'The [`MAX_EXECUTION_TIME`](optimizer-hints.html#optimizer-hints-execution-time
    "Statement Execution Time Optimizer Hints") hint is applicable as follows:'
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: '[`MAX_EXECUTION_TIME`](optimizer-hints.html#optimizer-hints-execution-time
    "语句执行时间优化提示")提示适用如下：'
- en: For statements with multiple `SELECT` keywords, such as unions or statements
    with subqueries, [`MAX_EXECUTION_TIME`](optimizer-hints.html#optimizer-hints-execution-time
    "Statement Execution Time Optimizer Hints") applies to the entire statement and
    must appear after the first [`SELECT`](select.html "15.2.13 SELECT Statement").
  id: totrans-241
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于包含多个`SELECT`关键字的语句，例如联合或包含子查询的语句，[`MAX_EXECUTION_TIME`](optimizer-hints.html#optimizer-hints-execution-time
    "语句执行时间优化提示")适用于整个语句，并且必须出现在第一个[`SELECT`](select.html "15.2.13 SELECT Statement")之后。
- en: It applies to read-only [`SELECT`](select.html "15.2.13 SELECT Statement") statements.
    Statements that are not read only are those that invoke a stored function that
    modifies data as a side effect.
  id: totrans-242
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 适用于只读[`SELECT`](select.html "15.2.13 SELECT Statement")语句。不是只读的语句是那些调用修改数据的存储函数的语句。
- en: It does not apply to [`SELECT`](select.html "15.2.13 SELECT Statement") statements
    in stored programs and is ignored.
  id: totrans-243
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不适用于存储程序中的[`SELECT`](select.html "15.2.13 SELECT Statement")语句，并且会被忽略。
- en: Variable-Setting Hint Syntax
  id: totrans-244
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 变量设置提示语法
- en: 'The [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "Variable-Setting
    Hint Syntax") hint sets the session value of a system variable temporarily (for
    the duration of a single statement). Examples:'
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: '[`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "变量设置提示语法")提示临时设置系统变量的会话值（在单个语句的持续时间内）。例子：'
- en: '[PRE40]'
  id: totrans-246
  prefs: []
  type: TYPE_PRE
  zh: '[PRE40]'
- en: 'Syntax of the [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "Variable-Setting
    Hint Syntax") hint:'
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: '[`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "变量设置提示语法")提示的语法：'
- en: '[PRE41]'
  id: totrans-248
  prefs: []
  type: TYPE_PRE
  zh: '[PRE41]'
- en: '*`var_name`* names a system variable that has a session value (although not
    all such variables can be named, as explained later). *`value`* is the value to
    assign to the variable; the value must be a scalar.'
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: '*`var_name`* 是命名具有会话值的系统变量（尽管并非所有这些变量都可以命名，稍后会解释）。*`value`* 是要分配给变量的值；该值必须是标量。'
- en: '[`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "Variable-Setting
    Hint Syntax") makes a temporary variable change, as demonstrated by these statements:'
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: '[`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "变量设置提示语法") 进行临时变量更改，如下面的语句所示：'
- en: '[PRE42]'
  id: totrans-251
  prefs: []
  type: TYPE_PRE
  zh: '[PRE42]'
- en: 'With [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "Variable-Setting
    Hint Syntax"), there is no need to save and restore the variable value. This enables
    you to replace multiple statements by a single statement. Consider this sequence
    of statements:'
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "变量设置提示语法")，无需保存和恢复变量值。这使您可以通过单个语句替换多个语句。考虑以下语句序列：
- en: '[PRE43]'
  id: totrans-253
  prefs: []
  type: TYPE_PRE
  zh: '[PRE43]'
- en: 'The sequence can be replaced by this single statement:'
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: 这个序列可以被这个单个语句替代：
- en: '[PRE44]'
  id: totrans-255
  prefs: []
  type: TYPE_PRE
  zh: '[PRE44]'
- en: 'Standalone [`SET`](set-variable.html "15.7.6.1 SET Syntax for Variable Assignment")
    statements permit any of these syntaxes for naming session variables:'
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: 独立的 [`SET`](set-variable.html "15.7.6.1 变量赋值的 SET 语法") 语句允许使用以下任何语法来命名会话变量：
- en: '[PRE45]'
  id: totrans-257
  prefs: []
  type: TYPE_PRE
  zh: '[PRE45]'
- en: Because the [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "Variable-Setting
    Hint Syntax") hint applies only to session variables, session scope is implicit,
    and `SESSION`, `@@SESSION.`, and `@@` are neither needed nor permitted. Including
    explicit session-indicator syntax results in the [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var
    "Variable-Setting Hint Syntax") hint being ignored with a warning.
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: 因为 [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "变量设置提示语法") 提示仅适用于会话变量，会话范围是隐含的，`SESSION`、`@@SESSION.`
    和 `@@` 既不需要也不允许。包括显式会话指示符语法会导致忽略带有警告的 [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var
    "变量设置提示语法") 提示。
- en: 'Not all session variables are permitted for use with [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var
    "Variable-Setting Hint Syntax"). Individual system variable descriptions indicate
    whether each variable is hintable; see [Section 7.1.8, “Server System Variables”](server-system-variables.html
    "7.1.8 Server System Variables"). You can also check a system variable at runtime
    by attempting to use it with [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var
    "Variable-Setting Hint Syntax"). If the variable is not hintable, a warning occurs:'
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: 并非所有会话变量都可以与 [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "变量设置提示语法")
    一起使用。各个系统变量描述指示每个变量是否可提示；请参阅 [第 7.1.8 节，“服务器系统变量”](server-system-variables.html
    "7.1.8 服务器系统变量")。您还可以通过尝试在 [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var
    "变量设置提示语法") 中使用它来在运行时检查系统变量。如果变量不可提示，则会发出警告：
- en: '[PRE46]'
  id: totrans-260
  prefs: []
  type: TYPE_PRE
  zh: '[PRE46]'
- en: '[`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "Variable-Setting
    Hint Syntax") syntax permits setting only a single variable, but multiple hints
    can be given to set multiple variables:'
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: '[`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "变量设置提示语法") 语法允许设置单个变量，但可以提供多个提示以设置多个变量：'
- en: '[PRE47]'
  id: totrans-262
  prefs: []
  type: TYPE_PRE
  zh: '[PRE47]'
- en: 'If several hints with the same variable name appear in the same statement,
    the first one is applied and the others are ignored with a warning:'
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: 如果在同一语句中出现多个具有相同变量名称的提���，第一个将被应用，其他的将被忽略并显示警告：
- en: '[PRE48]'
  id: totrans-264
  prefs: []
  type: TYPE_PRE
  zh: '[PRE48]'
- en: In this case, the second hint is ignored with a warning that it is conflicting.
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，第二个提示将被忽略并显示冲突警告。
- en: 'A [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "Variable-Setting
    Hint Syntax") hint is ignored with a warning if no system variable has the specified
    name or the variable value is incorrect:'
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: 如果没有系统变量具有指定名称或变量值不正确，则会忽略带有警告的 [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var
    "变量设置提示语法") 提示：
- en: '[PRE49]'
  id: totrans-267
  prefs: []
  type: TYPE_PRE
  zh: '[PRE49]'
- en: For the first statement, there is no `max_size` variable. For the second statement,
    [`mrr_cost_based`](switchable-optimizations.html#optflag_mrr-cost-based) takes
    values of `on` or `off`, so attempting to set it to `yes` is incorrect. In each
    case, the hint is ignored with a warning.
  id: totrans-268
  prefs: []
  type: TYPE_NORMAL
  zh: 对于第一条语句，不存在 `max_size` 变量。对于第二条语句，[`mrr_cost_based`](switchable-optimizations.html#optflag_mrr-cost-based)
    可以取值 `on` 或 `off`，因此尝试将其设置为 `yes` 是不正确的。在每种情况下，提示都会被忽略并显示警告。
- en: The [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "Variable-Setting
    Hint Syntax") hint is permitted only at the statement level. If used in a subquery,
    the hint is ignored with a warning.
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: '[`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "变量设置提示语法") 提示仅在语句级别允许。如果在子查询中使用，提示将被忽略并显示警告。'
- en: Replicas ignore [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "Variable-Setting
    Hint Syntax") hints in replicated statements to avoid the potential for security
    issues.
  id: totrans-270
  prefs: []
  type: TYPE_NORMAL
  zh: 复制品会忽略复制语句中的 [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "变量设置提示语法")
    提示，以避免安全问题的潜在风险。
- en: Resource Group Hint Syntax
  id: totrans-271
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 资源组提示语法
- en: The [`RESOURCE_GROUP`](optimizer-hints.html#optimizer-hints-resource-group "Resource
    Group Hint Syntax") optimizer hint is used for resource group management (see
    [Section 7.1.16, “Resource Groups”](resource-groups.html "7.1.16 Resource Groups")).
    This hint assigns the thread that executes a statement to the named resource group
    temporarily (for the duration of the statement). It requires the [`RESOURCE_GROUP_ADMIN`](privileges-provided.html#priv_resource-group-admin)
    or [`RESOURCE_GROUP_USER`](privileges-provided.html#priv_resource-group-user)
    privilege.
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: '[`RESOURCE_GROUP`](optimizer-hints.html#optimizer-hints-resource-group "资源组提示语法")
    优化提示用于资源组管理（参见[第7.1.16节，“资源组”](resource-groups.html "7.1.16 资源组")）。此提示将执行语句的线程暂时分配给命名的资源组（在语句执行期间）。它需要[`RESOURCE_GROUP_ADMIN`](privileges-provided.html#priv_resource-group-admin)
    或 [`RESOURCE_GROUP_USER`](privileges-provided.html#priv_resource-group-user) 权限。'
- en: 'Examples:'
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
  zh: 例子：
- en: '[PRE50]'
  id: totrans-274
  prefs: []
  type: TYPE_PRE
  zh: '[PRE50]'
- en: 'Syntax of the [`RESOURCE_GROUP`](optimizer-hints.html#optimizer-hints-resource-group
    "Resource Group Hint Syntax") hint:'
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: '[`RESOURCE_GROUP`](optimizer-hints.html#optimizer-hints-resource-group "资源组提示语法")
    提示的语法：'
- en: '[PRE51]'
  id: totrans-276
  prefs: []
  type: TYPE_PRE
  zh: '[PRE51]'
- en: '*`group_name`* indicates the resource group to which the thread should be assigned
    for the duration of statement execution. If the group is nonexistent, a warning
    occurs and the hint is ignored.'
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: '*`group_name`* 表示线程在语句执行期间应分配给的资源组。如果组不存在，则会发出警告并忽略提示。'
- en: The [`RESOURCE_GROUP`](optimizer-hints.html#optimizer-hints-resource-group "Resource
    Group Hint Syntax") hint must appear after the initial statement keyword (`SELECT`,
    `INSERT`, `REPLACE`, `UPDATE`, or `DELETE`).
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: '[`RESOURCE_GROUP`](optimizer-hints.html#optimizer-hints-resource-group "资源组提示语法")
    提示必须出现在初始语句关键字（`SELECT`、`INSERT`、`REPLACE`、`UPDATE` 或 `DELETE`）之后。'
- en: An alternative to [`RESOURCE_GROUP`](optimizer-hints.html#optimizer-hints-resource-group
    "Resource Group Hint Syntax") is the [`SET RESOURCE GROUP`](set-resource-group.html
    "15.7.2.4 SET RESOURCE GROUP Statement") statement, which nontemporarily assigns
    threads to a resource group. See [Section 15.7.2.4, “SET RESOURCE GROUP Statement”](set-resource-group.html
    "15.7.2.4 SET RESOURCE GROUP Statement").
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: 与 [`RESOURCE_GROUP`](optimizer-hints.html#optimizer-hints-resource-group "资源组提示语法")
    的另一种选择是 [`SET RESOURCE GROUP`](set-resource-group.html "15.7.2.4 SET RESOURCE
    GROUP 语句") 语句，它将线程非暂时地分配给资源组。参见[第15.7.2.4节，“SET RESOURCE GROUP 语句”](set-resource-group.html
    "15.7.2.4 SET RESOURCE GROUP 语句")。
- en: Optimizer Hints for Naming Query Blocks
  id: totrans-280
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 为查询块命名的优化提示
- en: 'Table-level, index-level, and subquery optimizer hints permit specific query
    blocks to be named as part of their argument syntax. To create these names, use
    the [`QB_NAME`](optimizer-hints.html#optimizer-hints-query-block-naming "Optimizer
    Hints for Naming Query Blocks") hint, which assigns a name to the query block
    in which it occurs:'
  id: totrans-281
  prefs: []
  type: TYPE_NORMAL
  zh: 表级、索引级和子查询优化提示允许特定查询块作为其参数语法的一部分命名。要创建这些名称，请使用 [`QB_NAME`](optimizer-hints.html#optimizer-hints-query-block-naming
    "为查询块命名的优化提示") 提示，它为其出现的查询块分配一个名称：
- en: '[PRE52]'
  id: totrans-282
  prefs: []
  type: TYPE_PRE
  zh: '[PRE52]'
- en: '[`QB_NAME`](optimizer-hints.html#optimizer-hints-query-block-naming "Optimizer
    Hints for Naming Query Blocks") hints can be used to make explicit in a clear
    way which query blocks other hints apply to. They also permit all non-query block
    name hints to be specified within a single hint comment for easier understanding
    of complex statements. Consider the following statement:'
  id: totrans-283
  prefs: []
  type: TYPE_NORMAL
  zh: '[`QB_NAME`](optimizer-hints.html#optimizer-hints-query-block-naming "为查询块命名的优化提示")
    可以清晰地表明其他提示适用于哪些查询块。它们还允许在单个提示注释中指定所有非查询块名称提示，以便更容易理解复杂语句。考虑以下语句：'
- en: '[PRE53]'
  id: totrans-284
  prefs: []
  type: TYPE_PRE
  zh: '[PRE53]'
- en: '[`QB_NAME`](optimizer-hints.html#optimizer-hints-query-block-naming "Optimizer
    Hints for Naming Query Blocks") hints assign names to query blocks in the statement:'
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
  zh: '[`QB_NAME`](optimizer-hints.html#optimizer-hints-query-block-naming "为查询块命名的优化提示")
    提示为语句中的查询块分配名称：'
- en: '[PRE54]'
  id: totrans-286
  prefs: []
  type: TYPE_PRE
  zh: '[PRE54]'
- en: 'Then other hints can use those names to refer to the appropriate query blocks:'
  id: totrans-287
  prefs: []
  type: TYPE_NORMAL
  zh: 然后其他提示可以使用这些名称来引用适当的查询块：
- en: '[PRE55]'
  id: totrans-288
  prefs: []
  type: TYPE_PRE
  zh: '[PRE55]'
- en: 'The resulting effect is as follows:'
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
  zh: 结果效果如下：
- en: '[`MRR(@qb1 t1)`](optimizer-hints.html#optimizer-hints-index-level "Index-Level
    Optimizer Hints") applies to table `t1` in query block `qb1`.'
  id: totrans-290
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`MRR(@qb1 t1)`](optimizer-hints.html#optimizer-hints-index-level "索引级别优化提示")
    适用于查询块 `qb1` 中的表 `t1`。'
- en: '[`BKA(@qb2)`](optimizer-hints.html#optimizer-hints-table-level "Table-Level
    Optimizer Hints") applies to query block `qb2`.'
  id: totrans-291
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`BKA(@qb2)`](optimizer-hints.html#optimizer-hints-table-level "表级优化提示") 适用于查询块
    `qb2`。'
- en: '[`NO_MRR(@qb3 t1 idx1, id2)`](optimizer-hints.html#optimizer-hints-index-level
    "Index-Level Optimizer Hints") applies to indexes `idx1` and `idx2` in table `t1`
    in query block `qb3`.'
  id: totrans-292
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`NO_MRR(@qb3 t1 idx1, id2)`](optimizer-hints.html#optimizer-hints-index-level
    "索引级优化提示") 适用于查询块 `qb3` 中表 `t1` 中的索引 `idx1` 和 `idx2`。'
- en: 'Query block names are identifiers and follow the usual rules about what names
    are valid and how to quote them (see [Section 11.2, “Schema Object Names”](identifiers.html
    "11.2 Schema Object Names")). For example, a query block name that contains spaces
    must be quoted, which can be done using backticks:'
  id: totrans-293
  prefs: []
  type: TYPE_NORMAL
  zh: 查询块名称是标识符，并遵循关于名称有效性和如何引用它们的通常规则（参见[第11.2节，“模式对象名称”](identifiers.html "11.2
    模式对象名称")）。例如，包含空格的查询块名称必须用引号引起来，可以使用反引号：
- en: '[PRE56]'
  id: totrans-294
  prefs: []
  type: TYPE_PRE
  zh: '[PRE56]'
- en: 'If the [`ANSI_QUOTES`](sql-mode.html#sqlmode_ansi_quotes) SQL mode is enabled,
    it is also possible to quote query block names within double quotation marks:'
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
  zh: 如果启用了[`ANSI_QUOTES`](sql-mode.html#sqlmode_ansi_quotes) SQL 模式，则还可以用双引号引用查询块名称：
- en: '[PRE57]'
  id: totrans-296
  prefs: []
  type: TYPE_PRE
  zh: '[PRE57]'
