- en: 原文：[https://dev.mysql.com/doc/refman/8.0/en/show-warnings.html](https://dev.mysql.com/doc/refman/8.0/en/show-warnings.html)
  id: totrans-0
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://dev.mysql.com/doc/refman/8.0/en/show-warnings.html](https://dev.mysql.com/doc/refman/8.0/en/show-warnings.html)
- en: 15.7.7.42 SHOW WARNINGS Statement
  id: totrans-1
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 15.7.7.42 SHOW WARNINGS Statement
- en: '[PRE0]'
  id: totrans-2
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: '[`SHOW WARNINGS`](show-warnings.html "15.7.7.42 SHOW WARNINGS Statement") is
    a diagnostic statement that displays information about the conditions (errors,
    warnings, and notes) resulting from executing a statement in the current session.
    Warnings are generated for DML statements such as [`INSERT`](insert.html "15.2.7 INSERT
    Statement"), [`UPDATE`](update.html "15.2.17 UPDATE Statement"), and [`LOAD DATA`](load-data.html
    "15.2.9 LOAD DATA Statement") as well as DDL statements such as [`CREATE TABLE`](create-table.html
    "15.1.20 CREATE TABLE Statement") and [`ALTER TABLE`](alter-table.html "15.1.9 ALTER
    TABLE Statement").'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '[`SHOW WARNINGS`](show-warnings.html "15.7.7.42 SHOW WARNINGS Statement") 是一个诊断性语句，显示关于当前会话中执行语句产生的条件（错误、警告和注释）的信息。警告会为诸如
    [`INSERT`](insert.html "15.2.7 INSERT Statement")、[`UPDATE`](update.html "15.2.17 UPDATE
    Statement") 和 [`LOAD DATA`](load-data.html "15.2.9 LOAD DATA Statement") 等 DML
    语句以及 [`CREATE TABLE`](create-table.html "15.1.20 CREATE TABLE Statement") 和 [`ALTER
    TABLE`](alter-table.html "15.1.9 ALTER TABLE Statement") 等 DDL 语句生成。'
- en: The `LIMIT` clause has the same syntax as for the [`SELECT`](select.html "15.2.13 SELECT
    Statement") statement. See [Section 15.2.13, “SELECT Statement”](select.html "15.2.13 SELECT
    Statement").
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: '`LIMIT` 子句与 [`SELECT`](select.html "15.2.13 SELECT Statement") 语句具有相同的语法。参见
    [Section 15.2.13, “SELECT Statement”](select.html "15.2.13 SELECT Statement")。'
- en: '[`SHOW WARNINGS`](show-warnings.html "15.7.7.42 SHOW WARNINGS Statement") is
    also used following [`EXPLAIN`](explain.html "15.8.2 EXPLAIN Statement"), to display
    the extended information generated by [`EXPLAIN`](explain.html "15.8.2 EXPLAIN
    Statement"). See [Section 10.8.3, “Extended EXPLAIN Output Format”](explain-extended.html
    "10.8.3 Extended EXPLAIN Output Format").'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: '[`SHOW WARNINGS`](show-warnings.html "15.7.7.42 SHOW WARNINGS Statement") 也用于在
    [`EXPLAIN`](explain.html "15.8.2 EXPLAIN Statement") 之后，显示由 [`EXPLAIN`](explain.html
    "15.8.2 EXPLAIN Statement") 生成的扩展信息。参见 [Section 10.8.3, “Extended EXPLAIN Output
    Format”](explain-extended.html "10.8.3 Extended EXPLAIN Output Format")。'
- en: '[`SHOW WARNINGS`](show-warnings.html "15.7.7.42 SHOW WARNINGS Statement") displays
    information about the conditions resulting from execution of the most recent nondiagnostic
    statement in the current session. If the most recent statement resulted in an
    error during parsing, [`SHOW WARNINGS`](show-warnings.html "15.7.7.42 SHOW WARNINGS
    Statement") shows the resulting conditions, regardless of statement type (diagnostic
    or nondiagnostic).'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: '[`SHOW WARNINGS`](show-warnings.html "15.7.7.42 SHOW WARNINGS Statement") 显示关于当前会话中最近一次非诊断性语句执行结果的条件信息。如果最近的语句在解析过程中出现错误，[`SHOW
    WARNINGS`](show-warnings.html "15.7.7.42 SHOW WARNINGS Statement") 将显示结果的条件，无论语句类型（诊断性或非诊断性）如何。'
- en: 'The [`SHOW COUNT(*) WARNINGS`](show-warnings.html "15.7.7.42 SHOW WARNINGS
    Statement") diagnostic statement displays the total number of errors, warnings,
    and notes. You can also retrieve this number from the [`warning_count`](server-system-variables.html#sysvar_warning_count)
    system variable:'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: '[`SHOW COUNT(*) WARNINGS`](show-warnings.html "15.7.7.42 SHOW WARNINGS Statement")
    诊断性语句显示错误、警告和注释的总数。您还可以从 [`warning_count`](server-system-variables.html#sysvar_warning_count)
    系统变量中检索此数字：'
- en: '[PRE1]'
  id: totrans-8
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: A difference in these statements is that the first is a diagnostic statement
    that does not clear the message list. The second, because it is a [`SELECT`](select.html
    "15.2.13 SELECT Statement") statement is considered nondiagnostic and does clear
    the message list.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 这些语句的区别在于第一个是一个不清除消息列表的诊断性语句。第二个，因为是一个 [`SELECT`](select.html "15.2.13 SELECT
    Statement") 语句，被视为非诊断性语句并清除消息列表。
- en: A related diagnostic statement, [`SHOW ERRORS`](show-errors.html "15.7.7.17 SHOW
    ERRORS Statement"), shows only error conditions (it excludes warnings and notes),
    and [`SHOW COUNT(*) ERRORS`](show-warnings.html "15.7.7.42 SHOW WARNINGS Statement")
    statement displays the total number of errors. See [Section 15.7.7.17, “SHOW ERRORS
    Statement”](show-errors.html "15.7.7.17 SHOW ERRORS Statement"). [`GET DIAGNOSTICS`](get-diagnostics.html
    "15.6.7.3 GET DIAGNOSTICS Statement") can be used to examine information for individual
    conditions. See [Section 15.6.7.3, “GET DIAGNOSTICS Statement”](get-diagnostics.html
    "15.6.7.3 GET DIAGNOSTICS Statement").
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 相关的诊断语句[`SHOW ERRORS`](show-errors.html "15.7.7.17 SHOW ERRORS Statement")仅显示错误条件（排除警告和注释），而[`SHOW
    COUNT(*) ERRORS`](show-warnings.html "15.7.7.42 SHOW WARNINGS Statement")语句显示错误的总数。请参阅[Section 15.7.7.17,
    “SHOW ERRORS Statement”](show-errors.html "15.7.7.17 SHOW ERRORS Statement")。[`GET
    DIAGNOSTICS`](get-diagnostics.html "15.6.7.3 GET DIAGNOSTICS Statement")可用于检查各个条件的信息。请参阅[Section 15.6.7.3,
    “GET DIAGNOSTICS Statement”](get-diagnostics.html "15.6.7.3 GET DIAGNOSTICS Statement")。
- en: Here is a simple example that shows data-conversion warnings for [`INSERT`](insert.html
    "15.2.7 INSERT Statement"). The example assumes that strict SQL mode is disabled.
    With strict mode enabled, the warnings would become errors and terminate the [`INSERT`](insert.html
    "15.2.7 INSERT Statement").
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 这里有一个简单的示例，显示了[`INSERT`](insert.html "15.2.7 INSERT Statement")的数据转换警告。该示例假定严格的SQL模式已禁用。启用严格模式后，警告将变为错误，并终止[`INSERT`](insert.html
    "15.2.7 INSERT Statement")。
- en: '[PRE2]'
  id: totrans-12
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: The [`max_error_count`](server-system-variables.html#sysvar_max_error_count)
    system variable controls the maximum number of error, warning, and note messages
    for which the server stores information, and thus the number of messages that
    [`SHOW WARNINGS`](show-warnings.html "15.7.7.42 SHOW WARNINGS Statement") displays.
    To change the number of messages the server can store, change the value of [`max_error_count`](server-system-variables.html#sysvar_max_error_count).
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: '[`max_error_count`](server-system-variables.html#sysvar_max_error_count)系统变量控制服务器存储信息的最大错误、警告和注释消息数量，因此也控制[`SHOW
    WARNINGS`](show-warnings.html "15.7.7.42 SHOW WARNINGS Statement")显示的消息数量。要更改服务器可以存储的消息数量，请更改[`max_error_count`](server-system-variables.html#sysvar_max_error_count)的值。'
- en: '[`max_error_count`](server-system-variables.html#sysvar_max_error_count) controls
    only how many messages are stored, not how many are counted. The value of [`warning_count`](server-system-variables.html#sysvar_warning_count)
    is not limited by [`max_error_count`](server-system-variables.html#sysvar_max_error_count),
    even if the number of messages generated exceeds [`max_error_count`](server-system-variables.html#sysvar_max_error_count).
    The following example demonstrates this. The [`ALTER TABLE`](alter-table.html
    "15.1.9 ALTER TABLE Statement") statement produces three warning messages (strict
    SQL mode is disabled for the example to prevent an error from occurring after
    a single conversion issue). Only one message is stored and displayed because [`max_error_count`](server-system-variables.html#sysvar_max_error_count)
    has been set to 1, but all three are counted (as shown by the value of [`warning_count`](server-system-variables.html#sysvar_warning_count)):'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: '[`max_error_count`](server-system-variables.html#sysvar_max_error_count)仅控制存储的消息数量，而不是计数的数量。即使生成的消息数量超过[`max_error_count`](server-system-variables.html#sysvar_max_error_count)，[`warning_count`](server-system-variables.html#sysvar_warning_count)的值也不受[`max_error_count`](server-system-variables.html#sysvar_max_error_count)的限制。以下示例演示了这一点。[`ALTER
    TABLE`](alter-table.html "15.1.9 ALTER TABLE Statement")语句生成三条警告消息（示例中已禁用严格的SQL模式，以防止在单个转换问题后发生错误）。只有一条消息被存储和显示，因为[`max_error_count`](server-system-variables.html#sysvar_max_error_count)已设置为1，但所有三条都被计数（如[`warning_count`](server-system-variables.html#sysvar_warning_count)的值所示）：'
- en: '[PRE3]'
  id: totrans-15
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: To disable message storage, set [`max_error_count`](server-system-variables.html#sysvar_max_error_count)
    to 0\. In this case, [`warning_count`](server-system-variables.html#sysvar_warning_count)
    still indicates how many warnings occurred, but messages are not stored and cannot
    be displayed.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 要禁用消息存储，请将[`max_error_count`](server-system-variables.html#sysvar_max_error_count)设置为0。在这种情况下，[`warning_count`](server-system-variables.html#sysvar_warning_count)仍然指示发生了多少警告，但消息不会被存储，也无法显示。
- en: 'The [`sql_notes`](server-system-variables.html#sysvar_sql_notes) system variable
    controls whether note messages increment [`warning_count`](server-system-variables.html#sysvar_warning_count)
    and whether the server stores them. By default, [`sql_notes`](server-system-variables.html#sysvar_sql_notes)
    is 1, but if set to 0, notes do not increment [`warning_count`](server-system-variables.html#sysvar_warning_count)
    and the server does not store them:'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: '[`sql_notes`](server-system-variables.html#sysvar_sql_notes)系统变量控制注释消息是否会增加[`warning_count`](server-system-variables.html#sysvar_warning_count)以及服务器是否会存储它们。默认情况下，[`sql_notes`](server-system-variables.html#sysvar_sql_notes)为1，但如果设置为0，则注释不会增加[`warning_count`](server-system-variables.html#sysvar_warning_count)，服务器也不会存储它们：'
- en: '[PRE4]'
  id: totrans-18
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: The MySQL server sends to each client a count indicating the total number of
    errors, warnings, and notes resulting from the most recent statement executed
    by that client. From the C API, this value can be obtained by calling [`mysql_warning_count()`](/doc/c-api/8.0/en/mysql-warning-count.html).
    See [mysql_warning_count()](/doc/c-api/8.0/en/mysql-warning-count.html).
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: MySQL服务器向每个客户端发送一个计数，指示由该客户端执行的最近语句导致的错误、警告和注释的总数。从C API，可以通过调用[`mysql_warning_count()`](/doc/c-api/8.0/en/mysql-warning-count.html)来获取此值。参见[mysql_warning_count()](/doc/c-api/8.0/en/mysql-warning-count.html)。
- en: 'In the [**mysql**](mysql.html "6.5.1 mysql — The MySQL Command-Line Client")
    client, you can enable and disable automatic warnings display using the `warnings`
    and `nowarning` commands, respectively, or their shortcuts, `\W` and `\w` (see
    [Section 6.5.1.2, “mysql Client Commands”](mysql-commands.html "6.5.1.2 mysql
    Client Commands")). For example:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 在[**mysql**](mysql.html "6.5.1 mysql — The MySQL Command-Line Client")客户端中，可以使用`warnings`和`nowarning`命令或它们的快捷方式`\W`和`\w`（参见[第6.5.1.2节，“mysql客户端命令”](mysql-commands.html
    "6.5.1.2 mysql Client Commands"））来启用和禁用自动警告显示。例如：
- en: '[PRE5]'
  id: totrans-21
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
