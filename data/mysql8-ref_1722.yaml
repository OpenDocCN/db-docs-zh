- en: 25.6.3 Event Reports Generated in NDB Cluster
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 25.6.3 在NDB Cluster中生成的事件报告
- en: 原文：[https://dev.mysql.com/doc/refman/8.0/en/mysql-cluster-event-reports.html](https://dev.mysql.com/doc/refman/8.0/en/mysql-cluster-event-reports.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://dev.mysql.com/doc/refman/8.0/en/mysql-cluster-event-reports.html](https://dev.mysql.com/doc/refman/8.0/en/mysql-cluster-event-reports.html)
- en: '[25.6.3.1 NDB Cluster Logging Management Commands](mysql-cluster-logging-management-commands.html)'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: '[25.6.3.1 NDB Cluster Logging Management Commands](mysql-cluster-logging-management-commands.html)'
- en: '[25.6.3.2 NDB Cluster Log Events](mysql-cluster-log-events.html)'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '[25.6.3.2 NDB Cluster Log Events](mysql-cluster-log-events.html)'
- en: '[25.6.3.3 Using CLUSTERLOG STATISTICS in the NDB Cluster Management Client](mysql-cluster-log-statistics.html)'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: '[25.6.3.3 在NDB Cluster管理客户端中使用CLUSTERLOG STATISTICS](mysql-cluster-log-statistics.html)'
- en: In this section, we discuss the types of event logs provided by NDB Cluster,
    and the types of events that are logged.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们讨论NDB Cluster提供的事件日志类型，以及记录的事件类型。
- en: 'NDB Cluster provides two types of event log:'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: NDB Cluster提供两种类型的事件日志：
- en: The cluster log, which includes events generated by all cluster nodes. The cluster
    log is the log recommended for most uses because it provides logging information
    for an entire cluster in a single location.
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 集群日志，其中包括所有集群节点生成的事件。集群日志是推荐用于大多数情况的日志，因为它提供了整个集群的日志信息。
- en: By default, the cluster log is saved to a file named `ndb_*`node_id`*_cluster.log`,
    (where *`node_id`* is the node ID of the management server) in the management
    server's [`DataDir`](mysql-cluster-mgm-definition.html#ndbparam-mgmd-datadir).
  id: totrans-8
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 默认情况下，集群日志保存在名为`ndb_*`node_id`*_cluster.log`的文件中（其中*`node_id`*是管理服务器的节点ID），位于管理服务器的[`DataDir`](mysql-cluster-mgm-definition.html#ndbparam-mgmd-datadir)中。
- en: Cluster logging information can also be sent to `stdout` or a `syslog` facility
    in addition to or instead of being saved to a file, as determined by the values
    set for the [`DataDir`](mysql-cluster-mgm-definition.html#ndbparam-mgmd-datadir)
    and [`LogDestination`](mysql-cluster-mgm-definition.html#ndbparam-mgmd-logdestination)
    configuration parameters. See [Section 25.4.3.5, “Defining an NDB Cluster Management
    Server”](mysql-cluster-mgm-definition.html "25.4.3.5 Defining an NDB Cluster Management
    Server"), for more information about these parameters.
  id: totrans-9
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 集群日志信息也可以发送到`stdout`或`syslog`设施，而不是或除了保存到文件中，这取决于为[`DataDir`](mysql-cluster-mgm-definition.html#ndbparam-mgmd-datadir)和[`LogDestination`](mysql-cluster-mgm-definition.html#ndbparam-mgmd-logdestination)配置参数设置的值。有关这些参数的更多信息，请参见[Section 25.4.3.5,
    “Defining an NDB Cluster Management Server”](mysql-cluster-mgm-definition.html
    "25.4.3.5 Defining an NDB Cluster Management Server")。
- en: Node logs are local to each node.
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 节点日志对每个节点是本地的。
- en: Output generated by node event logging is written to the file `ndb_*`node_id`*_out.log`
    (where *`node_id`* is the node's node ID) in the node's [`DataDir`](mysql-cluster-ndbd-definition.html#ndbparam-ndbd-datadir).
    Node event logs are generated for both management nodes and data nodes.
  id: totrans-11
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 节点事件日志生成的输出被写入文件`ndb_*`node_id`*_out.log`（其中*`node_id`*是节点的节点ID），位于节点的[`DataDir`](mysql-cluster-ndbd-definition.html#ndbparam-ndbd-datadir)中。节点事件日志为管理节点和数据节点生成。
- en: Node logs are intended to be used only during application development, or for
    debugging application code.
  id: totrans-12
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 节点日志仅用于应用程序开发或调试应用程序代码。
- en: 'Each reportable event can be distinguished according to three different criteria:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 每个可报告事件可以根据三个不同的标准进行区分：
- en: '*Category*: This can be any one of the following values: `STARTUP`, `SHUTDOWN`,
    `STATISTICS`, `CHECKPOINT`, `NODERESTART`, `CONNECTION`, `ERROR`, or `INFO`.'
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*类别*：可以是以下任一值之一：`STARTUP`、`SHUTDOWN`、`STATISTICS`、`CHECKPOINT`、`NODERESTART`、`CONNECTION`、`ERROR`或`INFO`。'
- en: '*Priority*: This is represented by one of the numbers from 0 to 15 inclusive,
    where 0 indicates “most important” and 15 “least important.”'
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*优先级*：表示为从0到15的数字之一，其中0表示“最重要”，15表示“最不重要”。'
- en: '*Severity Level*: This can be any one of the following values: `ON`, `DEBUG`,
    `INFO`, `WARNING`, `ERROR`, `CRITICAL`, `ALERT`, or `ALL`. (This is also sometimes
    referred to as the log level.)'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*严重级别*：可以是以下任一值之一：`ON`、`DEBUG`、`INFO`、`WARNING`、`ERROR`、`CRITICAL`、`ALERT`或`ALL`。（有时也称为日志级别。）'
- en: The cluster log can be filtered on these properties using the NDB management
    client [`CLUSTERLOG`](mysql-cluster-logging-management-commands.html "25.6.3.1 NDB
    Cluster Logging Management Commands") command. This command affects the cluster
    log only, and has no effect on the node logs; debug logging in one or more node
    logs can be turned on and off using the [**ndb_mgm**](mysql-cluster-programs-ndb-mgm.html
    "25.5.5 ndb_mgm — The NDB Cluster Management Client") [`NODELOG DEBUG`](mysql-cluster-mgm-client-commands.html#ndbclient-nodelog-debug)
    command.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 可使用NDB管理客户端[`CLUSTERLOG`](mysql-cluster-logging-management-commands.html "25.6.3.1 NDB
    Cluster Logging Management Commands")命令在这些属性上过滤集群日志。此命令仅影响集群日志，并不影响节点日志；可以使用[**ndb_mgm**](mysql-cluster-programs-ndb-mgm.html
    "25.5.5 ndb_mgm — The NDB Cluster Management Client") [`NODELOG DEBUG`](mysql-cluster-mgm-client-commands.html#ndbclient-nodelog-debug)
    命令打开和关闭一个或多个节点日志中的调试日志记录。
- en: 'The format used in a log message generated by NDB Cluster (as of NDB 8.0.26)
    is as shown here:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: NDB Cluster生成的日志消息的格式（截至NDB 8.0.26）如下所示：
- en: '[PRE0]'
  id: totrans-19
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Each line in the log, or log message, contains the following information:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 日志中的每行，或日志消息，包含以下信息：
- en: A *`timestamp`* in `*`YYYY`*-*`MM`*-*`DD`* *`HH`*:*`MM`*:*`SS`*` format. The
    timestamp value currently resolves to whole seconds only; fractional seconds are
    not supported.
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 以`*`YYYY`*-*`MM`*-*`DD`* *`HH`*:*`MM`*:*`SS`*`格式的*`timestamp`*。时间戳值目前仅解析到整秒；不支持小数秒。
- en: The *`node_type`*, or type of node or application which is performing the logging.
    In the cluster log, this is always `[MgmSrvr]`; in the data node log, it is always
    `[ndbd]`. `[NdbApi]` and other values are possible in logs generated by NDB API
    applications and tools.
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*`node_type`*，即执行日志记录的节点或应用程序的类型。在集群日志中，这始终是`[MgmSrvr]`；在数据节点日志中，始终是`[ndbd]`。在由NDB
    API应用程序和工具生成的日志中可能出现`[NdbApi]`和其他值。'
- en: The *`level`* of the event, sometimes also referred to as its severity level
    or log level. See earlier in this section, as well as [Section 25.6.3.1, “NDB
    Cluster Logging Management Commands”](mysql-cluster-logging-management-commands.html
    "25.6.3.1 NDB Cluster Logging Management Commands"), for more information about
    severity levels.
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 事件的*`level`*，有时也称为其严重级别或日志级别。有关严重级别的更多信息，请参见本节前面以及[第25.6.3.1节，“NDB Cluster日志管理命令”](mysql-cluster-logging-management-commands.html
    "25.6.3.1 NDB Cluster Logging Management Commands")。
- en: The ID of the node reporting the event (*`node_id`*).
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 报告事件的节点的ID（*`node_id`*）。
- en: A *`message`* containing a description of the event. The most common types of
    events to appear in the log are connections and disconnections between different
    nodes in the cluster, and when checkpoints occur. In some cases, the description
    may contain status or other information.
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 包含事件描述的*`message`*。日志中出现的最常见事件类型是集群中不同节点之间的连接和断开连接，以及发生检查点时。在某些情况下，描述可能包含状态或其他信息。
- en: 'A sample from an actual cluster log is shown here:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 这里显示了实际集群日志中的示例：
- en: '[PRE1]'
  id: totrans-27
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: For additional information, see [Section 25.6.3.2, “NDB Cluster Log Events”](mysql-cluster-log-events.html
    "25.6.3.2 NDB Cluster Log Events").
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 有关更多信息，请参见[第25.6.3.2节，“NDB Cluster日志事件”](mysql-cluster-log-events.html "25.6.3.2 NDB
    Cluster Log Events")。
