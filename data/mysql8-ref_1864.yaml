- en: 26.6.3 Partitioning Limitations Relating to Functions
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 26.6.3 与函数相关的分区限制
- en: 原文：[https://dev.mysql.com/doc/refman/8.0/en/partitioning-limitations-functions.html](https://dev.mysql.com/doc/refman/8.0/en/partitioning-limitations-functions.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://dev.mysql.com/doc/refman/8.0/en/partitioning-limitations-functions.html](https://dev.mysql.com/doc/refman/8.0/en/partitioning-limitations-functions.html)
- en: This section discusses limitations in MySQL Partitioning relating specifically
    to functions used in partitioning expressions.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 这一部分讨论了 MySQL 分区中与分区表达式中使用的函数相关的限制。
- en: 'Only the MySQL functions shown in the following list are allowed in partitioning
    expressions:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 只有以下列出的 MySQL 函数允许在分区表达式中使用：
- en: '[`ABS()`](mathematical-functions.html#function_abs)'
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`ABS()`](mathematical-functions.html#function_abs)'
- en: '[`CEILING()`](mathematical-functions.html#function_ceiling) (see [CEILING()
    and FLOOR()](partitioning-limitations-functions.html#partitioning-limitations-ceiling-floor
    "CEILING() and FLOOR()"))'
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`CEILING()`](mathematical-functions.html#function_ceiling)（参见 [CEILING() 和
    FLOOR()](partitioning-limitations-functions.html#partitioning-limitations-ceiling-floor
    "CEILING() and FLOOR()"))'
- en: '[`DATEDIFF()`](date-and-time-functions.html#function_datediff)'
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`DATEDIFF()`](date-and-time-functions.html#function_datediff)'
- en: '[`DAY()`](date-and-time-functions.html#function_day)'
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`DAY()`](date-and-time-functions.html#function_day)'
- en: '[`DAYOFMONTH()`](date-and-time-functions.html#function_dayofmonth)'
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`DAYOFMONTH()`](date-and-time-functions.html#function_dayofmonth)'
- en: '[`DAYOFWEEK()`](date-and-time-functions.html#function_dayofweek)'
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`DAYOFWEEK()`](date-and-time-functions.html#function_dayofweek)'
- en: '[`DAYOFYEAR()`](date-and-time-functions.html#function_dayofyear)'
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`DAYOFYEAR()`](date-and-time-functions.html#function_dayofyear)'
- en: '[`EXTRACT()`](date-and-time-functions.html#function_extract) (see [EXTRACT()
    function with WEEK specifier](partitioning-limitations-functions.html#partitioning-limitations-extract
    "EXTRACT() function with WEEK specifier"))'
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`EXTRACT()`](date-and-time-functions.html#function_extract)（参见 [带有 WEEK 参数的
    EXTRACT() 函数](partitioning-limitations-functions.html#partitioning-limitations-extract
    "EXTRACT() function with WEEK specifier")）'
- en: '[`FLOOR()`](mathematical-functions.html#function_floor) (see [CEILING() and
    FLOOR()](partitioning-limitations-functions.html#partitioning-limitations-ceiling-floor
    "CEILING() and FLOOR()"))'
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`FLOOR()`](mathematical-functions.html#function_floor)（参见 [CEILING() 和 FLOOR()](partitioning-limitations-functions.html#partitioning-limitations-ceiling-floor
    "CEILING() and FLOOR()")）'
- en: '[`HOUR()`](date-and-time-functions.html#function_hour)'
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`HOUR()`](date-and-time-functions.html#function_hour)'
- en: '[`MICROSECOND()`](date-and-time-functions.html#function_microsecond)'
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`MICROSECOND()`](date-and-time-functions.html#function_microsecond)'
- en: '[`MINUTE()`](date-and-time-functions.html#function_minute)'
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`MINUTE()`](date-and-time-functions.html#function_minute)'
- en: '[`MOD()`](mathematical-functions.html#function_mod)'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`MOD()`](mathematical-functions.html#function_mod)'
- en: '[`MONTH()`](date-and-time-functions.html#function_month)'
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`MONTH()`](date-and-time-functions.html#function_month)'
- en: '[`QUARTER()`](date-and-time-functions.html#function_quarter)'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`QUARTER()`](date-and-time-functions.html#function_quarter)'
- en: '[`SECOND()`](date-and-time-functions.html#function_second)'
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`SECOND()`](date-and-time-functions.html#function_second)'
- en: '[`TIME_TO_SEC()`](date-and-time-functions.html#function_time-to-sec)'
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`TIME_TO_SEC()`](date-and-time-functions.html#function_time-to-sec)'
- en: '[`TO_DAYS()`](date-and-time-functions.html#function_to-days)'
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`TO_DAYS()`](date-and-time-functions.html#function_to-days)'
- en: '[`TO_SECONDS()`](date-and-time-functions.html#function_to-seconds)'
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`TO_SECONDS()`](date-and-time-functions.html#function_to-seconds)'
- en: '[`UNIX_TIMESTAMP()`](date-and-time-functions.html#function_unix-timestamp)
    (with [`TIMESTAMP`](datetime.html "13.2.2 The DATE, DATETIME, and TIMESTAMP Types")
    columns)'
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`UNIX_TIMESTAMP()`](date-and-time-functions.html#function_unix-timestamp)（带有
    [`TIMESTAMP`](datetime.html "13.2.2 The DATE, DATETIME, and TIMESTAMP Types")
    列）'
- en: '[`WEEKDAY()`](date-and-time-functions.html#function_weekday)'
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`WEEKDAY()`](date-and-time-functions.html#function_weekday)'
- en: '[`YEAR()`](date-and-time-functions.html#function_year)'
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`YEAR()`](date-and-time-functions.html#function_year)'
- en: '[`YEARWEEK()`](date-and-time-functions.html#function_yearweek)'
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`YEARWEEK()`](date-and-time-functions.html#function_yearweek)'
- en: In MySQL 8.0, partition pruning is supported for the [`TO_DAYS()`](date-and-time-functions.html#function_to-days),
    [`TO_SECONDS()`](date-and-time-functions.html#function_to-seconds), [`YEAR()`](date-and-time-functions.html#function_year),
    and [`UNIX_TIMESTAMP()`](date-and-time-functions.html#function_unix-timestamp)
    functions. See [Section 26.4, “Partition Pruning”](partitioning-pruning.html "26.4 Partition
    Pruning"), for more information.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 在 MySQL 8.0 中，支持对 [`TO_DAYS()`](date-and-time-functions.html#function_to-days)、[`TO_SECONDS()`](date-and-time-functions.html#function_to-seconds)、[`YEAR()`](date-and-time-functions.html#function_year)
    和 [`UNIX_TIMESTAMP()`](date-and-time-functions.html#function_unix-timestamp) 函数进行分区修剪。更多信息请参见
    [第 26.4 节，“分区修剪”](partitioning-pruning.html "26.4 Partition Pruning")。
- en: '**CEILING() and FLOOR(). ** Each of these functions returns an integer only
    if it is passed an argument of an exact numeric type, such as one of the [`INT`](integer-types.html
    "13.1.2 Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT,
    BIGINT") types or [`DECIMAL`](fixed-point-types.html "13.1.3 Fixed-Point Types
    (Exact Value) - DECIMAL, NUMERIC"). This means, for example, that the following
    [`CREATE TABLE`](create-table.html "15.1.20 CREATE TABLE Statement") statement
    fails with an error, as shown here:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: '**CEILING()和FLOOR()。** 如果这些函数的参数是精确数值类型，如[`INT`](integer-types.html "13.1.2 整数类型（精确值）
    - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT")类型或[`DECIMAL`](fixed-point-types.html
    "13.1.3 定点类型（精确值） - DECIMAL, NUMERIC")之一，则每个函数仅返回整数。这意味着，例如，以下[`CREATE TABLE`](create-table.html
    "15.1.20 CREATE TABLE语句")语句将因错误而失败，如下所示：'
- en: '[PRE0]'
  id: totrans-29
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: '**EXTRACT() function with WEEK specifier. ** The value returned by the [`EXTRACT()`](date-and-time-functions.html#function_extract)
    function, when used as [`EXTRACT(WEEK FROM *`col`*)`](date-and-time-functions.html#function_extract),
    depends on the value of the [`default_week_format`](server-system-variables.html#sysvar_default_week_format)
    system variable. For this reason, [`EXTRACT()`](date-and-time-functions.html#function_extract)
    is not permitted as a partitioning function when it specifies the unit as `WEEK`.
    (Bug #54483)'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: '**带有WEEK指定符的EXTRACT()函数。** 当作为[`EXTRACT(WEEK FROM *`col`*)`](date-and-time-functions.html#function_extract)使用时，[`EXTRACT()`](date-and-time-functions.html#function_extract)函数返回的值取决于[`default_week_format`](server-system-variables.html#sysvar_default_week_format)系统变量的值。因此，当指定单位为`WEEK`时，[`EXTRACT()`](date-and-time-functions.html#function_extract)不允许作为分区函数。（Bug
    #54483）'
- en: See [Section 14.6.2, “Mathematical Functions”](mathematical-functions.html "14.6.2 Mathematical
    Functions"), for more information about the return types of these functions, as
    well as [Section 13.1, “Numeric Data Types”](numeric-types.html "13.1 Numeric
    Data Types").
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 查看[第14.6.2节，“数学函数”](mathematical-functions.html "14.6.2 数学函数")，了解这些函数的返回类型的更多信息，以及[第13.1节，“数值数据类型”](numeric-types.html
    "13.1 数值数据类型")。
