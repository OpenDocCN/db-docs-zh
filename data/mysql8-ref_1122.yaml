- en: 原文：[https://dev.mysql.com/doc/refman/8.0/en/flush.html](https://dev.mysql.com/doc/refman/8.0/en/flush.html)
  id: totrans-0
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://dev.mysql.com/doc/refman/8.0/en/flush.html](https://dev.mysql.com/doc/refman/8.0/en/flush.html)
- en: 15.7.8.3 FLUSH Statement
  id: totrans-1
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 15.7.8.3 FLUSH Statement
- en: '[PRE0]'
  id: totrans-2
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: The [`FLUSH`](flush.html "15.7.8.3 FLUSH Statement") statement has several variant
    forms that clear or reload various internal caches, flush tables, or acquire locks.
    Each [`FLUSH`](flush.html "15.7.8.3 FLUSH Statement") operation requires the privileges
    indicated in its description.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '[`FLUSH`](flush.html "15.7.8.3 FLUSH Statement")语句有几种变体形式，用于清除或重新加载各种内部缓存、刷新表或获取锁。每个[`FLUSH`](flush.html
    "15.7.8.3 FLUSH Statement")操作都需要其描述中指示的权限。'
- en: Note
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: It is not possible to issue [`FLUSH`](flush.html "15.7.8.3 FLUSH Statement")
    statements within stored functions or triggers. However, you may use [`FLUSH`](flush.html
    "15.7.8.3 FLUSH Statement") in stored procedures, so long as these are not called
    from stored functions or triggers. See [Section 27.8, “Restrictions on Stored
    Programs”](stored-program-restrictions.html "27.8 Restrictions on Stored Programs").
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 在存储函数或触发器中不可能发出[`FLUSH`](flush.html "15.7.8.3 FLUSH Statement")语句。但是，您可以在存储过程中使用[`FLUSH`](flush.html
    "15.7.8.3 FLUSH Statement")，只要这些存储过程不是从存储函数或触发器中调用的。请参阅[第27.8节，“存储程序的限制”](stored-program-restrictions.html
    "27.8 Restrictions on Stored Programs")。
- en: By default, the server writes [`FLUSH`](flush.html "15.7.8.3 FLUSH Statement")
    statements to the binary log so that they replicate to replicas. To suppress logging,
    specify the optional `NO_WRITE_TO_BINLOG` keyword or its alias `LOCAL`.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，服务器会将[`FLUSH`](flush.html "15.7.8.3 FLUSH Statement")语句写入二进制日志，以便它们复制到副本中。要禁止记录日志，请指定可选的`NO_WRITE_TO_BINLOG`关键字或其别名`LOCAL`。
- en: Note
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: '[`FLUSH LOGS`](flush.html#flush-logs), [`FLUSH BINARY LOGS`](flush.html#flush-binary-logs),
    [`FLUSH TABLES WITH READ LOCK`](flush.html#flush-tables-with-read-lock) (with
    or without a table list), and [`FLUSH TABLES *`tbl_name`* ... FOR EXPORT`](flush.html#flush-tables-for-export-with-list)
    are not written to the binary log in any case because they would cause problems
    if replicated to a replica.'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: '[`FLUSH LOGS`](flush.html#flush-logs)、[`FLUSH BINARY LOGS`](flush.html#flush-binary-logs)、[`FLUSH
    TABLES WITH READ LOCK`](flush.html#flush-tables-with-read-lock)（带或不带表列表）、以及[`FLUSH
    TABLES *`tbl_name`* ... FOR EXPORT`](flush.html#flush-tables-for-export-with-list)在任何情况下都不会写入二进制日志，因为如果复制到副本中会导致问题。'
- en: The [`FLUSH`](flush.html "15.7.8.3 FLUSH Statement") statement causes an implicit
    commit. See [Section 15.3.3, “Statements That Cause an Implicit Commit”](implicit-commit.html
    "15.3.3 Statements That Cause an Implicit Commit").
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: '[`FLUSH`](flush.html "15.7.8.3 FLUSH Statement")语句会导致隐式提交。请参阅[第15.3.3节，“导致隐式提交的语句”](implicit-commit.html
    "15.3.3 Statements That Cause an Implicit Commit")。'
- en: The [**mysqladmin**](mysqladmin.html "6.5.2 mysqladmin — A MySQL Server Administration
    Program") utility provides a command-line interface to some flush operations,
    using commands such as `flush-hosts`, `flush-logs`, `flush-privileges`, `flush-status`,
    and `flush-tables`. See [Section 6.5.2, “mysqladmin — A MySQL Server Administration
    Program”](mysqladmin.html "6.5.2 mysqladmin — A MySQL Server Administration Program").
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: '[**mysqladmin**](mysqladmin.html "6.5.2 mysqladmin — A MySQL Server Administration
    Program")实用程序提供了一个命令行界面，用于执行一些刷新操作，使用命令如`flush-hosts`、`flush-logs`、`flush-privileges`、`flush-status`和`flush-tables`。请参阅[第6.5.2节，“mysqladmin
    — MySQL服务器管理程序”](mysqladmin.html "6.5.2 mysqladmin — A MySQL Server Administration
    Program")。'
- en: Sending a `SIGHUP` or `SIGUSR1` signal to the server causes several flush operations
    to occur that are similar to various forms of the [`FLUSH`](flush.html "15.7.8.3 FLUSH
    Statement") statement. Signals can be sent by the `root` system account or the
    system account that owns the server process. This enables the flush operations
    to be performed without having to connect to the server, which requires a MySQL
    account that has privileges sufficient for those operations. See [Section 6.10,
    “Unix Signal Handling in MySQL”](unix-signal-response.html "6.10 Unix Signal Handling
    in MySQL").
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 向服务器发送`SIGHUP`或`SIGUSR1`信号会导致发生几种刷新操作，类似于各种形式的[`FLUSH`](flush.html "15.7.8.3 FLUSH
    Statement")语句。信号可以由`root`系统帐户或拥有服务器进程的系统帐户发送。这使得刷新操作可以在不连接到服务器的情况下执行，而这需要一个具有足够权限的MySQL帐户进行这些操作。请参阅[第6.10节，“MySQL中的Unix信号处理”](unix-signal-response.html
    "6.10 Unix Signal Handling in MySQL")。
- en: The [`RESET`](reset.html "15.7.8.6 RESET Statement") statement is similar to
    [`FLUSH`](flush.html "15.7.8.3 FLUSH Statement"). See [Section 15.7.8.6, “RESET
    Statement”](reset.html "15.7.8.6 RESET Statement"), for information about using
    [`RESET`](reset.html "15.7.8.6 RESET Statement") with replication.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: '[`重置`](reset.html "15.7.8.6 重置语句")语句类似于[`刷新`](flush.html "15.7.8.3 刷新语句")。有关在复制中使用[`重置`](reset.html
    "15.7.8.6 重置语句")的信息，请参见[第15.7.8.6节，“重置语句”](reset.html "15.7.8.6 重置语句")。'
- en: The following list describes the permitted [`FLUSH`](flush.html "15.7.8.3 FLUSH
    Statement") statement *`flush_option`* values. For descriptions of the permitted
    *`tables_option`* values, see [FLUSH TABLES Syntax](flush.html#flush-tables-variants
    "FLUSH TABLES Syntax").
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 以下列表描述了允许的[`刷新`](flush.html "15.7.8.3 刷新语句")语句*`flush_option`*值。有关允许的*`tables_option`*值的描述，请参见[刷新表语法](flush.html#flush-tables-variants
    "刷新表语法")。
- en: '[`FLUSH BINARY LOGS`](flush.html#flush-binary-logs)'
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`刷新二进制日志`](flush.html#flush-binary-logs)'
- en: Closes and reopens any binary log file to which the server is writing. If binary
    logging is enabled, the sequence number of the binary log file is incremented
    by one relative to the previous file.
  id: totrans-15
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 关闭并重新打开服务器正在写入的任何二进制日志文件。如果启用了二进制日志记录，则相对于上一个文件，二进制日志文件的序列号会增加一。
- en: This operation requires the [`RELOAD`](privileges-provided.html#priv_reload)
    privilege.
  id: totrans-16
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此操作需要[`RELOAD`](privileges-provided.html#priv_reload)权限。
- en: '[`FLUSH ENGINE LOGS`](flush.html#flush-engine-logs)'
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`刷新引擎日志`](flush.html#flush-engine-logs)'
- en: Closes and reopens any flushable logs for installed storage engines. This causes
    `InnoDB` to flush its logs to disk.
  id: totrans-18
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 关闭并重新打开任何可刷新的已安装存储引擎的日志。这会导致`InnoDB`将其日志刷新到磁盘。
- en: This operation requires the [`RELOAD`](privileges-provided.html#priv_reload)
    privilege.
  id: totrans-19
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此操作需要[`RELOAD`](privileges-provided.html#priv_reload)权限。
- en: '[`FLUSH ERROR LOGS`](flush.html#flush-error-logs)'
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`刷新错误日志`](flush.html#flush-error-logs)'
- en: Closes and reopens any error log file to which the server is writing.
  id: totrans-21
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 关闭并重新打开服务器正在写入的任何错误日志文件。
- en: This operation requires the [`RELOAD`](privileges-provided.html#priv_reload)
    privilege.
  id: totrans-22
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此操作需要[`RELOAD`](privileges-provided.html#priv_reload)权限。
- en: '[`FLUSH GENERAL LOGS`](flush.html#flush-general-logs)'
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`刷新一般日志`](flush.html#flush-general-logs)'
- en: Closes and reopens any general query log file to which the server is writing.
  id: totrans-24
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 关闭并重新打开服务器正在写入的任何一般查询日志文件。
- en: This operation requires the [`RELOAD`](privileges-provided.html#priv_reload)
    privilege.
  id: totrans-25
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此操作需要[`RELOAD`](privileges-provided.html#priv_reload)权限。
- en: This operation has no effect on tables used for the general query log (see [Section 7.4.1,
    “Selecting General Query Log and Slow Query Log Output Destinations”](log-destinations.html
    "7.4.1 Selecting General Query Log and Slow Query Log Output Destinations")).
  id: totrans-26
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此操作对用于一般查询日志的表没有影响（参见[第7.4.1节，“选择一般查询日志和慢查询日志输出目的地”](log-destinations.html "7.4.1 选择一般查询日志和慢查询日志输出目的地")）。
- en: '[`FLUSH HOSTS`](flush.html#flush-hosts)'
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`刷新主机`](flush.html#flush-hosts)'
- en: Empties the host cache and the Performance Schema [`host_cache`](performance-schema-host-cache-table.html
    "29.12.21.3 The host_cache Table") table that exposes the cache contents, and
    unblocks any blocked hosts.
  id: totrans-28
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 清空主机缓存和性能模式[`host_cache`](performance-schema-host-cache-table.html "29.12.21.3 host_cache表")表，该表显示缓存内容，并解除任何被阻止的主机。
- en: This operation requires the [`RELOAD`](privileges-provided.html#priv_reload)
    privilege.
  id: totrans-29
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此操作需要[`RELOAD`](privileges-provided.html#priv_reload)权限。
- en: For information about why host cache flushing might be advisable or desirable,
    see [Section 7.1.12.3, “DNS Lookups and the Host Cache”](host-cache.html "7.1.12.3 DNS
    Lookups and the Host Cache").
  id: totrans-30
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 有关为什么可能建议或希望刷新主机缓存的信息，请参见[第7.1.12.3节，“DNS查找和主机缓存”](host-cache.html "7.1.12.3 DNS查找和主机缓存")。
- en: Note
  id: totrans-31
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意
- en: '[`FLUSH HOSTS`](flush.html#flush-hosts) is deprecated as of MySQL 8.0.23; expect
    it to be removed in a future MySQL release. Instead, truncate the Performance
    Schema [`host_cache`](performance-schema-host-cache-table.html "29.12.21.3 The
    host_cache Table") table:'
  id: totrans-32
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 自MySQL 8.0.23起，[`刷新主机`](flush.html#flush-hosts)已弃用；预计将在未来的MySQL版本中删除。取而代之的是截断性能模式[`host_cache`](performance-schema-host-cache-table.html
    "29.12.21.3 host_cache表")表：
- en: '[PRE1]'
  id: totrans-33
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: The [`TRUNCATE TABLE`](truncate-table.html "15.1.37 TRUNCATE TABLE Statement")
    operation requires the [`DROP`](privileges-provided.html#priv_drop) privilege
    for the table rather than the [`RELOAD`](privileges-provided.html#priv_reload)
    privilege. You should be aware that the `TRUNCATE TABLE` statement is not written
    to the binary log. To obtain the same behavior from `FLUSH HOSTS`, specify `NO_WRITE_TO_BINLOG`
    or `LOCAL` as part of the statement.
  id: totrans-34
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[`TRUNCATE TABLE`](truncate-table.html "15.1.37 TRUNCATE TABLE Statement")
    操作需要表的 [`DROP`](privileges-provided.html#priv_drop) 权限，而不是 [`RELOAD`](privileges-provided.html#priv_reload)
    权限。您应该知道 `TRUNCATE TABLE` 语句不会被写入二进制日志。要从 `FLUSH HOSTS` 中获得相同的行为，请在语句中指定 `NO_WRITE_TO_BINLOG`
    或 `LOCAL`。'
- en: '[`FLUSH LOGS`](flush.html#flush-logs)'
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`FLUSH LOGS`](flush.html#flush-logs)'
- en: Closes and reopens any log file to which the server is writing.
  id: totrans-36
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 关闭并重新打开服务器正在写入的任何日志文件。
- en: This operation requires the [`RELOAD`](privileges-provided.html#priv_reload)
    privilege.
  id: totrans-37
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此操作需要 [`RELOAD`](privileges-provided.html#priv_reload) 权限。
- en: 'The effect of this operation is equivalent to the combined effects of these
    operations:'
  id: totrans-38
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此操作的效果等同于这些操作的综合效果：
- en: '[PRE2]'
  id: totrans-39
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '[`FLUSH OPTIMIZER_COSTS`](flush.html#flush-optimizer-costs)'
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`FLUSH OPTIMIZER_COSTS`](flush.html#flush-optimizer-costs)'
- en: Re-reads the cost model tables so that the optimizer starts using the current
    cost estimates stored in them.
  id: totrans-41
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 重新读取成本模型表，以便优化器开始使用其中存储的当前成本估算。
- en: This operation requires the [`FLUSH_OPTIMIZER_COSTS`](privileges-provided.html#priv_flush-optimizer-costs)
    or [`RELOAD`](privileges-provided.html#priv_reload) privilege.
  id: totrans-42
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此操作需要 [`FLUSH_OPTIMIZER_COSTS`](privileges-provided.html#priv_flush-optimizer-costs)
    或 [`RELOAD`](privileges-provided.html#priv_reload) 权限。
- en: The server writes a warning to the error log for any unrecognized cost model
    table entries. For information about these tables, see [Section 10.9.5, “The Optimizer
    Cost Model”](cost-model.html "10.9.5 The Optimizer Cost Model"). This operation
    affects only sessions that begin subsequent to the flush. Existing sessions continue
    to use the cost estimates that were current when they began.
  id: totrans-43
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对于任何未识别的成本模型表条目，服务器会向错误日志写入警告。有关这些表的信息，请参见 [Section 10.9.5, “The Optimizer Cost
    Model”](cost-model.html "10.9.5 The Optimizer Cost Model")。此操作仅影响在刷新后开始的会话。现有会话继续使用它们开始时的成本估算。
- en: '[`FLUSH PRIVILEGES`](flush.html#flush-privileges)'
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`FLUSH PRIVILEGES`](flush.html#flush-privileges)'
- en: Re-reads the privileges from the grant tables in the `mysql` system schema.
    As part of this operation, the server reads the `global_grants` table containing
    dynamic privilege assignments and registers any unregistered privileges found
    there.
  id: totrans-45
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 重新从 `mysql` 系统模式中的授权表中读取权限。作为此操作的一部分，服务器会读取包含动态权限分配的 `global_grants` 表，并注册在那里找到的任何未注册的权限。
- en: Reloading the grant tables is necessary to enable updates to MySQL privileges
    and users only if you make such changes directly to the grant tables; it is not
    needed for account management statements such as [`GRANT`](grant.html "15.7.1.6 GRANT
    Statement") or [`REVOKE`](revoke.html "15.7.1.8 REVOKE Statement"), which take
    effect immediately. See [Section 8.2.13, “When Privilege Changes Take Effect”](privilege-changes.html
    "8.2.13 When Privilege Changes Take Effect"), for more information.
  id: totrans-46
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 重新加载授权表是必要的，以便仅在直接对授权表进行更改时才能启用对 MySQL 权限和用户的更新；对于像 [`GRANT`](grant.html "15.7.1.6 GRANT
    Statement") 或 [`REVOKE`](revoke.html "15.7.1.8 REVOKE Statement") 这样的帐户管理语句，它们会立即生效，不需要这样做。有关更多信息，请参见
    [Section 8.2.13, “When Privilege Changes Take Effect”](privilege-changes.html
    "8.2.13 When Privilege Changes Take Effect")。
- en: This operation requires the [`RELOAD`](privileges-provided.html#priv_reload)
    privilege.
  id: totrans-47
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此操作需要 [`RELOAD`](privileges-provided.html#priv_reload) 权限。
- en: If the [`--skip-grant-tables`](server-options.html#option_mysqld_skip-grant-tables)
    option was specified at server startup to disable the MySQL privilege system,
    [`FLUSH PRIVILEGES`](flush.html#flush-privileges) provides a way to enable the
    privilege system at runtime.
  id: totrans-48
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果在服务器启动时指定了 [`--skip-grant-tables`](server-options.html#option_mysqld_skip-grant-tables)
    选项以禁用 MySQL 权限系统，则 [`FLUSH PRIVILEGES`](flush.html#flush-privileges) 提供了在运行时启用权限系统的方法。
- en: Resets failed-login tracking (or enables it if the server was started with [`--skip-grant-tables`](server-options.html#option_mysqld_skip-grant-tables))
    and unlocks any temporarily locked accounts. See [Section 8.2.15, “Password Management”](password-management.html
    "8.2.15 Password Management").
  id: totrans-49
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 重置失败登录跟踪（或者如果服务器是使用 [`--skip-grant-tables`](server-options.html#option_mysqld_skip-grant-tables)
    启动的，则启用它），并解锁任何临时锁定的帐户。参见 [Section 8.2.15, “Password Management”](password-management.html
    "8.2.15 Password Management")。
- en: Frees memory cached by the server as a result of [`GRANT`](grant.html "15.7.1.6 GRANT
    Statement"), [`CREATE USER`](create-user.html "15.7.1.3 CREATE USER Statement"),
    [`CREATE SERVER`](create-server.html "15.1.18 CREATE SERVER Statement"), and [`INSTALL
    PLUGIN`](install-plugin.html "15.7.4.4 INSTALL PLUGIN Statement") statements.
    This memory is not released by the corresponding [`REVOKE`](revoke.html "15.7.1.8 REVOKE
    Statement"), [`DROP USER`](drop-user.html "15.7.1.5 DROP USER Statement"), [`DROP
    SERVER`](drop-server.html "15.1.30 DROP SERVER Statement"), and [`UNINSTALL PLUGIN`](uninstall-plugin.html
    "15.7.4.6 UNINSTALL PLUGIN Statement") statements, so for a server that executes
    many instances of the statements that cause caching, there is an increase in cached
    memory use unless it is freed with [`FLUSH PRIVILEGES`](flush.html#flush-privileges).
  id: totrans-50
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 释放服务器缓存的内存，这是由[`GRANT`](grant.html "15.7.1.6 GRANT Statement")、[`CREATE USER`](create-user.html
    "15.7.1.3 CREATE USER Statement")、[`CREATE SERVER`](create-server.html "15.1.18 CREATE
    SERVER Statement")和[`INSTALL PLUGIN`](install-plugin.html "15.7.4.4 INSTALL PLUGIN
    Statement")语句导致的。这些内存不会被相应的[`REVOKE`](revoke.html "15.7.1.8 REVOKE Statement")、[`DROP
    USER`](drop-user.html "15.7.1.5 DROP USER Statement")、[`DROP SERVER`](drop-server.html
    "15.1.30 DROP SERVER Statement")和[`UNINSTALL PLUGIN`](uninstall-plugin.html "15.7.4.6 UNINSTALL
    PLUGIN Statement")语句释放，因此对于执行许多导致缓存的语句实例的服务器，除非使用[`FLUSH PRIVILEGES`](flush.html#flush-privileges)释放，否则会增加缓存内存使用。
- en: Clears the in-memory cache used by the `caching_sha2_password` authentication
    plugin. See [Cache Operation for SHA-2 Pluggable Authentication](caching-sha2-pluggable-authentication.html#caching-sha2-pluggable-authentication-cache-operation
    "Cache Operation for SHA-2 Pluggable Authentication").
  id: totrans-51
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 清除`caching_sha2_password`认证插件使用的内存缓存。请参见[SHA-2可插拔认证的缓存操作](caching-sha2-pluggable-authentication.html#caching-sha2-pluggable-authentication-cache-operation
    "SHA-2可插拔认证的缓存操作")。
- en: '[`FLUSH RELAY LOGS [FOR CHANNEL *`channel`*]`](flush.html#flush-relay-logs)'
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`FLUSH RELAY LOGS [FOR CHANNEL *`channel`*]`](flush.html#flush-relay-logs)'
- en: Closes and reopens any relay log file to which the server is writing. If relay
    logging is enabled, the sequence number of the relay log file is incremented by
    one relative to the previous file.
  id: totrans-53
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 关闭并重新打开服务器正在写入的任何中继日志文件。如果启用了中继日志记录，则相对于上一个文件，中继日志文件的序列号将增加一。
- en: This operation requires the [`RELOAD`](privileges-provided.html#priv_reload)
    privilege.
  id: totrans-54
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此操作需要[`RELOAD`](privileges-provided.html#priv_reload)权限。
- en: The `FOR CHANNEL *`channel`*` clause enables you to name which replication channel
    the operation applies to. Execute [`FLUSH RELAY LOGS FOR CHANNEL *`channel`*`](flush.html#flush-relay-logs)
    to flush the relay log for a specific replication channel. If no channel is named
    and no extra replication channels exist, the operation applies to the default
    channel. If no channel is named and multiple replication channels exist, the operation
    applies to all replication channels. For more information, see [Section 19.2.2,
    “Replication Channels”](replication-channels.html "19.2.2 Replication Channels").
  id: totrans-55
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`FOR CHANNEL *`channel`*`子句允许您指定操作应用于哪个复制通道。执行[`FLUSH RELAY LOGS FOR CHANNEL
    *`channel`*`](flush.html#flush-relay-logs)以刷新特定复制通道的中继日志。如果未命名通道且不存在额外的复制通道，则操作将应用于默认通道。如果未命名通道且存在多个复制通道，则操作将应用于所有复制通道。有关更多信息，请参见[第19.2.2节，“复制通道”](replication-channels.html
    "19.2.2 复制通道")。'
- en: '[`FLUSH SLOW LOGS`](flush.html#flush-slow-logs)'
  id: totrans-56
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`FLUSH SLOW LOGS`](flush.html#flush-slow-logs)'
- en: Closes and reopens any slow query log file to which the server is writing.
  id: totrans-57
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 关闭并重新打开服务器正在写入的任何慢查询日志文件。
- en: This operation requires the [`RELOAD`](privileges-provided.html#priv_reload)
    privilege.
  id: totrans-58
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此操作需要[`RELOAD`](privileges-provided.html#priv_reload)权限。
- en: This operation has no effect on tables used for the slow query log (see [Section 7.4.1,
    “Selecting General Query Log and Slow Query Log Output Destinations”](log-destinations.html
    "7.4.1 Selecting General Query Log and Slow Query Log Output Destinations")).
  id: totrans-59
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此操作不会影响用于慢查询日志的表（请参见[第7.4.1节，“选择一般查询日志和慢查询日志输出目的地”](log-destinations.html "7.4.1 选择一般查询日志和慢查询日志输出目的地")）。
- en: '[`FLUSH STATUS`](flush.html#flush-status)'
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`FLUSH STATUS`](flush.html#flush-status)'
- en: Flushes status indicators.
  id: totrans-61
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 刷新状态指示器。
- en: This operation adds the current thread's session status variable values to the
    global values and resets the session values to zero. Some global variables may
    be reset to zero as well. It also resets the counters for key caches (default
    and named) to zero and sets [`Max_used_connections`](server-status-variables.html#statvar_Max_used_connections)
    to the current number of open connections. This information may be of use when
    debugging a query. See [Section 1.5, “How to Report Bugs or Problems”](bug-reports.html
    "1.5 How to Report Bugs or Problems").
  id: totrans-62
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此操作将当前线程的会话状态变量值添加到全局值中，并将会话值重置为零。一些全局变量也可能被重置为零。它还将键缓存（默认和命名）的计数器重置为零，并将 [`Max_used_connections`](server-status-variables.html#statvar_Max_used_connections)
    设置为当前打开连接数。在调试查询时，此信息可能会有用。请参阅 [第1.5节，“如何报告错误或问题”](bug-reports.html "1.5 如何报告错误或问题")。
- en: '`FLUSH STATUS` is unaffected by [`read_only`](server-system-variables.html#sysvar_read_only)
    or [`super_read_only`](server-system-variables.html#sysvar_super_read_only), and
    is always written to the binary log.'
  id: totrans-63
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`FLUSH STATUS` 不受 [`read_only`](server-system-variables.html#sysvar_read_only)
    或 [`super_read_only`](server-system-variables.html#sysvar_super_read_only) 的影响，并始终写入二进制日志。'
- en: This operation requires the [`FLUSH_STATUS`](privileges-provided.html#priv_flush-status)
    or [`RELOAD`](privileges-provided.html#priv_reload) privilege.
  id: totrans-64
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此操作需要 [`FLUSH_STATUS`](privileges-provided.html#priv_flush-status) 或 [`RELOAD`](privileges-provided.html#priv_reload)
    权限。
- en: '[`FLUSH USER_RESOURCES`](flush.html#flush-user-resources)'
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`FLUSH USER_RESOURCES`](flush.html#flush-user-resources)'
- en: Resets all per-hour user resource indicators to zero.
  id: totrans-66
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 将所有每小时用户资源指标重置为零。
- en: This operation requires the [`FLUSH_USER_RESOURCES`](privileges-provided.html#priv_flush-user-resources)
    or [`RELOAD`](privileges-provided.html#priv_reload) privilege.
  id: totrans-67
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此操作需要 [`FLUSH_USER_RESOURCES`](privileges-provided.html#priv_flush-user-resources)
    或 [`RELOAD`](privileges-provided.html#priv_reload) 权限。
- en: Resetting resource indicators enables clients that have reached their hourly
    connection, query, or update limits to resume activity immediately. [`FLUSH USER_RESOURCES`](flush.html#flush-user-resources)
    does not apply to the limit on maximum simultaneous connections that is controlled
    by the [`max_user_connections`](server-system-variables.html#sysvar_max_user_connections)
    system variable. See [Section 8.2.21, “Setting Account Resource Limits”](user-resources.html
    "8.2.21 Setting Account Resource Limits").
  id: totrans-68
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 重置资源指标使达到每小时连接、查询或更新限制的客户端可以立即恢复活动。 [`FLUSH USER_RESOURCES`](flush.html#flush-user-resources)
    不适用于由 [`max_user_connections`](server-system-variables.html#sysvar_max_user_connections)
    系统变量控制的最大同时连接数限制。请参阅 [第8.2.21节，“设置帐户资源限制”](user-resources.html "8.2.21 设置帐户资源限制")。
- en: FLUSH TABLES Syntax
  id: totrans-69
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: FLUSH TABLES 语法
- en: '[`FLUSH TABLES`](flush.html#flush-tables) flushes tables, and, depending on
    the variant used, acquires locks. Any `TABLES` variant used in a [`FLUSH`](flush.html
    "15.7.8.3 FLUSH Statement") statement must be the only option used. [`FLUSH TABLE`](flush.html#flush-tables)
    is a synonym for [`FLUSH TABLES`](flush.html#flush-tables).'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: '[`FLUSH TABLES`](flush.html#flush-tables) 刷新表，并根据使用的变体获取锁。在 [`FLUSH`](flush.html
    "15.7.8.3 FLUSH 语句") 语句中使用的任何 `TABLES` 变体必须是唯一使用的选项。 [`FLUSH TABLE`](flush.html#flush-tables)
    是 [`FLUSH TABLES`](flush.html#flush-tables) 的同义词。'
- en: Note
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: The descriptions here that indicate tables are flushed by closing them apply
    differently for `InnoDB`, which flushes table contents to disk but leaves them
    open. This still permits table files to be copied while the tables are open, as
    long as other activity does not modify them.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 这里描述的指示通过关闭表来刷新表的描述对于 `InnoDB` 有所不同，它会将表内容刷新到磁盘，但保持表处于打开状态。这仍然允许在表处于打开状态时复制表文件，只要其他活动不修改它们。
- en: '[`FLUSH TABLES`](flush.html#flush-tables)'
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`FLUSH TABLES`](flush.html#flush-tables)'
- en: Closes all open tables, forces all tables in use to be closed, and flushes the
    prepared statement cache.
  id: totrans-74
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 关闭所有打开的表，强制关闭所有正在使用的表，并刷新准备好的语句缓存。
- en: This operation requires the [`FLUSH_TABLES`](privileges-provided.html#priv_flush-tables)
    or [`RELOAD`](privileges-provided.html#priv_reload) privilege.
  id: totrans-75
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此操作需要 [`FLUSH_TABLES`](privileges-provided.html#priv_flush-tables) 或 [`RELOAD`](privileges-provided.html#priv_reload)
    权限。
- en: For information about prepared statement caching, see [Section 10.10.3, “Caching
    of Prepared Statements and Stored Programs”](statement-caching.html "10.10.3 Caching
    of Prepared Statements and Stored Programs").
  id: totrans-76
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 有关准备语句缓存的信息，请参阅 [第10.10.3节，“准备语句和存储程序的缓存”](statement-caching.html "10.10.3 准备语句和存储程序的缓存")。
- en: '[`FLUSH TABLES`](flush.html#flush-tables) is not permitted when there is an
    active [`LOCK TABLES ... READ`](lock-tables.html "15.3.6 LOCK TABLES and UNLOCK
    TABLES Statements"). To flush and lock tables, use [`FLUSH TABLES *`tbl_name`*
    ... WITH READ LOCK`](flush.html#flush-tables-with-read-lock-with-list) instead.'
  id: totrans-77
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 当存在活动的 [`LOCK TABLES ... READ`](lock-tables.html "15.3.6 LOCK TABLES and UNLOCK
    TABLES Statements") 时，不允许执行 [`FLUSH TABLES`](flush.html#flush-tables)。要刷新并锁定表，请使用
    [`FLUSH TABLES *`tbl_name`* ... WITH READ LOCK`](flush.html#flush-tables-with-read-lock-with-list)。
- en: '[`FLUSH TABLES *`tbl_name`* [, *`tbl_name`*] ...`](flush.html#flush-tables-with-list)'
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`FLUSH TABLES *`tbl_name`* [, *`tbl_name`*] ...`](flush.html#flush-tables-with-list)'
- en: With a list of one or more comma-separated table names, this operation is like
    [`FLUSH TABLES`](flush.html#flush-tables) with no names except that the server
    flushes only the named tables. If a named table does not exist, no error occurs.
  id: totrans-79
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 使用一个或多个逗号分隔的表名列表，此操作类似于不带名称的 [`FLUSH TABLES`](flush.html#flush-tables)，只是服务器只刷新指定的表。如果指定的表不存在，不会发生错误。
- en: This operation requires the [`FLUSH_TABLES`](privileges-provided.html#priv_flush-tables)
    or [`RELOAD`](privileges-provided.html#priv_reload) privilege.
  id: totrans-80
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此操作需要 [`FLUSH_TABLES`](privileges-provided.html#priv_flush-tables) 或 [`RELOAD`](privileges-provided.html#priv_reload)
    权限。
- en: '[`FLUSH TABLES WITH READ LOCK`](flush.html#flush-tables-with-read-lock)'
  id: totrans-81
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`FLUSH TABLES WITH READ LOCK`](flush.html#flush-tables-with-read-lock)'
- en: Closes all open tables and locks all tables for all databases with a global
    read lock.
  id: totrans-82
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 关闭所有打开的表并为所有数据库的所有表加锁以获取全局读锁。
- en: This operation requires the [`FLUSH_TABLES`](privileges-provided.html#priv_flush-tables)
    or [`RELOAD`](privileges-provided.html#priv_reload) privilege.
  id: totrans-83
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此操作需要 [`FLUSH_TABLES`](privileges-provided.html#priv_flush-tables) 或 [`RELOAD`](privileges-provided.html#priv_reload)
    权限。
- en: This operation is a very convenient way to get backups if you have a file system
    such as Veritas or ZFS that can take snapshots in time. Use [`UNLOCK TABLES`](lock-tables.html
    "15.3.6 LOCK TABLES and UNLOCK TABLES Statements") to release the lock.
  id: totrans-84
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果您有像 Veritas 或 ZFS 这样可以在时间上进行快照的文件系统，这个操作是获取备份的非常方便的方法。使用 [`UNLOCK TABLES`](lock-tables.html
    "15.3.6 LOCK TABLES and UNLOCK TABLES Statements") 来释放锁。
- en: '[`FLUSH TABLES WITH READ LOCK`](flush.html#flush-tables-with-read-lock) acquires
    a global read lock rather than table locks, so it is not subject to the same behavior
    as [`LOCK TABLES`](lock-tables.html "15.3.6 LOCK TABLES and UNLOCK TABLES Statements")
    and [`UNLOCK TABLES`](lock-tables.html "15.3.6 LOCK TABLES and UNLOCK TABLES Statements")
    with respect to table locking and implicit commits:'
  id: totrans-85
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[`FLUSH TABLES WITH READ LOCK`](flush.html#flush-tables-with-read-lock) 获取全局读锁而不是表锁，因此与表锁定和隐式提交相关的行为不受相同的影响：'
- en: '[`UNLOCK TABLES`](lock-tables.html "15.3.6 LOCK TABLES and UNLOCK TABLES Statements")
    implicitly commits any active transaction only if any tables currently have been
    locked with [`LOCK TABLES`](lock-tables.html "15.3.6 LOCK TABLES and UNLOCK TABLES
    Statements"). The commit does not occur for [`UNLOCK TABLES`](lock-tables.html
    "15.3.6 LOCK TABLES and UNLOCK TABLES Statements") following [`FLUSH TABLES WITH
    READ LOCK`](flush.html#flush-tables-with-read-lock) because the latter statement
    does not acquire table locks.'
  id: totrans-86
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`UNLOCK TABLES`](lock-tables.html "15.3.6 LOCK TABLES and UNLOCK TABLES Statements")
    会隐式提交任何已激活的事务，只有当任何表当前已被 [`LOCK TABLES`](lock-tables.html "15.3.6 LOCK TABLES
    and UNLOCK TABLES Statements") 锁定时才会发生提交。对于跟随 [`FLUSH TABLES WITH READ LOCK`](flush.html#flush-tables-with-read-lock)
    的 [`UNLOCK TABLES`](lock-tables.html "15.3.6 LOCK TABLES and UNLOCK TABLES Statements")
    不会发生提交，因为后者不会获取表锁。'
- en: Beginning a transaction causes table locks acquired with [`LOCK TABLES`](lock-tables.html
    "15.3.6 LOCK TABLES and UNLOCK TABLES Statements") to be released, as though you
    had executed [`UNLOCK TABLES`](lock-tables.html "15.3.6 LOCK TABLES and UNLOCK
    TABLES Statements"). Beginning a transaction does not release a global read lock
    acquired with [`FLUSH TABLES WITH READ LOCK`](flush.html#flush-tables-with-read-lock).
  id: totrans-87
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 开始事务会导致使用 [`LOCK TABLES`](lock-tables.html "15.3.6 LOCK TABLES and UNLOCK TABLES
    Statements") 获取的表锁被释放，就像执行了 [`UNLOCK TABLES`](lock-tables.html "15.3.6 LOCK TABLES
    and UNLOCK TABLES Statements") 一样。开始事务不会释放使用 [`FLUSH TABLES WITH READ LOCK`](flush.html#flush-tables-with-read-lock)
    获取的全局读锁。
- en: '[`FLUSH TABLES WITH READ LOCK`](flush.html#flush-tables-with-read-lock) does
    not prevent the server from inserting rows into the log tables (see [Section 7.4.1,
    “Selecting General Query Log and Slow Query Log Output Destinations”](log-destinations.html
    "7.4.1 Selecting General Query Log and Slow Query Log Output Destinations")).'
  id: totrans-88
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[`FLUSH TABLES WITH READ LOCK`](flush.html#flush-tables-with-read-lock)不会阻止服务器向日志表插入行（参见[第7.4.1节，“选择通用查询日志和慢查询日志输出目的地”](log-destinations.html
    "7.4.1 Selecting General Query Log and Slow Query Log Output Destinations")）。'
- en: '[`FLUSH TABLES *`tbl_name`* [, *`tbl_name`*] ... WITH READ LOCK`](flush.html#flush-tables-with-read-lock-with-list)'
  id: totrans-89
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`FLUSH TABLES *`tbl_name`* [, *`tbl_name`*] ... WITH READ LOCK`](flush.html#flush-tables-with-read-lock-with-list)'
- en: Flushes and acquires read locks for the named tables.
  id: totrans-90
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 刷新并获取命名表的读锁。
- en: This operation requires the [`FLUSH_TABLES`](privileges-provided.html#priv_flush-tables)
    or [`RELOAD`](privileges-provided.html#priv_reload) privilege. Because it acquires
    table locks, it also requires the [`LOCK TABLES`](privileges-provided.html#priv_lock-tables)
    privilege for each table.
  id: totrans-91
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此操作需要[`FLUSH_TABLES`](privileges-provided.html#priv_flush-tables)或[`RELOAD`](privileges-provided.html#priv_reload)权限。因为它获取表锁，所以还需要每个表的[`LOCK
    TABLES`](privileges-provided.html#priv_lock-tables)权限。
- en: The operation first acquires exclusive metadata locks for the tables, so it
    waits for transactions that have those tables open to complete. Then the operation
    flushes the tables from the table cache, reopens the tables, acquires table locks
    (like [`LOCK TABLES ... READ`](lock-tables.html "15.3.6 LOCK TABLES and UNLOCK
    TABLES Statements")), and downgrades the metadata locks from exclusive to shared.
    After the operation acquires locks and downgrades the metadata locks, other sessions
    can read but not modify the tables.
  id: totrans-92
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 该操作首先为表获取排他性元数据锁，因此它会等待那些打开这些表的事务完成。然后，操作会从表缓存中刷新表，重新打开表，获取表锁（类似于[`LOCK TABLES
    ... READ`](lock-tables.html "15.3.6 LOCK TABLES and UNLOCK TABLES Statements"))，并将元数据锁从排他性降级为共享。在操作获取锁并降级元数据锁之后，其他会话可以读取但不能修改这些表。
- en: This operation applies only to existing base (non-`TEMPORARY)` tables. If a
    name refers to a base table, that table is used. If it refers to a `TEMPORARY`
    table, it is ignored. If a name applies to a view, an [`ER_WRONG_OBJECT`](/doc/mysql-errors/8.0/en/server-error-reference.html#error_er_wrong_object)
    error occurs. Otherwise, an [`ER_NO_SUCH_TABLE`](/doc/mysql-errors/8.0/en/server-error-reference.html#error_er_no_such_table)
    error occurs.
  id: totrans-93
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此操作仅适用于现有的基本（非`TEMPORARY)`表。如果名称指向基本表，则使用该表。如果它指向一个`TEMPORARY`表，则会被忽略。如果名称应用于视图，则会发生[`ER_WRONG_OBJECT`](/doc/mysql-errors/8.0/en/server-error-reference.html#error_er_wrong_object)错误。否则，会发生[`ER_NO_SUCH_TABLE`](/doc/mysql-errors/8.0/en/server-error-reference.html#error_er_no_such_table)错误。
- en: Use [`UNLOCK TABLES`](lock-tables.html "15.3.6 LOCK TABLES and UNLOCK TABLES
    Statements") to release the locks, [`LOCK TABLES`](lock-tables.html "15.3.6 LOCK
    TABLES and UNLOCK TABLES Statements") to release the locks and acquire other locks,
    or [`START TRANSACTION`](commit.html "15.3.1 START TRANSACTION, COMMIT, and ROLLBACK
    Statements") to release the locks and begin a new transaction.
  id: totrans-94
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 使用[`UNLOCK TABLES`](lock-tables.html "15.3.6 LOCK TABLES and UNLOCK TABLES Statements")来释放锁，[`LOCK
    TABLES`](lock-tables.html "15.3.6 LOCK TABLES and UNLOCK TABLES Statements")来释放锁并获取其他锁，或者使用[`START
    TRANSACTION`](commit.html "15.3.1 START TRANSACTION, COMMIT, and ROLLBACK Statements")来释放锁并开始一个新事务。
- en: This [`FLUSH TABLES`](flush.html#flush-tables) variant enables tables to be
    flushed and locked in a single operation. It provides a workaround for the restriction
    that [`FLUSH TABLES`](flush.html#flush-tables) is not permitted when there is
    an active [`LOCK TABLES ... READ`](lock-tables.html "15.3.6 LOCK TABLES and UNLOCK
    TABLES Statements").
  id: totrans-95
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这个[`FLUSH TABLES`](flush.html#flush-tables)变体允许在单个操作中刷新和锁定表。它提供了一个解决方案，因为当存在活动的[`LOCK
    TABLES ... READ`](lock-tables.html "15.3.6 LOCK TABLES and UNLOCK TABLES Statements")时，不允许执行[`FLUSH
    TABLES`](flush.html#flush-tables)。
- en: This operation does not perform an implicit [`UNLOCK TABLES`](lock-tables.html
    "15.3.6 LOCK TABLES and UNLOCK TABLES Statements"), so an error results if you
    perform the operation while there is any active [`LOCK TABLES`](lock-tables.html
    "15.3.6 LOCK TABLES and UNLOCK TABLES Statements") or use it a second time without
    first releasing the locks acquired.
  id: totrans-96
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此操作不会执行隐式的[`UNLOCK TABLES`](lock-tables.html "15.3.6 LOCK TABLES and UNLOCK
    TABLES Statements")，因此如果在存在任何活动的[`LOCK TABLES`](lock-tables.html "15.3.6 LOCK
    TABLES and UNLOCK TABLES Statements")的情况下执行操作，或者在释放已获取的锁之前第二次使用它，都会导致错误。
- en: If a flushed table was opened with [`HANDLER`](handler.html "15.2.5 HANDLER
    Statement"), the handler is implicitly flushed and loses its position.
  id: totrans-97
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果刷新的表是使用[`HANDLER`](handler.html "15.2.5 HANDLER Statement")打开的，则处理程序会被隐式刷新并丢失其位置。
- en: '[`FLUSH TABLES *`tbl_name`* [, *`tbl_name`*] ... FOR EXPORT`](flush.html#flush-tables-for-export-with-list)'
  id: totrans-98
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`FLUSH TABLES *`tbl_name`* [, *`tbl_name`*] ... FOR EXPORT`](flush.html#flush-tables-for-export-with-list)'
- en: This [`FLUSH TABLES`](flush.html#flush-tables) variant applies to `InnoDB` tables.
    It ensures that changes to the named tables have been flushed to disk so that
    binary table copies can be made while the server is running.
  id: totrans-99
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这个[`FLUSH TABLES`](flush.html#flush-tables)变体适用于`InnoDB`表。它确保对指定表的更改已刷新到磁盘，以便在服务器运行时可以进行二进制表副本的制作。
- en: This operation requires the [`FLUSH_TABLES`](privileges-provided.html#priv_flush-tables)
    or [`RELOAD`](privileges-provided.html#priv_reload) privilege. Because it acquires
    locks on tables in preparation for exporting them, it also requires the [`LOCK
    TABLES`](privileges-provided.html#priv_lock-tables) and [`SELECT`](privileges-provided.html#priv_select)
    privileges for each table.
  id: totrans-100
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此操作需要[`FLUSH_TABLES`](privileges-provided.html#priv_flush-tables)或[`RELOAD`](privileges-provided.html#priv_reload)权限。因为它在准备导出表时获取表上的锁，所以还需要每个表的[`LOCK
    TABLES`](privileges-provided.html#priv_lock-tables)和[`SELECT`](privileges-provided.html#priv_select)权限。
- en: 'The operation works like this:'
  id: totrans-101
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 操作的工作方式如下：
- en: It acquires shared metadata locks for the named tables. The operation blocks
    as long as other sessions have active transactions that have modified those tables
    or hold table locks for them. When the locks have been acquired, the operation
    blocks transactions that attempt to update the tables, while permitting read-only
    operations to continue.
  id: totrans-102
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 它为命名表获取共享元数据锁。只要其他会话有活动事务修改了这些表或持有这些表的表锁，该操作就会阻塞。在获取锁之后，该操作会阻止试图更新表的事务，同时允许只读操作继续。
- en: It checks whether all storage engines for the tables support `FOR EXPORT`. If
    any do not, an [`ER_ILLEGAL_HA`](/doc/mysql-errors/8.0/en/server-error-reference.html#error_er_illegal_ha)
    error occurs and the operation fails.
  id: totrans-103
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 它检查表的所有存储引擎是否支持`FOR EXPORT`。如果有任何存储引擎不支持，将会发生[`ER_ILLEGAL_HA`](/doc/mysql-errors/8.0/en/server-error-reference.html#error_er_illegal_ha)错误，操作将失败。
- en: The operation notifies the storage engine for each table to make the table ready
    for export. The storage engine must ensure that any pending changes are written
    to disk.
  id: totrans-104
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 该操作通知每个表的存储引擎使表准备好导出。存储引擎必须确保任何待处理的更改都已写入磁盘。
- en: The operation puts the session in lock-tables mode so that the metadata locks
    acquired earlier are not released when the `FOR EXPORT` operation completes.
  id: totrans-105
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 该操作将会将会话置于锁表模式，以便在`FOR EXPORT`操作完成时不释放先前获取的元数据锁。
- en: This operation applies only to existing base (non-`TEMPORARY`) tables. If a
    name refers to a base table, that table is used. If it refers to a `TEMPORARY`
    table, it is ignored. If a name applies to a view, an [`ER_WRONG_OBJECT`](/doc/mysql-errors/8.0/en/server-error-reference.html#error_er_wrong_object)
    error occurs. Otherwise, an [`ER_NO_SUCH_TABLE`](/doc/mysql-errors/8.0/en/server-error-reference.html#error_er_no_such_table)
    error occurs.
  id: totrans-106
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此操作仅适用于现有的基本（非`TEMPORARY`）表。如果名称指的是基本表，则使用该表。如果指的是`TEMPORARY`表，则会被忽略。如果名称适用于视图，则会发生[`ER_WRONG_OBJECT`](/doc/mysql-errors/8.0/en/server-error-reference.html#error_er_wrong_object)错误。否则，会发生[`ER_NO_SUCH_TABLE`](/doc/mysql-errors/8.0/en/server-error-reference.html#error_er_no_such_table)错误。
- en: '`InnoDB` supports `FOR EXPORT` for tables that have their own [`.ibd` file](glossary.html#glos_ibd_file
    ".ibd file") file (that is, tables created with the [`innodb_file_per_table`](innodb-parameters.html#sysvar_innodb_file_per_table)
    setting enabled). `InnoDB` ensures when notified by the `FOR EXPORT` operation
    that any changes have been flushed to disk. This permits a binary copy of table
    contents to be made while the `FOR EXPORT` operation is in effect because the
    `.ibd` file is transaction consistent and can be copied while the server is running.
    `FOR EXPORT` does not apply to `InnoDB` system tablespace files, or to `InnoDB`
    tables that have `FULLTEXT` indexes.'
  id: totrans-107
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`InnoDB`支持对具有自己的[`.ibd`文件](glossary.html#glos_ibd_file ".ibd文件")文件的表进行`FOR
    EXPORT`（即启用了[`innodb_file_per_table`](innodb-parameters.html#sysvar_innodb_file_per_table)设置的表）。`InnoDB`确保在`FOR
    EXPORT`操作通知时，任何更改都已刷新到磁盘。这允许在`FOR EXPORT`操作生效时制作表内容的二进制副本，因为`.ibd`文件是事务一致的，可以在服务器运行时复制。`FOR
    EXPORT`不适用于`InnoDB`系统表空间文件，也不适用于具有`FULLTEXT`索引的`InnoDB`表。'
- en: '[`FLUSH TABLES ...FOR EXPORT`](flush.html#flush-tables-for-export-with-list)
    is supported for partitioned `InnoDB` tables.'
  id: totrans-108
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[`FLUSH TABLES ...FOR EXPORT`](flush.html#flush-tables-for-export-with-list)支持分区的`InnoDB`表。'
- en: When notified by `FOR EXPORT`, `InnoDB` writes to disk certain kinds of data
    that is normally held in memory or in separate disk buffers outside the tablespace
    files. For each table, `InnoDB` also produces a file named `*`table_name`*.cfg`
    in the same database directory as the table. The `.cfg` file contains metadata
    needed to reimport the tablespace files later, into the same or different server.
  id: totrans-109
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 当收到`FOR EXPORT`通知时，`InnoDB`会将通常保存在内存中或在表空间文件之外的磁盘缓冲区中的某些类型数据写入磁盘。对于每个表，`InnoDB`还会在与表相同的数据库目录中生成一个名为`*`table_name`*.cfg`的文件。`.cfg`文件包含重新导入表空间文件所需的元数据，以便稍后重新导入到相同或不同的服务器中。
- en: 'When the `FOR EXPORT` operation completes, `InnoDB` has flushed all [dirty
    pages](glossary.html#glos_dirty_page "dirty page") to the table data files. Any
    [change buffer](glossary.html#glos_change_buffer "change buffer") entries are
    merged prior to flushing. At this point, the tables are locked and quiescent:
    The tables are in a transactionally consistent state on disk and you can copy
    the `.ibd` tablespace files along with the corresponding `.cfg` files to get a
    consistent snapshot of those tables.'
  id: totrans-110
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 当`FOR EXPORT`操作完成时，`InnoDB`已经将所有[脏页](glossary.html#glos_dirty_page "dirty page")刷新到表数据文件中。在刷新之前，任何[更改缓冲区](glossary.html#glos_change_buffer
    "change buffer")条目都会被合并。此时，表被锁定并处于静止状态：表在磁盘上处于事务一致状态，您可以将`.ibd`表空间文件与相应的`.cfg`文件一起复制，以获得这些表的一致快照。
- en: For the procedure to reimport the copied table data into a MySQL instance, see
    [Section 17.6.1.3, “Importing InnoDB Tables”](innodb-table-import.html "17.6.1.3 Importing
    InnoDB Tables").
  id: totrans-111
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 要重新导入复制的表数据到MySQL实例的过程，请参见[第17.6.1.3节，“导入InnoDB表”](innodb-table-import.html
    "17.6.1.3 Importing InnoDB Tables")。
- en: After you are done with the tables, use [`UNLOCK TABLES`](lock-tables.html "15.3.6 LOCK
    TABLES and UNLOCK TABLES Statements") to release the locks, [`LOCK TABLES`](lock-tables.html
    "15.3.6 LOCK TABLES and UNLOCK TABLES Statements") to release the locks and acquire
    other locks, or [`START TRANSACTION`](commit.html "15.3.1 START TRANSACTION, COMMIT,
    and ROLLBACK Statements") to release the locks and begin a new transaction.
  id: totrans-112
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在处理完表之后，请使用[`UNLOCK TABLES`](lock-tables.html "15.3.6 LOCK TABLES and UNLOCK
    TABLES Statements")释放锁定，[`LOCK TABLES`](lock-tables.html "15.3.6 LOCK TABLES and
    UNLOCK TABLES Statements")释放锁定并获取其他锁定，或者使用[`START TRANSACTION`](commit.html "15.3.1 START
    TRANSACTION, COMMIT, and ROLLBACK Statements")释放锁定并开始新事务。
- en: 'While any of these statements is in effect within the session, attempts to
    use [`FLUSH TABLES ... FOR EXPORT`](flush.html#flush-tables-for-export-with-list)
    produce an error:'
  id: totrans-113
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在会话中执行这些语句之一时，尝试使用[`FLUSH TABLES ... FOR EXPORT`](flush.html#flush-tables-for-export-with-list)会产生错误：
- en: '[PRE3]'
  id: totrans-114
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'While [`FLUSH TABLES ... FOR EXPORT`](flush.html#flush-tables-for-export-with-list)
    is in effect within the session, attempts to use any of these statements produce
    an error:'
  id: totrans-115
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在会话中有效时，尝试使用任何这些语句会产生错误：[`FLUSH TABLES ... FOR EXPORT`](flush.html#flush-tables-for-export-with-list)。
- en: '[PRE4]'
  id: totrans-116
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
