- en: 原文：[https://dev.mysql.com/doc/refman/8.0/en/audit-log-reference.html](https://dev.mysql.com/doc/refman/8.0/en/audit-log-reference.html)
  id: totrans-0
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://dev.mysql.com/doc/refman/8.0/en/audit-log-reference.html](https://dev.mysql.com/doc/refman/8.0/en/audit-log-reference.html)
- en: 8.4.5.11 Audit Log Reference
  id: totrans-1
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 8.4.5.11 审计日志参考
- en: 'The following sections provide a reference to MySQL Enterprise Audit elements:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 以下各节提供了MySQL企业审计元素的参考：
- en: '[Audit Log Tables](audit-log-reference.html#audit-log-tables "Audit Log Tables")'
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[审计日志表](audit-log-reference.html#audit-log-tables "审计日志表")'
- en: '[Audit Log Functions](audit-log-reference.html#audit-log-routines "Audit Log
    Functions")'
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[审计日志功能](audit-log-reference.html#audit-log-routines "审计日志功能")'
- en: '[Audit Log Option and Variable Reference](audit-log-reference.html#audit-log-option-variable-reference
    "Audit Log Option and Variable Reference")'
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[审计日志选项和变量参考](audit-log-reference.html#audit-log-option-variable-reference
    "审计日志选项和变量参考")'
- en: '[Audit Log Options and Variables](audit-log-reference.html#audit-log-options-variables
    "Audit Log Options and Variables")'
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[审计日志选项和变量](audit-log-reference.html#audit-log-options-variables "审计日志选项和变量")'
- en: '[Audit Log Status Variables](audit-log-reference.html#audit-log-status-variables
    "Audit Log Status Variables")'
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[审计日志状态变量](audit-log-reference.html#audit-log-status-variables "审计日志状态变量")'
- en: To install the audit log tables and functions, use the instructions provided
    in [Section 8.4.5.2, “Installing or Uninstalling MySQL Enterprise Audit”](audit-log-installation.html
    "8.4.5.2 Installing or Uninstalling MySQL Enterprise Audit"). Unless those objects
    are installed, the `audit_log` plugin operates in legacy mode (deprecated in MySQL
    8.0.34). See [Section 8.4.5.10, “Legacy Mode Audit Log Filtering”](audit-log-legacy-filtering.html
    "8.4.5.10 Legacy Mode Audit Log Filtering").
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 要安装审计日志表和功能，请使用[第8.4.5.2节，“安装或卸载MySQL企业审计”](audit-log-installation.html "8.4.5.2 安装或卸载MySQL企业审计")中提供的说明。除非安装了这些对象，否则`audit_log`插件将以传统模式运行（在MySQL
    8.0.34中已弃用）。请参阅[第8.4.5.10节，“传统模式审计日志过滤”](audit-log-legacy-filtering.html "8.4.5.10 传统模式审计日志过滤")。
- en: Audit Log Tables
  id: totrans-9
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 审计日志表
- en: MySQL Enterprise Audit uses tables in the `mysql` system database for persistent
    storage of filter and user account data. The tables can be accessed only by users
    who have privileges for that database. To use a different database, set the [`audit_log_database`](audit-log-reference.html#sysvar_audit_log_database)
    system variable at server startup. The tables use the `InnoDB` storage engine.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: MySQL企业审计使用`mysql`系统数据库中的表来持久存储过滤器和用户帐户数据。只有具有该数据库权限的用户才能访问这些表。要使用不同的数据库，请在服务器启动时设置[`audit_log_database`](audit-log-reference.html#sysvar_audit_log_database)系统变量。这些表使用`InnoDB`存储引擎。
- en: If these tables are missing, the `audit_log` plugin operates in (deprecated)
    legacy mode. See [Section 8.4.5.10, “Legacy Mode Audit Log Filtering”](audit-log-legacy-filtering.html
    "8.4.5.10 Legacy Mode Audit Log Filtering").
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 如果这些表缺失，`audit_log`插件将以（已弃用的）传统模式运行。请参阅[第8.4.5.10节，“传统模式审计日志过滤”](audit-log-legacy-filtering.html
    "8.4.5.10 传统模式审计日志过滤")。
- en: 'The `audit_log_filter` table stores filter definitions. The table has these
    columns:'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: '`audit_log_filter`表存储过滤器定义。该表具有以下列：'
- en: '`NAME`'
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`名称`'
- en: The filter name.
  id: totrans-14
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 过滤器名称。
- en: '`FILTER`'
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`FILTER`'
- en: The filter definition associated with the filter name. Definitions are stored
    as [`JSON`](json.html "13.5 The JSON Data Type") values.
  id: totrans-16
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 与过滤器名称相关联的过滤器定义。定义存储为[`JSON`](json.html "13.5 JSON数据类型")值。
- en: 'The `audit_log_user` table stores user account information. The table has these
    columns:'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: '`audit_log_user`表存储用户帐户信息。该表具有以下列：'
- en: '`USER`'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`用户`'
- en: The user name part of an account. For an account `user1@localhost`, the `USER`
    part is `user1`.
  id: totrans-19
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 帐户的用户名部分。对于帐户`user1@localhost`，`USER`部分是`user1`。
- en: '`HOST`'
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`HOST`'
- en: The host name part of an account. For an account `user1@localhost`, the `HOST`
    part is `localhost`.
  id: totrans-21
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 帐户的主机名部分。对于帐户`user1@localhost`，`HOST`部分是`localhost`。
- en: '`FILTERNAME`'
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`FILTERNAME`'
- en: The name of the filter assigned to the account. The filter name associates the
    account with a filter defined in the `audit_log_filter` table.
  id: totrans-23
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 分配给帐户的过滤器名称。过滤器名称将帐户与`audit_log_filter`表中定义的过滤器关联起来。
- en: Audit Log Functions
  id: totrans-24
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 审计日志功能
- en: This section describes, for each audit log function, its purpose, calling sequence,
    and return value. For information about the conditions under which these functions
    can be invoked, see [Section 8.4.5.7, “Audit Log Filtering”](audit-log-filtering.html
    "8.4.5.7 Audit Log Filtering").
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 本节描述了每个审计日志功能的目的、调用顺序和返回值。有关这些功能可以在何种条件下调用的信息，请参阅[第8.4.5.7节，“审计日志过滤”](audit-log-filtering.html
    "8.4.5.7 审计日志过滤")。
- en: 'Each audit log function returns a string that indicates whether the operation
    succeeded. `OK` indicates success. `ERROR: *`message`*` indicates failure.'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: '每个审计日志函数都会返回一个字符串，指示操作是否成功。`OK`表示成功。`ERROR: *`message`*`表示失败。'
- en: As of MySQL 8.0.19, audit log functions convert string arguments to `utf8mb4`
    and string return values are `utf8mb4` strings. Prior to MySQL 8.0.19, audit log
    functions treat string arguments as binary strings (which means they do not distinguish
    lettercase), and string return values are binary strings.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 截至 MySQL 8.0.19，审计日志函数将字符串参数转换为`utf8mb4`，并且字符串返回值为`utf8mb4`字符串。在 MySQL 8.0.19
    之前，审计日志函数将字符串参数视为二进制字符串（这意味着它们不区分大小写），并且字符串返回值为二进制字符串。
- en: If an audit log function is invoked from within the [**mysql**](mysql.html "6.5.1 mysql
    — The MySQL Command-Line Client") client, binary string results display using
    hexadecimal notation, depending on the value of the [`--binary-as-hex`](mysql-command-options.html#option_mysql_binary-as-hex).
    For more information about that option, see [Section 6.5.1, “mysql — The MySQL
    Command-Line Client”](mysql.html "6.5.1 mysql — The MySQL Command-Line Client").
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 如果从[**mysql**](mysql.html "6.5.1 mysql — The MySQL Command-Line Client")客户端调用审计日志函数，则二进制字符串结果将使用十六进制表示，具体取决于[`--binary-as-hex`](mysql-command-options.html#option_mysql_binary-as-hex)的值。有关该选项的更多信息，请参见[第
    6.5.1 节，“mysql — MySQL 命令行客户端”](mysql.html "6.5.1 mysql — The MySQL Command-Line
    Client")。
- en: 'These audit log functions are available:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 可用的审计日志函数包括：
- en: '[`audit_log_encryption_password_get([*`keyring_id`*])`](audit-log-reference.html#function_audit-log-encryption-password-get)'
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`audit_log_encryption_password_get([*`keyring_id`*])`](audit-log-reference.html#function_audit-log-encryption-password-get)'
- en: This function fetches an audit log encryption password from the MySQL keyring,
    which must be enabled or an error occurs. Any keyring component or plugin can
    be used; for instructions, see [Section 8.4.4, “The MySQL Keyring”](keyring.html
    "8.4.4 The MySQL Keyring").
  id: totrans-31
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此函数从 MySQL 钥匙环中获取审计日志加密密码，必须启用，否则将出现错误。可以使用任何钥匙环组件或插件；有关说明，请参见[第 8.4.4 节，“MySQL
    钥匙环”](keyring.html "8.4.4 The MySQL Keyring")。
- en: With no argument, the function retrieves the current encryption password as
    a binary string. An argument may be given to specify which audit log encryption
    password to retrieve. The argument must be the keyring ID of the current password
    or an archived password.
  id: totrans-32
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 没有参数时，函数将检索当前加密密码作为二进制字符串。可以给定参数以指定要检索的哪个审计日志加密密码。参数必须是当前密码或存档密码的钥匙环 ID。
- en: For additional information about audit log encryption, see [Encrypting Audit
    Log Files](audit-log-logging-configuration.html#audit-log-file-encryption "Encrypting
    Audit Log Files").
  id: totrans-33
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 有关审计日志加密的更多信息，请参见[加密审计日志文件](audit-log-logging-configuration.html#audit-log-file-encryption
    "Encrypting Audit Log Files")。
- en: 'Arguments:'
  id: totrans-34
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 参数：
- en: '*`keyring_id`*: As of MySQL 8.0.17, this optional argument indicates the keyring
    ID of the password to retrieve. The maximum permitted length is 766 bytes. If
    omitted, the function retrieves the current password.'
  id: totrans-35
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '*`keyring_id`*：从 MySQL 8.0.17 开始，这个可选参数表示要检索的密码的钥匙环 ID。最大允许长度为 766 字节。如果省略，函数将检索当前密码。'
- en: Prior to MySQL 8.0.17, no argument is permitted. The function always retrieves
    the current password.
  id: totrans-36
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在 MySQL 8.0.17 之前，不允许有任何参数。该函数始终检索当前密码。
- en: 'Return value:'
  id: totrans-37
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 返回值：
- en: The password string for success (up to 766 bytes), or `NULL` and an error for
    failure.
  id: totrans-38
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 成功的密码字符串（最多 766 字节），或失败时为`NULL`和错误。
- en: 'Example:'
  id: totrans-39
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 示例：
- en: 'Retrieve the current password:'
  id: totrans-40
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 检索当前密码：
- en: '[PRE0]'
  id: totrans-41
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'To retrieve a password by ID, you can determine which audit log keyring IDs
    exist by querying the Performance Schema [`keyring_keys`](performance-schema-keyring-keys-table.html
    "29.12.18.2 The keyring_keys table") table:'
  id: totrans-42
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 要通过 ID 检索密码，可以通过查询性能模式[`keyring_keys`](performance-schema-keyring-keys-table.html
    "29.12.18.2 The keyring_keys table")表来确定存在哪些审计日志钥匙环 ID：
- en: '[PRE1]'
  id: totrans-43
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '[`audit_log_encryption_password_set(*`password`*)`](audit-log-reference.html#function_audit-log-encryption-password-set)'
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`audit_log_encryption_password_set(*`password`*)`](audit-log-reference.html#function_audit-log-encryption-password-set)'
- en: Sets the current audit log encryption password to the argument and stores the
    password in the MySQL keyring. As of MySQL 8.0.19, the password is stored as a
    `utf8mb4` string. Prior to MySQL 8.0.19, the password is stored in binary form.
  id: totrans-45
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 将当前审计日志加密密码设置为参数，并将密码存储在 MySQL 钥匙环中。截至 MySQL 8.0.19，密码存储为`utf8mb4`字符串。在 MySQL
    8.0.19 之前，密码以二进制形式存储。
- en: If encryption is enabled, this function performs a log file rotation operation
    that renames the current log file, and begins a new log file encrypted with the
    password. The keyring must be enabled or an error occurs. Any keyring component
    or plugin can be used; for instructions, see [Section 8.4.4, “The MySQL Keyring”](keyring.html
    "8.4.4 The MySQL Keyring").
  id: totrans-46
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果启用了加密，此函数将执行一个日志文件旋转操作，重命名当前日志文件，并开始一个新的日志文件，使用密码加密。必须启用密钥环，否则将出现错误。可以使用任何密钥环组件或插件；有关说明，请参见[第8.4.4节，“MySQL密钥环”](keyring.html
    "8.4.4 The MySQL Keyring")。
- en: For additional information about audit log encryption, see [Encrypting Audit
    Log Files](audit-log-logging-configuration.html#audit-log-file-encryption "Encrypting
    Audit Log Files").
  id: totrans-47
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 有关审计日志加密的更多信息，请参见[加密审计日志文件](audit-log-logging-configuration.html#audit-log-file-encryption
    "Encrypting Audit Log Files")。
- en: 'Arguments:'
  id: totrans-48
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 参数：
- en: '*`password`*: The password string. The maximum permitted length is 766 bytes.'
  id: totrans-49
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '*`password`*: 密码字符串。最大允许长度为766字节。'
- en: 'Return value:'
  id: totrans-50
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 返回值：
- en: 1 for success, 0 for failure.
  id: totrans-51
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 成功返回1，失败返回0。
- en: 'Example:'
  id: totrans-52
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 示例：
- en: '[PRE2]'
  id: totrans-53
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '[`audit_log_filter_flush()`](audit-log-reference.html#function_audit-log-filter-flush)'
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`audit_log_filter_flush()`](audit-log-reference.html#function_audit-log-filter-flush)'
- en: Calling any of the other filtering functions affects operational audit log filtering
    immediately and updates the audit log tables. If instead you modify the contents
    of those tables directly using statements such as [`INSERT`](insert.html "15.2.7 INSERT
    Statement"), [`UPDATE`](update.html "15.2.17 UPDATE Statement"), and [`DELETE`](delete.html
    "15.2.2 DELETE Statement"), the changes do not affect filtering immediately. To
    flush your changes and make them operational, call [`audit_log_filter_flush()`](audit-log-reference.html#function_audit-log-filter-flush).
  id: totrans-55
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 调用任何其他过滤函数会立即影响操作审计日志过滤，并更新审计日志表。如果您改为直接修改这些表的内容，使用诸如[`INSERT`](insert.html
    "15.2.7 INSERT Statement")、[`UPDATE`](update.html "15.2.17 UPDATE Statement")和[`DELETE`](delete.html
    "15.2.2 DELETE Statement")等语句，更改不会立即影响过滤。要刷新更改并使其生效，请调用[`audit_log_filter_flush()`](audit-log-reference.html#function_audit-log-filter-flush)。
- en: Warning
  id: totrans-56
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 警告
- en: '[`audit_log_filter_flush()`](audit-log-reference.html#function_audit-log-filter-flush)
    should be used only after modifying the audit tables directly, to force reloading
    all filters. Otherwise, this function should be avoided. It is, in effect, a simplified
    version of unloading and reloading the `audit_log` plugin with [`UNINSTALL PLUGIN`](uninstall-plugin.html
    "15.7.4.6 UNINSTALL PLUGIN Statement") plus [`INSTALL PLUGIN`](install-plugin.html
    "15.7.4.4 INSTALL PLUGIN Statement").'
  id: totrans-57
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 只有在直接修改审计表后，才应使用[`audit_log_filter_flush()`](audit-log-reference.html#function_audit-log-filter-flush)来强制重新加载所有过滤器。否则，应避免使用此函数。实际上，这是使用[`UNINSTALL
    PLUGIN`](uninstall-plugin.html "15.7.4.6 UNINSTALL PLUGIN Statement")加[`INSTALL
    PLUGIN`](install-plugin.html "15.7.4.4 INSTALL PLUGIN Statement")卸载和重新加载`audit_log`插件的简化版本。
- en: '[`audit_log_filter_flush()`](audit-log-reference.html#function_audit-log-filter-flush)
    affects all current sessions and detaches them from their previous filters. Current
    sessions are no longer logged unless they disconnect and reconnect, or execute
    a change-user operation.'
  id: totrans-58
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[`audit_log_filter_flush()`](audit-log-reference.html#function_audit-log-filter-flush)会影响所有当前会话，并将它们从先前的过滤器中分离。当前会话不再被记录，除非它们断开连接并重新连接，或执行更改用户操作。'
- en: If this function fails, an error message is returned and the audit log is disabled
    until the next successful call to [`audit_log_filter_flush()`](audit-log-reference.html#function_audit-log-filter-flush).
  id: totrans-59
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果此函数失败，将返回错误消息，并且审计日志将被禁用，直到下一次成功调用[`audit_log_filter_flush()`](audit-log-reference.html#function_audit-log-filter-flush)。
- en: 'Arguments:'
  id: totrans-60
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 参数：
- en: None.
  id: totrans-61
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 无。
- en: 'Return value:'
  id: totrans-62
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 返回值：
- en: 'A string that indicates whether the operation succeeded. `OK` indicates success.
    `ERROR: *`message`*` indicates failure.'
  id: totrans-63
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '一个指示操作是否成功的字符串。`OK`表示成功。`ERROR: *`message`*`表示失败。'
- en: 'Example:'
  id: totrans-64
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 示例：
- en: '[PRE3]'
  id: totrans-65
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '[`audit_log_filter_remove_filter(*`filter_name`*)`](audit-log-reference.html#function_audit-log-filter-remove-filter)'
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`audit_log_filter_remove_filter(*`filter_name`*)`](audit-log-reference.html#function_audit-log-filter-remove-filter)'
- en: Given a filter name, removes the filter from the current set of filters. It
    is not an error for the filter not to exist.
  id: totrans-67
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 给定一个过滤器名称，从当前过滤器集中移除该过滤器。过滤器不存在也不会报错。
- en: 'If a removed filter is assigned to any user accounts, those users stop being
    filtered (they are removed from the `audit_log_user` table). Termination of filtering
    includes any current sessions for those users: They are detached from the filter
    and no longer logged.'
  id: totrans-68
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果已删除的过滤器分配给任何用户帐户，则这些用户将停止被过滤（它们将从`audit_log_user`表中删除）。停止过滤包括这些用户的任何当前会话：它们将从过滤器中分离，并且不再被记录。
- en: 'Arguments:'
  id: totrans-69
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 参数：
- en: '*`filter_name`*: A string that specifies the filter name.'
  id: totrans-70
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*`filter_name`*：指定过滤器名称的字符串。'
- en: 'Return value:'
  id: totrans-71
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 返回值：
- en: 'A string that indicates whether the operation succeeded. `OK` indicates success.
    `ERROR: *`message`*` indicates failure.'
  id: totrans-72
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '一个指示操作是否成功的字符串。`OK`表示成功。`ERROR: *`message`*`表示失败。'
- en: 'Example:'
  id: totrans-73
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 示例：
- en: '[PRE4]'
  id: totrans-74
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '[`audit_log_filter_remove_user(*`user_name`*)`](audit-log-reference.html#function_audit-log-filter-remove-user)'
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`audit_log_filter_remove_user(*`user_name`*)`](audit-log-reference.html#function_audit-log-filter-remove-user)'
- en: Given a user account name, cause the user to be no longer assigned to a filter.
    It is not an error if the user has no filter assigned. Filtering of current sessions
    for the user remains unaffected. New connections for the user are filtered using
    the default account filter if there is one, and are not logged otherwise.
  id: totrans-76
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 给定用户账户名称，使用户不再分配到过滤器。如果用户没有分配过滤器，则不会出错。用户的当前会话过滤保持不受影响。如果存在默认账户过滤器，则使用默认账户过滤器过滤用户的新连接，否则不记录。
- en: If the name is `%`, the function removes the default account filter that is
    used for any user account that has no explicitly assigned filter.
  id: totrans-77
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果名称为`%`，则函数会移除用于没有明确分配过滤器的任何用户账户的默认账户过滤器。
- en: 'Arguments:'
  id: totrans-78
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 参数：
- en: '*`user_name`*: The user account name as a string in `*`user_name`*@*`host_name`*`
    format, or `%` to represent the default account.'
  id: totrans-79
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*`user_name`*：用户账户名称，以`*`user_name`*@*`host_name`*`格式的字符串表示，或者使用`%`表示默认账户。'
- en: 'Return value:'
  id: totrans-80
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 返回值：
- en: 'A string that indicates whether the operation succeeded. `OK` indicates success.
    `ERROR: *`message`*` indicates failure.'
  id: totrans-81
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '一个指示操作是否成功的字符串。`OK`表示成功。`ERROR: *`message`*`表示失败。'
- en: 'Example:'
  id: totrans-82
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 示例：
- en: '[PRE5]'
  id: totrans-83
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: '[`audit_log_filter_set_filter(*`filter_name`*, *`definition`*)`](audit-log-reference.html#function_audit-log-filter-set-filter)'
  id: totrans-84
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`audit_log_filter_set_filter(*`filter_name`*, *`definition`*)`](audit-log-reference.html#function_audit-log-filter-set-filter)'
- en: Given a filter name and definition, adds the filter to the current set of filters.
    If the filter already exists and is used by any current sessions, those sessions
    are detached from the filter and are no longer logged. This occurs because the
    new filter definition has a new filter ID that differs from its previous ID.
  id: totrans-85
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 给定过滤器名称和定义，将过滤器添加到当前过滤器集中。如果过滤器已经存在并且被当前会话使用，那么这些会话将与过滤器分离，并且不再记录。这是因为新的过滤器定义具有与先前ID不同的新过滤器ID。
- en: 'Arguments:'
  id: totrans-86
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 参数：
- en: '*`filter_name`*: A string that specifies the filter name.'
  id: totrans-87
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*`filter_name`*：指定过滤器名称的字符串。'
- en: '*`definition`*: A [`JSON`](json.html "13.5 The JSON Data Type") value that
    specifies the filter definition.'
  id: totrans-88
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*`definition`*：指定过滤器定义的[`JSON`](json.html "13.5 JSON数据类型")值。'
- en: 'Return value:'
  id: totrans-89
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 返回值：
- en: 'A string that indicates whether the operation succeeded. `OK` indicates success.
    `ERROR: *`message`*` indicates failure.'
  id: totrans-90
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '一个指示操作是否成功的字符串。`OK`表示成功。`ERROR: *`message`*`表示失败。'
- en: 'Example:'
  id: totrans-91
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 示例：
- en: '[PRE6]'
  id: totrans-92
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '[`audit_log_filter_set_user(*`user_name`*, *`filter_name`*)`](audit-log-reference.html#function_audit-log-filter-set-user)'
  id: totrans-93
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`audit_log_filter_set_user(*`user_name`*, *`filter_name`*)`](audit-log-reference.html#function_audit-log-filter-set-user)'
- en: Given a user account name and a filter name, assigns the filter to the user.
    A user can be assigned only one filter, so if the user was already assigned a
    filter, the assignment is replaced. Filtering of current sessions for the user
    remains unaffected. New connections are filtered using the new filter.
  id: totrans-94
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 给定用户账户名称和过滤器名称，将过滤器分配给用户。用户只能分配一个过滤器，因此如果用户已经分配了过滤器，则分配将被替换。用户的当前会话过滤保持不受影响。新连接将使用新的过滤器进行过滤。
- en: As a special case, the name `%` represents the default account. The filter is
    used for connections from any user account that has no explicitly assigned filter.
  id: totrans-95
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 作为特例，名称`%`代表默认账户。该过滤器用于来自没有明确分配过滤器的任何用户账户的连接。
- en: 'Arguments:'
  id: totrans-96
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 参数：
- en: '*`user_name`*: The user account name as a string in `*`user_name`*@*`host_name`*`
    format, or `%` to represent the default account.'
  id: totrans-97
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*`user_name`*：用户账户名称，以`*`user_name`*@*`host_name`*`格式的字符串表示，或者使用`%`表示默认账户。'
- en: '*`filter_name`*: A string that specifies the filter name.'
  id: totrans-98
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*`filter_name`*：指定过滤器名称的字符串。'
- en: 'Return value:'
  id: totrans-99
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 返回值：
- en: 'A string that indicates whether the operation succeeded. `OK` indicates success.
    `ERROR: *`message`*` indicates failure.'
  id: totrans-100
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '一个指示操作是否成功的字符串。`OK`表示成功。`ERROR: *`message`*`表示失败。'
- en: 'Example:'
  id: totrans-101
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 示例：
- en: '[PRE7]'
  id: totrans-102
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE7]'
- en: '[`audit_log_read([*`arg`*])`](audit-log-reference.html#function_audit-log-read)'
  id: totrans-103
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`audit_log_read([*`arg`*])`](audit-log-reference.html#function_audit-log-read)'
- en: Reads the audit log and returns a [`JSON`](json.html "13.5 The JSON Data Type")
    string result. If the audit log format is not [`JSON`](json.html "13.5 The JSON
    Data Type"), an error occurs.
  id: totrans-104
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 读取审计日志并返回一个[`JSON`](json.html "13.5 JSON 数据类型") 字符串结果。如果审计日志格式不是[`JSON`](json.html
    "13.5 JSON 数据类型")，则会出错。
- en: With no argument or a [`JSON`](json.html "13.5 The JSON Data Type") hash argument,
    [`audit_log_read()`](audit-log-reference.html#function_audit-log-read) reads events
    from the audit log and returns a [`JSON`](json.html "13.5 The JSON Data Type")
    string containing an array of audit events. Items in the hash argument influence
    how reading occurs, as described later. Each element in the returned array is
    an event represented as a [`JSON`](json.html "13.5 The JSON Data Type") hash,
    with the exception that the last element may be a [`JSON`](json.html "13.5 The
    JSON Data Type") `null` value to indicate no following events are available to
    read.
  id: totrans-105
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 没有参数或者一个[`JSON`](json.html "13.5 JSON 数据类型") 哈希参数时，[`audit_log_read()`](audit-log-reference.html#function_audit-log-read)
    从审计日志中读取事件，并返回一个包含审计事件数组的[`JSON`](json.html "13.5 JSON 数据类型") 字符串。哈希参数中的项会影响读取过程，稍后会描述。返回数组中的每个元素都是一个以[`JSON`](json.html
    "13.5 JSON 数据类型") 哈希表示的事件，除了最后一个元素可能是一个[`JSON`](json.html "13.5 JSON 数据类型") `null`
    值，表示没有更多事件可供读取。
- en: With an argument consisting of a [`JSON`](json.html "13.5 The JSON Data Type")
    `null` value, [`audit_log_read()`](audit-log-reference.html#function_audit-log-read)
    closes the current read sequence.
  id: totrans-106
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 使用由[`JSON`](json.html "13.5 JSON 数据类型") `null` 值组成的参数时，[`audit_log_read()`](audit-log-reference.html#function_audit-log-read)
    将关闭当前读取序列。
- en: For additional details about the audit log-reading process, see [Section 8.4.5.6,
    “Reading Audit Log Files”](audit-log-file-reading.html "8.4.5.6 Reading Audit
    Log Files").
  id: totrans-107
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 有关审计日志读取过程的更多详细信息，请参见[第 8.4.5.6 节，“读取审计日志文件”](audit-log-file-reading.html "8.4.5.6 读取审计日志文件")。
- en: 'Arguments:'
  id: totrans-108
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 参数：
- en: To obtain a bookmark for the most recently written event, call [`audit_log_read_bookmark()`](audit-log-reference.html#function_audit-log-read-bookmark).
  id: totrans-109
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 要获取最近写入事件的书签，请调用[`audit_log_read_bookmark()`](audit-log-reference.html#function_audit-log-read-bookmark)。
- en: '*`arg`*: The argument is optional. If omitted, the function reads events from
    the current position. If present, the argument can be a [`JSON`](json.html "13.5 The
    JSON Data Type") `null` value to close the read sequence, or a [`JSON`](json.html
    "13.5 The JSON Data Type") hash. Within a hash argument, items are optional and
    control aspects of the read operation such as the position at which to begin reading
    or how many events to read. The following items are significant (other items are
    ignored):'
  id: totrans-110
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '*`arg`*: 参数是可选的。如果省略，函数将从当前位置读取事件。如果存在，参数可以是一个[`JSON`](json.html "13.5 JSON
    数据类型") `null` 值以关闭读取序列，或者一个[`JSON`](json.html "13.5 JSON 数据类型") 哈希。在哈希参数中，项是可选的，并控制读取操作的方面，例如从哪个位置开始读取或者要读取多少事件。以下项是重要的（其他项将被忽略）：'
- en: '`start`: The position within the audit log of the first event to read. The
    position is given as a timestamp and the read starts from the first event that
    occurs on or after the timestamp value. The `start` item has this format, where
    *`value`* is a literal timestamp value:'
  id: totrans-111
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`start`: 审计日志中要读取的第一个事件的位置。位置以时间戳给出，并且从时间戳值之后发生的第一个事件开始读取。`start` 项的格式如下，其中*`value`*是一个字面时间戳值：'
- en: '[PRE8]'
  id: totrans-112
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE8]'
- en: The `start` item is permitted as of MySQL 8.0.22.
  id: totrans-113
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`start` 项自 MySQL 8.0.22 版本开始允许使用。'
- en: '`timestamp`, `id`: The position within the audit log of the first event to
    read. The `timestamp` and `id` items together comprise a bookmark that uniquely
    identify a particular event. If an [`audit_log_read()`](audit-log-reference.html#function_audit-log-read)
    argument includes either item, it must include both to completely specify a position
    or an error occurs.'
  id: totrans-114
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`timestamp`，`id`: 要读取的第一个事件在审计日志中的位置。`timestamp` 和 `id` 项一起构成一个书签，唯一标识特定事件。如果[`audit_log_read()`](audit-log-reference.html#function_audit-log-read)
    参数包含任一项，则必须同时包含两项才能完全指定位置，否则会出错。'
- en: '`max_array_length`: The maximum number of events to read from the log. If this
    item is omitted, the default is to read to the end of the log or until the read
    buffer is full, whichever comes first.'
  id: totrans-115
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`max_array_length`: 从日志中读取的最大事件数。如果省略此项，则默认读取到日志末尾或者直到读取缓冲区已满为止。'
- en: To specify a starting position to [`audit_log_read()`](audit-log-reference.html#function_audit-log-read),
    pass a hash argument that includes either a `start` item or a bookmark consisting
    of `timestamp` and `id` items. If a hash argument includes both a `start` item
    and a bookmark, an error occurs.
  id: totrans-116
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 要指定给[`audit_log_read()`](audit-log-reference.html#function_audit-log-read)的起始位置，传递一个包含`start`项或由`时间戳`和`id`项组成的书签的哈希参数。如果哈希参数同时包含`start`项和书签，则会出现错误。
- en: If a hash argument specifies no starting position, reading continues from the
    current position.
  id: totrans-117
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果哈希参数未指定起始位置，则从当前位置继续读取。
- en: If a timestamp value includes no time part, a time part of `00:00:00` is assumed.
  id: totrans-118
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果时间戳值不包含时间部分，则假定时间部分为`00:00:00`。
- en: 'Return value:'
  id: totrans-119
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 返回值：
- en: If the call succeeds, the return value is a [`JSON`](json.html "13.5 The JSON
    Data Type") string containing an array of audit events, or a [`JSON`](json.html
    "13.5 The JSON Data Type") `null` value if that was passed as the argument to
    close the read sequence. If the call fails, the return value is `NULL` and an
    error occurs.
  id: totrans-120
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果调用成功，返回值是包含审核事件数组的[`JSON`](json.html "13.5 JSON数据类型")字符串，或者如果将其作为参数传递以关闭读取序列，则返回[`JSON`](json.html
    "13.5 JSON数据类型") `null`值。如果调用失败，返回值为`NULL`，并出现错误。
- en: 'Example:'
  id: totrans-121
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 示例：
- en: '[PRE9]'
  id: totrans-122
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'Notes:'
  id: totrans-123
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意：
- en: Prior to MySQL 8.0.19, string return values are binary [`JSON`](json.html "13.5 The
    JSON Data Type") strings. For information about converting such values to nonbinary
    strings, see [Section 8.4.5.6, “Reading Audit Log Files”](audit-log-file-reading.html
    "8.4.5.6 Reading Audit Log Files").
  id: totrans-124
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在MySQL 8.0.19之前，字符串返回值是二进制的[`JSON`](json.html "13.5 JSON数据类型")字符串。有关将这些值转换为非二进制字符串的信息，请参见[第8.4.5.6节，“读取审计日志文件”](audit-log-file-reading.html
    "8.4.5.6 读取审计日志文件")。
- en: '[`audit_log_read_bookmark()`](audit-log-reference.html#function_audit-log-read-bookmark)'
  id: totrans-125
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`audit_log_read_bookmark()`](audit-log-reference.html#function_audit-log-read-bookmark)'
- en: Returns a [`JSON`](json.html "13.5 The JSON Data Type") string representing
    a bookmark for the most recently written audit log event. If the audit log format
    is not [`JSON`](json.html "13.5 The JSON Data Type"), an error occurs.
  id: totrans-126
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 返回一个表示最近写入的审计日志事件的[`JSON`](json.html "13.5 JSON数据类型")字符串书签。如果审计日志格式不是[`JSON`](json.html
    "13.5 JSON数据类型")，则会出现错误。
- en: The bookmark is a [`JSON`](json.html "13.5 The JSON Data Type") hash with `timestamp`
    and `id` items that uniquely identify the position of an event within the audit
    log. It is suitable for passing to [`audit_log_read()`](audit-log-reference.html#function_audit-log-read)
    to indicate to that function the position at which to begin reading.
  id: totrans-127
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 书签是一个包含`时间戳`和`id`项的[`JSON`](json.html "13.5 JSON数据类型")哈希，用于唯一标识审核日志中事件的位置。适合传递给[`audit_log_read()`](audit-log-reference.html#function_audit-log-read)以指示该函数开始读取的位置。
- en: For additional details about the audit log-reading process, see [Section 8.4.5.6,
    “Reading Audit Log Files”](audit-log-file-reading.html "8.4.5.6 Reading Audit
    Log Files").
  id: totrans-128
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 有关审计日志读取过程的更多详细信息，请参见[第8.4.5.6节，“读取审计日志文件”](audit-log-file-reading.html "8.4.5.6 读取审计日志文件")。
- en: 'Arguments:'
  id: totrans-129
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 参数：
- en: None.
  id: totrans-130
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 无。
- en: 'Return value:'
  id: totrans-131
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 返回值：
- en: A [`JSON`](json.html "13.5 The JSON Data Type") string containing a bookmark
    for success, or `NULL` and an error for failure.
  id: totrans-132
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 包含成功书签的[`JSON`](json.html "13.5 JSON数据类型")字符串，或包含失败的`NULL`和错误。
- en: 'Example:'
  id: totrans-133
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 示例：
- en: '[PRE10]'
  id: totrans-134
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'Notes:'
  id: totrans-135
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意：
- en: Prior to MySQL 8.0.19, string return values are binary [`JSON`](json.html "13.5 The
    JSON Data Type") strings. For information about converting such values to nonbinary
    strings, see [Section 8.4.5.6, “Reading Audit Log Files”](audit-log-file-reading.html
    "8.4.5.6 Reading Audit Log Files").
  id: totrans-136
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在MySQL 8.0.19之前，字符串返回值是二进制的[`JSON`](json.html "13.5 JSON数据类型")字符串。有关将这些值转换为非二进制字符串的信息，请参见[第8.4.5.6节，“读取审计日志文件”](audit-log-file-reading.html
    "8.4.5.6 读取审计日志文件")。
- en: '[`audit_log_rotate()`](audit-log-reference.html#function_audit-log-rotate)'
  id: totrans-137
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`audit_log_rotate()`](audit-log-reference.html#function_audit-log-rotate)'
- en: 'Arguments:'
  id: totrans-138
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 参数：
- en: None.
  id: totrans-139
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 无。
- en: 'Return value:'
  id: totrans-140
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 返回值：
- en: The renamed file name.
  id: totrans-141
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 重命名后的文件名。
- en: 'Example:'
  id: totrans-142
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 示例：
- en: '[PRE11]'
  id: totrans-143
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Using `audit_log_rotate()` requires the [`AUDIT_ADMIN`](privileges-provided.html#priv_audit-admin)
    privilege.
  id: totrans-144
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 使用`audit_log_rotate()`需要[`AUDIT_ADMIN`](privileges-provided.html#priv_audit-admin)权��。
- en: Audit Log Option and Variable Reference
  id: totrans-145
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 审计日志选项和变量参考
- en: '**Table 8.44 Audit Log Option and Variable Reference**'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: '**表 8.44 审计日志选项和变量参考**'
- en: '| Name | Cmd-Line | Option File | System Var | Status Var | Var Scope | Dynamic
    |'
  id: totrans-147
  prefs: []
  type: TYPE_TB
  zh: '| 名称 | 命令行 | 选项文件 | 系统变量 | 状态变量 | 变量范围 | 动态 |'
- en: '| [audit-log](audit-log-reference.html#option_mysqld_audit-log) | Yes | Yes
    |  |  |  |  |'
  id: totrans-148
  prefs: []
  type: TYPE_TB
  zh: '| [audit-log](audit-log-reference.html#option_mysqld_audit-log) | 是 | 是 |  |  |  |  |'
- en: '| [audit_log_buffer_size](audit-log-reference.html#sysvar_audit_log_buffer_size)
    | Yes | Yes | Yes |  | Global | No |'
  id: totrans-149
  prefs: []
  type: TYPE_TB
  zh: '| [审计日志缓冲区大小](audit-log-reference.html#sysvar_audit_log_buffer_size) | 是 |
    是 | 是 |  | 全局 | 否 |'
- en: '| [audit_log_compression](audit-log-reference.html#sysvar_audit_log_compression)
    | Yes | Yes | Yes |  | Global | No |'
  id: totrans-150
  prefs: []
  type: TYPE_TB
  zh: '| [审计日志压缩](audit-log-reference.html#sysvar_audit_log_compression) | 是 | 是 |
    是 |  | 全局 | 否 |'
- en: '| [audit_log_connection_policy](audit-log-reference.html#sysvar_audit_log_connection_policy)
    | Yes | Yes | Yes |  | Global | Yes |'
  id: totrans-151
  prefs: []
  type: TYPE_TB
  zh: '| [审计日志连接策略](audit-log-reference.html#sysvar_audit_log_connection_policy) |
    是 | 是 | 是 |  | 全局 | 是 |'
- en: '| [audit_log_current_session](audit-log-reference.html#sysvar_audit_log_current_session)
    |  |  | Yes |  | Both | No |'
  id: totrans-152
  prefs: []
  type: TYPE_TB
  zh: '| [当前审计日志会话](audit-log-reference.html#sysvar_audit_log_current_session) |  |  |
    是 |  | 两者 | 否 |'
- en: '| [Audit_log_current_size](audit-log-reference.html#statvar_Audit_log_current_size)
    |  |  |  | Yes | Global | No |'
  id: totrans-153
  prefs: []
  type: TYPE_TB
  zh: '| [审计日志当前大小](audit-log-reference.html#statvar_Audit_log_current_size) |  |  |  |
    是 | 全局 | 否 |'
- en: '| [audit_log_database](audit-log-reference.html#sysvar_audit_log_database)
    | Yes | Yes | Yes |  | Global | No |'
  id: totrans-154
  prefs: []
  type: TYPE_TB
  zh: '| [审计日志数据库](audit-log-reference.html#sysvar_audit_log_database) | 是 | 是 | 是
    |  | 全局 | 否 |'
- en: '| [audit_log_disable](audit-log-reference.html#sysvar_audit_log_disable) |
    Yes | Yes | Yes |  | Global | Yes |'
  id: totrans-155
  prefs: []
  type: TYPE_TB
  zh: '| [禁用审计日志](audit-log-reference.html#sysvar_audit_log_disable) | 是 | 是 | 是 |  |
    全局 | 是 |'
- en: '| [audit_log_encryption](audit-log-reference.html#sysvar_audit_log_encryption)
    | Yes | Yes | Yes |  | Global | No |'
  id: totrans-156
  prefs: []
  type: TYPE_TB
  zh: '| [审计日志加密](audit-log-reference.html#sysvar_audit_log_encryption) | 是 | 是 |
    是 |  | 全局 | 否 |'
- en: '| [Audit_log_event_max_drop_size](audit-log-reference.html#statvar_Audit_log_event_max_drop_size)
    |  |  |  | Yes | Global | No |'
  id: totrans-157
  prefs: []
  type: TYPE_TB
  zh: '| [审计日志事件最大丢弃大小](audit-log-reference.html#statvar_Audit_log_event_max_drop_size)
    |  |  |  | 是 | 全局 | 否 |'
- en: '| [Audit_log_events](audit-log-reference.html#statvar_Audit_log_events) |  |  |  |
    Yes | Global | No |'
  id: totrans-158
  prefs: []
  type: TYPE_TB
  zh: '| [审计日志事件](audit-log-reference.html#statvar_Audit_log_events) |  |  |  | 是
    | 全局 | 否 |'
- en: '| [Audit_log_events_filtered](audit-log-reference.html#statvar_Audit_log_events_filtered)
    |  |  |  | Yes | Global | No |'
  id: totrans-159
  prefs: []
  type: TYPE_TB
  zh: '| [已过滤审计日志事件](audit-log-reference.html#statvar_Audit_log_events_filtered) |  |  |  |
    是 | 全局 | 否 |'
- en: '| [Audit_log_events_lost](audit-log-reference.html#statvar_Audit_log_events_lost)
    |  |  |  | Yes | Global | No |'
  id: totrans-160
  prefs: []
  type: TYPE_TB
  zh: '| [已丢失审计日志事件](audit-log-reference.html#statvar_Audit_log_events_lost) |  |  |  |
    是 | 全局 | 否 |'
- en: '| [Audit_log_events_written](audit-log-reference.html#statvar_Audit_log_events_written)
    |  |  |  | Yes | Global | No |'
  id: totrans-161
  prefs: []
  type: TYPE_TB
  zh: '| [已写入审计日志事件](audit-log-reference.html#statvar_Audit_log_events_written) |  |  |  |
    是 | 全局 | 否 |'
- en: '| [audit_log_exclude_accounts](audit-log-reference.html#sysvar_audit_log_exclude_accounts)
    | Yes | Yes | Yes |  | Global | Yes |'
  id: totrans-162
  prefs: []
  type: TYPE_TB
  zh: '| [排除账户的审计日志](audit-log-reference.html#sysvar_audit_log_exclude_accounts) |
    是 | 是 | 是 |  | 全局 | 是 |'
- en: '| [audit_log_file](audit-log-reference.html#sysvar_audit_log_file) | Yes |
    Yes | Yes |  | Global | No |'
  id: totrans-163
  prefs: []
  type: TYPE_TB
  zh: '| [审计日志文件](audit-log-reference.html#sysvar_audit_log_file) | 是 | 是 | 是 |  |
    全局 | 否 |'
- en: '| [audit_log_filter_id](audit-log-reference.html#sysvar_audit_log_filter_id)
    |  |  | Yes |  | Both | No |'
  id: totrans-164
  prefs: []
  type: TYPE_TB
  zh: '| [审计日志过滤器ID](audit-log-reference.html#sysvar_audit_log_filter_id) |  |  |
    是 |  | 两者 | 否 |'
- en: '| [audit_log_flush](audit-log-reference.html#sysvar_audit_log_flush) |  |  |
    Yes |  | Global | Yes |'
  id: totrans-165
  prefs: []
  type: TYPE_TB
  zh: '| [审计日志刷新](audit-log-reference.html#sysvar_audit_log_flush) |  |  | 是 |  |
    全局 | 是 |'
- en: '| [audit_log_flush_interval_seconds](audit-log-reference.html#sysvar_audit_log_flush_interval_seconds)
    | Yes |  | Yes |  | Global | No |'
  id: totrans-166
  prefs: []
  type: TYPE_TB
  zh: '| [审计日志刷新间隔秒数](audit-log-reference.html#sysvar_audit_log_flush_interval_seconds)
    | 是 |  | 是 |  | 全局 | 否 |'
- en: '| [audit_log_format](audit-log-reference.html#sysvar_audit_log_format) | Yes
    | Yes | Yes |  | Global | No |'
  id: totrans-167
  prefs: []
  type: TYPE_TB
  zh: '| [审计日志格式](audit-log-reference.html#sysvar_audit_log_format) | 是 | 是 | 是 |  |
    全局 | 否 |'
- en: '| [audit_log_include_accounts](audit-log-reference.html#sysvar_audit_log_include_accounts)
    | Yes | Yes | Yes |  | Global | Yes |'
  id: totrans-168
  prefs: []
  type: TYPE_TB
  zh: '| [包含账户的审计日志](audit-log-reference.html#sysvar_audit_log_include_accounts) |
    是 | 是 | 是 |  | 全局 | 是 |'
- en: '| [audit_log_max_size](audit-log-reference.html#sysvar_audit_log_max_size)
    | Yes | Yes | Yes |  | Global | Yes |'
  id: totrans-169
  prefs: []
  type: TYPE_TB
  zh: '| [审计日志最大大小](audit-log-reference.html#sysvar_audit_log_max_size) | 是 | 是 |
    是 |  | 全局 | 是 |'
- en: '| [audit_log_password_history_keep_days](audit-log-reference.html#sysvar_audit_log_password_history_keep_days)
    | Yes | Yes | Yes |  | Global | Yes |'
  id: totrans-170
  prefs: []
  type: TYPE_TB
  zh: '| [审计日志密码历史保留天数](audit-log-reference.html#sysvar_audit_log_password_history_keep_days)
    | 是 | 是 | 是 |  | 全局 | 是 |'
- en: '| [audit_log_policy](audit-log-reference.html#sysvar_audit_log_policy) | Yes
    | Yes | Yes |  | Global | No |'
  id: totrans-171
  prefs: []
  type: TYPE_TB
  zh: '| [审计日志策略](audit-log-reference.html#sysvar_audit_log_policy) | 是 | 是 | 是 |  |
    全局 | �� |'
- en: '| [audit_log_prune_seconds](audit-log-reference.html#sysvar_audit_log_prune_seconds)
    | Yes | Yes | Yes |  | Global | Yes |'
  id: totrans-172
  prefs: []
  type: TYPE_TB
  zh: '| [审计日志修剪秒数](audit-log-reference.html#sysvar_audit_log_prune_seconds) | 是 |
    是 | 是 |  | 全局 | 是 |'
- en: '| [audit_log_read_buffer_size](audit-log-reference.html#sysvar_audit_log_read_buffer_size)
    | Yes | Yes | Yes |  | Varies | Varies |'
  id: totrans-173
  prefs: []
  type: TYPE_TB
  zh: '| [审计日志读取缓冲区大小](audit-log-reference.html#sysvar_audit_log_read_buffer_size)
    | 是 | 是 | 是 |  | 变化 | 变化 |'
- en: '| [audit_log_rotate_on_size](audit-log-reference.html#sysvar_audit_log_rotate_on_size)
    | Yes | Yes | Yes |  | Global | Yes |'
  id: totrans-174
  prefs: []
  type: TYPE_TB
  zh: '| [audit_log_rotate_on_size](audit-log-reference.html#sysvar_audit_log_rotate_on_size)
    | 是 | 是 | 是 |  | 全局 | 是 |'
- en: '| [audit_log_statement_policy](audit-log-reference.html#sysvar_audit_log_statement_policy)
    | Yes | Yes | Yes |  | Global | Yes |'
  id: totrans-175
  prefs: []
  type: TYPE_TB
  zh: '| [audit_log_statement_policy](audit-log-reference.html#sysvar_audit_log_statement_policy)
    | 是 | 是 | 是 |  | 全局 | 是 |'
- en: '| [audit_log_strategy](audit-log-reference.html#sysvar_audit_log_strategy)
    | Yes | Yes | Yes |  | Global | No |'
  id: totrans-176
  prefs: []
  type: TYPE_TB
  zh: '| [audit_log_strategy](audit-log-reference.html#sysvar_audit_log_strategy)
    | 是 | 是 | 是 |  | 全局 | 否 |'
- en: '| [Audit_log_total_size](audit-log-reference.html#statvar_Audit_log_total_size)
    |  |  |  | Yes | Global | No |'
  id: totrans-177
  prefs: []
  type: TYPE_TB
  zh: '| [Audit_log_total_size](audit-log-reference.html#statvar_Audit_log_total_size)
    |  |  |  | 是 | 全局 | 否 |'
- en: '| [Audit_log_write_waits](audit-log-reference.html#statvar_Audit_log_write_waits)
    |  |  |  | Yes | Global | No |'
  id: totrans-178
  prefs: []
  type: TYPE_TB
  zh: '| [Audit_log_write_waits](audit-log-reference.html#statvar_Audit_log_write_waits)
    |  |  |  | 是 | 全局 | 否 |'
- en: '| Name | Cmd-Line | Option File | System Var | Status Var | Var Scope | Dynamic
    |'
  id: totrans-179
  prefs: []
  type: TYPE_TB
  zh: '| 名称 | 命令行 | 选项文件 | 系统变量 | 状态变量 | 变量范围 | 动态 |'
- en: Audit Log Options and Variables
  id: totrans-180
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 审计日志选项和变量
- en: This section describes the command options and system variables that configure
    operation of MySQL Enterprise Audit. If values specified at startup time are incorrect,
    the `audit_log` plugin may fail to initialize properly and the server does not
    load it. In this case, the server may also produce error messages for other audit
    log settings because it does not recognize them.
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 本节描述了配置 MySQL Enterprise Audit 操作的命令选项和系统变量。如果在启动时指定的值不正确，`audit_log` 插件可能无法正确初始化，服务器也不会加载它。在这种情况下，服务器可能还会因为无法识别其他审计日志设置而产生错误消息。
- en: 'To configure activation of the audit log plugin, use this option:'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 要配置审计日志插件的激活，请使用此选项：
- en: '[`--audit-log[=*`value`*]`](audit-log-reference.html#option_mysqld_audit-log)'
  id: totrans-183
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--audit-log[=*`value`*]`](audit-log-reference.html#option_mysqld_audit-log)'
- en: '| Command-Line Format | `--audit-log[=value]` |'
  id: totrans-184
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--audit-log[=value]` |'
- en: '| Type | Enumeration |'
  id: totrans-185
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 枚举 |'
- en: '| Default Value | `ON` |'
  id: totrans-186
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `ON` |'
- en: '| Valid Values | `ON``OFF``FORCE``FORCE_PLUS_PERMANENT` |'
  id: totrans-187
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 有效值 | `ON``OFF``FORCE``FORCE_PLUS_PERMANENT` |'
- en: This option controls how the server loads the `audit_log` plugin at startup.
    It is available only if the plugin has been previously registered with [`INSTALL
    PLUGIN`](install-plugin.html "15.7.4.4 INSTALL PLUGIN Statement") or is loaded
    with [`--plugin-load`](server-options.html#option_mysqld_plugin-load) or [`--plugin-load-add`](server-options.html#option_mysqld_plugin-load-add).
    See [Section 8.4.5.2, “Installing or Uninstalling MySQL Enterprise Audit”](audit-log-installation.html
    "8.4.5.2 Installing or Uninstalling MySQL Enterprise Audit").
  id: totrans-188
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此选项控制服务器在启动时如何加载 `audit_log` 插件。只有在插件之前已经使用 [`INSTALL PLUGIN`](install-plugin.html
    "15.7.4.4 INSTALL PLUGIN Statement") 注册过或者使用 [`--plugin-load`](server-options.html#option_mysqld_plugin-load)
    或 [`--plugin-load-add`](server-options.html#option_mysqld_plugin-load-add) 加载过插件时才可用。参见
    [Section 8.4.5.2, “Installing or Uninstalling MySQL Enterprise Audit”](audit-log-installation.html
    "8.4.5.2 Installing or Uninstalling MySQL Enterprise Audit")。
- en: The option value should be one of those available for plugin-loading options,
    as described in [Section 7.6.1, “Installing and Uninstalling Plugins”](plugin-loading.html
    "7.6.1 Installing and Uninstalling Plugins"). For example, [`--audit-log=FORCE_PLUS_PERMANENT`](audit-log-reference.html#option_mysqld_audit-log)
    tells the server to load the plugin and prevent it from being removed while the
    server is running.
  id: totrans-189
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 选项值应该是插件加载选项中可用的值之一，如 [Section 7.6.1, “Installing and Uninstalling Plugins”](plugin-loading.html
    "7.6.1 Installing and Uninstalling Plugins") 中所述。例如，[`--audit-log=FORCE_PLUS_PERMANENT`](audit-log-reference.html#option_mysqld_audit-log)
    告诉服务器加载插件并防止在服务器运行时被移除。
- en: 'If the audit log plugin is enabled, it exposes several system variables that
    permit control over logging:'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 如果启用了审计日志插件，它会暴露几个系统变量，允许对日志进行控制：
- en: '[PRE12]'
  id: totrans-191
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: You can set any of these variables at server startup, and some of them at runtime.
    Those that are available only for legacy mode audit log filtering are so noted.
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在服务器启动时设置任何这些变量，有些变量可以在运行时设置。只能用于传统模式审计日志过滤的变量会有相应标注。
- en: '[`audit_log_buffer_size`](audit-log-reference.html#sysvar_audit_log_buffer_size)'
  id: totrans-193
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`audit_log_buffer_size`](audit-log-reference.html#sysvar_audit_log_buffer_size)'
- en: '| Command-Line Format | `--audit-log-buffer-size=#` |'
  id: totrans-194
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--audit-log-buffer-size=#` |'
- en: '| System Variable | `[audit_log_buffer_size](audit-log-reference.html#sysvar_audit_log_buffer_size)`
    |'
  id: totrans-195
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 系统变量 | `[audit_log_buffer_size](audit-log-reference.html#sysvar_audit_log_buffer_size)`
    |'
- en: '| Scope | Global |'
  id: totrans-196
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 范围 | 全局 |'
- en: '| Dynamic | No |'
  id: totrans-197
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 动态 | 否 |'
- en: '| [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "Variable-Setting
    Hint Syntax") Hint Applies | No |'
  id: totrans-198
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "Variable-Setting
    Hint Syntax") 提示适用 | 否 |'
- en: '| Type | Integer |'
  id: totrans-199
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 整数 |'
- en: '| Default Value | `1048576` |'
  id: totrans-200
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `1048576` |'
- en: '| Minimum Value | `4096` |'
  id: totrans-201
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 最小值 | `4096` |'
- en: '| Maximum Value (64-bit platforms) | `18446744073709547520` |'
  id: totrans-202
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 最大值（64位平台） | `18446744073709547520` |'
- en: '| Maximum Value (32-bit platforms) | `4294967295` |'
  id: totrans-203
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 最大值（32位平台） | `4294967295` |'
- en: '| Unit | bytes |'
  id: totrans-204
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 单位 | 字节 |'
- en: '| [Block Size](server-system-variables.html#system-variables-block-size "Note")
    | `4096` |'
  id: totrans-205
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| [块大小](server-system-variables.html#system-variables-block-size "注意") | `4096`
    |'
- en: When the audit log plugin writes events to the log asynchronously, it uses a
    buffer to store event contents prior to writing them. This variable controls the
    size of that buffer, in bytes. The server adjusts the value to a multiple of 4096\.
    The plugin uses a single buffer, which it allocates when it initializes and removes
    when it terminates. The plugin allocates this buffer only if logging is asynchronous.
  id: totrans-206
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 当审计日志插件异步写入事件到日志时，它使用一个缓冲区来存储事件内容以便写入。此变量控制该缓冲区的大小，以字节为单位。服务器将该值调整为4096的倍数。插件使用一个缓冲区，在初始化时分配，终止时删除。插件仅在日志记录是异步的情况下分配此缓冲区。
- en: '[`audit_log_compression`](audit-log-reference.html#sysvar_audit_log_compression)'
  id: totrans-207
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`audit_log_compression`](audit-log-reference.html#sysvar_audit_log_compression)'
- en: '| Command-Line Format | `--audit-log-compression=value` |'
  id: totrans-208
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--audit-log-compression=value` |'
- en: '| System Variable | `[audit_log_compression](audit-log-reference.html#sysvar_audit_log_compression)`
    |'
  id: totrans-209
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 系统变量 | `[audit_log_compression](audit-log-reference.html#sysvar_audit_log_compression)`
    |'
- en: '| Scope | Global |'
  id: totrans-210
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 作用范围 | 全局 |'
- en: '| Dynamic | No |'
  id: totrans-211
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 动态 | 否 |'
- en: '| [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "Variable-Setting
    Hint Syntax") Hint Applies | No |'
  id: totrans-212
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "变量设置提示语法") 提示适用
    | 否 |'
- en: '| Type | Enumeration |'
  id: totrans-213
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 枚举 |'
- en: '| Default Value | `NONE` |'
  id: totrans-214
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `NONE` |'
- en: '| Valid Values | `NONE``GZIP` |'
  id: totrans-215
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 有效值 | `NONE``GZIP` |'
- en: The type of compression for the audit log file. Permitted values are `NONE`
    (no compression; the default) and `GZIP` (GNU Zip compression). For more information,
    see [Compressing Audit Log Files](audit-log-logging-configuration.html#audit-log-file-compression
    "Compressing Audit Log Files").
  id: totrans-216
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '审计日志文件的压缩类型。允许的值为`NONE`（无压缩；默认值）���`GZIP`（GNU Zip压缩）。有关更多信息，请参见[压缩审计日志文件](audit-log-logging-configuration.html#audit-log-file-compression
    "压缩审计日志文件")。 '
- en: '[`audit_log_connection_policy`](audit-log-reference.html#sysvar_audit_log_connection_policy)'
  id: totrans-217
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`audit_log_connection_policy`](audit-log-reference.html#sysvar_audit_log_connection_policy)'
- en: '| Command-Line Format | `--audit-log-connection-policy=value` |'
  id: totrans-218
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--audit-log-connection-policy=value` |'
- en: '| Deprecated | 8.0.34 |'
  id: totrans-219
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 已弃用 | 8.0.34 |'
- en: '| System Variable | `[audit_log_connection_policy](audit-log-reference.html#sysvar_audit_log_connection_policy)`
    |'
  id: totrans-220
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 系统变量 | `[audit_log_connection_policy](audit-log-reference.html#sysvar_audit_log_connection_policy)`
    |'
- en: '| Scope | Global |'
  id: totrans-221
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 作用范围 | 全局 |'
- en: '| Dynamic | Yes |'
  id: totrans-222
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 动态 | 是 |'
- en: '| [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "Variable-Setting
    Hint Syntax") Hint Applies | No |'
  id: totrans-223
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "变量设置提示语法") 提示适用
    | 否 |'
- en: '| Type | Enumeration |'
  id: totrans-224
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 枚举 |'
- en: '| Default Value | `ALL` |'
  id: totrans-225
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `ALL` |'
- en: '| Valid Values | `ALL``ERRORS``NONE` |'
  id: totrans-226
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 有效值 | `ALL``ERRORS``NONE` |'
- en: Note
  id: totrans-227
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意
- en: This deprecated variable applies only to legacy mode audit log filtering (see
    [Section 8.4.5.10, “Legacy Mode Audit Log Filtering”](audit-log-legacy-filtering.html
    "8.4.5.10 Legacy Mode Audit Log Filtering")).
  id: totrans-228
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此已弃用的变量仅适用于传统模式审计日志过滤（参见[第8.4.5.10节，“传统模式审计日志过滤”](audit-log-legacy-filtering.html
    "8.4.5.10 传统模式审计日志过滤")）。
- en: The policy controlling how the audit log plugin writes connection events to
    its log file. The following table shows the permitted values.
  id: totrans-229
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 控制审计日志插件将连接事件写入其日志文件的策略。以下表格显示了允许的值。
- en: '| Value | Description |'
  id: totrans-230
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 值 | 描述 |'
- en: '| `ALL` | Log all connection events |'
  id: totrans-231
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| `ALL` | 记录所有连接事件 |'
- en: '| `ERRORS` | Log only failed connection events |'
  id: totrans-232
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| `ERRORS` | 仅记录连接失败事件 |'
- en: '| `NONE` | Do not log connection events |'
  id: totrans-233
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| `NONE` | 不记录连接事件 |'
- en: Note
  id: totrans-234
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意
- en: At server startup, any explicit value given for [`audit_log_connection_policy`](audit-log-reference.html#sysvar_audit_log_connection_policy)
    may be overridden if [`audit_log_policy`](audit-log-reference.html#sysvar_audit_log_policy)
    is also specified, as described in [Section 8.4.5.5, “Configuring Audit Logging
    Characteristics”](audit-log-logging-configuration.html "8.4.5.5 Configuring Audit
    Logging Characteristics").
  id: totrans-235
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在服务器启动时，如果还指定了[`audit_log_policy`](audit-log-reference.html#sysvar_audit_log_policy)，则可能会覆盖对[`audit_log_connection_policy`](audit-log-reference.html#sysvar_audit_log_connection_policy)的任何显式值，如[第8.4.5.5节，“配置审计日志特性”](audit-log-logging-configuration.html
    "8.4.5.5 配置审计日志特性")中所述。
- en: '[`audit_log_current_session`](audit-log-reference.html#sysvar_audit_log_current_session)'
  id: totrans-236
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`audit_log_current_session`](audit-log-reference.html#sysvar_audit_log_current_session)'
- en: '| System Variable | `[audit_log_current_session](audit-log-reference.html#sysvar_audit_log_current_session)`
    |'
  id: totrans-237
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 系统变量 | `[audit_log_current_session](audit-log-reference.html#sysvar_audit_log_current_session)`
    |'
- en: '| Scope | Global, Session |'
  id: totrans-238
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 作用范围 | 全局，会话 |'
- en: '| Dynamic | No |'
  id: totrans-239
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 动态 | 否 |'
- en: '| [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "Variable-Setting
    Hint Syntax") Hint Applies | No |'
  id: totrans-240
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "Variable-Setting
    Hint Syntax") Hint Applies | 否 |'
- en: '| Type | Boolean |'
  id: totrans-241
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 布尔值 |'
- en: '| Default Value | `depends on filtering policy` |'
  id: totrans-242
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `取决于过滤策略` |'
- en: Whether audit logging is enabled for the current session. The session value
    of this variable is read only. It is set when the session begins based on the
    values of the [`audit_log_include_accounts`](audit-log-reference.html#sysvar_audit_log_include_accounts)
    and [`audit_log_exclude_accounts`](audit-log-reference.html#sysvar_audit_log_exclude_accounts)
    system variables. The audit log plugin uses the session value to determine whether
    to audit events for the session. (There is a global value, but the plugin does
    not use it.)
  id: totrans-243
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 当前会话是否启用审计日志记录。此变量的会话值只读。它在会话开始时根据[`audit_log_include_accounts`](audit-log-reference.html#sysvar_audit_log_include_accounts)和[`audit_log_exclude_accounts`](audit-log-reference.html#sysvar_audit_log_exclude_accounts)系统变量的值设置。审计日志插件使用会话值来确定是否为会话审计事件。（有一个全局值，但插件不使用它。）
- en: '[`audit_log_database`](audit-log-reference.html#sysvar_audit_log_database)'
  id: totrans-244
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`audit_log_database`](audit-log-reference.html#sysvar_audit_log_database)'
- en: '| Command-Line Format | `--audit-log-database=value` |'
  id: totrans-245
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--audit-log-database=value` |'
- en: '| Introduced | 8.0.33 |'
  id: totrans-246
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 引入版本 | 8.0.33 |'
- en: '| System Variable | `[audit_log_database](audit-log-reference.html#sysvar_audit_log_database)`
    |'
  id: totrans-247
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 系统变量 | `[audit_log_database](audit-log-reference.html#sysvar_audit_log_database)`
    |'
- en: '| Scope | Global |'
  id: totrans-248
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 作用范围 | 全局 |'
- en: '| Dynamic | No |'
  id: totrans-249
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 动态 | 否 |'
- en: '| [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "Variable-Setting
    Hint Syntax") Hint Applies | No |'
  id: totrans-250
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "Variable-Setting
    Hint Syntax") Hint Applies | 否 |'
- en: '| Type | String |'
  id: totrans-251
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 字符串 |'
- en: '| Default Value | `mysql` |'
  id: totrans-252
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `mysql` |'
- en: Specifies which database the `audit_log` plugin uses to find its tables. This
    variable is read only. For more information, see [Section 8.4.5.2, “Installing
    or Uninstalling MySQL Enterprise Audit”](audit-log-installation.html "8.4.5.2 Installing
    or Uninstalling MySQL Enterprise Audit")).
  id: totrans-253
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 指定`audit_log`插件用于查找其表的数据库。此变量只读。更多信息，请参见[第8.4.5.2节，“安装或卸载 MySQL Enterprise Audit”](audit-log-installation.html
    "8.4.5.2 安装或卸载 MySQL Enterprise Audit")。
- en: '[`audit_log_disable`](audit-log-reference.html#sysvar_audit_log_disable)'
  id: totrans-254
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`audit_log_disable`](audit-log-reference.html#sysvar_audit_log_disable)'
- en: '| Command-Line Format | `--audit-log-disable[={OFF&#124;ON}]` |'
  id: totrans-255
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--audit-log-disable[={OFF&#124;ON}]` |'
- en: '| Introduced | 8.0.28 |'
  id: totrans-256
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 引入版本 | 8.0.28 |'
- en: '| System Variable | `[audit_log_disable](audit-log-reference.html#sysvar_audit_log_disable)`
    |'
  id: totrans-257
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 系统变量 | `[audit_log_disable](audit-log-reference.html#sysvar_audit_log_disable)`
    |'
- en: '| Scope | Global |'
  id: totrans-258
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 作用范围 | 全局 |'
- en: '| Dynamic | Yes |'
  id: totrans-259
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 动态 | 是 |'
- en: '| [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "Variable-Setting
    Hint Syntax") Hint Applies | No |'
  id: totrans-260
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "Variable-Setting
    Hint Syntax") Hint Applies | 否 |'
- en: '| Type | Boolean |'
  id: totrans-261
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 布尔值 |'
- en: '| Default Value | `OFF` |'
  id: totrans-262
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `OFF` |'
- en: Permits disabling audit logging for all connecting and connected sessions. In
    addition to the [`SYSTEM_VARIABLES_ADMIN`](privileges-provided.html#priv_system-variables-admin)
    privilege, disabling audit logging requires the [`AUDIT_ADMIN`](privileges-provided.html#priv_audit-admin)
    privilege. See [Section 8.4.5.9, “Disabling Audit Logging”](audit-log-disabling.html
    "8.4.5.9 Disabling Audit Logging").
  id: totrans-263
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 允许禁用所有连接和已连接会话的审计日志记录。除了[`SYSTEM_VARIABLES_ADMIN`](privileges-provided.html#priv_system-variables-admin)权限外，禁用审计日志记录还需要[`AUDIT_ADMIN`](privileges-provided.html#priv_audit-admin)权限。请参见[第8.4.5.9节，“禁用审计日志记录”](audit-log-disabling.html
    "8.4.5.9 禁用审计日志记录")。
- en: '[`audit_log_encryption`](audit-log-reference.html#sysvar_audit_log_encryption)'
  id: totrans-264
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`audit_log_encryption`](audit-log-reference.html#sysvar_audit_log_encryption)'
- en: '| Command-Line Format | `--audit-log-encryption=value` |'
  id: totrans-265
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--audit-log-encryption=value` |'
- en: '| System Variable | `[audit_log_encryption](audit-log-reference.html#sysvar_audit_log_encryption)`
    |'
  id: totrans-266
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 系统变量 | `[audit_log_encryption](audit-log-reference.html#sysvar_audit_log_encryption)`
    |'
- en: '| Scope | Global |'
  id: totrans-267
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 作用范围 | 全局 |'
- en: '| Dynamic | No |'
  id: totrans-268
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 动态 | 否 |'
- en: '| [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "Variable-Setting
    Hint Syntax") Hint Applies | No |'
  id: totrans-269
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "Variable-Setting
    Hint Syntax") Hint Applies | 否 |'
- en: '| Type | Enumeration |'
  id: totrans-270
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 枚举 |'
- en: '| Default Value | `NONE` |'
  id: totrans-271
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `NONE` |'
- en: '| Valid Values | `NONE``AES` |'
  id: totrans-272
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 有效值 | `NONE``AES` |'
- en: The type of encryption for the audit log file. Permitted values are `NONE` (no
    encryption; the default) and `AES` (AES-256-CBC cipher encryption). For more information,
    see [Encrypting Audit Log Files](audit-log-logging-configuration.html#audit-log-file-encryption
    "Encrypting Audit Log Files").
  id: totrans-273
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 审计日志文件的加密类型。允许的值为`NONE`（无加密；默认值）和`AES`（AES-256-CBC密码加密）。有关更多信息，请参见[加密审计日志文件](audit-log-logging-configuration.html#audit-log-file-encryption
    "加密审计日志文件")。
- en: '[`audit_log_exclude_accounts`](audit-log-reference.html#sysvar_audit_log_exclude_accounts)'
  id: totrans-274
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`audit_log_exclude_accounts`](audit-log-reference.html#sysvar_audit_log_exclude_accounts)'
- en: '| Command-Line Format | `--audit-log-exclude-accounts=value` |'
  id: totrans-275
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--audit-log-exclude-accounts=value` |'
- en: '| Deprecated | 8.0.34 |'
  id: totrans-276
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 已弃用 | 8.0.34 |'
- en: '| System Variable | `[audit_log_exclude_accounts](audit-log-reference.html#sysvar_audit_log_exclude_accounts)`
    |'
  id: totrans-277
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 系统变量 | `[audit_log_exclude_accounts](audit-log-reference.html#sysvar_audit_log_exclude_accounts)`
    |'
- en: '| Scope | Global |'
  id: totrans-278
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 范围 | 全局 |'
- en: '| Dynamic | Yes |'
  id: totrans-279
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 动态 | 是 |'
- en: '| [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "Variable-Setting
    Hint Syntax") Hint Applies | No |'
  id: totrans-280
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "变量设置提示语法") 提示适用
    | 否 |'
- en: '| Type | String |'
  id: totrans-281
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 字符串 |'
- en: '| Default Value | `NULL` |'
  id: totrans-282
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `NULL` |'
- en: Note
  id: totrans-283
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意
- en: This deprecated variable applies only to legacy mode audit log filtering (see
    [Section 8.4.5.10, “Legacy Mode Audit Log Filtering”](audit-log-legacy-filtering.html
    "8.4.5.10 Legacy Mode Audit Log Filtering")).
  id: totrans-284
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此已弃用变量仅适用于传统模式审计日志过滤（请参见[第8.4.5.10节，“传统模式审计日志过滤”](audit-log-legacy-filtering.html
    "8.4.5.10 传统模式审计日志过滤")）。
- en: The accounts for which events should not be logged. The value should be `NULL`
    or a string containing a list of one or more comma-separated account names. For
    more information, see [Section 8.4.5.7, “Audit Log Filtering”](audit-log-filtering.html
    "8.4.5.7 Audit Log Filtering").
  id: totrans-285
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 不应记录事件的帐户。该值应为`NULL`或包含一个或多个逗号分隔帐户名称列表的字符串。有关更多信息，请参见[第8.4.5.7节，“审计日志过滤”](audit-log-filtering.html
    "8.4.5.7 审计日志过滤")。
- en: Modifications to [`audit_log_exclude_accounts`](audit-log-reference.html#sysvar_audit_log_exclude_accounts)
    affect only connections created subsequent to the modification, not existing connections.
  id: totrans-286
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对[`audit_log_exclude_accounts`](audit-log-reference.html#sysvar_audit_log_exclude_accounts)的修改仅影响在修改后创建的连接，而不影响现有连接。
- en: '[`audit_log_file`](audit-log-reference.html#sysvar_audit_log_file)'
  id: totrans-287
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`audit_log_file`](audit-log-reference.html#sysvar_audit_log_file)'
- en: '| Command-Line Format | `--audit-log-file=file_name` |'
  id: totrans-288
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--audit-log-file=file_name` |'
- en: '| System Variable | `[audit_log_file](audit-log-reference.html#sysvar_audit_log_file)`
    |'
  id: totrans-289
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 系统变量 | `[audit_log_file](audit-log-reference.html#sysvar_audit_log_file)`
    |'
- en: '| Scope | Global |'
  id: totrans-290
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 范围 | 全�� |'
- en: '| Dynamic | No |'
  id: totrans-291
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 动态 | 否 |'
- en: '| [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "Variable-Setting
    Hint Syntax") Hint Applies | No |'
  id: totrans-292
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "变量设置提示语法") 提示适用
    | 否 |'
- en: '| Type | File name |'
  id: totrans-293
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 文件名 |'
- en: '| Default Value | `audit.log` |'
  id: totrans-294
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `audit.log` |'
- en: The base name and suffix of the file to which the audit log plugin writes events.
    The default value is `audit.log`, regardless of logging format. To have the name
    suffix correspond to the format, set the name explicitly, choosing a different
    suffix (for example, `audit.xml` for XML format, `audit.json` for JSON format).
  id: totrans-295
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 审计日志插件写入事件的文件的基本名称和后缀。默认值为`audit.log`，无论日志格式如何。要使名称后缀与格式对应，必须显式设置名称，选择不同的后缀（例如，对于XML格式为`audit.xml`，对于JSON格式为`audit.json`）。
- en: If the value of [`audit_log_file`](audit-log-reference.html#sysvar_audit_log_file)
    is a relative path name, the plugin interprets it relative to the data directory.
    If the value is a full path name, the plugin uses the value as is. A full path
    name may be useful if it is desirable to locate audit files on a separate file
    system or directory. For security reasons, write the audit log file to a directory
    accessible only to the MySQL server and to users with a legitimate reason to view
    the log.
  id: totrans-296
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果[`audit_log_file`](audit-log-reference.html#sysvar_audit_log_file)的值是相对路径名，则插件将其解释为相对于数据目录的路径。如果该值是完整路径名，则插件将直接使用该值。如果希望将审计文件定位到单独的文件系统或目录上，完整路径名可能会很有用。出于安全原因，将审计日志文件写入仅对MySQL服务器和有合理查看日志原因的用户可访问的目录。
- en: For details about how the audit log plugin interprets the [`audit_log_file`](audit-log-reference.html#sysvar_audit_log_file)
    value and the rules for file renaming that occurs at plugin initialization and
    termination, see [Naming Conventions for Audit Log Files](audit-log-logging-configuration.html#audit-log-file-name
    "Naming Conventions for Audit Log Files").
  id: totrans-297
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 有关审计日志插件如何解释[`audit_log_file`](audit-log-reference.html#sysvar_audit_log_file)值以及插件初始化和终止时发生的文件重命名规则的详细信息，请参见[审计日志文件命名约定](audit-log-logging-configuration.html#audit-log-file-name
    "审计日志文件命名约定")。
- en: The audit log plugin uses the directory containing the audit log file (determined
    from the [`audit_log_file`](audit-log-reference.html#sysvar_audit_log_file) value)
    as the location to search for readable audit log files. From these log files and
    the current file, the plugin constructs a list of the ones that are subject to
    use with the audit log bookmarking and reading functions. See [Section 8.4.5.6,
    “Reading Audit Log Files”](audit-log-file-reading.html "8.4.5.6 Reading Audit
    Log Files").
  id: totrans-298
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 审计日志插件使用包含审计日志文件的目录（从[`audit_log_file`](audit-log-reference.html#sysvar_audit_log_file)的值确定）作为可读取审计日志文件的位置。从这些日志文件和当前文件中，插件构建了一个列表，其中包含适用于审计日志标记和读取功能的文件。参见[第8.4.5.6节，“读取审计日志文件”](audit-log-file-reading.html
    "8.4.5.6 读取审计日志文件")。
- en: '[`audit_log_filter_id`](audit-log-reference.html#sysvar_audit_log_filter_id)'
  id: totrans-299
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`audit_log_filter_id`](audit-log-reference.html#sysvar_audit_log_filter_id)'
- en: '| System Variable | `[audit_log_filter_id](audit-log-reference.html#sysvar_audit_log_filter_id)`
    |'
  id: totrans-300
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 系统变量 | `[audit_log_filter_id](audit-log-reference.html#sysvar_audit_log_filter_id)`
    |'
- en: '| Scope | Global, Session |'
  id: totrans-301
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 作用域 | 全局，会话 |'
- en: '| Dynamic | No |'
  id: totrans-302
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 动态 | 否 |'
- en: '| [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "Variable-Setting
    Hint Syntax") Hint Applies | No |'
  id: totrans-303
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "变量设置提示语法")提示适用
    | 否 |'
- en: '| Type | Integer |'
  id: totrans-304
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 整数 |'
- en: '| Default Value | `1` |'
  id: totrans-305
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `1` |'
- en: '| Minimum Value | `0` |'
  id: totrans-306
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 最小值 | `0` |'
- en: '| Maximum Value | `4294967295` |'
  id: totrans-307
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 最大值 | `4294967295` |'
- en: The session value of this variable indicates the internally maintained ID of
    the audit filter for the current session. A value of 0 means that the session
    has no filter assigned.
  id: totrans-308
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此变量的会话值表示当前会话的内部维护的审计过滤器的ID。值为0表示会话未分配任何过滤器。
- en: '[`audit_log_flush`](audit-log-reference.html#sysvar_audit_log_flush)'
  id: totrans-309
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`audit_log_flush`](audit-log-reference.html#sysvar_audit_log_flush)'
- en: '| System Variable | `[audit_log_flush](audit-log-reference.html#sysvar_audit_log_flush)`
    |'
  id: totrans-310
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 系统变量 | `[audit_log_flush](audit-log-reference.html#sysvar_audit_log_flush)`
    |'
- en: '| Scope | Global |'
  id: totrans-311
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 作用域 | 全局 |'
- en: '| Dynamic | Yes |'
  id: totrans-312
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 动态 | 是 |'
- en: '| [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "Variable-Setting
    Hint Syntax") Hint Applies | No |'
  id: totrans-313
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "变量设置提示语法")提示适用
    | 否 |'
- en: '| Type | Boolean |'
  id: totrans-314
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 布尔值 |'
- en: '| Default Value | `OFF` |'
  id: totrans-315
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `OFF` |'
- en: Note
  id: totrans-316
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意
- en: The [`audit_log_flush`](audit-log-reference.html#sysvar_audit_log_flush) variable
    is deprecated as of MySQL 8.0.31; expect support for it to be removed in a future
    version of MySQL. It is superseded by the `audit_log_rotate()` function.
  id: totrans-317
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[`audit_log_flush`](audit-log-reference.html#sysvar_audit_log_flush)变量在MySQL
    8.0.31中已被弃用；预计在未来的MySQL版本中将不再支持它。它已被`audit_log_rotate()`函数取代。'
- en: If [`audit_log_rotate_on_size`](audit-log-reference.html#sysvar_audit_log_rotate_on_size)
    is 0, automatic audit log file rotation is disabled and rotation occurs only when
    performed manually. In that case, enabling [`audit_log_flush`](audit-log-reference.html#sysvar_audit_log_flush)
    by setting it to 1 or `ON` causes the audit log plugin to close and reopen its
    log file to flush it. (The variable value remains `OFF` so that you need not disable
    it explicitly before enabling it again to perform another flush.) For more information,
    see [Section 8.4.5.5, “Configuring Audit Logging Characteristics”](audit-log-logging-configuration.html
    "8.4.5.5 Configuring Audit Logging Characteristics").
  id: totrans-318
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果[`audit_log_rotate_on_size`](audit-log-reference.html#sysvar_audit_log_rotate_on_size)为0，则自动审计日志文件轮换被禁用，只有在手动执行时才会发生轮换。在这种情况下，通过将[`audit_log_flush`](audit-log-reference.html#sysvar_audit_log_flush)设置为1或`ON`来启用它会导致审计日志插件关闭并重新打开其日志文件以刷新它。（变量值保持为`OFF`，因此您无需在再次启用它以执行另一个刷新之前显式禁用它。）有关更多信息，请参见[第8.4.5.5节，“配置审计日志特性”](audit-log-logging-configuration.html
    "8.4.5.5 配置审计日志特性")。
- en: '[`audit_log_flush_interval_seconds`](audit-log-reference.html#sysvar_audit_log_flush_interval_seconds)'
  id: totrans-319
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`audit_log_flush_interval_seconds`](audit-log-reference.html#sysvar_audit_log_flush_interval_seconds)'
- en: '| Command-Line Format | `--audit-log-flush-interval-seconds[=value]` |'
  id: totrans-320
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--audit-log-flush-interval-seconds[=value]` |'
- en: '| Introduced | 8.0.34 |'
  id: totrans-321
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 引入版本 | 8.0.34 |'
- en: '| System Variable | `[audit_log_flush_interval_seconds](audit-log-reference.html#sysvar_audit_log_flush_interval_seconds)`
    |'
  id: totrans-322
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 系统变量 | `[audit_log_flush_interval_seconds](audit-log-reference.html#sysvar_audit_log_flush_interval_seconds)`
    |'
- en: '| Scope | Global |'
  id: totrans-323
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 范围 | 全局 |'
- en: '| Dynamic | No |'
  id: totrans-324
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 动态 | 否 |'
- en: '| [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "Variable-Setting
    Hint Syntax") Hint Applies | No |'
  id: totrans-325
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "变量设置提示语法") 提示适用
    | 否 |'
- en: '| Type | Unsigned Long |'
  id: totrans-326
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 无符号长整型 |'
- en: '| Default Value | `0` |'
  id: totrans-327
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `0` |'
- en: '| Maximum Value (Windows) | `4294967295` |'
  id: totrans-328
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 最大值（Windows） | `4294967295` |'
- en: '| Maximum Value (Other) | `18446744073709551615` |'
  id: totrans-329
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 最大值（其他） | `18446744073709551615` |'
- en: '| Unit | seconds |'
  id: totrans-330
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 单位 | 秒 |'
- en: 'This system variable depends on the `scheduler` component, which must be installed
    and enabled (see [Section 7.5.5, “Scheduler Component”](scheduler-component.html
    "7.5.5 Scheduler Component")). To check the status of the component:'
  id: totrans-331
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此系统变量取决于必须安装和启用的`scheduler`组件（请参阅[第7.5.5节，“调度器组件”](scheduler-component.html
    "7.5.5 调度器组件")）。要检查组件的状态：
- en: '[PRE13]'
  id: totrans-332
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE13]'
- en: When [`audit_log_flush_interval_seconds`](audit-log-reference.html#sysvar_audit_log_flush_interval_seconds)
    has a value of zero (the default), no automatic refresh of the privileges occurs,
    even if the `scheduler` component is enabled (`ON`).
  id: totrans-333
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 当[`audit_log_flush_interval_seconds`](audit-log-reference.html#sysvar_audit_log_flush_interval_seconds)的值为零（默认值）时，即使启用了`scheduler`组件（`ON`），也不会自动刷新权限。
- en: Values of `1` and `59` are not permitted; instead, these values adjusts to `60`
    automatically and the server emits a warning. Values greater than `60` define
    the number of seconds the `scheduler` component waits from startup, or from the
    beginning of the previous execution, until it attempts to schedule another execution.
  id: totrans-334
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 不允许值为`1`和`59`；相反，这些值会自动调整为`60`，并且服务器会发出警告。大于`60`的值定义了`scheduler`组件从启动或上一次执行开始等待多少秒，直到尝试安排另一个执行。
- en: To persist this global system variable to the `mysqld-auto.cnf` file without
    setting the global variable runtime value, precede the variable name by the `PERSIST_ONLY`
    keyword or the `@@PERSIST_ONLY.` qualifier.
  id: totrans-335
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 要将此全局系统变量持久化到`mysqld-auto.cnf`文件中而不设置全局变量运行时值，请在变量名称之前加上`PERSIST_ONLY`关键字或`@@PERSIST_ONLY.`限定符。
- en: '[`audit_log_format`](audit-log-reference.html#sysvar_audit_log_format)'
  id: totrans-336
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`audit_log_format`](audit-log-reference.html#sysvar_audit_log_format)'
- en: '| Command-Line Format | `--audit-log-format=value` |'
  id: totrans-337
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--audit-log-format=value` |'
- en: '| System Variable | `[audit_log_format](audit-log-reference.html#sysvar_audit_log_format)`
    |'
  id: totrans-338
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 系统变量 | `[audit_log_format](audit-log-reference.html#sysvar_audit_log_format)`
    |'
- en: '| Scope | Global |'
  id: totrans-339
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 范围 | 全局 |'
- en: '| Dynamic | No |'
  id: totrans-340
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 动态 | 否 |'
- en: '| [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "Variable-Setting
    Hint Syntax") Hint Applies | No |'
  id: totrans-341
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "变量设置提示语法") 提示适用
    | 否 |'
- en: '| Type | Enumeration |'
  id: totrans-342
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 枚举 |'
- en: '| Default Value | `NEW` |'
  id: totrans-343
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `NEW` |'
- en: '| Valid Values | `OLD``NEW``JSON` |'
  id: totrans-344
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 有效值 | `OLD``NEW``JSON` |'
- en: The audit log file format. Permitted values are `OLD` (old-style XML), `NEW`
    (new-style XML; the default), and `JSON`. For details about each format, see [Section 8.4.5.4,
    “Audit Log File Formats”](audit-log-file-formats.html "8.4.5.4 Audit Log File
    Formats").
  id: totrans-345
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 审计日志文件格式。允许的值为`OLD`（旧式 XML）、`NEW`（新式 XML；默认值）和`JSON`。有关每种格式的详细信息，请参阅[第8.4.5.4节，“审计日志文件格式”](audit-log-file-formats.html
    "8.4.5.4 审计日志文件格式")。
- en: '[`audit_log_format_unix_timestamp`](audit-log-reference.html#sysvar_audit_log_format_unix_timestamp)'
  id: totrans-346
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`audit_log_format_unix_timestamp`](audit-log-reference.html#sysvar_audit_log_format_unix_timestamp)'
- en: '| Command-Line Format | `--audit-log-format-unix-timestamp[={OFF&#124;ON}]`
    |'
  id: totrans-347
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--audit-log-format-unix-timestamp[={OFF&#124;ON}]` |'
- en: '| Introduced | 8.0.26 |'
  id: totrans-348
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 引入版本 | 8.0.26 |'
- en: '| System Variable | `[audit_log_format_unix_timestamp](audit-log-reference.html#sysvar_audit_log_format_unix_timestamp)`
    |'
  id: totrans-349
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 系统变量 | `[audit_log_format_unix_timestamp](audit-log-reference.html#sysvar_audit_log_format_unix_timestamp)`
    |'
- en: '| Scope | Global |'
  id: totrans-350
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 范围 | 全局 |'
- en: '| Dynamic | Yes |'
  id: totrans-351
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 动态 | 是 |'
- en: '| [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "Variable-Setting
    Hint Syntax") Hint Applies | No |'
  id: totrans-352
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "变量设置提示语法") 提示适用
    | 否 |'
- en: '| Type | Boolean |'
  id: totrans-353
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 布尔值 |'
- en: '| Default Value | `OFF` |'
  id: totrans-354
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `OFF` |'
- en: This variable applies only for JSON-format audit log output. When that is true,
    enabling this variable causes each log file record to include a `time` field.
    The field value is an integer that represents the UNIX timestamp value indicating
    the date and time when the audit event was generated.
  id: totrans-355
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此变量仅适用于 JSON 格式的审计日志输出。当为真时，启用此变量会导致每个日志文件记录包含一个`time`字段。该字段值是一个整数，表示生成审计事件的日期和时间的
    UNIX 时间戳值。
- en: Changing the value of this variable at runtime causes log file rotation so that,
    for a given JSON-format log file, all records in the file either do or do not
    include the `time` field.
  id: totrans-356
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在运行时更改此变量的值会导致日志文件轮换，以便对于给定的JSON格式日志文件，文件中的所有记录要么包含`time`字段，要么不包含。
- en: Setting the runtime value of [`audit_log_format_unix_timestamp`](audit-log-reference.html#sysvar_audit_log_format_unix_timestamp)
    requires the [`AUDIT_ADMIN`](privileges-provided.html#priv_audit-admin) privilege,
    in addition to the [`SYSTEM_VARIABLES_ADMIN`](privileges-provided.html#priv_system-variables-admin)
    privilege (or the deprecated [`SUPER`](privileges-provided.html#priv_super) privilege)
    normally required to set a global system variable runtime value.
  id: totrans-357
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在运行时设置[`audit_log_format_unix_timestamp`](audit-log-reference.html#sysvar_audit_log_format_unix_timestamp)的值需要[`AUDIT_ADMIN`](privileges-provided.html#priv_audit-admin)权限，除了通常需要设置全局系统变量运行时值的[`SYSTEM_VARIABLES_ADMIN`](privileges-provided.html#priv_system-variables-admin)权限（或已弃用的[`SUPER`](privileges-provided.html#priv_super)权限）。
- en: '[`audit_log_include_accounts`](audit-log-reference.html#sysvar_audit_log_include_accounts)'
  id: totrans-358
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`audit_log_include_accounts`](audit-log-reference.html#sysvar_audit_log_include_accounts)'
- en: '| Command-Line Format | `--audit-log-include-accounts=value` |'
  id: totrans-359
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--audit-log-include-accounts=value` |'
- en: '| Deprecated | 8.0.34 |'
  id: totrans-360
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 已弃用 | 8.0.34 |'
- en: '| System Variable | `[audit_log_include_accounts](audit-log-reference.html#sysvar_audit_log_include_accounts)`
    |'
  id: totrans-361
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 系统变量 | `[audit_log_include_accounts](audit-log-reference.html#sysvar_audit_log_include_accounts)`
    |'
- en: '| Scope | Global |'
  id: totrans-362
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 范围 | 全局 |'
- en: '| Dynamic | Yes |'
  id: totrans-363
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 动态 | 是 |'
- en: '| [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "Variable-Setting
    Hint Syntax") Hint Applies | No |'
  id: totrans-364
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "变量设置提示语法")提示适用
    | 否 |'
- en: '| Type | String |'
  id: totrans-365
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 字符串 |'
- en: '| Default Value | `NULL` |'
  id: totrans-366
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `NULL` |'
- en: Note
  id: totrans-367
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意
- en: This deprecated variable applies only to legacy mode audit log filtering (see
    [Section 8.4.5.10, “Legacy Mode Audit Log Filtering”](audit-log-legacy-filtering.html
    "8.4.5.10 Legacy Mode Audit Log Filtering")).
  id: totrans-368
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此已弃用变量仅适用于传统模式的审计日志过滤（参见[第8.4.5.10节，“传统模式审计日志过滤”](audit-log-legacy-filtering.html
    "8.4.5.10 传统模式审计日志过滤")）。
- en: The accounts for which events should be logged. The value should be `NULL` or
    a string containing a list of one or more comma-separated account names. For more
    information, see [Section 8.4.5.7, “Audit Log Filtering”](audit-log-filtering.html
    "8.4.5.7 Audit Log Filtering").
  id: totrans-369
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 应记录事件的帐户。该值应为`NULL`或包含一个或多个逗号分隔帐户名称列表的字符串。有关更多信息，请参见[第8.4.5.7节，“审计日志过滤”](audit-log-filtering.html
    "8.4.5.7 审计日志过滤")。
- en: Modifications to [`audit_log_include_accounts`](audit-log-reference.html#sysvar_audit_log_include_accounts)
    affect only connections created subsequent to the modification, not existing connections.
  id: totrans-370
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对[`audit_log_include_accounts`](audit-log-reference.html#sysvar_audit_log_include_accounts)的修改仅影响在修改后创建的连接，而不影响现有连接。
- en: '[`audit_log_max_size`](audit-log-reference.html#sysvar_audit_log_max_size)'
  id: totrans-371
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`audit_log_max_size`](audit-log-reference.html#sysvar_audit_log_max_size)'
- en: '| Command-Line Format | `--audit-log-max-size=#` |'
  id: totrans-372
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--audit-log-max-size=#` |'
- en: '| Introduced | 8.0.26 |'
  id: totrans-373
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 引入 | 8.0.26 |'
- en: '| System Variable | `[audit_log_max_size](audit-log-reference.html#sysvar_audit_log_max_size)`
    |'
  id: totrans-374
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 系统变量 | `[audit_log_max_size](audit-log-reference.html#sysvar_audit_log_max_size)`
    |'
- en: '| Scope | Global |'
  id: totrans-375
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 范围 | 全局 |'
- en: '| Dynamic | Yes |'
  id: totrans-376
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 动态 | 是 |'
- en: '| [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "Variable-Setting
    Hint Syntax") Hint Applies | No |'
  id: totrans-377
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "变量设置提示语法")提示适用
    | 否 |'
- en: '| Type | Integer |'
  id: totrans-378
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 整数 |'
- en: '| Default Value | `0` |'
  id: totrans-379
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `0` |'
- en: '| Minimum Value | `0` |'
  id: totrans-380
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 最小值 | `0` |'
- en: '| Maximum Value (Windows) | `4294967295` |'
  id: totrans-381
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 最大值（Windows） | `4294967295` |'
- en: '| Maximum Value (Other) | `18446744073709551615` |'
  id: totrans-382
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 最大值（其他） | `18446744073709551615` |'
- en: '| Unit | bytes |'
  id: totrans-383
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 单位 | 字节 |'
- en: '| [Block Size](server-system-variables.html#system-variables-block-size "Note")
    | `4096` |'
  id: totrans-384
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| [块大小](server-system-variables.html#system-variables-block-size "注意") | `4096`
    |'
- en: '[`audit_log_max_size`](audit-log-reference.html#sysvar_audit_log_max_size)
    pertains to audit log file pruning, which is supported for JSON-format log files
    only. It controls pruning based on combined log file size:'
  id: totrans-385
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[`audit_log_max_size`](audit-log-reference.html#sysvar_audit_log_max_size)涉及仅支持JSON格式日志文件的日志文件修剪。它控制基于组合日志文件大小的修剪：'
- en: A value of 0 (the default) disables size-based pruning. No size limit is enforced.
  id: totrans-386
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 值为0（默认）会禁用基于大小的修剪。不强制执行大小限制。
- en: A value greater than 0 enables size-based pruning. The value is the combined
    size above which audit log files become subject to pruning.
  id: totrans-387
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 值大于0会启用基于大小的修剪。该值是超过该值后日志文件变得需要修剪的组合大小。
- en: If you set [`audit_log_max_size`](audit-log-reference.html#sysvar_audit_log_max_size)
    to a value that is not a multiple of 4096, it is truncated to the nearest multiple.
    In particular, setting it to a value less than 4096 sets it to 0 and no size-based
    pruning occurs.
  id: totrans-388
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果将[`audit_log_max_size`](audit-log-reference.html#sysvar_audit_log_max_size)设置为不是4096的倍数的值，则会被截断为最接近的倍数。特别是，将其设置为小于4096的值会将其设置为0，不会发生基于大小的修剪。
- en: If both [`audit_log_max_size`](audit-log-reference.html#sysvar_audit_log_max_size)
    and [`audit_log_rotate_on_size`](audit-log-reference.html#sysvar_audit_log_rotate_on_size)
    are greater than 0, [`audit_log_max_size`](audit-log-reference.html#sysvar_audit_log_max_size)
    should be more than 7 times the value of [`audit_log_rotate_on_size`](audit-log-reference.html#sysvar_audit_log_rotate_on_size).
    Otherwise, a warning is written to the server error log because in this case the
    “granularity” of size-based pruning may be insufficient to prevent removal of
    all or most rotated log files each time it occurs.
  id: totrans-389
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果[`audit_log_max_size`](audit-log-reference.html#sysvar_audit_log_max_size)和[`audit_log_rotate_on_size`](audit-log-reference.html#sysvar_audit_log_rotate_on_size)都大于0，则[`audit_log_max_size`](audit-log-reference.html#sysvar_audit_log_max_size)应该大于[`audit_log_rotate_on_size`](audit-log-reference.html#sysvar_audit_log_rotate_on_size)的值的7倍以上。否则，会向服务器错误日志写入警告，因为在这种情况下，基于大小的修剪的“粒度”可能不足以防止每次发生时删除所有或大部分旋转的日志文件。
- en: Note
  id: totrans-390
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意
- en: Setting [`audit_log_max_size`](audit-log-reference.html#sysvar_audit_log_max_size)
    by itself is not sufficient to cause log file pruning to occur because the pruning
    algorithm uses [`audit_log_rotate_on_size`](audit-log-reference.html#sysvar_audit_log_rotate_on_size),
    [`audit_log_max_size`](audit-log-reference.html#sysvar_audit_log_max_size), and
    [`audit_log_prune_seconds`](audit-log-reference.html#sysvar_audit_log_prune_seconds)
    in conjunction. For details, see [Space Management of Audit Log Files](audit-log-logging-configuration.html#audit-log-space-management
    "Space Management of Audit Log Files").
  id: totrans-391
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 设置[`audit_log_max_size`](audit-log-reference.html#sysvar_audit_log_max_size)本身并不足以导致日志文件修剪，因为修剪算法同时使用[`audit_log_rotate_on_size`](audit-log-reference.html#sysvar_audit_log_rotate_on_size)，[`audit_log_max_size`](audit-log-reference.html#sysvar_audit_log_max_size)和[`audit_log_prune_seconds`](audit-log-reference.html#sysvar_audit_log_prune_seconds)。详情请参见[审计日志文件的空间管理](audit-log-logging-configuration.html#audit-log-space-management
    "审计日志文件的空间管理")。
- en: '[`audit_log_password_history_keep_days`](audit-log-reference.html#sysvar_audit_log_password_history_keep_days)'
  id: totrans-392
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`audit_log_password_history_keep_days`](audit-log-reference.html#sysvar_audit_log_password_history_keep_days)'
- en: '| Command-Line Format | `--audit-log-password-history-keep-days=#` |'
  id: totrans-393
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--audit-log-password-history-keep-days=#` |'
- en: '| Introduced | 8.0.17 |'
  id: totrans-394
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 引入版本 | 8.0.17 |'
- en: '| System Variable | `[audit_log_password_history_keep_days](audit-log-reference.html#sysvar_audit_log_password_history_keep_days)`
    |'
  id: totrans-395
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 系统变量 | `[audit_log_password_history_keep_days](audit-log-reference.html#sysvar_audit_log_password_history_keep_days)`
    |'
- en: '| Scope | Global |'
  id: totrans-396
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 范围 | 全局 |'
- en: '| Dynamic | Yes |'
  id: totrans-397
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 动态 | 是 |'
- en: '| [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "Variable-Setting
    Hint Syntax") Hint Applies | No |'
  id: totrans-398
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "变量设置提示语法")提示适用
    | 否 |'
- en: '| Type | Integer |'
  id: totrans-399
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 整数 |'
- en: '| Default Value | `0` |'
  id: totrans-400
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `0` |'
- en: '| Minimum Value | `0` |'
  id: totrans-401
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 最小值 | `0` |'
- en: '| Maximum Value | `4294967295` |'
  id: totrans-402
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 最大值 | `4294967295` |'
- en: '| Unit | days |'
  id: totrans-403
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 单位 | 天 |'
- en: The audit log plugin implements log file encryption using encryption passwords
    stored in the MySQL keyring (see [Encrypting Audit Log Files](audit-log-logging-configuration.html#audit-log-file-encryption
    "Encrypting Audit Log Files")). The plugin also implements password history, which
    includes password archiving and expiration (removal).
  id: totrans-404
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 审计日志插件使用存储在MySQL密钥环中的加密密码实现日志文件加密（请参阅[加密审计日志文件](audit-log-logging-configuration.html#audit-log-file-encryption
    "加密审计日志文件")）。该插件还实现了密码历史记录，包括密码存档和过期（删除）。
- en: 'When the audit log plugin creates a new encryption password, it archives the
    previous password, if one exists, for later use. The [`audit_log_password_history_keep_days`](audit-log-reference.html#sysvar_audit_log_password_history_keep_days)
    variable controls automatic removal of expired archived passwords. Its value indicates
    the number of days after which archived audit log encryption passwords are removed.
    The default of 0 disables password expiration: the password retention period is
    forever.'
  id: totrans-405
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 当审计日志插件创建新的加密密码时，它会存档先前的密码（如果存在），以供以后使用。[`audit_log_password_history_keep_days`](audit-log-reference.html#sysvar_audit_log_password_history_keep_days)变量控制过期存档密码的自动删除。其值表示存档的审计日志加密密码在多少天后被删除。默认值为0，禁用密码过期：密码保留期永远。
- en: 'New audit log encryption passwords are created under these circumstances:'
  id: totrans-406
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在以下情况下创建新的审计日志加密密码：
- en: During plugin initialization, if the plugin finds that log file encryption is
    enabled, it checks whether the keyring contains an audit log encryption password.
    If not, the plugin automatically generates a random initial encryption password.
  id: totrans-407
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在插件初始化期间，如果插件发现启用了日志文件加密，则会检查密钥环是否包含审计日志加密密码。如果没有，则插件会自动生成一个随机初始加密密码。
- en: When the [`audit_log_encryption_password_set()`](audit-log-reference.html#function_audit-log-encryption-password-set)
    function is called to set a specific password.
  id: totrans-408
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当调用[`audit_log_encryption_password_set()`](audit-log-reference.html#function_audit-log-encryption-password-set)函数设置特定密码时。
- en: In each case, the plugin stores the new password in the key ring and uses it
    to encrypt new log files.
  id: totrans-409
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在每种情况下，插件将新密码存储在密钥环中，并用它来加密新的日志文件。
- en: 'Removal of expired audit log encryption passwords occurs under these circumstances:'
  id: totrans-410
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在以下情况下移除过期的审计日志加密密码：
- en: During plugin initialization.
  id: totrans-411
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在插件初始化期间。
- en: When the [`audit_log_encryption_password_set()`](audit-log-reference.html#function_audit-log-encryption-password-set)
    function is called.
  id: totrans-412
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当调用[`audit_log_encryption_password_set()`](audit-log-reference.html#function_audit-log-encryption-password-set)函数时。
- en: When the runtime value of [`audit_log_password_history_keep_days`](audit-log-reference.html#sysvar_audit_log_password_history_keep_days)
    is changed from its current value to a value greater than 0\. Runtime value changes
    occur for [`SET`](set-variable.html "15.7.6.1 SET Syntax for Variable Assignment")
    statements that use the `GLOBAL` or `PERSIST` keyword, but not the `PERSIST_ONLY`
    keyword. `PERSIST_ONLY` writes the variable setting to `mysqld-auto.cnf`, but
    has no effect on the runtime value.
  id: totrans-413
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当[`audit_log_password_history_keep_days`](audit-log-reference.html#sysvar_audit_log_password_history_keep_days)的运行时值从当前值更改为大于0的值时。运行时值更改发生在使用`GLOBAL`或`PERSIST`关键字的[`SET`](set-variable.html
    "15.7.6.1 SET Syntax for Variable Assignment")语句，但不适用于`PERSIST_ONLY`关键字。`PERSIST_ONLY`将变量设置写入`mysqld-auto.cnf`，但不影响运行时值。
- en: 'When password removal occurs, the current value of [`audit_log_password_history_keep_days`](audit-log-reference.html#sysvar_audit_log_password_history_keep_days)
    determines which passwords to remove:'
  id: totrans-414
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 当密码移除发生时，当前值[`audit_log_password_history_keep_days`](audit-log-reference.html#sysvar_audit_log_password_history_keep_days)决定要移除哪些密码：
- en: If the value is 0, the plugin removes no passwords.
  id: totrans-415
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果值为0，则插件不会删除任何密码。
- en: If the value is *`N`* > 0, the plugin removes passwords more than *`N`* days
    old.
  id: totrans-416
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果值为*`N`* > 0，则插件会删除超过*`N`*天的密码。
- en: Note
  id: totrans-417
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意
- en: Take care not to expire old passwords that are still needed to read archived
    encrypted log files.
  id: totrans-418
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意不要过期仍然需要读取已归档的加密日志文件的旧密码。
- en: 'If you normally leave password expiration disabled (that is, [`audit_log_password_history_keep_days`](audit-log-reference.html#sysvar_audit_log_password_history_keep_days)
    has a value of 0), it is possible to perform an on-demand cleanup operation by
    temporarily assigning the variable a value greater than zero. For example, to
    expire passwords older than 365 days, do this:'
  id: totrans-419
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果通常禁用密码过期（即[`audit_log_password_history_keep_days`](audit-log-reference.html#sysvar_audit_log_password_history_keep_days)的值为0），可以通过临时分配大于零的值来执行按需清理操作。例如，要使超过365天的密码过期，请执行以下操作：
- en: '[PRE14]'
  id: totrans-420
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE14]'
- en: Setting the runtime value of [`audit_log_password_history_keep_days`](audit-log-reference.html#sysvar_audit_log_password_history_keep_days)
    requires the [`AUDIT_ADMIN`](privileges-provided.html#priv_audit-admin) privilege,
    in addition to the [`SYSTEM_VARIABLES_ADMIN`](privileges-provided.html#priv_system-variables-admin)
    privilege (or the deprecated [`SUPER`](privileges-provided.html#priv_super) privilege)
    normally required to set a global system variable runtime value.
  id: totrans-421
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 设置运行时值[`audit_log_password_history_keep_days`](audit-log-reference.html#sysvar_audit_log_password_history_keep_days)需要[`AUDIT_ADMIN`](privileges-provided.html#priv_audit-admin)权限，除了通常需要设置全局系统变量运行时值的[`SYSTEM_VARIABLES_ADMIN`](privileges-provided.html#priv_system-variables-admin)权限（或已弃用的[`SUPER`](privileges-provided.html#priv_super)权限）。
- en: '[`audit_log_policy`](audit-log-reference.html#sysvar_audit_log_policy)'
  id: totrans-422
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`audit_log_policy`](audit-log-reference.html#sysvar_audit_log_policy)'
- en: '| Command-Line Format | `--audit-log-policy=value` |'
  id: totrans-423
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--audit-log-policy=value` |'
- en: '| Deprecated | 8.0.34 |'
  id: totrans-424
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 已弃用 | 8.0.34 |'
- en: '| System Variable | `[audit_log_policy](audit-log-reference.html#sysvar_audit_log_policy)`
    |'
  id: totrans-425
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 系统变量 | `[audit_log_policy](audit-log-reference.html#sysvar_audit_log_policy)`
    |'
- en: '| Scope | Global |'
  id: totrans-426
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 范围 | 全局 |'
- en: '| Dynamic | No |'
  id: totrans-427
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 动态 | 否 |'
- en: '| [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "Variable-Setting
    Hint Syntax") Hint Applies | No |'
  id: totrans-428
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "变量设置提示语法")提示适用
    | 否 |'
- en: '| Type | Enumeration |'
  id: totrans-429
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 枚举 |'
- en: '| Default Value | `ALL` |'
  id: totrans-430
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `ALL` |'
- en: '| Valid Values | `ALL``LOGINS``QUERIES``NONE` |'
  id: totrans-431
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 有效值 | `ALL``LOGINS``QUERIES``NONE` |'
- en: Note
  id: totrans-432
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意
- en: This deprecated variable applies only to legacy mode audit log filtering (see
    [Section 8.4.5.10, “Legacy Mode Audit Log Filtering”](audit-log-legacy-filtering.html
    "8.4.5.10 Legacy Mode Audit Log Filtering")).
  id: totrans-433
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此弃用变量仅适用于传统模式审计日志过滤（参见[第8.4.5.10节，“传统模式审计日志过滤”](audit-log-legacy-filtering.html
    "8.4.5.10 传统模式审计日志过滤")）。
- en: The policy controlling how the audit log plugin writes events to its log file.
    The following table shows the permitted values.
  id: totrans-434
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 控制审计日志插件将事件写入其日志文件的策略。以下表格显示了允许的值。
- en: '| Value | Description |'
  id: totrans-435
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 值 | 描述 |'
- en: '| `ALL` | Log all events |'
  id: totrans-436
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| `ALL` | 记录所有事件 |'
- en: '| `LOGINS` | Log only login events |'
  id: totrans-437
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| `LOGINS` | 仅记录登录事件 |'
- en: '| `QUERIES` | Log only query events |'
  id: totrans-438
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| `QUERIES` | 仅记录查询事件 |'
- en: '| `NONE` | Log nothing (disable the audit stream) |'
  id: totrans-439
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| `NONE` | 什么都不记录（禁用审计流） |'
- en: '[`audit_log_policy`](audit-log-reference.html#sysvar_audit_log_policy) can
    be set only at server startup. At runtime, it is a read-only variable. Two other
    system variables, [`audit_log_connection_policy`](audit-log-reference.html#sysvar_audit_log_connection_policy)
    and [`audit_log_statement_policy`](audit-log-reference.html#sysvar_audit_log_statement_policy),
    provide finer control over logging policy and can be set either at startup or
    at runtime. If you use [`audit_log_policy`](audit-log-reference.html#sysvar_audit_log_policy)
    at startup instead of the other two variables, the server uses its value to set
    those variables. For more information about the policy variables and their interaction,
    see [Section 8.4.5.5, “Configuring Audit Logging Characteristics”](audit-log-logging-configuration.html
    "8.4.5.5 Configuring Audit Logging Characteristics").'
  id: totrans-440
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[`audit_log_policy`](audit-log-reference.html#sysvar_audit_log_policy)只能在服务器启动时设置。在运行时，它是一个只读变量。另外两个系统变量，[`audit_log_connection_policy`](audit-log-reference.html#sysvar_audit_log_connection_policy)和[`audit_log_statement_policy`](audit-log-reference.html#sysvar_audit_log_statement_policy)，提供对日志记录策略的更精细控制，可以在启动时或运行时设置。如果在启动时使用[`audit_log_policy`](audit-log-reference.html#sysvar_audit_log_policy)而不是其他两个变量，则服务器会使用其值来设置这些变量。有关策略变量及其交互的更多信息，请参见[第8.4.5.5节，“配置审计日志特性”](audit-log-logging-configuration.html
    "8.4.5.5 配置审计日志特性")。'
- en: '[`audit_log_prune_seconds`](audit-log-reference.html#sysvar_audit_log_prune_seconds)'
  id: totrans-441
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`audit_log_prune_seconds`](audit-log-reference.html#sysvar_audit_log_prune_seconds)'
- en: '| Command-Line Format | `--audit-log-prune-seconds=#` |'
  id: totrans-442
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--audit-log-prune-seconds=#` |'
- en: '| Introduced | 8.0.24 |'
  id: totrans-443
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 引入版本 | 8.0.24 |'
- en: '| System Variable | `[audit_log_prune_seconds](audit-log-reference.html#sysvar_audit_log_prune_seconds)`
    |'
  id: totrans-444
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 系统变量 | `[audit_log_prune_seconds](audit-log-reference.html#sysvar_audit_log_prune_seconds)`
    |'
- en: '| Scope | Global |'
  id: totrans-445
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 范围 | 全局 |'
- en: '| Dynamic | Yes |'
  id: totrans-446
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 动态 | 是 |'
- en: '| [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "Variable-Setting
    Hint Syntax") Hint Applies | No |'
  id: totrans-447
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "变量设置提示语法")提示适用
    | 否 |'
- en: '| Type | Integer |'
  id: totrans-448
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 整数 |'
- en: '| Default Value | `0` |'
  id: totrans-449
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `0` |'
- en: '| Minimum Value | `0` |'
  id: totrans-450
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 最小值 | `0` |'
- en: '| Maximum Value (Windows) | `4294967295` |'
  id: totrans-451
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 最大值（Windows） | `4294967295` |'
- en: '| Maximum Value (Other) | `18446744073709551615` |'
  id: totrans-452
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 最大值（其他） | `18446744073709551615` |'
- en: '| Unit | bytes |'
  id: totrans-453
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 单位 | 字节 |'
- en: '[`audit_log_prune_seconds`](audit-log-reference.html#sysvar_audit_log_prune_seconds)
    pertains to audit log file pruning, which is supported for JSON-format log files
    only. It controls pruning based on log file age:'
  id: totrans-454
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[`audit_log_prune_seconds`](audit-log-reference.html#sysvar_audit_log_prune_seconds)涉及审计日志文件修剪，仅支持JSON格式的日志文件。它根据日志文件的年龄控制修剪：'
- en: A value of 0 (the default) disables age-based pruning. No age limit is enforced.
  id: totrans-455
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 值为0（默认值）会禁用基于年龄的修剪。不强制执行年龄限制。
- en: A value greater than 0 enables age-based pruning. The value is the number of
    seconds after which audit log files become subject to pruning.
  id: totrans-456
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 值大于0会启用基于年龄的修剪。该值是日志文件变得需要修剪的秒数。
- en: Note
  id: totrans-457
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意
- en: Setting [`audit_log_prune_seconds`](audit-log-reference.html#sysvar_audit_log_prune_seconds)
    by itself is not sufficient to cause log file pruning to occur because the pruning
    algorithm uses [`audit_log_rotate_on_size`](audit-log-reference.html#sysvar_audit_log_rotate_on_size),
    [`audit_log_max_size`](audit-log-reference.html#sysvar_audit_log_max_size), and
    [`audit_log_prune_seconds`](audit-log-reference.html#sysvar_audit_log_prune_seconds)
    in conjunction. For details, see [Space Management of Audit Log Files](audit-log-logging-configuration.html#audit-log-space-management
    "Space Management of Audit Log Files").
  id: totrans-458
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 单独设置[`audit_log_prune_seconds`](audit-log-reference.html#sysvar_audit_log_prune_seconds)
    是不足以导致日志文件修剪发生的，因为修剪算法同时使用[`audit_log_rotate_on_size`](audit-log-reference.html#sysvar_audit_log_rotate_on_size)、[`audit_log_max_size`](audit-log-reference.html#sysvar_audit_log_max_size)
    和[`audit_log_prune_seconds`](audit-log-reference.html#sysvar_audit_log_prune_seconds)。有关详细信息，请参见
    [审计日志文件的空间管理](audit-log-logging-configuration.html#audit-log-space-management
    "审计日志文件的空间管理")。
- en: '[`audit_log_read_buffer_size`](audit-log-reference.html#sysvar_audit_log_read_buffer_size)'
  id: totrans-459
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`audit_log_read_buffer_size`](audit-log-reference.html#sysvar_audit_log_read_buffer_size)'
- en: '| Command-Line Format | `--audit-log-read-buffer-size=#` |'
  id: totrans-460
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--audit-log-read-buffer-size=#` |'
- en: '| System Variable | `[audit_log_read_buffer_size](audit-log-reference.html#sysvar_audit_log_read_buffer_size)`
    |'
  id: totrans-461
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 系统变量 | `[audit_log_read_buffer_size](audit-log-reference.html#sysvar_audit_log_read_buffer_size)`
    |'
- en: '| Scope (≥ 8.0.12) | Global, Session |'
  id: totrans-462
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 范围 (≥ 8.0.12) | 全局, 会话 |'
- en: '| Scope (8.0.11) | Global |'
  id: totrans-463
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 范围 (8.0.11) | 全局 |'
- en: '| Dynamic (≥ 8.0.12) | Yes |'
  id: totrans-464
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 动态 (≥ 8.0.12) | 是 |'
- en: '| Dynamic (8.0.11) | No |'
  id: totrans-465
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 动态 (8.0.11) | 否 |'
- en: '| [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "Variable-Setting
    Hint Syntax") Hint Applies | No |'
  id: totrans-466
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "变量设置提示语法") 提示适用
    | 否 |'
- en: '| Type | Integer |'
  id: totrans-467
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 整数 |'
- en: '| Default Value (≥ 8.0.12) | `32768` |'
  id: totrans-468
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 (≥ 8.0.12) | `32768` |'
- en: '| Default Value (8.0.11) | `1048576` |'
  id: totrans-469
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 (8.0.11) | `1048576` |'
- en: '| Minimum Value (≥ 8.0.12) | `32768` |'
  id: totrans-470
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 最小值 (≥ 8.0.12) | `32768` |'
- en: '| Minimum Value (8.0.11) | `1024` |'
  id: totrans-471
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 最小值 (8.0.11) | `1024` |'
- en: '| Maximum Value | `4194304` |'
  id: totrans-472
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 最大值 | `4194304` |'
- en: '| Unit | bytes |'
  id: totrans-473
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 单位 | 字节 |'
- en: The buffer size for reading from the audit log file, in bytes. The [`audit_log_read()`](audit-log-reference.html#function_audit-log-read)
    function reads no more than this many bytes. Log file reading is supported only
    for JSON log format. For more information, see [Section 8.4.5.6, “Reading Audit
    Log Files”](audit-log-file-reading.html "8.4.5.6 Reading Audit Log Files").
  id: totrans-474
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 从审计日志文件中读取的缓冲区大小，以字节为单位。[`audit_log_read()`](audit-log-reference.html#function_audit-log-read)
    函数最多读取这么多字节。仅支持 JSON 日志格式的日志文件读取。有关更多信息，请参见 [第 8.4.5.6 节，“读取审计日志文件”](audit-log-file-reading.html
    "8.4.5.6 读取审计日志文件")。
- en: As of MySQL 8.0.12, this variable has a default of 32KB and can be set at runtime.
    Each client should set its session value of [`audit_log_read_buffer_size`](audit-log-reference.html#sysvar_audit_log_read_buffer_size)
    appropriately for its use of [`audit_log_read()`](audit-log-reference.html#function_audit-log-read).
    Prior to MySQL 8.0.12, [`audit_log_read_buffer_size`](audit-log-reference.html#sysvar_audit_log_read_buffer_size)
    has a default of 1MB, affects all clients, and can be changed only at server startup.
  id: totrans-475
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 截至 MySQL 8.0.12，此变量默认为32KB，并可在运行时设置。每个客户端应适当设置其[`audit_log_read_buffer_size`](audit-log-reference.html#sysvar_audit_log_read_buffer_size)的会话值，以供其使用[`audit_log_read()`](audit-log-reference.html#function_audit-log-read)。在
    MySQL 8.0.12 之前，[`audit_log_read_buffer_size`](audit-log-reference.html#sysvar_audit_log_read_buffer_size)
    默认为1MB，影响所有客户端，并且只能在服务器启动时更改。
- en: '[`audit_log_rotate_on_size`](audit-log-reference.html#sysvar_audit_log_rotate_on_size)'
  id: totrans-476
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`audit_log_rotate_on_size`](audit-log-reference.html#sysvar_audit_log_rotate_on_size)'
- en: '| Command-Line Format | `--audit-log-rotate-on-size=#` |'
  id: totrans-477
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--audit-log-rotate-on-size=#` |'
- en: '| System Variable | `[audit_log_rotate_on_size](audit-log-reference.html#sysvar_audit_log_rotate_on_size)`
    |'
  id: totrans-478
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 系统变量 | `[audit_log_rotate_on_size](audit-log-reference.html#sysvar_audit_log_rotate_on_size)`
    |'
- en: '| Scope | Global |'
  id: totrans-479
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 范围 | 全局 |'
- en: '| Dynamic | Yes |'
  id: totrans-480
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 动态 | 是 |'
- en: '| [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "Variable-Setting
    Hint Syntax") Hint Applies | No |'
  id: totrans-481
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "变量设置提示语法") 提示适用
    | 否 |'
- en: '| Type | Integer |'
  id: totrans-482
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 整数 |'
- en: '| Default Value | `0` |'
  id: totrans-483
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `0` |'
- en: '| Minimum Value | `0` |'
  id: totrans-484
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 最小值 | `0` |'
- en: '| Maximum Value | `18446744073709551615` |'
  id: totrans-485
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 最大值 | `18446744073709551615` |'
- en: '| Unit | bytes |'
  id: totrans-486
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 单位 | 字节 |'
- en: '| [Block Size](server-system-variables.html#system-variables-block-size "Note")
    | `4096` |'
  id: totrans-487
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| [块大小](server-system-variables.html#system-variables-block-size "注") | `4096`
    |'
- en: If [`audit_log_rotate_on_size`](audit-log-reference.html#sysvar_audit_log_rotate_on_size)
    is 0, the audit log plugin does not perform automatic size-based log file rotation.
    If rotation is to occur, you must perform it manually; see [Manual Audit Log File
    Rotation (Before MySQL 8.0.31)](audit-log-logging-configuration.html#audit-log-manual-rotation
    "Manual Audit Log File Rotation (Before MySQL 8.0.31)").
  id: totrans-488
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果[`audit_log_rotate_on_size`](audit-log-reference.html#sysvar_audit_log_rotate_on_size)为0，则审计日志插件不执行基于大小的自动日志文件轮换。如果要进行旋转，必须手动执行；请参见[手动审计日志文件旋转（MySQL
    8.0.31之前）](audit-log-logging-configuration.html#audit-log-manual-rotation "手动审计日志文件旋转（MySQL
    8.0.31之前）")。
- en: If [`audit_log_rotate_on_size`](audit-log-reference.html#sysvar_audit_log_rotate_on_size)
    is greater than 0, automatic size-based log file rotation occurs. Whenever a write
    to the log file causes its size to exceed the [`audit_log_rotate_on_size`](audit-log-reference.html#sysvar_audit_log_rotate_on_size)
    value, the audit log plugin renames the current log file and opens a new current
    log file using the original name.
  id: totrans-489
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果[`audit_log_rotate_on_size`](audit-log-reference.html#sysvar_audit_log_rotate_on_size)大于0，则会发生基于大小的自动日志文件轮换。每当写入日志文件导致其大小超过[`audit_log_rotate_on_size`](audit-log-reference.html#sysvar_audit_log_rotate_on_size)值时，审计日志插件会重命名当前日志文件，并使用原始名称打开一个新的当前日志文件。
- en: If you set [`audit_log_rotate_on_size`](audit-log-reference.html#sysvar_audit_log_rotate_on_size)
    to a value that is not a multiple of 4096, it is truncated to the nearest multiple.
    In particular, setting it to a value less than 4096 sets it to 0 and no rotation
    occurs, except manually.
  id: totrans-490
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果将[`audit_log_rotate_on_size`](audit-log-reference.html#sysvar_audit_log_rotate_on_size)设置为不是4096的倍数的值，则会将其截断为最接近的倍数。特别是，将其设置为小于4096的值会将其设置为0，并且不会发生旋转，除非手动执行。
- en: Note
  id: totrans-491
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意
- en: '[`audit_log_rotate_on_size`](audit-log-reference.html#sysvar_audit_log_rotate_on_size)
    controls whether audit log file rotation occurs. It can also be used in conjunction
    with [`audit_log_max_size`](audit-log-reference.html#sysvar_audit_log_max_size)
    and [`audit_log_prune_seconds`](audit-log-reference.html#sysvar_audit_log_prune_seconds)
    to configure pruning of rotated JSON-format log files. For details, see [Space
    Management of Audit Log Files](audit-log-logging-configuration.html#audit-log-space-management
    "Space Management of Audit Log Files").'
  id: totrans-492
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[`audit_log_rotate_on_size`](audit-log-reference.html#sysvar_audit_log_rotate_on_size)控制是否发生审计日志文件轮换。它还可以与[`audit_log_max_size`](audit-log-reference.html#sysvar_audit_log_max_size)和[`audit_log_prune_seconds`](audit-log-reference.html#sysvar_audit_log_prune_seconds)一起用于配置旋转JSON格式日志文件的修剪。有关详细信息，请参见[审计日志文件的空间管理](audit-log-logging-configuration.html#audit-log-space-management
    "审计日志文件的空间管理")。'
- en: '[`audit_log_statement_policy`](audit-log-reference.html#sysvar_audit_log_statement_policy)'
  id: totrans-493
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`audit_log_statement_policy`](audit-log-reference.html#sysvar_audit_log_statement_policy)'
- en: '| Command-Line Format | `--audit-log-statement-policy=value` |'
  id: totrans-494
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--audit-log-statement-policy=value` |'
- en: '| Deprecated | 8.0.34 |'
  id: totrans-495
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 已弃用 | 8.0.34 |'
- en: '| System Variable | `[audit_log_statement_policy](audit-log-reference.html#sysvar_audit_log_statement_policy)`
    |'
  id: totrans-496
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 系统变量 | `[audit_log_statement_policy](audit-log-reference.html#sysvar_audit_log_statement_policy)`
    |'
- en: '| Scope | Global |'
  id: totrans-497
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 范围 | 全局 |'
- en: '| Dynamic | Yes |'
  id: totrans-498
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 动态 | 是 |'
- en: '| [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "Variable-Setting
    Hint Syntax") Hint Applies | No |'
  id: totrans-499
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "变量设置提示语法")提示适用
    | 否 |'
- en: '| Type | Enumeration |'
  id: totrans-500
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 枚举 |'
- en: '| Default Value | `ALL` |'
  id: totrans-501
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `ALL` |'
- en: '| Valid Values | `ALL``ERRORS``NONE` |'
  id: totrans-502
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 有效值 | `ALL``ERRORS``NONE` |'
- en: Note
  id: totrans-503
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意
- en: This deprecated variable applies only to legacy mode audit log filtering (see
    [Section 8.4.5.10, “Legacy Mode Audit Log Filtering”](audit-log-legacy-filtering.html
    "8.4.5.10 Legacy Mode Audit Log Filtering")).
  id: totrans-504
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此已弃用的变量仅适用于传统模式审计日志过滤（参见[第8.4.5.10节，“传统模式审计日志过滤”](audit-log-legacy-filtering.html
    "8.4.5.10 传统模式审计日志过滤")）。
- en: The policy controlling how the audit log plugin writes statement events to its
    log file. The following table shows the permitted values.
  id: totrans-505
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 控制审计日志插件如何将语句事件写入其日志文件的策略。以下表格显示了允许的值。
- en: '| Value | Description |'
  id: totrans-506
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 值 | 描述 |'
- en: '| `ALL` | Log all statement events |'
  id: totrans-507
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| `ALL` | 记录所有语句事件 |'
- en: '| `ERRORS` | Log only failed statement events |'
  id: totrans-508
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| `ERRORS` | 仅记录失败的语句事件 |'
- en: '| `NONE` | Do not log statement events |'
  id: totrans-509
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| `NONE` | 不记录语句事件 |'
- en: Note
  id: totrans-510
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意
- en: At server startup, any explicit value given for [`audit_log_statement_policy`](audit-log-reference.html#sysvar_audit_log_statement_policy)
    may be overridden if [`audit_log_policy`](audit-log-reference.html#sysvar_audit_log_policy)
    is also specified, as described in [Section 8.4.5.5, “Configuring Audit Logging
    Characteristics”](audit-log-logging-configuration.html "8.4.5.5 Configuring Audit
    Logging Characteristics").
  id: totrans-511
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在服务器启动时，如果还指定了[`audit_log_policy`](audit-log-reference.html#sysvar_audit_log_policy)，则可以覆盖为[`audit_log_statement_policy`](audit-log-reference.html#sysvar_audit_log_statement_policy)给出的任何显式值，如[第8.4.5.5节，“配置审计日志特性”](audit-log-logging-configuration.html
    "8.4.5.5 配置审计日志特性")中所述。
- en: '[`audit_log_strategy`](audit-log-reference.html#sysvar_audit_log_strategy)'
  id: totrans-512
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`audit_log_strategy`](audit-log-reference.html#sysvar_audit_log_strategy)'
- en: '| Command-Line Format | `--audit-log-strategy=value` |'
  id: totrans-513
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--audit-log-strategy=value` |'
- en: '| System Variable | `[audit_log_strategy](audit-log-reference.html#sysvar_audit_log_strategy)`
    |'
  id: totrans-514
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 系统变量 | `[audit_log_strategy](audit-log-reference.html#sysvar_audit_log_strategy)`
    |'
- en: '| Scope | Global |'
  id: totrans-515
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 范围 | 全局 |'
- en: '| Dynamic | No |'
  id: totrans-516
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 动态 | 否 |'
- en: '| [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "Variable-Setting
    Hint Syntax") Hint Applies | No |'
  id: totrans-517
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| [`SET_VAR`](optimizer-hints.html#optimizer-hints-set-var "变量设置提示语法")提示适用
    | 否 |'
- en: '| Type | Enumeration |'
  id: totrans-518
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 枚举 |'
- en: '| Default Value | `ASYNCHRONOUS` |'
  id: totrans-519
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `ASYNCHRONOUS` |'
- en: '| Valid Values | `ASYNCHRONOUS``PERFORMANCE``SEMISYNCHRONOUS``SYNCHRONOUS`
    |'
  id: totrans-520
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 有效值 | `ASYNCHRONOUS``PERFORMANCE``SEMISYNCHRONOUS``SYNCHRONOUS` |'
- en: 'The logging method used by the audit log plugin. These strategy values are
    permitted:'
  id: totrans-521
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 审计日志插件使用的记录方法。允许使用以下策略值：
- en: '`ASYNCHRONOUS`: Log asynchronously. Wait for space in the output buffer.'
  id: totrans-522
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ASYNCHRONOUS`：异步记录。等待输出缓冲区中的空间。'
- en: '`PERFORMANCE`: Log asynchronously. Drop requests for which there is insufficient
    space in the output buffer.'
  id: totrans-523
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`PERFORMANCE`：异步记录。在输出缓冲区中没有足够空间的请求将被丢弃。'
- en: '`SEMISYNCHRONOUS`: Log synchronously. Permit caching by the operating system.'
  id: totrans-524
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`SEMISYNCHRONOUS`：同步记录。允许操作系统进行缓存。'
- en: '`SYNCHRONOUS`: Log synchronously. Call `sync()` after each request.'
  id: totrans-525
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`SYNCHRONOUS`：同步记录。在每个请求后调用`sync()`。'
- en: Audit Log Status Variables
  id: totrans-526
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 审计日志状态变量
- en: If the audit log plugin is enabled, it exposes several status variables that
    provide operational information. These variables are available for legacy mode
    audit filtering (deprecated in MySQL 8.0.34) and JSON mode audit filtering.
  id: totrans-527
  prefs: []
  type: TYPE_NORMAL
  zh: 如果启用了审计日志插件，则会公开几个提供操作信息的状态变量。这些变量适用于遗留模式审计过滤（在MySQL 8.0.34中已弃用）和JSON模式审计过滤。
- en: '[`Audit_log_current_size`](audit-log-reference.html#statvar_Audit_log_current_size)'
  id: totrans-528
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`Audit_log_current_size`](audit-log-reference.html#statvar_Audit_log_current_size)'
- en: The size of the current audit log file. The value increases when an event is
    written to the log and is reset to 0 when the log is rotated.
  id: totrans-529
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 当前审计日志文件的大小。当事件写入日志时，该值会增加，并在日志轮换时重置为0。
- en: '[`Audit_log_event_max_drop_size`](audit-log-reference.html#statvar_Audit_log_event_max_drop_size)'
  id: totrans-530
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`Audit_log_event_max_drop_size`](audit-log-reference.html#statvar_Audit_log_event_max_drop_size)'
- en: The size of the largest dropped event in performance logging mode. For a description
    of logging modes, see [Section 8.4.5.5, “Configuring Audit Logging Characteristics”](audit-log-logging-configuration.html
    "8.4.5.5 Configuring Audit Logging Characteristics").
  id: totrans-531
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 性能记录模式中最大丢弃事件的大小。有关记录模式的描述，请参见[第8.4.5.5节，“配置审计日志特性”](audit-log-logging-configuration.html
    "8.4.5.5 配置审计日志特性")。
- en: '[`Audit_log_events`](audit-log-reference.html#statvar_Audit_log_events)'
  id: totrans-532
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`Audit_log_events`](audit-log-reference.html#statvar_Audit_log_events)'
- en: The number of events handled by the audit log plugin, whether or not they were
    written to the log based on filtering policy (see [Section 8.4.5.5, “Configuring
    Audit Logging Characteristics”](audit-log-logging-configuration.html "8.4.5.5 Configuring
    Audit Logging Characteristics")).
  id: totrans-533
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 由审计日志插件处理的事件数量，无论是否根据过滤策略写入日志（参见[第8.4.5.5节，“配置审计日志特性”](audit-log-logging-configuration.html
    "8.4.5.5 配置审计日志特性")）。
- en: '[`Audit_log_events_filtered`](audit-log-reference.html#statvar_Audit_log_events_filtered)'
  id: totrans-534
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`Audit_log_events_filtered`](audit-log-reference.html#statvar_Audit_log_events_filtered)'
- en: The number of events handled by the audit log plugin that were filtered (not
    written to the log) based on filtering policy (see [Section 8.4.5.5, “Configuring
    Audit Logging Characteristics”](audit-log-logging-configuration.html "8.4.5.5 Configuring
    Audit Logging Characteristics")).
  id: totrans-535
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 基于过滤策略（参见[第8.4.5.5节，“配置审计日志特性”](audit-log-logging-configuration.html "8.4.5.5 配置审计日志特性")），由审计日志插件处理的事件数量被过滤（未写入日志）。
- en: '[`Audit_log_events_lost`](audit-log-reference.html#statvar_Audit_log_events_lost)'
  id: totrans-536
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`Audit_log_events_lost`](audit-log-reference.html#statvar_Audit_log_events_lost)'
- en: The number of events lost in performance logging mode because an event was larger
    than the available audit log buffer space. This value may be useful for assessing
    how to set [`audit_log_buffer_size`](audit-log-reference.html#sysvar_audit_log_buffer_size)
    to size the buffer for performance mode. For a description of logging modes, see
    [Section 8.4.5.5, “Configuring Audit Logging Characteristics”](audit-log-logging-configuration.html
    "8.4.5.5 Configuring Audit Logging Characteristics").
  id: totrans-537
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在性能记录模式下丢失的事件数量，因为事件大于可用的审计日志缓冲区空间。此值可能有助于评估如何设置[`audit_log_buffer_size`](audit-log-reference.html#sysvar_audit_log_buffer_size)以调整性能模式的缓冲区大小。有关记录模式的描述，请参见[第8.4.5.5节，“配置审计日志特性”](audit-log-logging-configuration.html
    "8.4.5.5 配置审计日志特性")。
- en: '[`Audit_log_events_written`](audit-log-reference.html#statvar_Audit_log_events_written)'
  id: totrans-538
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`Audit_log_events_written`](audit-log-reference.html#statvar_Audit_log_events_written)'
- en: The number of events written to the audit log.
  id: totrans-539
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 写入审计日志的事件数量。
- en: '[`Audit_log_total_size`](audit-log-reference.html#statvar_Audit_log_total_size)'
  id: totrans-540
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`Audit_log_total_size`](audit-log-reference.html#statvar_Audit_log_total_size)'
- en: The total size of events written to all audit log files. Unlike [`Audit_log_current_size`](audit-log-reference.html#statvar_Audit_log_current_size),
    the value of [`Audit_log_total_size`](audit-log-reference.html#statvar_Audit_log_total_size)
    increases even when the log is rotated.
  id: totrans-541
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 所有审计日志文件中写入的事件总大小。与[`Audit_log_current_size`](audit-log-reference.html#statvar_Audit_log_current_size)不同，[`Audit_log_total_size`](audit-log-reference.html#statvar_Audit_log_total_size)的值在日志轮换时也会增加。
- en: '[`Audit_log_write_waits`](audit-log-reference.html#statvar_Audit_log_write_waits)'
  id: totrans-542
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`Audit_log_write_waits`](audit-log-reference.html#statvar_Audit_log_write_waits)'
- en: The number of times an event had to wait for space in the audit log buffer in
    asynchronous logging mode. For a description of logging modes, see [Section 8.4.5.5,
    “Configuring Audit Logging Characteristics”](audit-log-logging-configuration.html
    "8.4.5.5 Configuring Audit Logging Characteristics").
  id: totrans-543
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在异步记录模式下，事件必须等待审计日志缓冲区中的空间的次数。有关记录模式的描述，请参见[第8.4.5.5节，“配置审计日志特性”](audit-log-logging-configuration.html
    "8.4.5.5 配置审计日志特性")。
