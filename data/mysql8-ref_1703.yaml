- en: 25.5.23 ndb_restore — Restore an NDB Cluster Backup
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 25.5.23 ndb_restore — 恢复 NDB 集群备份
- en: 原文：[https://dev.mysql.com/doc/refman/8.0/en/mysql-cluster-programs-ndb-restore.html](https://dev.mysql.com/doc/refman/8.0/en/mysql-cluster-programs-ndb-restore.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://dev.mysql.com/doc/refman/8.0/en/mysql-cluster-programs-ndb-restore.html](https://dev.mysql.com/doc/refman/8.0/en/mysql-cluster-programs-ndb-restore.html)
- en: '[25.5.23.1 Restoring an NDB Backup to a Different Version of NDB Cluster](ndb-restore-to-different-version.html)'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: '[25.5.23.1 将 NDB 备份恢复到不同版本的 NDB 集群](ndb-restore-to-different-version.html)'
- en: '[25.5.23.2 Restoring to a different number of data nodes](ndb-restore-different-number-nodes.html)'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '[25.5.23.2 恢复到不同数量的数据节点](ndb-restore-different-number-nodes.html)'
- en: '[25.5.23.3 Restoring from a backup taken in parallel](ndb-restore-parallel-data-node-backup.html)'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: '[25.5.23.3 从并行备份中恢复](ndb-restore-parallel-data-node-backup.html)'
- en: The NDB Cluster restoration program is implemented as a separate command-line
    utility [**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup"), which can normally be found in the MySQL `bin`
    directory. This program reads the files created as a result of the backup and
    inserts the stored information into the database.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: NDB 集群恢复程序实现为一个独立的命令行实用程序[**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup")，通常可以在 MySQL `bin` 目录中找到。该程序读取备份生成的文件，并将存储的信息插入数据库。
- en: In NDB 7.6 and earlier, this program printed `NDBT_ProgramExit - *`status`*`
    upon completion of its run, due to an unnecessary dependency on the `NDBT` testing
    library. This dependency has been removed in NDB 8.0, eliminating the extraneous
    output.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 在 NDB 7.6 及更早版本中，由于对 `NDBT` 测试库的不必要依赖，该程序在运行完成时打印了 `NDBT_ProgramExit - *`status`*`，在
    NDB 8.0 中已经移除了这个依赖，消除了多余的输出。
- en: '[**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup") must be executed once for each of the backup
    files that were created by the [`START BACKUP`](mysql-cluster-backup-using-management-client.html
    "25.6.8.2 Using The NDB Cluster Management Client to Create a Backup") command
    used to create the backup (see [Section 25.6.8.2, “Using The NDB Cluster Management
    Client to Create a Backup”](mysql-cluster-backup-using-management-client.html
    "25.6.8.2 Using The NDB Cluster Management Client to Create a Backup")). This
    is equal to the number of data nodes in the cluster at the time that the backup
    was created.'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: '[**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup")必须针对每个由 [`START BACKUP`](mysql-cluster-backup-using-management-client.html
    "25.6.8.2 使用 NDB 集群管理客户端创建备份") 命令创建的备份文件执行一次。这等于在创建备份时集群中的数据节点数量。'
- en: Note
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: Before using [**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup"), it is recommended that the cluster be running
    in single user mode, unless you are restoring multiple data nodes in parallel.
    See [Section 25.6.6, “NDB Cluster Single User Mode”](mysql-cluster-single-user-mode.html
    "25.6.6 NDB Cluster Single User Mode"), for more information.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 在使用[**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup")之前，建议集群在单用户模式下运行，除非您要并行恢复多个数据节点。有关更多信息，请参见[第
    25.6.6 节，“NDB 集群单用户模式”](mysql-cluster-single-user-mode.html "25.6.6 NDB Cluster
    Single User Mode")。
- en: Options that can be used with [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") are shown in the following
    table. Additional descriptions follow the table.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 可与[**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup")一起使用的选项显示在下表中。表后面会有额外的描述。
- en: '**Table 25.42 Command-line options used with the program ndb_restore**'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: '**表 25.42 与程序 ndb_restore 一起使用的命令行选项**'
- en: '| Format | Description | Added, Deprecated, or Removed |'
  id: totrans-12
  prefs: []
  type: TYPE_TB
  zh: '| 格式 | 描述 | 添加、弃用或移除 |'
- en: '| `[--allow-pk-changes[=0&#124;1]](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_allow-pk-changes)`
    | Allow changes to set of columns making up table''s primary key | ADDED: NDB
    8.0.21 |'
  id: totrans-13
  prefs: []
  type: TYPE_TB
  zh: '| `[--allow-pk-changes[=0&#124;1]](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_allow-pk-changes)`
    | 允许更改构成表主键的列集 | 添加：NDB 8.0.21 |'
- en: '| `[--append](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_append)`
    | Append data to tab-delimited file | (Supported in all NDB releases based on
    MySQL 8.0) |'
  id: totrans-14
  prefs: []
  type: TYPE_TB
  zh: '| `[--append](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_append)`
    | 追加数据到制表符文件 | (在基于 MySQL 8.0 的所有 NDB 版本中支持) |'
- en: '| `[--backup-password=password](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_backup-password)`
    | Supply a password for decrypting an encrypted backup with --decrypt; see documentation
    for allowed values | ADDED: NDB 8.0.22 |'
  id: totrans-15
  prefs: []
  type: TYPE_TB
  zh: '| `[--backup-password=password](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_backup-password)`
    | 为使用--decrypt解密的加密备份提供密码; 请参阅允许的值的文档 | 新增: NDB 8.0.22 |'
- en: '| `[--backup-password-from-stdin](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_backup-password-from-stdin)`
    | Get decryption password in a secure fashion from STDIN; use together with --decrypt
    option | ADDED: NDB 8.0.24 |'
  id: totrans-16
  prefs: []
  type: TYPE_TB
  zh: '| `[--backup-password-from-stdin](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_backup-password-from-stdin)`
    | 从STDIN安全获取解密密码; 与--decrypt选项一起使用 | 新增: NDB 8.0.24 |'
- en: '| `[--backup-path=path](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_backup-path)`
    | Path to backup files directory | (Supported in all NDB releases based on MySQL
    8.0) |'
  id: totrans-17
  prefs: []
  type: TYPE_TB
  zh: '| `[--backup-path=path](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_backup-path)`
    | 备份文件目录的路径 | (在基于MySQL 8.0的所有NDB版本中支持) |'
- en: '| `[--backupid=#](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_backupid)`,`[-b
    #](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_backupid)` | Restore
    from backup having this ID | (Supported in all NDB releases based on MySQL 8.0)
    |'
  id: totrans-18
  prefs: []
  type: TYPE_TB
  zh: '| `[--backupid=#](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_backupid)`,`[-b
    #](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_backupid)` | 恢复具有此ID的备份
    | (在基于MySQL 8.0的所有NDB版本中支持) |'
- en: '| `[--character-sets-dir=path](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_character-sets-dir)`
    | Directory containing character sets | REMOVED: 8.0.31 |'
  id: totrans-19
  prefs: []
  type: TYPE_TB
  zh: '| `[--character-sets-dir=path](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_character-sets-dir)`
    | 包含字符集的目录 | 移除: 8.0.31 |'
- en: '| `[--connect=connection_string](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_connect)`,`[-c
    connection_string](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_connect)`
    | Alias for --connectstring | (Supported in all NDB releases based on MySQL 8.0)
    |'
  id: totrans-20
  prefs: []
  type: TYPE_TB
  zh: '| `[--connect=connection_string](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_connect)`,`[-c
    connection_string](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_connect)`
    | --connectstring的别名 | (在基于MySQL 8.0的所有NDB版本中支持) |'
- en: '| `[--connect-retries=#](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_connect-retries)`
    | Number of times to retry connection before giving up | (Supported in all NDB
    releases based on MySQL 8.0) |'
  id: totrans-21
  prefs: []
  type: TYPE_TB
  zh: '| `[--connect-retries=#](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_connect-retries)`
    | 放弃之前重试连接的次数 | (在基于MySQL 8.0的所有NDB版本中支持) |'
- en: '| `[--connect-retry-delay=#](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_connect-retry-delay)`
    | Number of seconds to wait between attempts to contact management server | (Supported
    in all NDB releases based on MySQL 8.0) |'
  id: totrans-22
  prefs: []
  type: TYPE_TB
  zh: '| `[--connect-retry-delay=#](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_connect-retry-delay)`
    | 尝试联系管理服务器之间等待的秒数 | (在基于MySQL 8.0的所有NDB版本中支持) |'
- en: '| `[--connect-string=connection_string](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_connect-string)`,`[-c
    connection_string](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_connect-string)`
    | Same as --ndb-connectstring | (Supported in all NDB releases based on MySQL
    8.0) |'
  id: totrans-23
  prefs: []
  type: TYPE_TB
  zh: '| `[--connect-string=connection_string](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_connect-string)`,`[-c
    connection_string](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_connect-string)`
    | 与--ndb-connectstring相同 | (在基于MySQL 8.0的所有NDB版本中支持) |'
- en: '| `[--core-file](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_core-file)`
    | Write core file on error; used in debugging | (Supported in all NDB releases
    based on MySQL 8.0) |'
  id: totrans-24
  prefs: []
  type: TYPE_TB
  zh: '| `[--core-file](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_core-file)`
    | 在错误时写入核心文件; 用于调试 | (在基于MySQL 8.0的所有NDB版本中支持) |'
- en: '| `[--decrypt](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_decrypt)`
    | Decrypt an encrypted backup; requires --backup-password | ADDED: NDB 8.0.22
    |'
  id: totrans-25
  prefs: []
  type: TYPE_TB
  zh: '| `[--decrypt](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_decrypt)`
    | 解密加密备份; 需要--backup-password | 新增: NDB 8.0.22 |'
- en: '| `[--defaults-extra-file=path](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_defaults-extra-file)`
    | Read given file after global files are read | (Supported in all NDB releases
    based on MySQL 8.0) |'
  id: totrans-26
  prefs: []
  type: TYPE_TB
  zh: '| `[--defaults-extra-file=path](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_defaults-extra-file)`
    | 在读取全局文件后读取给定文件 | (在基于MySQL 8.0的所有NDB版本中支持) |'
- en: '| `[--defaults-file=path](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_defaults-file)`
    | Read default options from given file only | (Supported in all NDB releases based
    on MySQL 8.0) |'
  id: totrans-27
  prefs: []
  type: TYPE_TB
  zh: '| `[--defaults-file=path](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_defaults-file)`
    | 仅从给定文件中读取默认选项 | (在基于MySQL 8.0的所有NDB版本中支持) |'
- en: '| `[--defaults-group-suffix=string](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_defaults-group-suffix)`
    | Also read groups with concat(group, suffix) | (Supported in all NDB releases
    based on MySQL 8.0) |'
  id: totrans-28
  prefs: []
  type: TYPE_TB
  zh: '| `[--defaults-group-suffix=string](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_defaults-group-suffix)`
    | 还读取具有 concat(group, suffix) 的组 | (在基于 MySQL 8.0 的所有 NDB 版本中支持) |'
- en: '| `[--disable-indexes](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_disable-indexes)`
    | Causes indexes from backup to be ignored; may decrease time needed to restore
    data | (Supported in all NDB releases based on MySQL 8.0) |'
  id: totrans-29
  prefs: []
  type: TYPE_TB
  zh: '| `[--disable-indexes](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_disable-indexes)`
    | 导致备份中的索引被忽略；可能减少恢复数据所需的时间 | (在基于 MySQL 8.0 的所有 NDB 版本中支持) |'
- en: '| `[--dont-ignore-systab-0](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_dont-ignore-systab-0)`,`[-f](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_dont-ignore-systab-0)`
    | Do not ignore system table during restore; experimental only; not for production
    use | (Supported in all NDB releases based on MySQL 8.0) |'
  id: totrans-30
  prefs: []
  type: TYPE_TB
  zh: '| `[--dont-ignore-systab-0](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_dont-ignore-systab-0)`,`[-f](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_dont-ignore-systab-0)`
    | 在恢复过程中不要忽略系统表；仅用于实验；不适用于生产环境 | (在基于 MySQL 8.0 的所有 NDB 版本中支持) |'
- en: '| `[--exclude-databases=list](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_exclude-databases)`
    | List of one or more databases to exclude (includes those not named) | (Supported
    in all NDB releases based on MySQL 8.0) |'
  id: totrans-31
  prefs: []
  type: TYPE_TB
  zh: '| `[--exclude-databases=list](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_exclude-databases)`
    | 要排除的一个或多个数据库的列表（包括未命名的数据库） | (在基于 MySQL 8.0 的所有 NDB 版本中支持) |'
- en: '| `[--exclude-intermediate-sql-tables[=TRUE&#124;FALSE]](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_exclude-intermediate-sql-tables)`
    | Do not restore any intermediate tables (having names prefixed with ''#sql-'')
    that were left over from copying ALTER TABLE operations; specify FALSE to restore
    such tables | (Supported in all NDB releases based on MySQL 8.0) |'
  id: totrans-32
  prefs: []
  type: TYPE_TB
  zh: '| `[--exclude-intermediate-sql-tables[=TRUE&#124;FALSE]](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_exclude-intermediate-sql-tables)`
    | 不恢复任何中间表（名称以''#sql-''为前缀）；这些表是从复制 ALTER TABLE 操作中留下的；指定 FALSE 来恢复这些表 | (在基于
    MySQL 8.0 的所有 NDB 版本中支持) |'
- en: '| `[--exclude-missing-columns](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_exclude-missing-columns)`
    | Causes columns from backup version of table that are missing from version of
    table in database to be ignored | (Supported in all NDB releases based on MySQL
    8.0) |'
  id: totrans-33
  prefs: []
  type: TYPE_TB
  zh: '| `[--exclude-missing-columns](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_exclude-missing-columns)`
    | 导致备份版本中缺失于数据库中表版本的列被忽略 | (在基于 MySQL 8.0 的所有 NDB 版本中支持) |'
- en: '| `[--exclude-missing-tables](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_exclude-missing-tables)`
    | Causes tables from backup that are missing from database to be ignored | (Supported
    in all NDB releases based on MySQL 8.0) |'
  id: totrans-34
  prefs: []
  type: TYPE_TB
  zh: '| `[--exclude-missing-tables](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_exclude-missing-tables)`
    | 导致备份中缺失于数据库中的表被忽略 | (在基于 MySQL 8.0 的所有 NDB 版本中支持) |'
- en: '| `[--exclude-tables=list](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_exclude-tables)`
    | List of one or more tables to exclude (includes those in same database that
    are not named); each table reference must include database name | (Supported in
    all NDB releases based on MySQL 8.0) |'
  id: totrans-35
  prefs: []
  type: TYPE_TB
  zh: '| `[--exclude-tables=list](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_exclude-tables)`
    | 要排除的一个或多个表的列表（包括未命名的同一数据库中的表）；每个表引用必须包括数据库名称 | (在基于 MySQL 8.0 的所有 NDB 版本中支持)
    |'
- en: '| `[--fields-enclosed-by=char](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_fields-enclosed-by)`
    | Fields are enclosed by this character | (Supported in all NDB releases based
    on MySQL 8.0) |'
  id: totrans-36
  prefs: []
  type: TYPE_TB
  zh: '| `[--fields-enclosed-by=char](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_fields-enclosed-by)`
    | 字段由此字符包围 | (在基于 MySQL 8.0 的所有 NDB 版本中支持) |'
- en: '| `[--fields-optionally-enclosed-by](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_fields-optionally-enclosed-by)`
    | Fields are optionally enclosed by this character | (Supported in all NDB releases
    based on MySQL 8.0) |'
  id: totrans-37
  prefs: []
  type: TYPE_TB
  zh: '| `[--fields-optionally-enclosed-by](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_fields-optionally-enclosed-by)`
    | 字段可选择由此字符包围 | (在基于 MySQL 8.0 的所有 NDB 版本中支持) |'
- en: '| `[--fields-terminated-by=char](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_fields-terminated-by)`
    | Fields are terminated by this character | (Supported in all NDB releases based
    on MySQL 8.0) |'
  id: totrans-38
  prefs: []
  type: TYPE_TB
  zh: '| `[--fields-terminated-by=char](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_fields-terminated-by)`
    | 字段由此字符终止 | (在基于 MySQL 8.0 的所有 NDB 版本中支持) |'
- en: '| `[--help](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_help)`,`[-?](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_help)`
    | Display help text and exit | (Supported in all NDB releases based on MySQL 8.0)
    |'
  id: totrans-39
  prefs: []
  type: TYPE_TB
  zh: '| `[--help](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_help)`,`[-?](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_help)`
    | 显示帮助文本并退出 | (在基于 MySQL 8.0 的所有 NDB 版本中支持) |'
- en: '| `[--hex](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_hex)`
    | Print binary types in hexadecimal format | (Supported in all NDB releases based
    on MySQL 8.0) |'
  id: totrans-40
  prefs: []
  type: TYPE_TB
  zh: '| `[--hex](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_hex)`
    | 以十六进制格式打印二进制类型 | (在基于 MySQL 8.0 的所有 NDB 版本中支持) |'
- en: '| `[--ignore-extended-pk-updates[=0&#124;1]](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_ignore-extended-pk-updates)`
    | Ignore log entries containing updates to columns now included in extended primary
    key | ADDED: NDB 8.0.21 |'
  id: totrans-41
  prefs: []
  type: TYPE_TB
  zh: '| `[--ignore-extended-pk-updates[=0&#124;1]](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_ignore-extended-pk-updates)`
    | 忽略包含对现在包含在扩展主键中的列的更新的日志条目 | 新增：NDB 8.0.21 |'
- en: '| `[--include-databases=list](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_include-databases)`
    | List of one or more databases to restore (excludes those not named) | (Supported
    in all NDB releases based on MySQL 8.0) |'
  id: totrans-42
  prefs: []
  type: TYPE_TB
  zh: '| `[--include-databases=list](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_include-databases)`
    | 要恢复的一个或多个数据库的列表（排除未命名的数据库） | (在基于 MySQL 8.0 的所有 NDB 版本中支持) |'
- en: '| `[--include-stored-grants](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_include-stored-grants)`
    | Restore shared users and grants to ndb_sql_metadata table | ADDED: NDB 8.0.19
    |'
  id: totrans-43
  prefs: []
  type: TYPE_TB
  zh: '| `[--include-stored-grants](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_include-stored-grants)`
    | 将共享用户和授权恢复到 ndb_sql_metadata 表 | 新增：NDB 8.0.19 |'
- en: '| `[--include-tables=list](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_include-tables)`
    | List of one or more tables to restore (excludes those in same database that
    are not named); each table reference must include database name | (Supported in
    all NDB releases based on MySQL 8.0) |'
  id: totrans-44
  prefs: []
  type: TYPE_TB
  zh: '| `[--include-tables=list](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_include-tables)`
    | 要恢复的一个或多个表的列表（排除同一数据库中未命名的表）；每个表引用必须包括数据库名称 | (在基于 MySQL 8.0 的所有 NDB 版本中支持)
    |'
- en: '| `[--lines-terminated-by=char](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_lines-terminated-by)`
    | Lines are terminated by this character | (Supported in all NDB releases based
    on MySQL 8.0) |'
  id: totrans-45
  prefs: []
  type: TYPE_TB
  zh: '| `[--lines-terminated-by=char](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_lines-terminated-by)`
    | 行以此字符结尾 | (在基于 MySQL 8.0 的所有 NDB 版本中支持) |'
- en: '| `[--login-path=path](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_login-path)`
    | Read given path from login file | (Supported in all NDB releases based on MySQL
    8.0) |'
  id: totrans-46
  prefs: []
  type: TYPE_TB
  zh: '| `[--login-path=path](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_login-path)`
    | 从登录文件中读取给定路径 | (在基于 MySQL 8.0 的所有 NDB 版本中支持) |'
- en: '| `[--lossy-conversions](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_lossy-conversions)`,`[-L](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_lossy-conversions)`
    | Allow lossy conversions of column values (type demotions or changes in sign)
    when restoring data from backup | (Supported in all NDB releases based on MySQL
    8.0) |'
  id: totrans-47
  prefs: []
  type: TYPE_TB
  zh: '| `[--lossy-conversions](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_lossy-conversions)`,`[-L](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_lossy-conversions)`
    | 在从备份中恢复数据时允许���值的有损转换（类型降级或符号更改） | (在基于 MySQL 8.0 的所有 NDB 版本中支持) |'
- en: '| `[--no-binlog](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_no-binlog)`
    | If mysqld is connected and using binary logging, do not log restored data |
    (Supported in all NDB releases based on MySQL 8.0) |'
  id: totrans-48
  prefs: []
  type: TYPE_TB
  zh: '| `[--no-binlog](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_no-binlog)`
    | 如果 mysqld 已连接并使用二进制日志记录，则不记录恢复的数据 | (在基于 MySQL 8.0 的所有 NDB 版本中支持) |'
- en: '| `[--no-defaults](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_no-defaults)`
    | Do not read default options from any option file other than login file | (Supported
    in all NDB releases based on MySQL 8.0) |'
  id: totrans-49
  prefs: []
  type: TYPE_TB
  zh: '| `[--no-defaults](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_no-defaults)`
    | 不从登录文件以外的任何选项文件中读取默认选项 | (在基于 MySQL 8.0 的所有 NDB 版本中支持) |'
- en: '| `[--no-restore-disk-objects](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_no-restore-disk-objects)`,`[-d](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_no-restore-disk-objects)`
    | Do not restore objects relating to Disk Data | (Supported in all NDB releases
    based on MySQL 8.0) |'
  id: totrans-50
  prefs: []
  type: TYPE_TB
  zh: '| `[--no-restore-disk-objects](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_no-restore-disk-objects)`,`[-d](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_no-restore-disk-objects)`
    | 不恢复与磁盘数据相关的对象 | (在基于 MySQL 8.0 的所有 NDB 版本中支持) |'
- en: '| `[--no-upgrade](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_no-upgrade)`,`[-u](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_no-upgrade)`
    | Do not upgrade array type for varsize attributes which do not already resize
    VAR data, and do not change column attributes | (Supported in all NDB releases
    based on MySQL 8.0) |'
  id: totrans-51
  prefs: []
  type: TYPE_TB
  zh: '| `[--no-upgrade](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_no-upgrade)`,`[-u](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_no-upgrade)`
    | 不升级尚未调整 VAR 数据大小的 varsize 属性的数组类型，并且不更改列属性 | (在基于 MySQL 8.0 的所有 NDB 版本中支持) |'
- en: '| `[--ndb-connectstring=connection_string](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_ndb-connectstring)`,`[-c
    connection_string](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_ndb-connectstring)`
    | Set connect string for connecting to ndb_mgmd. Syntax: "[nodeid=id;][host=]hostname[:port]".
    Overrides entries in NDB_CONNECTSTRING and my.cnf | (Supported in all NDB releases
    based on MySQL 8.0) |'
  id: totrans-52
  prefs: []
  type: TYPE_TB
  zh: '| `[--ndb-connectstring=connection_string](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_ndb-connectstring)`,`[-c
    connection_string](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_ndb-connectstring)`
    | 设置用于连接到 ndb_mgmd 的连接字符串。语法："[nodeid=id;][host=]hostname[:port]"。覆盖 NDB_CONNECTSTRING
    和 my.cnf 中的条目 | (在基于 MySQL 8.0 的所有 NDB 版本中支持) |'
- en: '| `[--ndb-mgmd-host=connection_string](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_ndb-mgmd-host)`,`[-c
    connection_string](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_ndb-mgmd-host)`
    | Same as --ndb-connectstring | (Supported in all NDB releases based on MySQL
    8.0) |'
  id: totrans-53
  prefs: []
  type: TYPE_TB
  zh: '| `[--ndb-mgmd-host=connection_string](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_ndb-mgmd-host)`,`[-c
    connection_string](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_ndb-mgmd-host)`
    | 与 --ndb-connectstring 相同 | (在基于 MySQL 8.0 的所有 NDB 版本中支持) |'
- en: '| `[--ndb-nodegroup-map=map](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_ndb-nodegroup-map)`,`[-z](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_ndb-nodegroup-map)`
    | Specify node group map; unused, unsupported | (Supported in all NDB releases
    based on MySQL 8.0) |'
  id: totrans-54
  prefs: []
  type: TYPE_TB
  zh: '| `[--ndb-nodegroup-map=map](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_ndb-nodegroup-map)`,`[-z](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_ndb-nodegroup-map)`
    | 指定节点组映射；未使用，不支持 | (在基于 MySQL 8.0 的所有 NDB 版本中支持) |'
- en: '| `[--ndb-nodeid=#](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_ndb-nodeid)`
    | Set node ID for this node, overriding any ID set by --ndb-connectstring | (Supported
    in all NDB releases based on MySQL 8.0) |'
  id: totrans-55
  prefs: []
  type: TYPE_TB
  zh: '| `[--ndb-nodeid=#](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_ndb-nodeid)`
    | 为此节点设置节点 ID，覆盖 --ndb-connectstring 设置的任何 ID | (在基于 MySQL 8.0 的所有 NDB 版本中支持)
    |'
- en: '| `[--ndb-optimized-node-selection](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_ndb-optimized-node-selection)`
    | Enable optimizations for selection of nodes for transactions. Enabled by default;
    use --skip-ndb-optimized-node-selection to disable | REMOVED: 8.0.31 |'
  id: totrans-56
  prefs: []
  type: TYPE_TB
  zh: '| `[--ndb-optimized-node-selection](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_ndb-optimized-node-selection)`
    | 启用节点选择优化以进行事务。默认启用；使用 --skip-ndb-optimized-node-selection 来禁用 | 移除：8.0.31 |'
- en: '| `[--nodeid=#](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_nodeid)`,`[-n
    #](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_nodeid)` | ID of
    node where backup was taken | (Supported in all NDB releases based on MySQL 8.0)
    |'
  id: totrans-57
  prefs: []
  type: TYPE_TB
  zh: '| `[--nodeid=#](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_nodeid)`,`[-n
    #](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_nodeid)` | 备份所在节点的
    ID | (在基于 MySQL 8.0 的所有 NDB 版本中支持) |'
- en: '| `[--num-slices=#](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_num-slices)`
    | Number of slices to apply when restoring by slice | ADDED: NDB 8.0.20 |'
  id: totrans-58
  prefs: []
  type: TYPE_TB
  zh: '| `[--num-slices=#](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_num-slices)`
    | 恢复时应用的切片数量 | 添加：NDB 8.0.20 |'
- en: '| `[--parallelism=#](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_parallelism)`,`[-p
    #](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_parallelism)` |
    Number of parallel transactions to use while restoring data | (Supported in all
    NDB releases based on MySQL 8.0) |'
  id: totrans-59
  prefs: []
  type: TYPE_TB
  zh: '| `[--parallelism=#](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_parallelism)`,`[-p
    #](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_parallelism)` |
    并行事务的数量，用于恢复数据 | (在基于 MySQL 8.0 的所有 NDB 版本中支持) |'
- en: '| `[--preserve-trailing-spaces](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_preserve-trailing-spaces)`,`[-P](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_preserve-trailing-spaces)`
    | Allow preservation of trailing spaces (including padding) when promoting fixed-width
    string types to variable-width types | (Supported in all NDB releases based on
    MySQL 8.0) |'
  id: totrans-60
  prefs: []
  type: TYPE_TB
  zh: '| `[--preserve-trailing-spaces](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_preserve-trailing-spaces)`,`[-P](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_preserve-trailing-spaces)`
    | 允许在将固定宽度字符串类型提升为可变宽度类型时保留尾随空格（包括填充） | (在基于 MySQL 8.0 的所有 NDB 版本中支持) |'
- en: '| `[--print](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_print)`
    | Print metadata, data, and log to stdout (equivalent to --print-meta --print-data
    --print-log) | (Supported in all NDB releases based on MySQL 8.0) |'
  id: totrans-61
  prefs: []
  type: TYPE_TB
  zh: '| `[--print](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_print)`
    | 将元数据、数据和日志打印到标准输出（等同于 --print-meta --print-data --print-log） | (支持所有基于 MySQL
    8.0 的 NDB 版本) |'
- en: '| `[--print-data](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_print-data)`
    | Print data to stdout | (Supported in all NDB releases based on MySQL 8.0) |'
  id: totrans-62
  prefs: []
  type: TYPE_TB
  zh: '| `[--print-data](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_print-data)`
    | 将数据打印到标准输出 | (支持所有基于 MySQL 8.0 的 NDB 版本) |'
- en: '| `[--print-defaults](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_print-defaults)`
    | Print program argument list and exit | (Supported in all NDB releases based
    on MySQL 8.0) |'
  id: totrans-63
  prefs: []
  type: TYPE_TB
  zh: '| `[--print-defaults](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_print-defaults)`
    | 打印程序参数列表并退出 | (支持所有基于 MySQL 8.0 的 NDB 版本) |'
- en: '| `[--print-log](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_print-log)`
    | Print log to stdout | (Supported in all NDB releases based on MySQL 8.0) |'
  id: totrans-64
  prefs: []
  type: TYPE_TB
  zh: '| `[--print-log](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_print-log)`
    | 将日志打印到标准输出 | (支持所有基于 MySQL 8.0 的 NDB 版本) |'
- en: '| `[--print-meta](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_print-meta)`
    | Print metadata to stdout | (Supported in all NDB releases based on MySQL 8.0)
    |'
  id: totrans-65
  prefs: []
  type: TYPE_TB
  zh: '| `[--print-meta](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_print-meta)`
    | 将元数据打印到��准输出 | (支持所有基于 MySQL 8.0 的 NDB 版本) |'
- en: '| `[--print-sql-log](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_print-sql-log)`
    | Write SQL log to stdout | (Supported in all NDB releases based on MySQL 8.0)
    |'
  id: totrans-66
  prefs: []
  type: TYPE_TB
  zh: '| `[--print-sql-log](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_print-sql-log)`
    | 将 SQL 日志写入标准输出 | (支持所有基于 MySQL 8.0 的 NDB 版本) |'
- en: '| `[--progress-frequency=#](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_progress-frequency)`
    | Print status of restore each given number of seconds | (Supported in all NDB
    releases based on MySQL 8.0) |'
  id: totrans-67
  prefs: []
  type: TYPE_TB
  zh: '| `[--progress-frequency=#](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_progress-frequency)`
    | 每隔指定秒数打印还原进度状态 | (支持所有基于 MySQL 8.0 的 NDB 版本) |'
- en: '| `[--promote-attributes](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_promote-attributes)`,`[-A](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_promote-attributes)`
    | Allow attributes to be promoted when restoring data from backup | (Supported
    in all NDB releases based on MySQL 8.0) |'
  id: totrans-68
  prefs: []
  type: TYPE_TB
  zh: '| `[--promote-attributes](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_promote-attributes)`,`[-A](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_promote-attributes)`
    | 在从备份还原数据时允许属性提升 | (支持所有基于 MySQL 8.0 的 NDB 版本) |'
- en: '| `[--rebuild-indexes](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_rebuild-indexes)`
    | Causes multithreaded rebuilding of ordered indexes found in backup; number of
    threads used is determined by setting BuildIndexThreads | (Supported in all NDB
    releases based on MySQL 8.0) |'
  id: totrans-69
  prefs: []
  type: TYPE_TB
  zh: '| `[--rebuild-indexes](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_rebuild-indexes)`
    | 导致在备份中找到的有序索引进行多线程重建；使用的线程数由设置 BuildIndexThreads 决定 | (支持所有基于 MySQL 8.0 的 NDB
    版本) |'
- en: '| `[--remap-column=string](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_remap-column)`
    | Apply offset to value of specified column using indicated function and arguments.
    Format is [db].[tbl].[col]:[fn]:[args]; see documentation for details | ADDED:
    NDB 8.0.21 |'
  id: totrans-70
  prefs: []
  type: TYPE_TB
  zh: '| `[--remap-column=string](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_remap-column)`
    | 对指定列的值应用偏移量，使用指定的函数和参数。格式为[db].[tbl].[col]:[fn]:[args]；详细信息请参阅文档 | 新增功能：NDB
    8.0.21 |'
- en: '| `[--restore-data](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_restore-data)`,`[-r](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_restore-data)`
    | Restore table data and logs into NDB Cluster using NDB API | (Supported in all
    NDB releases based on MySQL 8.0) |'
  id: totrans-71
  prefs: []
  type: TYPE_TB
  zh: '| `[--restore-data](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_restore-data)`,`[-r](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_restore-data)`
    | 使用 NDB API 将表数据和日志还原到 NDB 集群 | (支持所有基于 MySQL 8.0 的 NDB 版本) |'
- en: '| `[--restore-epoch](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_restore-epoch)`,`[-e](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_restore-epoch)`
    | Restore epoch info into status table; useful on replica cluster for starting
    replication; updates or inserts row in mysql.ndb_apply_status with ID 0 | (Supported
    in all NDB releases based on MySQL 8.0) |'
  id: totrans-72
  prefs: []
  type: TYPE_TB
  zh: '| `[--restore-epoch](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_restore-epoch)`,`[-e](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_restore-epoch)`
    | 将 epoch 信息还原到状态表；在副本集群上用于启动复制；更新或插入具有 ID 0 的行到 mysql.ndb_apply_status | (支持所有基于
    MySQL 8.0 的 NDB 版本) |'
- en: '| `[--restore-meta](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_restore-meta)`,`[-m](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_restore-meta)`
    | Restore metadata to NDB Cluster using NDB API | (Supported in all NDB releases
    based on MySQL 8.0) |'
  id: totrans-73
  prefs: []
  type: TYPE_TB
  zh: '| `[--restore-meta](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_restore-meta)`,`[-m](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_restore-meta)`
    | 使用NDB API将元数据恢复到NDB集群 | (适用于基于MySQL 8.0的所有NDB版本) |'
- en: '| `[--restore-privilege-tables](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_restore-privilege-tables)`
    | Restore MySQL privilege tables that were previously moved to NDB | DEPRECATED:
    NDB 8.0.16 |'
  id: totrans-74
  prefs: []
  type: TYPE_TB
  zh: '| `[--restore-privilege-tables](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_restore-privilege-tables)`
    | 恢复之前移至NDB的MySQL权限表 | 废弃：NDB 8.0.16 |'
- en: '| `[--rewrite-database=string](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_rewrite-database)`
    | Restore to differently named database; format is olddb,newdb | (Supported in
    all NDB releases based on MySQL 8.0) |'
  id: totrans-75
  prefs: []
  type: TYPE_TB
  zh: '| `[--rewrite-database=string](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_rewrite-database)`
    | 恢复到不同命名的数据库；格式为olddb,newdb | (适用于基于MySQL 8.0的所有NDB版本) |'
- en: '| `[--skip-broken-objects](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_skip-broken-objects)`
    | Ignore missing blob tables in backup file | (Supported in all NDB releases based
    on MySQL 8.0) |'
  id: totrans-76
  prefs: []
  type: TYPE_TB
  zh: '| `[--skip-broken-objects](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_skip-broken-objects)`
    | 忽略备份文件中缺失的blob表 | (适用于基于MySQL 8.0的所有NDB版本) |'
- en: '| `[--skip-table-check](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_skip-table-check)`,`[-s](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_skip-table-check)`
    | Skip table structure check during restore | (Supported in all NDB releases based
    on MySQL 8.0) |'
  id: totrans-77
  prefs: []
  type: TYPE_TB
  zh: '| `[--skip-table-check](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_skip-table-check)`,`[-s](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_skip-table-check)`
    | 在恢复过程中跳过表结构检查 | (适用于基于MySQL 8.0的所有NDB版本) |'
- en: '| `[--skip-unknown-objects](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_skip-unknown-objects)`
    | Causes schema objects not recognized by ndb_restore to be ignored when restoring
    backup made from newer NDB version to older version | (Supported in all NDB releases
    based on MySQL 8.0) |'
  id: totrans-78
  prefs: []
  type: TYPE_TB
  zh: '| `[--skip-unknown-objects](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_skip-unknown-objects)`
    | 导致ndb_restore不识别的模式对象在从较新NDB版本备份恢复到较旧版本时被忽略 | (适用于基于MySQL 8.0的所有NDB版本) |'
- en: '| `[--slice-id=#](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_slice-id)`
    | Slice ID, when restoring by slices | ADDED: NDB 8.0.20 |'
  id: totrans-79
  prefs: []
  type: TYPE_TB
  zh: '| `[--slice-id=#](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_slice-id)`
    | 在按片段恢复时的片段ID | 新增：NDB 8.0.20 |'
- en: '| `[--tab=path](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_tab)`,`[-T
    path](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_tab)` | Creates
    a tab-separated .txt file for each table in path provided | (Supported in all
    NDB releases based on MySQL 8.0) |'
  id: totrans-80
  prefs: []
  type: TYPE_TB
  zh: '| `[--tab=path](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_tab)`,`[-T
    path](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_tab)` | 为提供的路径中的每个表创建一个制表符分隔的.txt文件
    | (适用于基于MySQL 8.0的所有NDB版本) |'
- en: '| `[--timestamp-printouts{=true&#124;false}](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_timestamp-printouts)`
    | Prefix all info, error, and debug log messages with timestamps | ADDED: NDB
    8.0.33 |'
  id: totrans-81
  prefs: []
  type: TYPE_TB
  zh: '| `[--timestamp-printouts{=true&#124;false}](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_timestamp-printouts)`
    | 在所有信息、错误和调试日志消息前加上时间戳 | 新增：NDB 8.0.33 |'
- en: '| `[--usage](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_usage)`,`[-?](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_usage)`
    | Display help text and exit; same as --help | (Supported in all NDB releases
    based on MySQL 8.0) |'
  id: totrans-82
  prefs: []
  type: TYPE_TB
  zh: '| `[--usage](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_usage)`,`[-?](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_usage)`
    | 显示帮助文本并退出；与--help相同 | (适用于基于MySQL 8.0的所有NDB版本) |'
- en: '| `[--verbose=#](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_verbose)`
    | Level of verbosity in output | (Supported in all NDB releases based on MySQL
    8.0) |'
  id: totrans-83
  prefs: []
  type: TYPE_TB
  zh: '| `[--verbose=#](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_verbose)`
    | 输出中的详细程度 | (适用于基于MySQL 8.0的所有NDB版本) |'
- en: '| `[--version](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_version)`,`[-V](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_version)`
    | Display version information and exit | (Supported in all NDB releases based
    on MySQL 8.0) |'
  id: totrans-84
  prefs: []
  type: TYPE_TB
  zh: '| `[--version](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_version)`,`[-V](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_version)`
    | 显示版本信息并退出 | (适用于基于MySQL 8.0的所有NDB版本) |'
- en: '| `[--with-apply-status](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_with-apply-status)`
    | Restore the ndb_apply_status table. Requires --restore-data | ADDED: NDB 8.0.29
    |'
  id: totrans-85
  prefs: []
  type: TYPE_TB
  zh: '| `[--with-apply-status](https://wiki.example.org/mysql-cluster-programs-ndb-restore.html#option_ndb_restore_with-apply-status)`
    | 还原ndb_apply_status表。需要--restore-data | 新增：NDB 8.0.29 |'
- en: '| Format | Description | Added, Deprecated, or Removed |'
  id: totrans-86
  prefs: []
  type: TYPE_TB
  zh: '| 格式 | 描述 | 添加、弃用或移除 |'
- en: '[`--allow-pk-changes`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_allow-pk-changes)'
  id: totrans-87
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--allow-pk-changes`](https://wiki.example.org/mysql-cluster-programs-ndb-restore.html#option_ndb_restore_allow-pk-changes)'
- en: '| Command-Line Format | `--allow-pk-changes[=0&#124;1]` |'
  id: totrans-88
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--allow-pk-changes[=0&#124;1]` |'
- en: '| Introduced | 8.0.21-ndb-8.0.21 |'
  id: totrans-89
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 引入版本 | 8.0.21-ndb-8.0.21 |'
- en: '| Type | Integer |'
  id: totrans-90
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 整数 |'
- en: '| Default Value | `0` |'
  id: totrans-91
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `0` |'
- en: '| Minimum Value | `0` |'
  id: totrans-92
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 最小值 | `0` |'
- en: '| Maximum Value | `1` |'
  id: totrans-93
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 最大值 | `1` |'
- en: When this option is set to `1`, [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") allows the primary keys
    in a table definition to differ from that of the same table in the backup. This
    may be desirable when backing up and restoring between different schema versions
    with primary key changes on one or more tables, and it appears that performing
    the restore operation using ndb_restore is simpler or more efficient than issuing
    many [`ALTER TABLE`](alter-table.html "15.1.9 ALTER TABLE Statement") statements
    after restoring table schemas and data.
  id: totrans-94
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 当此选项设置为`1`时，[**ndb_restore**](https://wiki.example.org/mysql-cluster-programs-ndb-restore.html)允许表定义中的主键与备份中相同表的主键不同。当在不同模式版本之间备份和还原时，可能希望在一个或多个表上进行主键更改，而且执行还原操作使用ndb_restore比在还原表模式和数据后发出许多[`ALTER
    TABLE`](https://wiki.example.org/alter-table.html)语句更简单或更有效。
- en: 'The following changes in primary key definitions are supported by `--allow-pk-changes`:'
  id: totrans-95
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`--allow-pk-changes`支持以下主键定义的更改：'
- en: '**Extending the primary key**: A non-nullable column that exists in the table
    schema in the backup becomes part of the table''s primary key in the database.'
  id: totrans-96
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**扩展主键**：备份中表模式中存在的非空列将成为数据库中表的主键的一部分。'
- en: Important
  id: totrans-97
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: 重要提示
- en: When extending a table's primary key, any columns which become part of primary
    key must not be updated while the backup is being taken; any such updates discovered
    by [**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup") cause the restore operation to fail, even when
    no change in value takes place. In some cases, it may be possible to override
    this behavior using the [`--ignore-extended-pk-updates`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_ignore-extended-pk-updates)
    option; see the description of this option for more information.
  id: totrans-98
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在扩展表的主键时，任何成为主键一部分的列在备份时不能被更新；任何由[**ndb_restore**](https://wiki.example.org/mysql-cluster-programs-ndb-restore.html)发现的此类更新会导致还原操作失败，即使值没有发生变化。在某些情况下，可能可以使用[`--ignore-extended-pk-updates`](https://wiki.example.org/mysql-cluster-programs-ndb-restore.html#option_ndb_restore_ignore-extended-pk-updates)选项覆盖此行为；有关此选项的更多信息，请参阅该选项的描述。
- en: '**Contracting the primary key (1)**: A column that is already part of the table''s
    primary key in the backup schema is no longer part of the primary key, but remains
    in the table.'
  id: totrans-99
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**缩小主键（1）**：备份模式中已经是表主键一部分的列不再是主键的一部分，但仍然保留在表中。'
- en: '**Contracting the primary key (2)**: A column that is already part of the table''s
    primary key in the backup schema is removed from the table entirely.'
  id: totrans-100
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**缩小主键（2）**：备份模式中已经是表主键一部分的列将被完全从表中移除。'
- en: These differences can be combined with other schema differences supported by
    [**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup"), including changes to blob and text columns
    requiring the use of staging tables.
  id: totrans-101
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这些差异可以与[**ndb_restore**](https://wiki.example.org/mysql-cluster-programs-ndb-restore.html)支持的其他模式差异结合使用，包括需要使用分段表的blob和text列的更改。
- en: 'Basic steps in a typical scenario using primary key schema changes are listed
    here:'
  id: totrans-102
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 典型情景中使用主键模式更改的基本步骤如下：
- en: Restore table schemas using [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") [`--restore-meta`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_restore-meta)
  id: totrans-103
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用[**ndb_restore**](https://wiki.example.org/mysql-cluster-programs-ndb-restore.html)还原表模式[`--restore-meta`](https://wiki.example.org/mysql-cluster-programs-ndb-restore.html#option_ndb_restore_restore-meta)
- en: Alter schema to that desired, or create it
  id: totrans-104
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 更改模式为所需的模式，或创建它
- en: Back up the desired schema
  id: totrans-105
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 备份所需的模式
- en: Run [**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup") [`--disable-indexes`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_disable-indexes)
    using the backup from the previous step, to drop indexes and constraints
  id: totrans-106
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行[**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup") [`--disable-indexes`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_disable-indexes)使用上一步的备份，以删除索引和约束
- en: Run [**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup") [`--allow-pk-changes`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_allow-pk-changes)
    (possibly along with [`--ignore-extended-pk-updates`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_ignore-extended-pk-updates),
    [`--disable-indexes`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_disable-indexes),
    and possibly other options as needed) to restore all data
  id: totrans-107
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行[**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup") [`--allow-pk-changes`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_allow-pk-changes)（可能还包括[`--ignore-extended-pk-updates`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_ignore-extended-pk-updates)、[`--disable-indexes`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_disable-indexes)以及可能需要的其他选项）以恢复所有数据
- en: Run [**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup") [`--rebuild-indexes`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_rebuild-indexes)
    using the backup made with the desired schema, to rebuild indexes and constraints
  id: totrans-108
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行[**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup") [`--rebuild-indexes`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_rebuild-indexes)使用具有所需模式的备份，以重建索引和约束
- en: When extending the primary key, it may be necessary for [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") to use a temporary secondary
    unique index during the restore operation to map from the old primary key to the
    new one. Such an index is created only when necessary to apply events from the
    backup log to a table which has an extended primary key. This index is named `NDB$RESTORE_PK_MAPPING`,
    and is created on each table requiring it; it can be shared, if necessary, by
    multiple instances of [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") instances running in parallel.
    (Running [**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup") [`--rebuild-indexes`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_rebuild-indexes)
    at the end of the restore process causes this index to be dropped.)
  id: totrans-109
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在扩展主键时，可能需要[**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup")在恢复操作期间使用临时的次要唯一索引，以将旧主键映射到新主键。只有在需要将备份日志中的事件应用于具有扩展主键的表时，才会创建这样的索引。此索引命名为`NDB$RESTORE_PK_MAPPING`，并且在每个需要它的表上创建；如果需要，多个运行在并行的[**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup")实例可以共享它。（在恢复过程结束时运行[**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") [`--rebuild-indexes`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_rebuild-indexes)会导致此索引被删除。）
- en: '[`--append`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_append)'
  id: totrans-110
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--append`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_append)'
- en: '| Command-Line Format | `--append` |'
  id: totrans-111
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--append` |'
- en: When used with the [`--tab`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_tab)
    and [`--print-data`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_print-data)
    options, this causes the data to be appended to any existing files having the
    same names.
  id: totrans-112
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 当与[`--tab`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_tab)和[`--print-data`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_print-data)选项一起使用时，这会导致数据附加到具有相同名称的任何现有文件中。
- en: '[`--backup-path`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_backup-path)=*`dir_name`*'
  id: totrans-113
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--backup-path`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_backup-path)=*`dir_name`*'
- en: '| Command-Line Format | `--backup-path=path` |'
  id: totrans-114
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--backup-path=path` |'
- en: '| Type | Directory name |'
  id: totrans-115
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 目录名称 |'
- en: '| Default Value | `./` |'
  id: totrans-116
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `./` |'
- en: The path to the backup directory is required; this is supplied to [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") using the `--backup-path`
    option, and must include the subdirectory corresponding to the ID backup of the
    backup to be restored. For example, if the data node's [`DataDir`](mysql-cluster-ndbd-definition.html#ndbparam-ndbd-datadir)
    is `/var/lib/mysql-cluster`, then the backup directory is `/var/lib/mysql-cluster/BACKUP`,
    and the backup files for the backup with the ID 3 can be found in `/var/lib/mysql-cluster/BACKUP/BACKUP-3`.
    The path may be absolute or relative to the directory in which the [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") executable is located,
    and may be optionally prefixed with `backup-path=`.
  id: totrans-117
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 必须提供备份目录的路径；这通过 `--backup-path` 选项提供给[**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup")，并且必须包括与要恢复的备份的 ID 相对应的子目录。例如，如果数据节点的
    [`DataDir`](mysql-cluster-ndbd-definition.html#ndbparam-ndbd-datadir) 是 `/var/lib/mysql-cluster`，那么备份目录是
    `/var/lib/mysql-cluster/BACKUP`，备份 ID 为 3 的备份文件可以在 `/var/lib/mysql-cluster/BACKUP/BACKUP-3`
    中找到。路径可以是绝对路径，也可以是相对于[**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup")可执行文件所在目录的路径，并且可以选择性地加上
    `backup-path=` 前缀。
- en: It is possible to restore a backup to a database with a different configuration
    than it was created from. For example, suppose that a backup with backup ID `12`,
    created in a cluster with two storage nodes having the node IDs `2` and `3`, is
    to be restored to a cluster with four nodes. Then [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") must be run twice—once
    for each storage node in the cluster where the backup was taken. However, [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") cannot always restore backups
    made from a cluster running one version of MySQL to a cluster running a different
    MySQL version. See [Section 25.3.7, “Upgrading and Downgrading NDB Cluster”](mysql-cluster-upgrade-downgrade.html
    "25.3.7 Upgrading and Downgrading NDB Cluster"), for more information.
  id: totrans-118
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 可以将备份恢复到与创建时不同配置的数据库。例如，假设在具有节点 ID `2` 和 `3` 的两个存储节点的集群中创建的备份 ID 为 `12` 的备份，需要恢复到具有四个节点的集群中。那么必须分别在备份所在集群的每个存储节点上运行[**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup")两次。然而，[**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") 不能总是将从运行不同 MySQL 版本的集群中制作的备份恢复到运行不同
    MySQL 版本的集群中。有关更多信息，请参见[第 25.3.7 节，“NDB 集群升级和降级”](mysql-cluster-upgrade-downgrade.html
    "25.3.7 Upgrading and Downgrading NDB Cluster")。
- en: Important
  id: totrans-119
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 重要
- en: It is not possible to restore a backup made from a newer version of NDB Cluster
    using an older version of [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup"). You can restore a backup
    made from a newer version of MySQL to an older cluster, but you must use a copy
    of [**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup") from the newer NDB Cluster version to do so.
  id: totrans-120
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 无法使用较旧版本的[**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup")恢复从较新版本的 NDB Cluster 制作的备份。可以将从较新版本的 MySQL 制作的备份恢复到较旧的集群，但必须使用较新
    NDB Cluster 版本的[**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup")的副本来执行此操作。
- en: For example, to restore a cluster backup taken from a cluster running NDB Cluster
    8.0.35 to a cluster running NDB Cluster 7.6.28, you must use the [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") that comes with the NDB
    Cluster 7.6.28 distribution.
  id: totrans-121
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 例如，要将从运行 NDB Cluster 8.0.35 的集群中获取的集群备份恢复到运行 NDB Cluster 7.6.28 的集群中，必须使用随 NDB
    Cluster 7.6.28 发行的[**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup")。
- en: For more rapid restoration, the data may be restored in parallel, provided that
    there is a sufficient number of cluster connections available. That is, when restoring
    to multiple nodes in parallel, you must have an `[api]` or `[mysqld]` section
    in the cluster `config.ini` file available for each concurrent [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") process. However, the data
    files must always be applied before the logs.
  id: totrans-122
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 为了更快地恢复，可以并行恢复数据，前提是有足够数量的集群连接可用。也就是说，当并行恢复到多个节点时，必须为每个并发的[**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup")进程在集群`config.ini`文件中有一个`[api]`或`[mysqld]`部分可用。但是，数据文件必须始终先于日志应用。
- en: '[`--backup-password=*`password`*`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_backup-password)'
  id: totrans-123
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--backup-password=*`password`*`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_backup-password)'
- en: '| Command-Line Format | `--backup-password=password` |'
  id: totrans-124
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--backup-password=password` |'
- en: '| Introduced | 8.0.22-ndb-8.0.22 |'
  id: totrans-125
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 引入版本 | 8.0.22-ndb-8.0.22 |'
- en: '| Type | String |'
  id: totrans-126
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 字符串 |'
- en: '| Default Value | `[none]` |'
  id: totrans-127
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `[none]` |'
- en: This option specifies a password to be used when decrypting an encrypted backup
    with the [`--decrypt`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_decrypt)
    option. This must be the same password that was used to encrypt the backup.
  id: totrans-128
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此选项指定在使用[`--decrypt`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_decrypt)选项解密加密备份时要使用的密码。这必须是用于加密备份的相同密码。
- en: The password must be 1 to 256 characters in length, and must be enclosed by
    single or double quotation marks. It can contain any of the ASCII characters having
    character codes 32, 35, 38, 40-91, 93, 95, and 97-126; in other words, it can
    use any printable ASCII characters except for `!`, `'`, `"`, `$`, `%`, `\`, and
    `^`.
  id: totrans-129
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 密码必须为1到256个字符，并且必须用单引号或双引号括起来。它可以包含ASCII字符代码为32、35、38、40-91、93、95和97-126的任何ASCII字符；换句话说，它可以使用除了`!`、`'`、`"`、`$`、`%`、`\`和`^`之外的任何可打印ASCII字符。
- en: In MySQL 8.0.24 and later, it is possible to omit the password, in which case
    [**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup") waits for it to be supplied from `stdin`, as
    when using [`--backup-password-from-stdin`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_backup-password-from-stdin).
  id: totrans-130
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在MySQL 8.0.24及更高版本中，可以省略密码，此时[**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup")将等待从`stdin`提供密码，就像在使用[`--backup-password-from-stdin`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_backup-password-from-stdin)时一样。
- en: '[`--backup-password-from-stdin[=TRUE|FALSE]`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_backup-password-from-stdin)'
  id: totrans-131
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--backup-password-from-stdin[=TRUE|FALSE]`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_backup-password-from-stdin)'
- en: '| Command-Line Format | `--backup-password-from-stdin` |'
  id: totrans-132
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--backup-password-from-stdin` |'
- en: '| Introduced | 8.0.24-ndb-8.0.24 |'
  id: totrans-133
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 引入版本 | 8.0.24-ndb-8.0.24 |'
- en: When used in place of [`--backup-password`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_backup-password),
    this option enables input of the backup password from the system shell (`stdin`),
    similar to how this is done when supplying the password interactively to [**mysql**](mysql.html
    "6.5.1 mysql — The MySQL Command-Line Client") when using the [`--password`](mysql-command-options.html#option_mysql_password)
    without supplying the password on the command line.
  id: totrans-134
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 当用于替代[`--backup-password`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_backup-password)时，此选项允许从系统shell（`stdin`）输入备份密码，类似于在使用[`--password`](mysql-command-options.html#option_mysql_password)时交互地向[**mysql**](mysql.html
    "6.5.1 mysql — The MySQL Command-Line Client")提供密码而不在命令行上提供密码时的操作。
- en: '[`--backupid`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_backupid)=*`#`*,
    `-b`'
  id: totrans-135
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--backupid`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_backupid)=*`#`*,
    `-b`'
- en: '| Command-Line Format | `--backupid=#` |'
  id: totrans-136
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--backupid=#` |'
- en: '| Type | Numeric |'
  id: totrans-137
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 数字 |'
- en: '| Default Value | `none` |'
  id: totrans-138
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `none` |'
- en: This option is used to specify the ID or sequence number of the backup, and
    is the same number shown by the management client in the `Backup *`backup_id`*
    completed` message displayed upon completion of a backup. (See [Section 25.6.8.2,
    “Using The NDB Cluster Management Client to Create a Backup”](mysql-cluster-backup-using-management-client.html
    "25.6.8.2 Using The NDB Cluster Management Client to Create a Backup").)
  id: totrans-139
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此选项用于指定备份的ID或序列号，与管理客户端在完成备份时显示的`Backup *`backup_id`* completed`消息中显示的数字相同（请参阅[第25.6.8.2节，“使用NDB集群管理客户端创建备份”](mysql-cluster-backup-using-management-client.html
    "25.6.8.2 Using The NDB Cluster Management Client to Create a Backup")）。
- en: Important
  id: totrans-140
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 重要
- en: When restoring cluster backups, you must be sure to restore all data nodes from
    backups having the same backup ID. Using files from different backups results
    at best in restoring the cluster to an inconsistent state, and is likely to fail
    altogether.
  id: totrans-141
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在恢复集群备份时，必须确保从具有相同备份ID的备份中恢复所有数据节点。使用来自不同备份的文件最多会导致将集群恢复到不一致状态，并且很可能完全失败。
- en: In NDB 8.0, this option is required.
  id: totrans-142
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在 NDB 8.0 中，此选项是必需的。
- en: '[`--character-sets-dir`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_character-sets-dir)'
  id: totrans-143
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--character-sets-dir`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_character-sets-dir)'
- en: '| Command-Line Format | `--character-sets-dir=path` |'
  id: totrans-144
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--character-sets-dir=path` |'
- en: '| Removed | 8.0.31 |'
  id: totrans-145
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 已移除 | 8.0.31 |'
- en: Directory containing character sets.
  id: totrans-146
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 包含字符集的目录。
- en: '[`--connect`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_connect),
    `-c`'
  id: totrans-147
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--connect`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_connect),
    `-c`'
- en: '| Command-Line Format | `--connect=connection_string` |'
  id: totrans-148
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--connect=connection_string` |'
- en: '| Type | String |'
  id: totrans-149
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 字符串 |'
- en: '| Default Value | `localhost:1186` |'
  id: totrans-150
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `localhost:1186` |'
- en: Alias for [`--ndb-connectstring`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_ndb-connectstring).
  id: totrans-151
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[`--ndb-connectstring`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_ndb-connectstring)
    的别名。'
- en: '[`--connect-retries`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_connect-retries)'
  id: totrans-152
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--connect-retries`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_connect-retries)'
- en: '| Command-Line Format | `--connect-retries=#` |'
  id: totrans-153
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--connect-retries=#` |'
- en: '| Type | Integer |'
  id: totrans-154
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 整数 |'
- en: '| Default Value | `12` |'
  id: totrans-155
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `12` |'
- en: '| Minimum Value | `0` |'
  id: totrans-156
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 最小值 | `0` |'
- en: '| Maximum Value | `12` |'
  id: totrans-157
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 最大值 | `12` |'
- en: Number of times to retry connection before giving up.
  id: totrans-158
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在放弃之前重试连接的次数。
- en: '[`--connect-retry-delay`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_connect-retry-delay)'
  id: totrans-159
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--connect-retry-delay`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_connect-retry-delay)'
- en: '| Command-Line Format | `--connect-retry-delay=#` |'
  id: totrans-160
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--connect-retry-delay=#` |'
- en: '| Type | Integer |'
  id: totrans-161
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 整数 |'
- en: '| Default Value | `5` |'
  id: totrans-162
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `5` |'
- en: '| Minimum Value | `0` |'
  id: totrans-163
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 最小值 | `0` |'
- en: '| Maximum Value | `5` |'
  id: totrans-164
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 最大值 | `5` |'
- en: Number of seconds to wait between attempts to contact management server.
  id: totrans-165
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 尝试联系管理服务器之间等待的秒数。
- en: '[`--connect-string`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_connect-string)'
  id: totrans-166
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--connect-string`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_connect-string)'
- en: '| Command-Line Format | `--connect-string=connection_string` |'
  id: totrans-167
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--connect-string=connection_string` |'
- en: '| Type | String |'
  id: totrans-168
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 字符串 |'
- en: '| Default Value | `[none]` |'
  id: totrans-169
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `[none]` |'
- en: Same as [`--ndb-connectstring`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_ndb-connectstring).
  id: totrans-170
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 与 [`--ndb-connectstring`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_ndb-connectstring)
    相同。
- en: '[`--core-file`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_core-file)'
  id: totrans-171
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--core-file`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_core-file)'
- en: '| Command-Line Format | `--core-file` |'
  id: totrans-172
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--core-file` |'
- en: Write core file on error; used in debugging.
  id: totrans-173
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在错误时写入核心文件；用于调试。
- en: '[`--decrypt`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_decrypt)'
  id: totrans-174
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--decrypt`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_decrypt)'
- en: '| Command-Line Format | `--decrypt` |'
  id: totrans-175
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--decrypt` |'
- en: '| Introduced | 8.0.22-ndb-8.0.22 |'
  id: totrans-176
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 引入 | 8.0.22-ndb-8.0.22 |'
- en: Decrypt an encrypted backup using the password supplied by the [`--backup-password`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_backup-password)
    option.
  id: totrans-177
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 使用由 [`--backup-password`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_backup-password)
    选项提供的密码解密加密备份。
- en: '[`--defaults-extra-file`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_defaults-extra-file)'
  id: totrans-178
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--defaults-extra-file`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_defaults-extra-file)'
- en: '| Command-Line Format | `--defaults-extra-file=path` |'
  id: totrans-179
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--defaults-extra-file=path` |'
- en: '| Type | String |'
  id: totrans-180
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 字符串 |'
- en: '| Default Value | `[none]` |'
  id: totrans-181
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `[none]` |'
- en: Read given file after global files are read.
  id: totrans-182
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在读取全局文件后读取给定文件。
- en: '[`--defaults-file`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_defaults-file)'
  id: totrans-183
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--defaults-file`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_defaults-file)'
- en: '| Command-Line Format | `--defaults-file=path` |'
  id: totrans-184
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--defaults-file=path` |'
- en: '| Type | String |'
  id: totrans-185
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 字符串 |'
- en: '| Default Value | `[none]` |'
  id: totrans-186
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `[none]` |'
- en: Read default options from given file only.
  id: totrans-187
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 仅从给定文件中读取默认选项。
- en: '[`--defaults-group-suffix`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_defaults-group-suffix)'
  id: totrans-188
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--defaults-group-suffix`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_defaults-group-suffix)'
- en: '| Command-Line Format | `--defaults-group-suffix=string` |'
  id: totrans-189
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--defaults-group-suffix=string` |'
- en: '| Type | String |'
  id: totrans-190
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 字符串 |'
- en: '| Default Value | `[none]` |'
  id: totrans-191
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `[none]` |'
- en: Also read groups with concat(group, suffix).
  id: totrans-192
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 也读取带有 concat(group, suffix) 的组。
- en: '[`--disable-indexes`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_disable-indexes)'
  id: totrans-193
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--disable-indexes`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_disable-indexes)'
- en: '| Command-Line Format | `--disable-indexes` |'
  id: totrans-194
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--disable-indexes` |'
- en: Disable restoration of indexes during restoration of the data from a native
    `NDB` backup. Afterwards, you can restore indexes for all tables at once with
    multithreaded building of indexes using [`--rebuild-indexes`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_rebuild-indexes),
    which should be faster than rebuilding indexes concurrently for very large tables.
  id: totrans-195
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在从本机`NDB`备份中恢复数据时禁用索引的恢复。之后，您可以使用多线程构建索引一次性为所有表恢复索引，使用[`--rebuild-indexes`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_rebuild-indexes)，这应该比为非常大的表同时重建索引更快。
- en: In NDB 8.0.27 and later, this option also drops any foreign keys specified in
    the backup.
  id: totrans-196
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在NDB 8.0.27及更高版本中，此选项还会删除备份中指定的任何外键。
- en: 'Prior to NDB 8.0.29, attempting to access from MySQL an `NDB` table for which
    one or more indexes could not be found was always rejected with error [`4243`](/doc/ndbapi/en/ndb-error-codes-application-error.html#ndberrno-4243)
    Index not found. Beginning with NDB 8.0.29, it is possible for MySQL to open such
    a table, provided the query does not use any of the affected indexes; otherwise
    the query is rejected with [`ER_NOT_KEYFILE`](/doc/mysql-errors/8.0/en/server-error-reference.html#error_er_not_keyfile).
    In the latter case, you can temporarily work around the problem by executing an
    [`ALTER TABLE`](alter-table.html "15.1.9 ALTER TABLE Statement") statement such
    as this one:'
  id: totrans-197
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在NDB 8.0.29之前，尝试从MySQL访问一个`NDB`表，其中一个或多个索引找不到时，总是会被拒绝并显示错误[`4243`](/doc/ndbapi/en/ndb-error-codes-application-error.html#ndberrno-4243)
    索引未找到。从NDB 8.0.29开始，MySQL可以打开这样的表，前提是查询不使用任何受影响的索引；否则查询将被拒绝并显示[`ER_NOT_KEYFILE`](/doc/mysql-errors/8.0/en/server-error-reference.html#error_er_not_keyfile)。在后一种情况下，您可以通过执行类似于以下语句的[`ALTER
    TABLE`](alter-table.html "15.1.9 ALTER TABLE Statement")语句来暂时解决问题：
- en: '[PRE0]'
  id: totrans-198
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: This causes MySQL to ignore the index `idx` on table `tbl`. See [Primary Keys
    and Indexes](alter-table.html#alter-table-index "Primary Keys and Indexes"), for
    more information.
  id: totrans-199
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这会导致MySQL忽略表`tbl`上的索引`idx`。有关更多信息，请参阅[主键和索引](alter-table.html#alter-table-index
    "主键和索引")。
- en: '[`--dont-ignore-systab-0`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_dont-ignore-systab-0),
    `-f`'
  id: totrans-200
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--dont-ignore-systab-0`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_dont-ignore-systab-0),
    `-f`'
- en: '| Command-Line Format | `--dont-ignore-systab-0` |'
  id: totrans-201
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--dont-ignore-systab-0` |'
- en: Normally, when restoring table data and metadata, [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") ignores the copy of the
    [`NDB`](mysql-cluster.html "Chapter 25 MySQL NDB Cluster 8.0") system table that
    is present in the backup. `--dont-ignore-systab-0` causes the system table to
    be restored. *This option is intended for experimental and development use only,
    and is not recommended in a production environment*.
  id: totrans-202
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 通常，在恢复表数据和元数据时，[**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup")会忽略备份中存在的[`NDB`](mysql-cluster.html "第25章 MySQL
    NDB Cluster 8.0")系统表的副本。`--dont-ignore-systab-0`会导致系统表被恢复。*此选项仅供实验和开发使用，不建议在生产环境中使用*。
- en: '[`--exclude-databases`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_exclude-databases)=*`db-list`*'
  id: totrans-203
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--exclude-databases`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_exclude-databases)=*`db-list`*'
- en: '| Command-Line Format | `--exclude-databases=list` |'
  id: totrans-204
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--exclude-databases=list` |'
- en: '| Type | String |'
  id: totrans-205
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 字符串 |'
- en: '| Default Value |  |'
  id: totrans-206
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 |  |'
- en: Comma-delimited list of one or more databases which should not be restored.
  id: totrans-207
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 逗号分隔的一个或多个不应恢复的数据库列表。
- en: This option is often used in combination with [`--exclude-tables`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_exclude-tables);
    see that option's description for further information and examples.
  id: totrans-208
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这个选项通常与[`--exclude-tables`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_exclude-tables)结合使用；请参阅该选项的描述以获取更多信息和示例。
- en: '[`--exclude-intermediate-sql-tables[`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_exclude-intermediate-sql-tables)=*`TRUE|FALSE]`*'
  id: totrans-209
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--exclude-intermediate-sql-tables[`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_exclude-intermediate-sql-tables)=*`TRUE|FALSE]`*'
- en: '| Command-Line Format | `--exclude-intermediate-sql-tables[=TRUE&#124;FALSE]`
    |'
  id: totrans-210
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--exclude-intermediate-sql-tables[=TRUE&#124;FALSE]` |'
- en: '| Type | Boolean |'
  id: totrans-211
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 布尔值 |'
- en: '| Default Value | `TRUE` |'
  id: totrans-212
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `TRUE` |'
- en: When performing copying [`ALTER TABLE`](alter-table.html "15.1.9 ALTER TABLE
    Statement") operations, [**mysqld**](mysqld.html "6.3.1 mysqld — The MySQL Server")
    creates intermediate tables (whose names are prefixed with `#sql-`). When `TRUE`,
    the `--exclude-intermediate-sql-tables` option keeps [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") from restoring such tables
    that may have been left over from these operations. This option is `TRUE` by default.
  id: totrans-213
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在执行复制[`ALTER TABLE`](alter-table.html "15.1.9 ALTER TABLE Statement")操作时，[**mysqld**](mysqld.html
    "6.3.1 mysqld — The MySQL Server")会创建中间表（其名称以`#sql-`为前缀）。当为`TRUE`时，`--exclude-intermediate-sql-tables`选项会阻止[**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup")从恢复这些可能残留的表。此选项默认为`TRUE`。
- en: '[`--exclude-missing-columns`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_exclude-missing-columns)'
  id: totrans-214
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--exclude-missing-columns`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_exclude-missing-columns)'
- en: '| Command-Line Format | `--exclude-missing-columns` |'
  id: totrans-215
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--exclude-missing-columns` |'
- en: It is possible to restore only selected table columns using this option, which
    causes [**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup") to ignore any columns missing from tables being
    restored as compared to the versions of those tables found in the backup. This
    option applies to all tables being restored. If you wish to apply this option
    only to selected tables or databases, you can use it in combination with one or
    more of the `--include-*` or `--exclude-*` options described elsewhere in this
    section to do so, then restore data to the remaining tables using a complementary
    set of these options.
  id: totrans-216
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 可以使用此选项仅恢复选定的表列，这会导致[**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup")忽略备份中与正在恢复的表版本中缺失的任何列。此选项适用于所有正在恢复的表。如果希望仅将此选项应用于选定的表或数据库，可以将其与本节其他地方描述的一个或多个`--include-*`或`--exclude-*`选项结合使用，然后使用一组补充选项将数据恢复到其余表中。
- en: '[`--exclude-missing-tables`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_exclude-missing-tables)'
  id: totrans-217
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--exclude-missing-tables`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_exclude-missing-tables)'
- en: '| Command-Line Format | `--exclude-missing-tables` |'
  id: totrans-218
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--exclude-missing-tables` |'
- en: It is possible to restore only selected tables using this option, which causes
    [**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup") to ignore any tables from the backup that are
    not found in the target database.
  id: totrans-219
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 可以使用此选项仅恢复选定的表，这会导致[**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup")忽略备份中未在目标数据库中找到的任何表。
- en: '[`--exclude-tables`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_exclude-tables)=*`table-list`*'
  id: totrans-220
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--exclude-tables`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_exclude-tables)=*`table-list`*'
- en: '| Command-Line Format | `--exclude-tables=list` |'
  id: totrans-221
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--exclude-tables=list` |'
- en: '| Type | String |'
  id: totrans-222
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 字符串 |'
- en: '| Default Value |  |'
  id: totrans-223
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 |  |'
- en: List of one or more tables to exclude; each table reference must include the
    database name. Often used together with [`--exclude-databases`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_exclude-databases).
  id: totrans-224
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 列出一个或多个要排除的表；每个表引用必须包括数据库名称。通常与[`--exclude-databases`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_exclude-databases)一起使用。
- en: When [`--exclude-databases`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_exclude-databases)
    or `--exclude-tables` is used, only those databases or tables named by the option
    are excluded; all other databases and tables are restored by [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup").
  id: totrans-225
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 当使用[`--exclude-databases`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_exclude-databases)或`--exclude-tables`时，仅排除选项命名的那些数据库或表；所有其他数据库和表都会被[**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup")恢复。
- en: 'This table shows several invocations of [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") using `--exclude-*` options
    (other options possibly required have been omitted for clarity), and the effects
    these options have on restoring from an NDB Cluster backup:'
  id: totrans-226
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 本表显示了使用`--exclude-*`选项（为清晰起见，可能需要的其他选项已被省略）调用[**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup")的几种情况，以及这些选项对从NDB Cluster备份中恢复的影响：
- en: '**Table 25.43 Several invocations of ndb_restore using --exclude-* options,
    and the effects these options have on restoring from an NDB Cluster backup.**'
  id: totrans-227
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**表 25.43 使用--exclude-*选项进行多次调用ndb_restore，并这些选项对从NDB Cluster备份中恢复的影响。**'
- en: '| Option | Result |'
  id: totrans-228
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 选项 | 结果 |'
- en: '| `--exclude-databases=db1` | All tables in all databases except `db1` are
    restored; no tables in `db1` are restored |'
  id: totrans-229
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| `--exclude-databases=db1` | 所有数据库中除了`db1`的所有表都会被恢复；`db1`中的表不会被恢复 |'
- en: '| `--exclude-databases=db1,db2` (or `--exclude-databases=db1` `--exclude-databases=db2`)
    | All tables in all databases except `db1` and `db2` are restored; no tables in
    `db1` or `db2` are restored |'
  id: totrans-230
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| `--exclude-databases=db1,db2`（或`--exclude-databases=db1` `--exclude-databases=db2`）
    | 所有数据库中除了`db1`和`db2`的所有表都会被恢复；`db1`或`db2`中的表不会被恢复 |'
- en: '| `--exclude-tables=db1.t1` | All tables except `t1` in database `db1` are
    restored; all other tables in `db1` are restored; all tables in all other databases
    are restored |'
  id: totrans-231
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| `--exclude-tables=db1.t1` | 除了`db1`中的`t1`之外的所有表都会被恢复；`db1`中的所有其他表都会被恢复；所有其他数据库中的表都会被恢复
    |'
- en: '| `--exclude-tables=db1.t2,db2.t1` (or `--exclude-tables=db1.t2` `--exclude-tables=db2.t1)`
    | All tables in database `db1` except for `t2` and all tables in database `db2`
    except for table `t1` are restored; no other tables in `db1` or `db2` are restored;
    all tables in all other databases are restored |'
  id: totrans-232
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| `--exclude-tables=db1.t2,db2.t1`（或`--exclude-tables=db1.t2` `--exclude-tables=db2.t1)`
    | 除了数据库`db1`中的`t2`和数据库`db2`中的表`t1`之外的所有表都会被恢复；`db1`或`db2`中的其他表不会被恢复；所有其他数据库中的表都会被恢复
    |'
- en: 'You can use these two options together. For example, the following causes all
    tables in all databases *except for* databases `db1` and `db2`, and tables `t1`
    and `t2` in database `db3`, to be restored:'
  id: totrans-233
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 您可以一起使用这两个选项。例如，以下操作会导致所有数据库中的所有表*除了*数据库`db1`和`db2`以及数据库`db3`中的表`t1`和`t2`被恢复：
- en: '[PRE1]'
  id: totrans-234
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: (Again, we have omitted other possibly necessary options in the interest of
    clarity and brevity from the example just shown.)
  id: totrans-235
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: （同样，为了清晰和简洁起见，我们已经省略了示例中可能需要的其他选项。）
- en: 'You can use `--include-*` and `--exclude-*` options together, subject to the
    following rules:'
  id: totrans-236
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 您可以一起使用`--include-*`和`--exclude-*`选项，但必须遵守以下规则：
- en: The actions of all `--include-*` and `--exclude-*` options are cumulative.
  id: totrans-237
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 所有`--include-*`和`--exclude-*`选项的操作是累积的。
- en: All `--include-*` and `--exclude-*` options are evaluated in the order passed
    to ndb_restore, from right to left.
  id: totrans-238
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 所有`--include-*`和`--exclude-*`选项都按照传递给ndb_restore的顺序从右到左进行评估。
- en: In the event of conflicting options, the first (rightmost) option takes precedence.
    In other words, the first option (going from right to left) that matches against
    a given database or table “wins”.
  id: totrans-239
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在存在冲突选项的情况下，第一个（最右侧）选项优先。换句话说，从右到左的第一个选项（匹配给定数据库或表）“获胜”。
- en: 'For example, the following set of options causes [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") to restore all tables from
    database `db1` except `db1.t1`, while restoring no other tables from any other
    databases:'
  id: totrans-240
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 例如，以下选项集导致[**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup")从数据库`db1`中恢复所有表，除了`db1.t1`，同时不恢复来自任何其他数据库的表：
- en: '[PRE2]'
  id: totrans-241
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'However, reversing the order of the options just given simply causes all tables
    from database `db1` to be restored (including `db1.t1`, but no tables from any
    other database), because the [`--include-databases`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_include-databases)
    option, being farthest to the right, is the first match against database `db1`
    and thus takes precedence over any other option that matches `db1` or any tables
    in `db1`:'
  id: totrans-242
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 然而，简单地颠倒给定选项的顺序会导致所有来自数据库`db1`的表被恢复（包括`db1.t1`，但不包括来自任何其他数据库的表），因为[`--include-databases`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_include-databases)选项位于最右侧，首先匹配数据库`db1`，因此优先于匹配`db1`或`db1`中任何表的任何其他选项：
- en: '[PRE3]'
  id: totrans-243
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '[`--fields-enclosed-by`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_fields-enclosed-by)=*`char`*'
  id: totrans-244
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--fields-enclosed-by`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_fields-enclosed-by)=*`char`*'
- en: '| Command-Line Format | `--fields-enclosed-by=char` |'
  id: totrans-245
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--fields-enclosed-by=char` |'
- en: '| Type | String |'
  id: totrans-246
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 字符串 |'
- en: '| Default Value |  |'
  id: totrans-247
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 |  |'
- en: Each column value is enclosed by the string passed to this option (regardless
    of data type; see the description of [`--fields-optionally-enclosed-by`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_fields-optionally-enclosed-by)).
  id: totrans-248
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 每个列值都由传递给此选项的字符串括起来（不管数据类型如何；请参阅[`--fields-optionally-enclosed-by`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_fields-optionally-enclosed-by)的描述）。
- en: '[`--fields-optionally-enclosed-by`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_fields-optionally-enclosed-by)'
  id: totrans-249
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--fields-optionally-enclosed-by`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_fields-optionally-enclosed-by)'
- en: '| Command-Line Format | `--fields-optionally-enclosed-by` |'
  id: totrans-250
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--fields-optionally-enclosed-by` |'
- en: '| Type | String |'
  id: totrans-251
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 字符串 |'
- en: '| Default Value |  |'
  id: totrans-252
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 |  |'
- en: The string passed to this option is used to enclose column values containing
    character data (such as [`CHAR`](char.html "13.3.2 The CHAR and VARCHAR Types"),
    [`VARCHAR`](char.html "13.3.2 The CHAR and VARCHAR Types"), [`BINARY`](binary-varbinary.html
    "13.3.3 The BINARY and VARBINARY Types"), [`TEXT`](blob.html "13.3.4 The BLOB
    and TEXT Types"), or [`ENUM`](enum.html "13.3.5 The ENUM Type")).
  id: totrans-253
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 传递给此选项的字符串用于包含包含字符数据（如[`CHAR`](char.html "13.3.2 The CHAR and VARCHAR Types")、[`VARCHAR`](char.html
    "13.3.2 The CHAR and VARCHAR Types")、[`BINARY`](binary-varbinary.html "13.3.3 The
    BINARY and VARBINARY Types")、[`TEXT`](blob.html "13.3.4 The BLOB and TEXT Types")或[`ENUM`](enum.html
    "13.3.5 The ENUM Type")）的列值。
- en: '[`--fields-terminated-by`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_fields-terminated-by)=*`char`*'
  id: totrans-254
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--fields-terminated-by`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_fields-terminated-by)=*`char`*'
- en: '| Command-Line Format | `--fields-terminated-by=char` |'
  id: totrans-255
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--fields-terminated-by=char` |'
- en: '| Type | String |'
  id: totrans-256
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 字符串 |'
- en: '| Default Value | `\t (tab)` |'
  id: totrans-257
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `\t (制表符)` |'
- en: The string passed to this option is used to separate column values. The default
    value is a tab character (`\t`).
  id: totrans-258
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 传递给此选项的字符串用于分隔列值。默认值是制表符（`\t`）。
- en: '[`--help`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_help)'
  id: totrans-259
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--help`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_help)'
- en: '| Command-Line Format | `--help` |'
  id: totrans-260
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--help` |'
- en: Display help text and exit.
  id: totrans-261
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 显示帮助文本并退出。
- en: '[`--hex`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_hex)'
  id: totrans-262
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--hex`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_hex)'
- en: '| Command-Line Format | `--hex` |'
  id: totrans-263
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--hex` |'
- en: If this option is used, all binary values are output in hexadecimal format.
  id: totrans-264
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果使用了此选项，则所有二进制值都以十六进制格式输出。
- en: '[`--ignore-extended-pk-updates`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_ignore-extended-pk-updates)'
  id: totrans-265
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--ignore-extended-pk-updates`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_ignore-extended-pk-updates)'
- en: '| Command-Line Format | `--ignore-extended-pk-updates[=0&#124;1]` |'
  id: totrans-266
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--ignore-extended-pk-updates[=0&#124;1]` |'
- en: '| Introduced | 8.0.21-ndb-8.0.21 |'
  id: totrans-267
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 引入版本 | 8.0.21-ndb-8.0.21 |'
- en: '| Type | Integer |'
  id: totrans-268
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 整数 |'
- en: '| Default Value | `0` |'
  id: totrans-269
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `0` |'
- en: '| Minimum Value | `0` |'
  id: totrans-270
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 最小值 | `0` |'
- en: '| Maximum Value | `1` |'
  id: totrans-271
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 最大值 | `1` |'
- en: When using [`--allow-pk-changes`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_allow-pk-changes),
    columns which become part of a table's primary key must not be updated while the
    backup is being taken; such columns should keep the same values from the time
    values are inserted into them until the rows containing the values are deleted.
    If [**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup") encounters updates to these columns when restoring
    a backup, the restore fails. Because some applications may set values for all
    columns when updating a row, even when some column values are not changed, the
    backup may include log events appearing to update columns which are not in fact
    modified. In such cases you can set `--ignore-extended-pk-updates` to `1`, forcing
    [**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup") to ignore such updates.
  id: totrans-272
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在使用[`--allow-pk-changes`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_allow-pk-changes)时，成为表主键一部分的列在备份过程中不能被更新；这些列应该保持与插入值相同的值，直到包含这些值的行被删除。如果[**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup")在恢复备份时遇到这些列的更新，恢复将失败。因为一些应用程序在更新行时可能为所有列设置值，即使有些列的值没有改变，备份可能包含看似更新未实际修改的列的日志事件。在这种情况下，您可以将`--ignore-extended-pk-updates`设置为`1`，强制[**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup")忽略这样的更新。
- en: Important
  id: totrans-273
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 重要
- en: When causing these updates to be ignored, the user is responsible for ensuring
    that there are no updates to the values of any columns that become part of the
    primary key.
  id: totrans-274
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 当导致这些更新被忽略时，用户有责任确保任何成为主键一部分的列的值没有更新。
- en: For more information, see the description of [`--allow-pk-changes`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_allow-pk-changes).
  id: totrans-275
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 更多信息，请参阅[`--allow-pk-changes`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_allow-pk-changes)的描述。
- en: '[`--include-databases`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_include-databases)=*`db-list`*'
  id: totrans-276
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--include-databases`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_include-databases)=*`db-list`*'
- en: '| Command-Line Format | `--include-databases=list` |'
  id: totrans-277
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--include-databases=list` |'
- en: '| Type | String |'
  id: totrans-278
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 字符串 |'
- en: '| Default Value |  |'
  id: totrans-279
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 |  |'
- en: Comma-delimited list of one or more databases to restore. Often used together
    with [`--include-tables`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_include-tables);
    see the description of that option for further information and examples.
  id: totrans-280
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 逗号分隔的一个或多个要恢复的数据库列表。通常与[`--include-tables`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_include-tables)一起使用；有关更多信息和示例，请参阅该选项的描述。
- en: '[`--include-stored-grants`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_include-stored-grants)'
  id: totrans-281
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--include-stored-grants`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_include-stored-grants)'
- en: '| Command-Line Format | `--include-stored-grants` |'
  id: totrans-282
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--include-stored-grants` |'
- en: '| Introduced | 8.0.19-ndb-8.0.19 |'
  id: totrans-283
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 引入版本 | 8.0.19-ndb-8.0.19 |'
- en: In NDB 8.0, [**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup") does not by default restore shared users and
    grants (see [Section 25.6.13, “Privilege Synchronization and NDB_STORED_USER”](mysql-cluster-privilege-synchronization.html
    "25.6.13 Privilege Synchronization and NDB_STORED_USER")) to the `ndb_sql_metadata`
    table. Specifying this option causes it to do so.
  id: totrans-284
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在NDB 8.0中，[**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup")默认不恢复共享用户和授权（请参阅[第25.6.13节，“权限同步和NDB_STORED_USER”](mysql-cluster-privilege-synchronization.html
    "25.6.13 Privilege Synchronization and NDB_STORED_USER")）到`ndb_sql_metadata`表。指定此选项会导致它执行此操作。
- en: '[`--include-tables`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_include-tables)=*`table-list`*'
  id: totrans-285
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--include-tables`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_include-tables)=*`table-list`*'
- en: '| Command-Line Format | `--include-tables=list` |'
  id: totrans-286
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--include-tables=list` |'
- en: '| Type | String |'
  id: totrans-287
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 字符串 |'
- en: '| Default Value |  |'
  id: totrans-288
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 |  |'
- en: Comma-delimited list of tables to restore; each table reference must include
    the database name.
  id: totrans-289
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 逗号分隔的要恢复的表列表；每个表引用必须包括数据库名称。
- en: When `--include-databases` or [`--include-tables`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_include-tables)
    is used, only those databases or tables named by the option are restored; all
    other databases and tables are excluded by [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup"), and are not restored.
  id: totrans-290
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 当使用`--include-databases`或[`--include-tables`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_include-tables)时，只有由该选项命名的数据库或表会被恢复；所有其他数据库和表都会被[**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup")排除，并且不会被恢复。
- en: 'The following table shows several invocations of [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") using `--include-*` options
    (other options possibly required have been omitted for clarity), and the effects
    these have on restoring from an NDB Cluster backup:'
  id: totrans-291
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 以下表显示了使用`--include-*`选项调用[**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup")的几种情况（为清晰起见，省略了可能需要的其他选项），以及这些选项对从NDB
    Cluster备份中恢复的影响：
- en: '**Table 25.44 Several invocations of ndb_restore using --include-* options,
    and their effects on restoring from an NDB Cluster backup.**'
  id: totrans-292
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**表 25.44 使用--include-*选项调用ndb_restore的几种情况，以及它们对从NDB Cluster备份中恢复的影响。**'
- en: '| Option | Result |'
  id: totrans-293
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 选项 | 结果 |'
- en: '| `--include-databases=db1` | Only tables in database `db1` are restored; all
    tables in all other databases are ignored |'
  id: totrans-294
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| `--include-databases=db1` | 仅恢复数据库`db1`中的表；忽略所有其他数据库中的所有表 |'
- en: '| `--include-databases=db1,db2` (or `--include-databases=db1` `--include-databases=db2`)
    | Only tables in databases `db1` and `db2` are restored; all tables in all other
    databases are ignored |'
  id: totrans-295
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| `--include-databases=db1,db2`（或`--include-databases=db1` `--include-databases=db2`）
    | 仅恢复数据库`db1`和`db2`中的表；忽略所有其他数据库中的所有表 |'
- en: '| `--include-tables=db1.t1` | Only table `t1` in database `db1` is restored;
    no other tables in `db1` or in any other database are restored |'
  id: totrans-296
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| `--include-tables=db1.t1` | 仅恢复数据库`db1`中的表`t1`；不恢复`db1`中的其他表或任何其他数据库中的表 |'
- en: '| `--include-tables=db1.t2,db2.t1` (or `--include-tables=db1.t2` `--include-tables=db2.t1`)
    | Only the table `t2` in database `db1` and the table `t1` in database `db2` are
    restored; no other tables in `db1`, `db2`, or any other database are restored
    |'
  id: totrans-297
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| `--include-tables=db1.t2,db2.t1`（或`--include-tables=db1.t2` `--include-tables=db2.t1`）
    | 仅恢复数据库`db1`中的表`t2`和数据库`db2`中的表`t1`；不恢复`db1`、`db2`或任何其他数据库中的其他表 |'
- en: 'You can also use these two options together. For example, the following causes
    all tables in databases `db1` and `db2`, together with the tables `t1` and `t2`
    in database `db3`, to be restored (and no other databases or tables):'
  id: totrans-298
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 您还可以同时使用这两个选项。例如，以下内容将导致恢复数据库 `db1` 和 `db2` 中的所有表，以及数据库 `db3` 中的表 `t1` 和 `t2`（而不���其他数据库或表）：
- en: '[PRE4]'
  id: totrans-299
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: (Again we have omitted other, possibly required, options in the example just
    shown.)
  id: totrans-300
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: （在刚刚显示的示例中，我们再次省略了其他可能需要的选项。）
- en: 'It also possible to restore only selected databases, or selected tables from
    a single database, without any `--include-*` (or `--exclude-*`) options, using
    the syntax shown here:'
  id: totrans-301
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 也可以仅恢复选定的数据库或来自单个数据库的选定表，而不使用任何 `--include-*`（或 `--exclude-*`）选项，使用此处显示的语法：
- en: '[PRE5]'
  id: totrans-302
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'In other words, you can specify either of the following to be restored:'
  id: totrans-303
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 换句话说，您可以指定要恢复的以下内容之一：
- en: All tables from one or more databases
  id: totrans-304
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个或多个数据库的所有表
- en: One or more tables from a single database
  id: totrans-305
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 来自单个数据库的一个或多个表
- en: '[`--lines-terminated-by`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_lines-terminated-by)=*`char`*'
  id: totrans-306
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--lines-terminated-by`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_lines-terminated-by)=*`char`*'
- en: '| Command-Line Format | `--lines-terminated-by=char` |'
  id: totrans-307
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--lines-terminated-by=char` |'
- en: '| Type | String |'
  id: totrans-308
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 字符串 |'
- en: '| Default Value | `\n (linebreak)` |'
  id: totrans-309
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `\n (换行)` |'
- en: Specifies the string used to end each line of output. The default is a linefeed
    character (`\n`).
  id: totrans-310
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 指定用于结束每行输出的字符串。默认值是换行符 (`\n`)。
- en: '[`--login-path`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_login-path)'
  id: totrans-311
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--login-path`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_login-path)'
- en: '| Command-Line Format | `--login-path=path` |'
  id: totrans-312
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--login-path=path` |'
- en: '| Type | String |'
  id: totrans-313
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 字符串 |'
- en: '| Default Value | `[none]` |'
  id: totrans-314
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `[none]` |'
- en: Read given path from login file.
  id: totrans-315
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 从登录文件中读取给定路径。
- en: '[`--lossy-conversions`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_lossy-conversions),
    `-L`'
  id: totrans-316
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--lossy-conversions`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_lossy-conversions),
    `-L`'
- en: '| Command-Line Format | `--lossy-conversions` |'
  id: totrans-317
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--lossy-conversions` |'
- en: This option is intended to complement the [`--promote-attributes`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_promote-attributes)
    option. Using `--lossy-conversions` allows lossy conversions of column values
    (type demotions or changes in sign) when restoring data from backup. With some
    exceptions, the rules governing demotion are the same as for MySQL replication;
    see [Section 19.5.1.9.2, “Replication of Columns Having Different Data Types”](replication-features-differing-tables.html#replication-features-different-data-types
    "19.5.1.9.2 Replication of Columns Having Different Data Types"), for information
    about specific type conversions currently supported by attribute demotion.
  id: totrans-318
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此选项旨在补充 [`--promote-attributes`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_promote-attributes)
    选项。使用 `--lossy-conversions` 允许在从备份恢复数据时进行列值的有损转换（类型降级或符号更改）。除了一些例外情况外，规定降级的规则与
    MySQL 复制相同；有关当前受支持的属性降级的具体类型转换信息，请参见 [Section 19.5.1.9.2, “Replication of Columns
    Having Different Data Types”](replication-features-differing-tables.html#replication-features-different-data-types
    "19.5.1.9.2 Replication of Columns Having Different Data Types")。
- en: Beginning with NDB 8.0.26, this option also makes it possible to restore a `NULL`
    column as `NOT NULL`. The column must not contain any `NULL` entries; otherwise
    [**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup") stops with an error.
  id: totrans-319
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 从 NDB 8.0.26 开始，此选项还使得将 `NULL` 列恢复为 `NOT NULL` 成为可能。该列不得包含任何 `NULL` 条目；否则 [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") 将停止并显示错误。
- en: '[**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup") reports any truncation of data that it performs
    during lossy conversions once per attribute and column.'
  id: totrans-320
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup") 在进行有损转换期间执行的任何数据截断都会报告一次，每个属性和列一次。'
- en: '[`--no-binlog`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_no-binlog)'
  id: totrans-321
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--no-binlog`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_no-binlog)'
- en: '| Command-Line Format | `--no-binlog` |'
  id: totrans-322
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--no-binlog` |'
- en: This option prevents any connected SQL nodes from writing data restored by [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") to their binary logs.
  id: totrans-323
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此选项防止任何连接的 SQL 节点将由 [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") 恢复的数据写入其二进制日志。
- en: '[`--no-restore-disk-objects`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_no-restore-disk-objects),
    `-d`'
  id: totrans-324
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--no-restore-disk-objects`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_no-restore-disk-objects),
    `-d`'
- en: '| Command-Line Format | `--no-restore-disk-objects` |'
  id: totrans-325
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--no-restore-disk-objects` |'
- en: This option stops [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") from restoring any NDB
    Cluster Disk Data objects, such as tablespaces and log file groups; see [Section 25.6.11,
    “NDB Cluster Disk Data Tables”](mysql-cluster-disk-data.html "25.6.11 NDB Cluster
    Disk Data Tables"), for more information about these.
  id: totrans-326
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此选项阻止[**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup")恢复任何NDB集群磁盘数据对象，如表空间和日志文件组；有关这些内容的更多信息，请参见[第25.6.11节，“NDB集群磁盘数据表”](mysql-cluster-disk-data.html
    "25.6.11 NDB Cluster Disk Data Tables")。
- en: '[`--no-upgrade`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_no-upgrade),
    `-u`'
  id: totrans-327
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--no-upgrade`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_no-upgrade),
    `-u`'
- en: '| Command-Line Format | `--no-upgrade` |'
  id: totrans-328
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--no-upgrade` |'
- en: When using [**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup") to restore a backup, [`VARCHAR`](char.html "13.3.2 The
    CHAR and VARCHAR Types") columns created using the old fixed format are resized
    and recreated using the variable-width format now employed. This behavior can
    be overridden by specifying `--no-upgrade`.
  id: totrans-329
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 使用[**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup")恢复备份时，使用旧的固定格式创建的[`VARCHAR`](char.html "13.3.2 The
    CHAR and VARCHAR Types")列将被调整大小并重新创建为现在使用的可变宽度格式。可以通过指定`--no-upgrade`来覆盖此行为。
- en: '[`--ndb-connectstring`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_ndb-connectstring)'
  id: totrans-330
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--ndb-connectstring`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_ndb-connectstring)'
- en: '| Command-Line Format | `--ndb-connectstring=connection_string` |'
  id: totrans-331
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--ndb-connectstring=connection_string` |'
- en: '| Type | String |'
  id: totrans-332
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 字符串 |'
- en: '| Default Value | `[none]` |'
  id: totrans-333
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `[none]` |'
- en: 'Set connect string for connecting to ndb_mgmd. Syntax: "[nodeid=id;][host=]hostname[:port]".
    Overrides entries in NDB_CONNECTSTRING and my.cnf.'
  id: totrans-334
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 为连接到ndb_mgmd设置连接字符串。语法：“[nodeid=id;][host=]hostname[:port]”。覆盖NDB_CONNECTSTRING和my.cnf中的条目。
- en: '[`--ndb-mgmd-host`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_ndb-mgmd-host)'
  id: totrans-335
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--ndb-mgmd-host`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_ndb-mgmd-host)'
- en: '| Command-Line Format | `--ndb-mgmd-host=connection_string` |'
  id: totrans-336
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--ndb-mgmd-host=connection_string` |'
- en: '| Type | String |'
  id: totrans-337
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 字符串 |'
- en: '| Default Value | `[none]` |'
  id: totrans-338
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `[none]` |'
- en: Same as [`--ndb-connectstring`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_ndb-connectstring).
  id: totrans-339
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 与[`--ndb-connectstring`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_ndb-connectstring)相同。
- en: '[`--ndb-nodegroup-map`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_ndb-nodegroup-map)=*`map`*,
    `-z`'
  id: totrans-340
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--ndb-nodegroup-map`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_ndb-nodegroup-map)=*`map`*,
    `-z`'
- en: '| Command-Line Format | `--ndb-nodegroup-map=map` |'
  id: totrans-341
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--ndb-nodegroup-map=map` |'
- en: Intended for restoring a backup taken from one node group to a different node
    group, but never completely implemented; unsupported.
  id: totrans-342
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 用于将从一个节点组获取的备份还原到另一个节点组，但从未完全实现；不受支持。
- en: All code supporting this option was removed in NDB 8.0.27; in this and later
    versions, any value set for it is ignored, and the option itself does nothing.
  id: totrans-343
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 所有支持此选项的代码在NDB 8.0.27中已删除；在此版本及更高版本中，对其设置的任何值都将被忽略，该选项本身不起作用。
- en: '[`--ndb-nodeid`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_ndb-nodeid)'
  id: totrans-344
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--ndb-nodeid`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_ndb-nodeid)'
- en: '| Command-Line Format | `--ndb-nodeid=#` |'
  id: totrans-345
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--ndb-nodeid=#` |'
- en: '| Type | Integer |'
  id: totrans-346
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 整数 |'
- en: '| Default Value | `[none]` |'
  id: totrans-347
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `[none]` |'
- en: Set node ID for this node, overriding any ID set by [`--ndb-connectstring`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_ndb-connectstring).
  id: totrans-348
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 为此节点设置节点ID，覆盖[`--ndb-connectstring`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_ndb-connectstring)设置的任何ID。
- en: '[`--ndb-optimized-node-selection`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_ndb-optimized-node-selection)'
  id: totrans-349
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--ndb-optimized-node-selection`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_ndb-optimized-node-selection)'
- en: '| Command-Line Format | `--ndb-optimized-node-selection` |'
  id: totrans-350
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--ndb-optimized-node-selection` |'
- en: '| Removed | 8.0.31 |'
  id: totrans-351
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 已移除 | 8.0.31 |'
- en: Enable optimizations for selection of nodes for transactions. Enabled by default;
    use `--skip-ndb-optimized-node-selection` to disable.
  id: totrans-352
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 启用优化以选择事务节点。默认启用；使用`--skip-ndb-optimized-node-selection`来禁用。
- en: '[`--no-defaults`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_no-defaults)'
  id: totrans-353
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--no-defaults`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_no-defaults)'
- en: '| Command-Line Format | `--no-defaults` |'
  id: totrans-354
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--no-defaults` |'
- en: Do not read default options from any option file other than login file.
  id: totrans-355
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 不要从除登录文件以外的任何选项文件中读取默认选项。
- en: '[`--nodeid`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_nodeid)=*`#`*,
    `-n`'
  id: totrans-356
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--nodeid`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_nodeid)=*`#`*,
    `-n`'
- en: '| Command-Line Format | `--nodeid=#` |'
  id: totrans-357
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--nodeid=#` |'
- en: '| Type | Numeric |'
  id: totrans-358
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 数字 |'
- en: '| Default Value | `none` |'
  id: totrans-359
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `none` |'
- en: Specify the node ID of the data node on which the backup was taken.
  id: totrans-360
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 指定取备份的数据节点的节点 ID。
- en: When restoring to a cluster with different number of data nodes from that where
    the backup was taken, this information helps identify the correct set or sets
    of files to be restored to a given node. (In such cases, multiple files usually
    need to be restored to a single data node.) See [Section 25.5.23.2, “Restoring
    to a different number of data nodes”](ndb-restore-different-number-nodes.html
    "25.5.23.2 Restoring to a different number of data nodes"), for additional information
    and examples.
  id: totrans-361
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在将备份恢复到数据节点数量与取备份的节点不同的集群时，此信息有助于识别要恢复到给定节点的正确文件集或文件集。 （在这种情况下，通常需要将多个文件恢复到单个数据节点。）有关更多信息和示例，请参见
    [Section 25.5.23.2, “Restoring to a different number of data nodes”](ndb-restore-different-number-nodes.html
    "25.5.23.2 Restoring to a different number of data nodes")。
- en: In NDB 8.0, this option is required.
  id: totrans-362
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在 NDB 8.0 中，此选项是必需的。
- en: '[`--num-slices`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_num-slices)=*`#`*'
  id: totrans-363
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--num-slices`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_num-slices)=*`#`*'
- en: '| Command-Line Format | `--num-slices=#` |'
  id: totrans-364
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--num-slices=#` |'
- en: '| Introduced | 8.0.20-ndb-8.0.20 |'
  id: totrans-365
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 引入版本 | 8.0.20-ndb-8.0.20 |'
- en: '| Type | Integer |'
  id: totrans-366
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 整数 |'
- en: '| Default Value | `1` |'
  id: totrans-367
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `1` |'
- en: '| Minimum Value | `1` |'
  id: totrans-368
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 最小值 | `1` |'
- en: '| Maximum Value | `1024` |'
  id: totrans-369
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 最大值 | `1024` |'
- en: When restoring a backup by slices, this option sets the number of slices into
    which to divide the backup. This allows multiple instances of [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") to restore disjoint subsets
    in parallel, potentially reducing the amount of time required to perform the restore
    operation.
  id: totrans-370
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在按片段恢复备份时，此选项设置备份分成的片段数。这允许多个[**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup")实例并行恢复不相交的子集，可能减少执行恢复操作所需的时间。
- en: A *slice* is a subset of the data in a given backup; that is, it is a set of
    fragments having the same slice ID, specified using the [`--slice-id`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_slice-id)
    option. The two options must always be used together, and the value set by `--slice-id`
    must always be less than the number of slices.
  id: totrans-371
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '*片段* 是给定备份中数据的子集；也就是说，它是具有相同片段 ID 的一组片段，使用 [`--slice-id`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_slice-id)
    选项指定。这两个选项必须始终一起使用，并且由 `--slice-id` 设置的值必须始终小于片段数。'
- en: '[**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup") encounters fragments and assigns each one a
    fragment counter. When restoring by slices, a slice ID is assigned to each fragment;
    this slice ID is in the range 0 to 1 less than the number of slices. For a table
    that is not a [`BLOB`](blob.html "13.3.4 The BLOB and TEXT Types") table, the
    slice to which a given fragment belongs is determined using the formula shown
    here:'
  id: totrans-372
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup") 遇到片段并为每个片段分配一个片段计数器。在按片段恢复时，每个片段被分配一个片段 ID；此片段
    ID 在 0 到片段数减 1 的范围内。对于不是[`BLOB`](blob.html "13.3.4 The BLOB and TEXT Types")表的表，确定给定片段属于哪个片段的公式如下：'
- en: '[PRE6]'
  id: totrans-373
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'For a [`BLOB`](blob.html "13.3.4 The BLOB and TEXT Types") table, a fragment
    counter is not used; the fragment number is used instead, along with the ID of
    the main table for the `BLOB` table (recall that `NDB` stores *`BLOB`* values
    in a separate table internally). In this case, the slice ID for a given fragment
    is calculated as shown here:'
  id: totrans-374
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对于[`BLOB`](blob.html "13.3.4 The BLOB and TEXT Types")表，不使用片段计数器；而是使用片段号，以及`BLOB`表的主表
    ID（回想一下，`NDB`在内部将 *`BLOB`* 值存储在单独的表中）。在这种情况下，给定片段的片段 ID 计算如下：
- en: '[PRE7]'
  id: totrans-375
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Thus, restoring by *`N`* slices means running *`N`* instances of [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup"), all with `--num-slices=*`N`*`
    (along with any other necessary options) and one each with [`--slice-id=1`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_slice-id),
    `--slice-id=2`, `--slice-id=3`, and so on through `slice-id=*`N`*-1`.
  id: totrans-376
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 因此，通过*`N`*切片进行恢复意味着运行*`N`*个[**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup")实例，每个实例都带有`--num-slices=*`N`*`（以及任何其他必要选项），并且每个实例分别带有[`--slice-id=1`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_slice-id)、`--slice-id=2`、`--slice-id=3`，依此类推直到`slice-id=*`N`*-1`。
- en: '**Example. ** Assume that you want to restore a backup named `BACKUP-1`, found
    in the default directory `/var/lib/mysql-cluster/BACKUP/BACKUP-3` on the node
    file system on each data node, to a cluster with four data nodes having the node
    IDs 1, 2, 3, and 4. To perform this operation using five slices, execute the sets
    of commands shown in the following list:'
  id: totrans-377
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**示例。** 假设您想要恢复名为`BACKUP-1`的备份，在每个数据节点的默认目录`/var/lib/mysql-cluster/BACKUP/BACKUP-3`中找到，到具有节点ID为1、2、3和4的四个数据节点的集群。要使用五个切片执行此操作，请执行以下列表中显示的命令集：'
- en: 'Restore the cluster metadata using [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") as shown here:'
  id: totrans-378
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用[**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup")恢复集群元数据如下所示：
- en: '[PRE8]'
  id: totrans-379
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'Restore the cluster data to the data nodes invoking [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") as shown here:'
  id: totrans-380
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 恢复集群数据到数据节点，调用[**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup")如下所示：
- en: '[PRE9]'
  id: totrans-381
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE9]'
- en: All of the commands just shown in this step can be executed in parallel, provided
    there are enough slots for connections to the cluster (see the description for
    the [`--backup-path`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_backup-path)
    option).
  id: totrans-382
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: 所有刚刚在这一步中展示的命令可以并行执行，只要集群中有足够的连接槽位（参见[`--backup-path`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_backup-path)选项的描述）。
- en: 'Restore indexes as usual, as shown here:'
  id: totrans-383
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 恢复索引如常，如下所示：
- en: '[PRE10]'
  id: totrans-384
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'Finally, restore the epoch, using the command shown here:'
  id: totrans-385
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，使用以下命令恢复时代：
- en: '[PRE11]'
  id: totrans-386
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE11]'
- en: You should use slicing to restore the cluster data only; it is not necessary
    to employ [`--num-slices`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_num-slices)
    or [`--slice-id`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_slice-id)
    when restoring the metadata, indexes, or epoch information. If either or both
    of these options are used with the [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") options controlling restoration
    of these, the program ignores them.
  id: totrans-387
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 恢复集群数据时应使用切片，只需恢复集群数据，不需要在恢复元数据、索引或时代信息时使用[`--num-slices`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_num-slices)或[`--slice-id`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_slice-id)。如果这两个选项中的任何一个或两个与控制这些内容恢复的[**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup")选项一起使用，程序会忽略它们。
- en: The effects of using the [`--parallelism`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_parallelism)
    option on the speed of restoration are independent of those produced by slicing
    or parallel restoration using multiple instances of [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") (`--parallelism` specifies
    the number of parallel transactions executed by a *single* [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") thread), but it can be
    used together with either or both of these. You should be aware that increasing
    `--parallelism` causes [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") to impose a greater load
    on the cluster; if the system can handle this, restoration should complete even
    more quickly.
  id: totrans-388
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 使用[`--parallelism`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_parallelism)选项对恢复速度的影响与使用切片或使用多个[**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup")实例进行并行恢复（`--parallelism`指定单个[**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup")线程执行的并行事务数）是独立的，但可以与其中一个或两者一起使用。您应该注意增加`--parallelism`会导致[**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup")��集群施加更大的负载；如果系统可以处理这一点，恢复应该会更快完成。
- en: The value of `--num-slices` is not directly dependent on values relating to
    hardware such as number of CPUs or CPU cores, amount of RAM, and so forth, nor
    does it depend on the number of LDMs.
  id: totrans-389
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`--num-slices`的值不直接取决于与硬件相关的值，如CPU数量或CPU核心数，RAM容量等，也不取决于LDM的数量。'
- en: It is possible to employ different values for this option on different data
    nodes as part of the same restoration; doing so should not in and of itself produce
    any ill effects.
  id: totrans-390
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 可以在同一恢复过程中在不同的数据节点上使用不同的值来使用此选项；这样做本身不会产生任何不良影响。
- en: '[`--parallelism`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_parallelism)=*`#`*,
    `-p`'
  id: totrans-391
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--parallelism`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_parallelism)=*`#`*,
    `-p`'
- en: '| Command-Line Format | `--parallelism=#` |'
  id: totrans-392
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--parallelism=#` |'
- en: '| Type | Numeric |'
  id: totrans-393
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 数值 |'
- en: '| Default Value | `128` |'
  id: totrans-394
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `128` |'
- en: '| Minimum Value | `1` |'
  id: totrans-395
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 最小值 | `1` |'
- en: '| Maximum Value | `1024` |'
  id: totrans-396
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 最大值 | `1024` |'
- en: '[**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup") uses single-row transactions to apply many rows
    concurrently. This parameter determines the number of parallel transactions (concurrent
    rows) that an instance of [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") tries to use. By default,
    this is 128; the minimum is 1, and the maximum is 1024.'
  id: totrans-397
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — 恢复NDB集群备份")使用单行事务并发应用多行。此参数确定[**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — 恢复NDB集群备份")实例尝试使用的并行事务（并发行数）的数量。默认值为128；最小值为1，最大值为1024。'
- en: The work of performing the inserts is parallelized across the threads in the
    data nodes involved. This mechanism is employed for restoring bulk data from the
    `.Data` file—that is, the fuzzy snapshot of the data; it is not used for building
    or rebuilding indexes. The change log is applied serially; index drops and builds
    are DDL operations and handled separately. There is no thread-level parallelism
    on the client side of the restore.
  id: totrans-398
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 执行插入操作的工作在涉及的数据节点的线程之间并行化。这种机制用于从`.Data`文件中恢复大量数据，即数据的模糊快照；它不用于构建或重建索引。更改日志是串行应用的；索引删除和构建是DDL操作，单独处理。在恢复的客户端端没有线程级并行性。
- en: '[`--preserve-trailing-spaces`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_preserve-trailing-spaces),
    `-P`'
  id: totrans-399
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--preserve-trailing-spaces`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_preserve-trailing-spaces),
    `-P`'
- en: '| Command-Line Format | `--preserve-trailing-spaces` |'
  id: totrans-400
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--preserve-trailing-spaces` |'
- en: Cause trailing spaces to be preserved when promoting a fixed-width character
    data type to its variable-width equivalent—that is, when promoting a [`CHAR`](char.html
    "13.3.2 The CHAR and VARCHAR Types") column value to [`VARCHAR`](char.html "13.3.2 The
    CHAR and VARCHAR Types"), or a `BINARY` column value to [`VARBINARY`](binary-varbinary.html
    "13.3.3 The BINARY and VARBINARY Types"). Otherwise, any trailing spaces are dropped
    from such column values when they are inserted into the new columns.
  id: totrans-401
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 当将固定宽度字符数据类型提升为其可变宽度等效类型时，即将[`CHAR`](char.html "13.3.2 CHAR和VARCHAR类型")列值提升为[`VARCHAR`](char.html
    "13.3.2 CHAR和VARCHAR类型")，或将`BINARY`列值提升为[`VARBINARY`](binary-varbinary.html "13.3.3 BINARY和VARBINARY类型")时，导致尾随空格被保留。否则，当将这些列值插入新列时，任何尾随空格都将从这些列值中删除。
- en: Note
  id: totrans-402
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意
- en: Although you can promote [`CHAR`](char.html "13.3.2 The CHAR and VARCHAR Types")
    columns to [`VARCHAR`](char.html "13.3.2 The CHAR and VARCHAR Types") and `BINARY`
    columns to [`VARBINARY`](binary-varbinary.html "13.3.3 The BINARY and VARBINARY
    Types"), you cannot promote [`VARCHAR`](char.html "13.3.2 The CHAR and VARCHAR
    Types") columns to [`CHAR`](char.html "13.3.2 The CHAR and VARCHAR Types") or
    [`VARBINARY`](binary-varbinary.html "13.3.3 The BINARY and VARBINARY Types") columns
    to `BINARY`.
  id: totrans-403
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 虽然你可以将[`CHAR`](char.html "13.3.2 CHAR和VARCHAR类型")列提升为[`VARCHAR`](char.html "13.3.2 CHAR和VARCHAR类型")，将`BINARY`列提升为[`VARBINARY`](binary-varbinary.html
    "13.3.3 BINARY和VARBINARY类型")，但不能将[`VARCHAR`](char.html "13.3.2 CHAR和VARCHAR类型")列提升为[`CHAR`](char.html
    "13.3.2 CHAR和VARCHAR类型")或[`VARBINARY`](binary-varbinary.html "13.3.3 BINARY和VARBINARY类型")列提升为`BINARY`。
- en: '[`--print`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_print)'
  id: totrans-404
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--print`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_print)'
- en: '| Command-Line Format | `--print` |'
  id: totrans-405
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--print` |'
- en: Causes [**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup") to print all data, metadata, and logs to `stdout`.
    Equivalent to using the [`--print-data`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_print-data),
    [`--print-meta`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_print-meta),
    and [`--print-log`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_print-log)
    options together.
  id: totrans-406
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 使[**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup")打印所有数据、元数据和日志到`stdout`。等同于同时使用[`--print-data`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_print-data)、[`--print-meta`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_print-meta)和[`--print-log`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_print-log)选项。
- en: Note
  id: totrans-407
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意
- en: Use of `--print` or any of the `--print_*` options is in effect performing a
    dry run. Including one or more of these options causes any output to be redirected
    to `stdout`; in such cases, [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") makes no attempt to restore
    data or metadata to an NDB Cluster.
  id: totrans-408
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 使用`--print`或任何`--print_*`选项都是执行干预运行。包括其中一个或多个这些选项会导致任何输出重定向到`stdout`；在这种情况下，[**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") 不会尝试将数据或元数据恢复到NDB Cluster。
- en: '[`--print-data`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_print-data)'
  id: totrans-409
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--print-data`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_print-data)'
- en: '| Command-Line Format | `--print-data` |'
  id: totrans-410
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--print-data` |'
- en: Cause [**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup") to direct its output to `stdout`. Often used
    together with one or more of [`--tab`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_tab),
    [`--fields-enclosed-by`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_fields-enclosed-by),
    [`--fields-optionally-enclosed-by`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_fields-optionally-enclosed-by),
    [`--fields-terminated-by`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_fields-terminated-by),
    [`--hex`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_hex), and
    [`--append`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_append).
  id: totrans-411
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 使[**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup")将其输出定向到`stdout`。通常与[`--tab`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_tab)、[`--fields-enclosed-by`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_fields-enclosed-by)、[`--fields-optionally-enclosed-by`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_fields-optionally-enclosed-by)、[`--fields-terminated-by`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_fields-terminated-by)、[`--hex`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_hex)和[`--append`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_append)中的一个或多个一起使用。
- en: '[`TEXT`](blob.html "13.3.4 The BLOB and TEXT Types") and [`BLOB`](blob.html
    "13.3.4 The BLOB and TEXT Types") column values are always truncated. Such values
    are truncated to the first 256 bytes in the output. This cannot currently be overridden
    when using `--print-data`.'
  id: totrans-412
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[`TEXT`](blob.html "13.3.4 The BLOB and TEXT Types")和[`BLOB`](blob.html "13.3.4 The
    BLOB and TEXT Types")列值总是被截断。���些值在输出中被截断为前256个字节。目前在使用`--print-data`时无法覆盖此行为。'
- en: '[`--print-defaults`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_print-defaults)'
  id: totrans-413
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--print-defaults`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_print-defaults)'
- en: '| Command-Line Format | `--print-defaults` |'
  id: totrans-414
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--print-defaults` |'
- en: Print program argument list and exit.
  id: totrans-415
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 打印程序参数列表并退出。
- en: '[`--print-log`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_print-log)'
  id: totrans-416
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--print-log`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_print-log)'
- en: '| Command-Line Format | `--print-log` |'
  id: totrans-417
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--print-log` |'
- en: Cause [**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup") to output its log to `stdout`.
  id: totrans-418
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 使[**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup")将其日志输出到`stdout`。
- en: '[`--print-meta`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_print-meta)'
  id: totrans-419
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--print-meta`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_print-meta)'
- en: '| Command-Line Format | `--print-meta` |'
  id: totrans-420
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--print-meta` |'
- en: Print all metadata to `stdout`.
  id: totrans-421
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 将所有元数据打印到`stdout`。
- en: '[`print-sql-log`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_print-sql-log)'
  id: totrans-422
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`print-sql-log`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_print-sql-log)'
- en: '| Command-Line Format | `--print-sql-log` |'
  id: totrans-423
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--print-sql-log` |'
- en: Log SQL statements to `stdout`. Use the option to enable; normally this behavior
    is disabled. The option checks before attempting to log whether all the tables
    being restored have explicitly defined primary keys; queries on a table having
    only the hidden primary key implemented by `NDB` cannot be converted to valid
    SQL.
  id: totrans-424
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 将 SQL 语句记录到 `stdout`。使用该选项启用；通常此行为已禁用。在尝试记录之前，该选项会检查是否所有正在恢复的表都有明确定义的主键；只有具有
    `NDB` 实现的��藏主键的表上的查询无法转换为有效的 SQL。
- en: This option does not work with tables having [`BLOB`](blob.html "13.3.4 The
    BLOB and TEXT Types") columns.
  id: totrans-425
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此选项不适用于具有 [`BLOB`](blob.html "13.3.4 BLOB 和 TEXT 类型") 列的表。
- en: '[`--progress-frequency`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_progress-frequency)=*`N`*'
  id: totrans-426
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--progress-frequency`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_progress-frequency)=*`N`*'
- en: '| Command-Line Format | `--progress-frequency=#` |'
  id: totrans-427
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--progress-frequency=#` |'
- en: '| Type | Numeric |'
  id: totrans-428
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 数值 |'
- en: '| Default Value | `0` |'
  id: totrans-429
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `0` |'
- en: '| Minimum Value | `0` |'
  id: totrans-430
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 最小值 | `0` |'
- en: '| Maximum Value | `65535` |'
  id: totrans-431
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 最大值 | `65535` |'
- en: Print a status report each *`N`* seconds while the backup is in progress. 0
    (the default) causes no status reports to be printed. The maximum is 65535.
  id: totrans-432
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在备份进行中每 *`N`* 秒打印一次状态报告。0（默认值）不会打印任何状态报告。最大值为 65535。
- en: '[`--promote-attributes`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_promote-attributes),
    `-A`'
  id: totrans-433
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--promote-attributes`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_promote-attributes),
    `-A`'
- en: '| Command-Line Format | `--promote-attributes` |'
  id: totrans-434
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--promote-attributes` |'
- en: '[**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup") supports limited attribute promotion in much
    the same way that it is supported by MySQL replication; that is, data backed up
    from a column of a given type can generally be restored to a column using a “larger,
    similar” type. For example, data from a `CHAR(20)` column can be restored to a
    column declared as `VARCHAR(20)`, `VARCHAR(30)`, or `CHAR(30)`; data from a [`MEDIUMINT`](integer-types.html
    "13.1.2 Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT,
    BIGINT") column can be restored to a column of type [`INT`](integer-types.html
    "13.1.2 Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT,
    BIGINT") or [`BIGINT`](integer-types.html "13.1.2 Integer Types (Exact Value)
    - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"). See [Section 19.5.1.9.2,
    “Replication of Columns Having Different Data Types”](replication-features-differing-tables.html#replication-features-different-data-types
    "19.5.1.9.2 Replication of Columns Having Different Data Types"), for a table
    of type conversions currently supported by attribute promotion.'
  id: totrans-435
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — 恢复 NDB 集群备份") 支持有限的属性提升，方式与 MySQL 复制支持的方式类似；也就是说，从给定类型的列备份的数据通常可以恢复到使用“更大、类似”的类型的列。例如，从
    `CHAR(20)` 列的数据可以恢复到声明为 `VARCHAR(20)`、`VARCHAR(30)` 或 `CHAR(30)` 的列；从 [`MEDIUMINT`](integer-types.html
    "13.1.2 整数类型（精确值） - INTEGER、INT、SMALLINT、TINYINT、MEDIUMINT、BIGINT") 列的数据可以恢复到类型为
    [`INT`](integer-types.html "13.1.2 整数类型（精确值） - INTEGER、INT、SMALLINT、TINYINT、MEDIUMINT、BIGINT")
    或 [`BIGINT`](integer-types.html "13.1.2 整数类型（精确值） - INTEGER、INT、SMALLINT、TINYINT、MEDIUMINT、BIGINT")
    的列。请参阅 [19.5.1.9.2 节，“具有不同数据类型的列的复制”](replication-features-differing-tables.html#replication-features-different-data-types
    "19.5.1.9.2 具有不同数据类型的列的复制")，了解目前由属性提升支持的类型转换表。'
- en: Beginning with NDB 8.0.26, this option also makes it possible to restore a `NOT
    NULL` column as `NULL`.
  id: totrans-436
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 从 NDB 8.0.26 开始，此选项还可以将 `NOT NULL` 列恢复为 `NULL`。
- en: 'Attribute promotion by [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") must be enabled explicitly,
    as follows:'
  id: totrans-437
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — 恢复 NDB 集群备份") 的属性提升必须显式启用，如下所示：'
- en: Prepare the table to which the backup is to be restored. [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") cannot be used to re-create
    the table with a different definition from the original; this means that you must
    either create the table manually, or alter the columns which you wish to promote
    using [`ALTER TABLE`](alter-table.html "15.1.9 ALTER TABLE Statement") after restoring
    the table metadata but before restoring the data.
  id: totrans-438
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 准备要恢复备份的表。[**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — 恢复 NDB 集群备份") 不能用于使用与原始表定义不同的定义重新创建表；这意味着您必须手动创建表，或在恢复表元数据后但在恢复数据之前使用 [`ALTER
    TABLE`](alter-table.html "15.1.9 ALTER TABLE 语句") 修改要提升的列。
- en: Invoke [**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup") with the [`--promote-attributes`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_promote-attributes)
    option (short form `-A`) when restoring the table data. Attribute promotion does
    not occur if this option is not used; instead, the restore operation fails with
    an error.
  id: totrans-439
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在恢复表数据时，使用[`--promote-attributes`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_promote-attributes)选项（简写为`-A`）调用[**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — 恢复NDB集群备份")。如果不使用此选项，则不会发生属性提升；相反，恢复操作将失败并显示错误。
- en: When converting between character data types and `TEXT` or `BLOB`, only conversions
    between character types ([`CHAR`](char.html "13.3.2 The CHAR and VARCHAR Types")
    and [`VARCHAR`](char.html "13.3.2 The CHAR and VARCHAR Types")) and binary types
    ([`BINARY`](binary-varbinary.html "13.3.3 The BINARY and VARBINARY Types") and
    [`VARBINARY`](binary-varbinary.html "13.3.3 The BINARY and VARBINARY Types"))
    can be performed at the same time. For example, you cannot promote an [`INT`](integer-types.html
    "13.1.2 Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT,
    BIGINT") column to [`BIGINT`](integer-types.html "13.1.2 Integer Types (Exact
    Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT") while promoting
    a `VARCHAR` column to `TEXT` in the same invocation of [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup").
  id: totrans-440
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在字符数据类型和`TEXT`或`BLOB`之间进行转换时，只能同时执行字符类型（[`CHAR`](char.html "13.3.2 CHAR和VARCHAR类型")和[`VARCHAR`](char.html
    "13.3.2 CHAR和VARCHAR类型")）和二进制类型（[`BINARY`](binary-varbinary.html "13.3.3 BINARY和VARBINARY类型")和[`VARBINARY`](binary-varbinary.html
    "13.3.3 BINARY和VARBINARY类型")）之间的转换。例如，你不能在同一次调用[**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — 恢复NDB集群备份")时将一个[`INT`](integer-types.html "13.1.2 整数类型（精确值）
    - INTEGER、INT、SMALLINT、TINYINT、MEDIUMINT、BIGINT")列提升为[`BIGINT`](integer-types.html
    "13.1.2 整数类型（精确值） - INTEGER、INT、SMALLINT、TINYINT、MEDIUMINT、BIGINT")同时将一个`VARCHAR`列提升为`TEXT`。
- en: Converting between [`TEXT`](blob.html "13.3.4 The BLOB and TEXT Types") columns
    using different character sets is not supported, and is expressly disallowed.
  id: totrans-441
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 不支持在不同字符集之间转换[`TEXT`](blob.html "13.3.4 BLOB和TEXT类型")列，并且明确禁止。
- en: When performing conversions of character or binary types to `TEXT` or `BLOB`
    with [**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup"), you may notice that it creates and uses one
    or more staging tables named `*`table_name`*$ST*`node_id`*`. These tables are
    not needed afterwards, and are normally deleted by [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") following a successful
    restoration.
  id: totrans-442
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在使用[**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — 恢复NDB集群备份")进行字符或二进制类型到`TEXT`或`BLOB`的转换时，你可能会注意到它创建并使用一个或多个名为`*`table_name`*$ST*`node_id`*`的临时表。这些表在之后不再需要，并且通常在成功恢复后由[**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — 恢复NDB集群备份")删除。
- en: '[`--rebuild-indexes`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_rebuild-indexes)'
  id: totrans-443
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--rebuild-indexes`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_rebuild-indexes)'
- en: '| Command-Line Format | `--rebuild-indexes` |'
  id: totrans-444
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--rebuild-indexes` |'
- en: Enable multithreaded rebuilding of the ordered indexes while restoring a native
    `NDB` backup. The number of threads used for building ordered indexes by [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") with this option is controlled
    by the [`BuildIndexThreads`](mysql-cluster-ndbd-definition.html#ndbparam-ndbd-buildindexthreads)
    data node configuration parameter and the number of LDMs.
  id: totrans-445
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在恢复本地`NDB`备份时启用有序索引的多线程重建。使用此选项由[**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — 恢复NDB集群备份")用于构建有序索引的线程数受[`BuildIndexThreads`](mysql-cluster-ndbd-definition.html#ndbparam-ndbd-buildindexthreads)数据节点配置参数和LDM数的控制。
- en: It is necessary to use this option only for the first run of [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup"); this causes all ordered
    indexes to be rebuilt without using `--rebuild-indexes` again when restoring subsequent
    nodes. You should use this option prior to inserting new rows into the database;
    otherwise, it is possible for a row to be inserted that later causes a unique
    constraint violation when trying to rebuild the indexes.
  id: totrans-446
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 只有在首次运行[**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup")时才需要使用此选项；这将导致所有有序索引在恢复后续节点时重新构建，而无需再次使用`--rebuild-indexes`。在向数据库插入新行之前，应使用此选项；否则，在尝试重建索引时可能会插入导致唯一约束冲突的行。
- en: Building of ordered indices is parallelized with the number of LDMs by default.
    Offline index builds performed during node and system restarts can be made faster
    using the [`BuildIndexThreads`](mysql-cluster-ndbd-definition.html#ndbparam-ndbd-buildindexthreads)
    data node configuration parameter; this parameter has no effect on dropping and
    rebuilding of indexes by [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup"), which is performed online.
  id: totrans-447
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 默认情况下，有序索引的构建与LDM的数量并行进行。在节点和系统重新启动期间执行的离线索引构建可以通过[`BuildIndexThreads`](mysql-cluster-ndbd-definition.html#ndbparam-ndbd-buildindexthreads)数据节点配置参数加快速度；此参数对由[**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup")在线执行的索引删除和重建没有影响。
- en: Rebuilding of unique indexes uses disk write bandwidth for redo logging and
    local checkpointing. An insufficient amount of this bandwidth can lead to redo
    buffer overload or log overload errors. In such cases you can run [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") `--rebuild-indexes` again;
    the process resumes at the point where the error occurred. You can also do this
    when you have encountered temporary errors. You can repeat execution of [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") `--rebuild-indexes` indefinitely;
    you may be able to stop such errors by reducing the value of [`--parallelism`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_parallelism).
    If the problem is insufficient space, you can increase the size of the redo log
    ([`FragmentLogFileSize`](mysql-cluster-ndbd-definition.html#ndbparam-ndbd-fragmentlogfilesize)
    node configuration parameter), or you can increase the speed at which LCPs are
    performed ([`MaxDiskWriteSpeed`](mysql-cluster-ndbd-definition.html#ndbparam-ndbd-maxdiskwritespeed)
    and related parameters), in order to free space more quickly.
  id: totrans-448
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 唯一索引的重建使用磁盘写入带宽进行重做日志记录和本地检查点。带宽不足可能导致重做缓冲区超载或日志超载错误。在这种情况下，您可以再次运行[**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") `--rebuild-indexes`；进程将在发生错误的地方恢复。在遇到临时错误时，也可以这样做。您可以无限次重复执行[**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") `--rebuild-indexes`；通过减少[`--parallelism`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_parallelism)的值，您可能能够停止此类错误。如果问题是空间不足，您可以增加重做日志的大小（[`FragmentLogFileSize`](mysql-cluster-ndbd-definition.html#ndbparam-ndbd-fragmentlogfilesize)节点配置参数），或者增加执行LCP的速度（[`MaxDiskWriteSpeed`](mysql-cluster-ndbd-definition.html#ndbparam-ndbd-maxdiskwritespeed)和相关参数），以便更快地释放空间。
- en: '[`--remap-column=*`db`*.*`tbl`*.*`col`*:*`fn`*:*`args`*`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_remap-column)'
  id: totrans-449
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--remap-column=*`db`*.*`tbl`*.*`col`*:*`fn`*:*`args`*`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_remap-column)'
- en: '| Command-Line Format | `--remap-column=string` |'
  id: totrans-450
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--remap-column=string` |'
- en: '| Introduced | 8.0.21-ndb-8.0.21 |'
  id: totrans-451
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 引入版本 | 8.0.21-ndb-8.0.21 |'
- en: '| Type | String |'
  id: totrans-452
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 字符串 |'
- en: '| Default Value | `[none]` |'
  id: totrans-453
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `[none]` |'
- en: 'When used together with [`--restore-data`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_restore-data),
    this option applies a function to the value of the indicated column. Values in
    the argument string are listed here:'
  id: totrans-454
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 与[`--restore-data`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_restore-data)一起使用时，此选项将对指定列的值应用函数。参数字符串中的值在此处列出：
- en: '*`db`*: Database name, following any renames performed by [`--rewrite-database`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_rewrite-database).'
  id: totrans-455
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*`db`*: 数据库名称，在[`--rewrite-database`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_rewrite-database)执行的任何重命名之后。'
- en: '*`tbl`*: Table name.'
  id: totrans-456
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*`tbl`*: 表名。'
- en: '*`col`*: Name of the column to be updated. This column must be of type [`INT`](integer-types.html
    "13.1.2 Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT,
    BIGINT") or [`BIGINT`](integer-types.html "13.1.2 Integer Types (Exact Value)
    - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"). The column can also be
    but is not required to be `UNSIGNED`.'
  id: totrans-457
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*`col`*: 要更新的列的名称。此列必须是[`INT`](integer-types.html "13.1.2 整数类型（精确值） - INTEGER、INT、SMALLINT、TINYINT、MEDIUMINT、BIGINT")或[`BIGINT`](integer-types.html
    "13.1.2 整数类型（精确值） - INTEGER、INT、SMALLINT、TINYINT、MEDIUMINT、BIGINT")类型。该列也可以是但不需要是`UNSIGNED`。'
- en: '*`fn`*: Function name; currently, the only supported name is `offset`.'
  id: totrans-458
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*`fn`*: 函数名称；目前，唯一支持的名称是`offset`。'
- en: '*`args`*: Arguments supplied to the function. Currently, only a single argument,
    the size of the offset to be added by the `offset` function, is supported. Negative
    values are supported. The size of the argument cannot exceed that of the signed
    variant of the column''s type; for example, if *`col`* is an `INT` column, then
    the allowed range of the argument passed to the `offset` function is `-2147483648`
    to `2147483647` (see [Section 13.1.2, “Integer Types (Exact Value) - INTEGER,
    INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT”](integer-types.html "13.1.2 Integer
    Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT")).'
  id: totrans-459
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*`args`*: 提供给函数的参数。目前，仅支持一个参数，即`offset`函数要添加的偏移量的大小。支持负值。参数的大小不能超过列类型的有符号变体；例如，如果*`col`*是一个`INT`列，则传递给`offset`函数的参数的允许范围为`-2147483648`到`2147483647`（参见[第13.1.2节，“整数类型（精确值）
    - INTEGER、INT、SMALLINT、TINYINT、MEDIUMINT、BIGINT”](integer-types.html "13.1.2 整数类型（精确值）
    - INTEGER、INT、SMALLINT、TINYINT、MEDIUMINT、BIGINT")）。'
- en: If applying the offset value to the column would cause an overflow or underflow,
    the restore operation fails. This could happen, for example, if the column is
    a `BIGINT`, and the option attempts to apply an offset value of 8 on a row in
    which the column value is 4294967291, since `4294967291 + 8 = 4294967299 > 4294967295`.
  id: totrans-460
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果将偏移值应用于列会导致溢出或下溢，则恢复操作将失败。例如，如果列是`BIGINT`，并且选项尝试在列值为4294967291的行上应用偏移值8，则会发生这种情况，因为`4294967291
    + 8 = 4294967299 > 4294967295`。
- en: 'This option can be useful when you wish to merge data stored in multiple source
    instances of NDB Cluster (all using the same schema) into a single destination
    NDB Cluster, using NDB native backup (see [Section 25.6.8.2, “Using The NDB Cluster
    Management Client to Create a Backup”](mysql-cluster-backup-using-management-client.html
    "25.6.8.2 Using The NDB Cluster Management Client to Create a Backup")) and [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") to merge the data, where
    primary and unique key values are overlapping between source clusters, and it
    is necessary as part of the process to remap these values to ranges that do not
    overlap. It may also be necessary to preserve other relationships between tables.
    To fulfill such requirements, it is possible to use the option multiple times
    in the same invocation of [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") to remap columns of different
    tables, as shown here:'
  id: totrans-461
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 当您希望将存储在多个NDB Cluster源实例中的数据（均使用相同模式）合并到单个目标NDB Cluster中时，可以使用此选项，使用NDB本机备份（参见[第25.6.8.2节，“使用NDB
    Cluster管理客户端创建备份”](mysql-cluster-backup-using-management-client.html "25.6.8.2
    使用NDB Cluster管理客户端创建备份")）和[**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — 恢复NDB Cluster备份")来合并数据，其中源集群之间的主键和唯一键值重叠，并且在过程中有必要将这些值重新映射到不重叠的范围。可能还需要保留表之间的其他关系。为了满足这些要求，可以在同一次调用[**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — 恢复NDB Cluster备份")中多次使用该选项来重新映射不同表的列，如下所示：
- en: '[PRE12]'
  id: totrans-462
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE12]'
- en: (Other options not shown here may also be used.)
  id: totrans-463
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: （此处未显示其他选项也可以使用。）
- en: '`--remap-column` can also be used to update multiple columns of the same table.
    Combinations of multiple tables and columns are possible. Different offset values
    can also be used for different columns of the same table, like this:'
  id: totrans-464
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`--remap-column`也可用于更新同一表的多个列。可以组合多个表和列。不同的偏移值也可以用于同一表的不同列，如下所示：'
- en: '[PRE13]'
  id: totrans-465
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE13]'
- en: When source backups contain duplicate tables which should not be merged, you
    can handle this by using [`--exclude-tables`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_exclude-tables),
    [`--exclude-databases`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_exclude-databases),
    or by some other means in your application.
  id: totrans-466
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 当源备份包含不应合并的重复表时，您可以通过使用[`--exclude-tables`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_exclude-tables)，[`--exclude-databases`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_exclude-databases)，或者通过应用程序中的其他方式来处理这个问题。
- en: Information about the structure and other characteristics of tables to be merged
    can obtained using [`SHOW CREATE TABLE`](show-create-table.html "15.7.7.10 SHOW
    CREATE TABLE Statement"); the [**ndb_desc**](mysql-cluster-programs-ndb-desc.html
    "25.5.9 ndb_desc — Describe NDB Tables") tool; and [`MAX()`](aggregate-functions.html#function_max),
    [`MIN()`](aggregate-functions.html#function_min), [`LAST_INSERT_ID()`](information-functions.html#function_last-insert-id),
    and other MySQL functions.
  id: totrans-467
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 可以使用[`SHOW CREATE TABLE`](show-create-table.html "15.7.7.10 SHOW CREATE TABLE
    Statement")；[**ndb_desc**](mysql-cluster-programs-ndb-desc.html "25.5.9 ndb_desc
    — Describe NDB Tables")工具；以及[`MAX()`](aggregate-functions.html#function_max)，[`MIN()`](aggregate-functions.html#function_min)，[`LAST_INSERT_ID()`](information-functions.html#function_last-insert-id)和其他MySQL函数来获取要合并的表的结构和其他特征的信息。
- en: Replication of changes from merged to unmerged tables, or from unmerged to merged
    tables, in separate instances of NDB Cluster is not supported.
  id: totrans-468
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 不支持在NDB Cluster的不同实例之间从合并到未合并表或从未合并到合并表的更改复制。
- en: '[`--restore-data`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_restore-data),
    `-r`'
  id: totrans-469
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--restore-data`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_restore-data),
    `-r`'
- en: '| Command-Line Format | `--restore-data` |'
  id: totrans-470
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--restore-data` |'
- en: Output [`NDB`](mysql-cluster.html "Chapter 25 MySQL NDB Cluster 8.0") table
    data and logs.
  id: totrans-471
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 输出[`NDB`](mysql-cluster.html "第25章 MySQL NDB Cluster 8.0")表数据和日志。
- en: '[`--restore-epoch`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_restore-epoch),
    `-e`'
  id: totrans-472
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--restore-epoch`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_restore-epoch),
    `-e`'
- en: '| Command-Line Format | `--restore-epoch` |'
  id: totrans-473
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--restore-epoch` |'
- en: Add (or restore) epoch information to the cluster replication status table.
    This is useful for starting replication on an NDB Cluster replica. When this option
    is used, the row in the `mysql.ndb_apply_status` having `0` in the `id` column
    is updated if it already exists; such a row is inserted if it does not already
    exist. (See [Section 25.7.9, “NDB Cluster Backups With NDB Cluster Replication”](mysql-cluster-replication-backups.html
    "25.7.9 NDB Cluster Backups With NDB Cluster Replication").)
  id: totrans-474
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 向集群复制状态表添加（或恢复）时代信息。这对于在NDB Cluster副本上启动复制非常有用。当使用此选项时，如果`mysql.ndb_apply_status`中具有`id`列中的`0`已经存在，则更新该行；如果尚不存在，则插入这样的行。（参见[第25.7.9节，“带有NDB
    Cluster复制的NDB Cluster备份”](mysql-cluster-replication-backups.html "25.7.9 NDB Cluster
    Backups With NDB Cluster Replication")。）
- en: '[`--restore-meta`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_restore-meta),
    `-m`'
  id: totrans-475
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--restore-meta`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_restore-meta),
    `-m`'
- en: '| Command-Line Format | `--restore-meta` |'
  id: totrans-476
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--restore-meta` |'
- en: This option causes [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") to print [`NDB`](mysql-cluster.html
    "Chapter 25 MySQL NDB Cluster 8.0") table metadata.
  id: totrans-477
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此选项导致[**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup")打印[`NDB`](mysql-cluster.html "第25章 MySQL NDB
    Cluster 8.0")表元数据。
- en: The first time you run the [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") restoration program, you
    also need to restore the metadata. In other words, you must re-create the database
    tables—this can be done by running it with the `--restore-meta` (`-m`) option.
    Restoring the metadata need be done only on a single data node; this is sufficient
    to restore it to the entire cluster.
  id: totrans-478
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 第一次运行[**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup")恢复程序时，您还需要恢复元数据。换句话说，您必须重新创建数据库表 - 这可以通过使用`--restore-meta`（`-m`）选项来完成。只需要在单个数据节点上恢复元数据；这就足以将其恢复到整个集群。
- en: In older versions of NDB Cluster, tables whose schemas were restored using this
    option used the same number of partitions as they did on the original cluster,
    even if it had a differing number of data nodes from the new cluster. In NDB 8.0,
    when restoring metadata, this is no longer an issue; [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") now uses the default number
    of partitions for the target cluster, unless the number of local data manager
    threads is also changed from what it was for data nodes in the original cluster.
  id: totrans-479
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在旧版本的NDB集群中，使用此选项恢复模式的表使用与新集群中的数据节点数量不同的情况下，仍然使用与原始集群相同数量的分区。在NDB 8.0中，当恢复元数据时，这不再是一个问题；[**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup")现在使用目标集群的默认分区数，除非本地数据管理器线程的数量也与原始集群中的数据节点不同。
- en: When using this option in NDB 8.0, it is recommended that auto synchronization
    be disabled by setting [`ndb_metadata_check=OFF`](mysql-cluster-options-variables.html#sysvar_ndb_metadata_check)
    until [**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup") has completed restoring the metadata, after
    which it can it turned on again to synchronize objects newly created in the NDB
    dictionary.
  id: totrans-480
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在NDB 8.0中使用此选项时，建议通过设置[`ndb_metadata_check=OFF`](mysql-cluster-options-variables.html#sysvar_ndb_metadata_check)来禁用自动同步，直到[**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup")完成恢复元数据，然后可以再次打开以同步在NDB字典中新创建的对象。
- en: Note
  id: totrans-481
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意
- en: The cluster should have an empty database when starting to restore a backup.
    (In other words, you should start the data nodes with [`--initial`](mysql-cluster-programs-ndbd.html#option_ndbd_initial)
    prior to performing the restore.)
  id: totrans-482
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在开始恢复备份时，集群应该有一个空数据库。（换句话说，在执行恢复操作之前，应该使用[`--initial`](mysql-cluster-programs-ndbd.html#option_ndbd_initial)启动数据节点。）
- en: '[`--restore-privilege-tables`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_restore-privilege-tables)'
  id: totrans-483
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--restore-privilege-tables`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_restore-privilege-tables)'
- en: '| Command-Line Format | `--restore-privilege-tables` |'
  id: totrans-484
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--restore-privilege-tables` |'
- en: '| Deprecated | 8.0.16-ndb-8.0.16 |'
  id: totrans-485
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 已弃用 | 8.0.16-ndb-8.0.16 |'
- en: '[**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup") does not by default restore distributed MySQL
    privilege tables created in releases of NDB Cluster prior to version 8.0, which
    does not support distributed privileges as implemented in NDB 7.6 and earlier.
    This option causes [**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup") to restore them.'
  id: totrans-486
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup")默认情况下不会恢复在NDB集群版本8.0之前创建的分布式MySQL权限表，该版本不支持NDB
    7.6及更早版本中实现的分布式权限。此选项导致[**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup")恢复这些表。'
- en: In NDB 8.0, such tables are not used for access control; as part of the MySQL
    server's upgrade process, the server creates [`InnoDB`](innodb-storage-engine.html
    "Chapter 17 The InnoDB Storage Engine") copies of these tables local to itself.
    For more information, see [Section 25.3.7, “Upgrading and Downgrading NDB Cluster”](mysql-cluster-upgrade-downgrade.html
    "25.3.7 Upgrading and Downgrading NDB Cluster"), as well as [Section 8.2.3, “Grant
    Tables”](grant-tables.html "8.2.3 Grant Tables").
  id: totrans-487
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在NDB 8.0中，这些表不用于访问控制；作为MySQL服务器升级过程的一部分，服务器在本地创建[`InnoDB`](innodb-storage-engine.html
    "Chapter 17 The InnoDB Storage Engine")表的副本。有关更多信息，请参阅[Section 25.3.7, “Upgrading
    and Downgrading NDB Cluster”](mysql-cluster-upgrade-downgrade.html "25.3.7 Upgrading
    and Downgrading NDB Cluster")以及[Section 8.2.3, “Grant Tables”](grant-tables.html
    "8.2.3 Grant Tables")。
- en: '[`--rewrite-database`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_rewrite-database)=*`olddb,newdb`*'
  id: totrans-488
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--rewrite-database`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_rewrite-database)=*`olddb,newdb`*'
- en: '| Command-Line Format | `--rewrite-database=string` |'
  id: totrans-489
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--rewrite-database=string` |'
- en: '| Type | String |'
  id: totrans-490
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 字符串 |'
- en: '| Default Value | `none` |'
  id: totrans-491
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `none` |'
- en: 'This option makes it possible to restore to a database having a different name
    from that used in the backup. For example, if a backup is made of a database named
    `products`, you can restore the data it contains to a database named `inventory`,
    use this option as shown here (omitting any other options that might be required):'
  id: totrans-492
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此选项使得可以将数据恢复到与备份中使用的名称不同的数据库。例如，如果备份的数据库名为`products`，则可以将其包含的数据恢复到名为`inventory`的数据库中，使用如下所示的选项（省略可能需要的其他选项）：
- en: '[PRE14]'
  id: totrans-493
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE14]'
- en: The option can be employed multiple times in a single invocation of [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup"). Thus it is possible to
    restore simultaneously from a database named `db1` to a database named `db2` and
    from a database named `db3` to one named `db4` using `--rewrite-database=db1,db2
    --rewrite-database=db3,db4`. Other [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") options may be used between
    multiple occurrences of `--rewrite-database`.
  id: totrans-494
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 可以在单个[**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup")调用中多次使用该选项。因此，可以同时从名为`db1`的数据库恢复到名为`db2`的数据库，以及从名为`db3`的数据库恢复到名为`db4`的数据库，使用`--rewrite-database=db1,db2
    --rewrite-database=db3,db4`。在多次出现`--rewrite-database`之间可以使用其他[**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup")选项。
- en: In the event of conflicts between multiple `--rewrite-database` options, the
    last `--rewrite-database` option used, reading from left to right, is the one
    that takes effect. For example, if `--rewrite-database=db1,db2 --rewrite-database=db1,db3`
    is used, only `--rewrite-database=db1,db3` is honored, and `--rewrite-database=db1,db2`
    is ignored. It is also possible to restore from multiple databases to a single
    database, so that `--rewrite-database=db1,db3 --rewrite-database=db2,db3` restores
    all tables and data from databases `db1` and `db2` into database `db3`.
  id: totrans-495
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在多个`--rewrite-database`选项之间发生冲突时，从左到右读取的最后一个`--rewrite-database`选项生效。例如，如果使用`--rewrite-database=db1,db2
    --rewrite-database=db1,db3`，只有`--rewrite-database=db1,db3`会被采纳，而`--rewrite-database=db1,db2`会被忽略。也可以从多个数据库恢复到单个数据库，因此`--rewrite-database=db1,db3
    --rewrite-database=db2,db3`会将数据库`db1`和`db2`的所有表和数据恢复到数据库`db3`中。
- en: Important
  id: totrans-496
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 重要
- en: When restoring from multiple backup databases into a single target database
    using `--rewrite-database`, no check is made for collisions between table or other
    object names, and the order in which rows are restored is not guaranteed. This
    means that it is possible in such cases for rows to be overwritten and updates
    to be lost.
  id: totrans-497
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 使用`--rewrite-database`从多个备份数据库恢复到单个目标数据库时，不会检查表或其他对象名称之间的冲突，并且不保证恢复行的顺序。这意味着在这种情况下，可能会覆盖行并丢失更新。
- en: '[`--skip-broken-objects`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_skip-broken-objects)'
  id: totrans-498
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--skip-broken-objects`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_skip-broken-objects)'
- en: '| Command-Line Format | `--skip-broken-objects` |'
  id: totrans-499
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--skip-broken-objects` |'
- en: This option causes [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") to ignore corrupt tables
    while reading a native [`NDB`](mysql-cluster.html "Chapter 25 MySQL NDB Cluster
    8.0") backup, and to continue restoring any remaining tables (that are not also
    corrupted). Currently, the `--skip-broken-objects` option works only in the case
    of missing blob parts tables.
  id: totrans-500
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此选项导致[**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup")在读取本地[`NDB`](mysql-cluster.html "Chapter 25 MySQL
    NDB Cluster 8.0")备份时忽略损坏的表，并继续恢复任何剩余的表（未损坏的）。目前，`--skip-broken-objects`选项仅在缺少
    blob 部分表的情况下有效。
- en: '[`--skip-table-check`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_skip-table-check),
    `-s`'
  id: totrans-501
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--skip-table-check`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_skip-table-check),
    `-s`'
- en: '| Command-Line Format | `--skip-table-check` |'
  id: totrans-502
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--skip-table-check` |'
- en: It is possible to restore data without restoring table metadata. By default
    when doing this, [**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup") fails with an error if a mismatch is found between
    the table data and the table schema; this option overrides that behavior.
  id: totrans-503
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 可以在不恢复表元数据的情况下恢复数据。默认情况下，当这样做时，[**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup")在表数据和表模式之间发现不匹配时会失败并显示错误；此选项覆盖了该行为。
- en: 'Some of the restrictions on mismatches in column definitions when restoring
    data using [**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup") are relaxed; when one of these types of mismatches
    is encountered, [**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup") does not stop with an error as it did previously,
    but rather accepts the data and inserts it into the target table while issuing
    a warning to the user that this is being done. This behavior occurs whether or
    not either of the options `--skip-table-check` or [`--promote-attributes`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_promote-attributes)
    is in use. These differences in column definitions are of the following types:'
  id: totrans-504
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在使用[**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup")还原数据时，对列定义不匹配的限制有所放宽；当遇到这些类型的不匹配时，[**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup")不像以前那样停止并报错，而是接受数据并将其插入目标表中，同时向用户发出警告，说明正在执行此操作。无论是否使用选项`--skip-table-check`或[`--promote-attributes`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_promote-attributes)，这种列定义的差异都是以下类型：
- en: Different `COLUMN_FORMAT` settings (`FIXED`, `DYNAMIC`, `DEFAULT`)
  id: totrans-505
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不同的`COLUMN_FORMAT`设置（`FIXED`，`DYNAMIC`，`DEFAULT`）
- en: Different `STORAGE` settings (`MEMORY`, `DISK`)
  id: totrans-506
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不同的`STORAGE`设置（`MEMORY`，`DISK`）
- en: Different default values
  id: totrans-507
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不同的默认值
- en: Different distribution key settings
  id: totrans-508
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不同的分发键设置
- en: '[`--skip-unknown-objects`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_skip-unknown-objects)'
  id: totrans-509
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--skip-unknown-objects`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_skip-unknown-objects)'
- en: '| Command-Line Format | `--skip-unknown-objects` |'
  id: totrans-510
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--skip-unknown-objects` |'
- en: This option causes [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") to ignore any schema objects
    it does not recognize while reading a native [`NDB`](mysql-cluster.html "Chapter 25 MySQL
    NDB Cluster 8.0") backup. This can be used for restoring a backup made from a
    cluster running (for example) NDB 7.6 to a cluster running NDB Cluster 7.5.
  id: totrans-511
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此选项导致[**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup")在读取本地[`NDB`](mysql-cluster.html "Chapter 25 MySQL
    NDB Cluster 8.0")备份时忽略任何它不认识的模式对象。这可用于将从运行（例如）NDB 7.6的集群制作的备份还原到运行NDB Cluster
    7.5的集群。
- en: '[`--slice-id`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_slice-id)=*`#`*'
  id: totrans-512
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--slice-id`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_slice-id)=*`#`*'
- en: '| Command-Line Format | `--slice-id=#` |'
  id: totrans-513
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--slice-id=#` |'
- en: '| Introduced | 8.0.20-ndb-8.0.20 |'
  id: totrans-514
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 引入版本 | 8.0.20-ndb-8.0.20 |'
- en: '| Type | Integer |'
  id: totrans-515
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 整数 |'
- en: '| Default Value | `0` |'
  id: totrans-516
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `0` |'
- en: '| Minimum Value | `0` |'
  id: totrans-517
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 最小值 | `0` |'
- en: '| Maximum Value | `1023` |'
  id: totrans-518
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 最大值 | `1023` |'
- en: When restoring by slices, this is the ID of the slice to restore. This option
    is always used together with [`--num-slices`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_num-slices),
    and its value must be always less than that of `--num-slices`.
  id: totrans-519
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在按片还原时，这是要还原的片的ID。此选项始终与[`--num-slices`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_num-slices)一起使用，其值必须始终小于`--num-slices`的值。
- en: For more information, see the description of the [`--num-slices`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_num-slices)
    elsewhere in this section.
  id: totrans-520
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 更多信息，请参阅本节其他地方的[`--num-slices`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_num-slices)的描述。
- en: '[`--tab`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_tab)=*`dir_name`*,
    `-T` *`dir_name`*'
  id: totrans-521
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--tab`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_tab)=*`dir_name`*,
    `-T` *`dir_name`*'
- en: '| Command-Line Format | `--tab=path` |'
  id: totrans-522
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--tab=path` |'
- en: '| Type | Directory name |'
  id: totrans-523
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 目录名称 |'
- en: Causes [`--print-data`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_print-data)
    to create dump files, one per table, each named `*`tbl_name`*.txt`. It requires
    as its argument the path to the directory where the files should be saved; use
    `.` for the current directory.
  id: totrans-524
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 导致[`--print-data`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_print-data)创建转储文件，每个表一个文件，每个文件名为`*`tbl_name`*.txt`。它需要作为参数的是文件应该保存的目录路径；对于当前目录使用`.`。
- en: '`--timestamp-printouts`'
  id: totrans-525
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--timestamp-printouts`'
- en: '| Command-Line Format | `--timestamp-printouts{=true&#124;false}` |'
  id: totrans-526
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--timestamp-printouts{=true&#124;false}` |'
- en: '| Introduced | 8.0.33-ndb-8.0.33 |'
  id: totrans-527
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 引入版本 | 8.0.33-ndb-8.0.33 |'
- en: '| Type | Boolean |'
  id: totrans-528
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 布尔值 |'
- en: '| Default Value | `true` |'
  id: totrans-529
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `true` |'
- en: Causes info, error, and debug log messages to be prefixed with timestamps.
  id: totrans-530
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 导致信息、错误和调试日志消息以时间戳为前缀。
- en: This option is enabled by default in NDB 8.0\. Disable it with `--timestamp-printouts=false`.
  id: totrans-531
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在NDB 8.0中默认启用此选项。使用`--timestamp-printouts=false` 禁用它。
- en: '[`--usage`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_usage)'
  id: totrans-532
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--usage`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_usage)'
- en: '| Command-Line Format | `--usage` |'
  id: totrans-533
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--usage` |'
- en: Display help text and exit; same as [`--help`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_help).
  id: totrans-534
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 显示帮助文本并退出；与[`--help`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_help)相同。
- en: '[`--verbose`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_verbose)=*`#`*'
  id: totrans-535
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--verbose`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_verbose)=*`#`*'
- en: '| Command-Line Format | `--verbose=#` |'
  id: totrans-536
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--verbose=#` |'
- en: '| Type | Numeric |'
  id: totrans-537
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类型 | 数值 |'
- en: '| Default Value | `1` |'
  id: totrans-538
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 默认值 | `1` |'
- en: '| Minimum Value | `0` |'
  id: totrans-539
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 最小值 | `0` |'
- en: '| Maximum Value | `255` |'
  id: totrans-540
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 最大值 | `255` |'
- en: Sets the level for the verbosity of the output. The minimum is 0; the maximum
    is 255\. The default value is 1.
  id: totrans-541
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 设置输出的详细程度级别。最小值为0；最大值为255。默认值为1。
- en: '[`--version`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_version)'
  id: totrans-542
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--version`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_version)'
- en: '| Command-Line Format | `--version` |'
  id: totrans-543
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--version` |'
- en: Display version information and exit.
  id: totrans-544
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 显示版本信息并退出。
- en: '[`--with-apply-status`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_with-apply-status)'
  id: totrans-545
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`--with-apply-status`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_with-apply-status)'
- en: '| Command-Line Format | `--with-apply-status` |'
  id: totrans-546
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 命令行格式 | `--with-apply-status` |'
- en: '| Introduced | 8.0.29-ndb-8.0.29 |'
  id: totrans-547
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 引入版本 | 8.0.29-ndb-8.0.29 |'
- en: Restore all rows from the backup's `ndb_apply_status` table (except for the
    row having `server_id = 0`, which is generated using [`--restore-epoch`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_restore-epoch)).
    This option requires that [`--restore-data`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_restore-data)
    also be used.
  id: totrans-548
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 从备份的`ndb_apply_status`表中恢复所有行（除了具有`server_id = 0`的行，该行是使用[`--restore-epoch`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_restore-epoch)生成的）。此选项要求还必须使用[`--restore-data`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_restore-data)。
- en: If the `ndb_apply_status` table from the backup already contains a row with
    `server_id = 0`, [**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup") `--with-apply-status` deletes it. For this reason,
    we recommend that you use [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") `--restore-epoch` after
    invoking [**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup") with the `--with-apply-status` option. You can
    also use `--restore-epoch` concurrently with the last of any invocations of [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") `--with-apply-status` used
    to restore the cluster.
  id: totrans-549
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果备份中的`ndb_apply_status`表已经包含`server_id = 0`的行，[**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") `--with-apply-status` 将其删除。因此，我们建议在使用`--with-apply-status`选项调用[**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup")后使用[**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") `--restore-epoch`。您还可以在最后一次调用[**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") `--with-apply-status` 用于恢复集群时同时使用`--restore-epoch`。
- en: For more information, see [ndb_apply_status Table](mysql-cluster-replication-schema.html#ndb-replication-ndb-apply-status
    "ndb_apply_status Table").
  id: totrans-550
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 有关更多信息，请参阅[ndb_apply_status Table](mysql-cluster-replication-schema.html#ndb-replication-ndb-apply-status
    "ndb_apply_status Table")。
- en: 'Typical options for this utility are shown here:'
  id: totrans-551
  prefs: []
  type: TYPE_NORMAL
  zh: 此实用程序的典型选项如下所示：
- en: '[PRE15]'
  id: totrans-552
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'Normally, when restoring from an NDB Cluster backup, [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") requires at a minimum the
    [`--nodeid`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_nodeid)
    (short form: `-n`), [`--backupid`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_backupid)
    (short form: `-b`), and [`--backup-path`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_backup-path)
    options.'
  id: totrans-553
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，在从NDB集群备份恢复时，[**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup") 至少需要[`--nodeid`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_nodeid)（简写：`-n`）、[`--backupid`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_backupid)（简写：`-b`）和[`--backup-path`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_backup-path)选项。
- en: The `-c` option is used to specify a connection string which tells `ndb_restore`
    where to locate the cluster management server (see [Section 25.4.3.3, “NDB Cluster
    Connection Strings”](mysql-cluster-connection-strings.html "25.4.3.3 NDB Cluster
    Connection Strings")). If this option is not used, then [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") attempts to connect to
    a management server on `localhost:1186`. This utility acts as a cluster API node,
    and so requires a free connection “slot” to connect to the cluster management
    server. This means that there must be at least one `[api]` or `[mysqld]` section
    that can be used by it in the cluster `config.ini` file. It is a good idea to
    keep at least one empty `[api]` or `[mysqld]` section in `config.ini` that is
    not being used for a MySQL server or other application for this reason (see [Section 25.4.3.7,
    “Defining SQL and Other API Nodes in an NDB Cluster”](mysql-cluster-api-definition.html
    "25.4.3.7 Defining SQL and Other API Nodes in an NDB Cluster")).
  id: totrans-554
  prefs: []
  type: TYPE_NORMAL
  zh: '`-c` 选项用于指定连接字符串，告诉 `ndb_restore` 在哪里找到集群管理服务器（参见[第 25.4.3.3 节，“NDB 集群连接字符串”](mysql-cluster-connection-strings.html
    "25.4.3.3 NDB Cluster Connection Strings")）。如果不使用此选项，则[**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") 将尝试连接到 `localhost:1186`
    上的管理服务器。此实用程序充当集群 API 节点，因此需要一个可用的连接“槽”来连接到集群管理服务器。这意味着在集群 `config.ini` 文件中必须至少有一个可供其使用的
    `[api]` 或 `[mysqld]` 部分。出于这个原因，最好保留至少一个未被用于 MySQL 服务器或其他应用程序的空的 `[api]` 或 `[mysqld]`
    部分（请参阅[第 25.4.3.7 节，“在 NDB 集群中定义 SQL 和其他 API 节点”](mysql-cluster-api-definition.html
    "25.4.3.7 Defining SQL and Other API Nodes in an NDB Cluster")）。'
- en: In NDB 8.0.22 and later, [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") can decrypt an encrypted
    backup using [`--decrypt`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_decrypt)
    and [`--backup-password`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_backup-password).
    Both options must be specified to perform decryption. See the documentation for
    the [`START BACKUP`](mysql-cluster-backup-using-management-client.html "25.6.8.2 Using
    The NDB Cluster Management Client to Create a Backup") management client command
    for information on creating encrypted backups.
  id: totrans-555
  prefs: []
  type: TYPE_NORMAL
  zh: 在 NDB 8.0.22 及更高版本中，[**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") 可以使用 [`--decrypt`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_decrypt)
    和 [`--backup-password`](mysql-cluster-programs-ndb-restore.html#option_ndb_restore_backup-password)
    解密加密备份。必须同时指定这两个选项才能执行解密操作。有关创建加密备份的信息，请参阅[`START BACKUP`](mysql-cluster-backup-using-management-client.html
    "25.6.8.2 Using The NDB Cluster Management Client to Create a Backup")管理客户端命令的文档。
- en: 'You can verify that [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") is connected to the cluster
    by using the [`SHOW`](mysql-cluster-mgm-client-commands.html#ndbclient-show) command
    in the [**ndb_mgm**](mysql-cluster-programs-ndb-mgm.html "25.5.5 ndb_mgm — The
    NDB Cluster Management Client") management client. You can also accomplish this
    from a system shell, as shown here:'
  id: totrans-556
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以通过在[**ndb_mgm**](mysql-cluster-programs-ndb-mgm.html "25.5.5 ndb_mgm — The
    NDB Cluster Management Client")管理客户端中使用[`SHOW`](mysql-cluster-mgm-client-commands.html#ndbclient-show)命令来验证[**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup")是否连接到集群。您也可以从系统 shell 中执行此操作，如下所示：
- en: '[PRE16]'
  id: totrans-557
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: '**Error reporting. ** [**ndb_restore**](mysql-cluster-programs-ndb-restore.html
    "25.5.23 ndb_restore — Restore an NDB Cluster Backup") reports both temporary
    and permanent errors. In the case of temporary errors, it may able to recover
    from them, and reports `Restore successful, but encountered temporary error, please
    look at configuration` in such cases.'
  id: totrans-558
  prefs: []
  type: TYPE_NORMAL
  zh: '**错误报告。** [**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup") 报告临时和永久错误。在临时错误的情况下，它可能能够从中恢复，并在这种情况下报告`恢复成功，但遇到临时错误，请查看配置`。'
- en: Important
  id: totrans-559
  prefs: []
  type: TYPE_NORMAL
  zh: 重要
- en: After using [**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup") to initialize an NDB Cluster for use in circular
    replication, binary logs on the SQL node acting as the replica are not automatically
    created, and you must cause them to be created manually. To cause the binary logs
    to be created, issue a [`SHOW TABLES`](show-tables.html "15.7.7.39 SHOW TABLES
    Statement") statement on that SQL node before running [`START SLAVE`](start-slave.html
    "15.4.2.7 START SLAVE Statement"). This is a known issue in NDB Cluster.
  id: totrans-560
  prefs: []
  type: TYPE_NORMAL
  zh: 使用[**ndb_restore**](mysql-cluster-programs-ndb-restore.html "25.5.23 ndb_restore
    — Restore an NDB Cluster Backup")来初始化用于循环复制的NDB集群后，作为副本的SQL节点上不会自动创建二进制日志，您必须手动创建。要创建二进制日志，请在运行[`START
    SLAVE`](start-slave.html "15.4.2.7 START SLAVE Statement")之前在该SQL节点上发出一个[`SHOW
    TABLES`](show-tables.html "15.7.7.39 SHOW TABLES Statement")语句。这是NDB集群中已知的问题。
